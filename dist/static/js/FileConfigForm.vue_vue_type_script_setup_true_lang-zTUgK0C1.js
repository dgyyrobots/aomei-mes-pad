/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{V as f,d as B,r as b,f as L,g,h as M,k as u,o as n,m as t,w as O,a as e,j as r,l as m,c as j,F as z,n as G,v as k,y as Y,_ as H,N as J,z as Q}from"./index-D3eRVKjp.js";import{d as W,D as X}from"./dict-CqgorI4d.js";const te=i=>f.get({url:"/infra/file-config/page",params:i}),Z=i=>f.get({url:`/infra/file-config/get?id=${i}`}),re=i=>f.put({url:`/infra/file-config/update-master?id=${i}`}),h=i=>f.post({url:"/infra/file-config/create",data:i}),ee=i=>f.put({url:"/infra/file-config/update",data:i}),ne=i=>f.delete({url:`/infra/file-config/delete?id=${i}`}),se=i=>f.get({url:`/infra/file-config/test?id=${i}`}),ue=B({name:"InfraFileConfigForm",__name:"FileConfigForm",emits:["success"],setup(i,{expose:w,emit:S}){const{t:y}=J(),_=Q(),p=b(!1),F=b(""),c=b(!1),C=b(""),l=b({id:void 0,name:"",storage:0,remark:"",config:{}}),P=L({name:[{required:!0,message:"配置名不能为空",trigger:"blur"}],storage:[{required:!0,message:"存储器不能为空",trigger:"change"}],config:{basePath:[{required:!0,message:"基础路径不能为空",trigger:"blur"}],host:[{required:!0,message:"主机地址不能为空",trigger:"blur"}],port:[{required:!0,message:"主机端口不能为空",trigger:"blur"}],username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],mode:[{required:!0,message:"连接模式不能为空",trigger:"change"}],endpoint:[{required:!0,message:"节点地址不能为空",trigger:"blur"}],bucket:[{required:!0,message:"存储 bucket 不能为空",trigger:"blur"}],accessKey:[{required:!0,message:"accessKey 不能为空",trigger:"blur"}],accessSecret:[{required:!0,message:"accessSecret 不能为空",trigger:"blur"}],domain:[{required:!0,message:"自定义域名不能为空",trigger:"blur"}]}}),V=b();w({open:async(v,o)=>{if(p.value=!0,F.value=y(`action.${v}`),C.value=v,$(),o){c.value=!0;try{l.value=await Z(o)}finally{c.value=!1}}}});const D=S,K=async()=>{if(!(!V||!await V.value.validate())){c.value=!0;try{const o=l.value;C.value==="create"?(await h(o),_.success(y("common.createSuccess"))):(await ee(o),_.success(y("common.updateSuccess"))),p.value=!1,D("success")}finally{c.value=!1}}},$=()=>{l.value={id:void 0,name:"",storage:void 0,remark:"",config:{}},V.value?.resetFields()};return(v,o)=>{const d=g("el-input"),s=g("el-form-item"),x=g("el-option"),I=g("el-select"),R=g("el-input-number"),U=g("el-radio"),T=g("el-radio-group"),N=g("el-form"),q=g("el-button"),A=H,E=M("loading");return n(),u(A,{modelValue:e(p),"onUpdate:modelValue":o[16]||(o[16]=a=>Y(p)?p.value=a:null),title:e(F)},{footer:t(()=>[r(q,{disabled:e(c),type:"primary",onClick:K},{default:t(()=>o[19]||(o[19]=[k("确 定")])),_:1},8,["disabled"]),r(q,{onClick:o[15]||(o[15]=a=>p.value=!1)},{default:t(()=>o[20]||(o[20]=[k("取 消")])),_:1})]),default:t(()=>[O((n(),u(N,{ref_key:"formRef",ref:V,"label-width":"120px",model:e(l),rules:e(P)},{default:t(()=>[r(s,{label:"配置名",prop:"name"},{default:t(()=>[r(d,{modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).name=a),placeholder:"请输入配置名"},null,8,["modelValue"])]),_:1}),r(s,{label:"备注",prop:"remark"},{default:t(()=>[r(d,{modelValue:e(l).remark,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).remark=a),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),r(s,{label:"存储器",prop:"storage"},{default:t(()=>[r(I,{modelValue:e(l).storage,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).storage=a),disabled:e(l).id!==void 0,placeholder:"请选择存储器"},{default:t(()=>[(n(!0),j(z,null,G(e(W)(e(X).INFRA_FILE_STORAGE),a=>(n(),u(x,{key:a.value,label:a.label,value:parseInt(a.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e(l).storage>=10&&e(l).storage<=12?(n(),u(s,{key:0,label:"基础路径",prop:"config.basePath"},{default:t(()=>[r(d,{modelValue:e(l).config.basePath,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).config.basePath=a),placeholder:"请输入基础路径"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage>=11&&e(l).storage<=12?(n(),u(s,{key:1,label:"主机地址",prop:"config.host"},{default:t(()=>[r(d,{modelValue:e(l).config.host,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).config.host=a),placeholder:"请输入主机地址"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage>=11&&e(l).storage<=12?(n(),u(s,{key:2,label:"主机端口",prop:"config.port"},{default:t(()=>[r(R,{modelValue:e(l).config.port,"onUpdate:modelValue":o[5]||(o[5]=a=>e(l).config.port=a),min:0,placeholder:"请输入主机端口"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage>=11&&e(l).storage<=12?(n(),u(s,{key:3,label:"用户名",prop:"config.username"},{default:t(()=>[r(d,{modelValue:e(l).config.username,"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).config.username=a),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage>=11&&e(l).storage<=12?(n(),u(s,{key:4,label:"密码",prop:"config.password"},{default:t(()=>[r(d,{modelValue:e(l).config.password,"onUpdate:modelValue":o[7]||(o[7]=a=>e(l).config.password=a),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage===11?(n(),u(s,{key:5,label:"连接模式",prop:"config.mode"},{default:t(()=>[r(T,{modelValue:e(l).config.mode,"onUpdate:modelValue":o[8]||(o[8]=a=>e(l).config.mode=a)},{default:t(()=>[r(U,{key:"Active",label:"Active"},{default:t(()=>o[17]||(o[17]=[k("主动模式")])),_:1}),r(U,{key:"Passive",label:"Passive"},{default:t(()=>o[18]||(o[18]=[k("被动模式")])),_:1})]),_:1},8,["modelValue"])]),_:1})):m("",!0),e(l).storage===20?(n(),u(s,{key:6,label:"节点地址",prop:"config.endpoint"},{default:t(()=>[r(d,{modelValue:e(l).config.endpoint,"onUpdate:modelValue":o[9]||(o[9]=a=>e(l).config.endpoint=a),placeholder:"请输入节点地址"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage===20?(n(),u(s,{key:7,label:"存储 bucket",prop:"config.bucket"},{default:t(()=>[r(d,{modelValue:e(l).config.bucket,"onUpdate:modelValue":o[10]||(o[10]=a=>e(l).config.bucket=a),placeholder:"请输入 bucket"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage===20?(n(),u(s,{key:8,label:"accessKey",prop:"config.accessKey"},{default:t(()=>[r(d,{modelValue:e(l).config.accessKey,"onUpdate:modelValue":o[11]||(o[11]=a=>e(l).config.accessKey=a),placeholder:"请输入 accessKey"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage===20?(n(),u(s,{key:9,label:"accessSecret",prop:"config.accessSecret"},{default:t(()=>[r(d,{modelValue:e(l).config.accessSecret,"onUpdate:modelValue":o[12]||(o[12]=a=>e(l).config.accessSecret=a),placeholder:"请输入 accessSecret"},null,8,["modelValue"])]),_:1})):m("",!0),e(l).storage===20?(n(),u(s,{key:10,label:"自定义域名"},{default:t(()=>[r(d,{modelValue:e(l).config.domain,"onUpdate:modelValue":o[13]||(o[13]=a=>e(l).config.domain=a),placeholder:"请输入自定义域名"},null,8,["modelValue"])]),_:1})):e(l).storage?(n(),u(s,{key:11,label:"自定义域名",prop:"config.domain"},{default:t(()=>[r(d,{modelValue:e(l).config.domain,"onUpdate:modelValue":o[14]||(o[14]=a=>e(l).config.domain=a),placeholder:"请输入自定义域名"},null,8,["modelValue"])]),_:1})):m("",!0)]),_:1},8,["model","rules"])),[[E,e(c)]])]),_:1},8,["modelValue","title"])}}});export{ue as _,ne as d,te as g,se as t,re as u};
