/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{_ as E}from"./ContentWrap.vue_vue_type_script_setup_true_lang-32ziCa0j.js";import{d as N,u as R,r as c,f as V,b as O,g as l,h as X,k as _,a as n,o as f,m as t,w as Y,j as e,v as d,t as P,K as j,i as k,y as q,z}from"./index-FPuwcz_Y.js";import{_ as G}from"./DictTag.vue_vue_type_script_lang-o_bnFpkw.js";import{D as K}from"./dict-C9lD-gwA.js";import{b as U,a as W}from"./index-Be9zZaOj.js";import{c as H}from"./index-BS0rNo4p.js";import{b as J}from"./formCreate-CdOY-8fL.js";import{_ as Q}from"./ProcessInstanceBpmnViewer.vue_vue_type_style_index_0_lang-CpCvlkxz.js";import"./color-B5phLuB-.js";import"./bpmn-embedded-CwQnkw3b.js";import"./XTextButton-Df8ob6iK.js";import"./XButton-BQ_rfQWo.js";const Z={class:"clearfix"},ee={class:"el-icon-document"},de=N({name:"BpmProcessInstanceCreate",__name:"index",setup(te){const v=R(),D=z(),m=c(!0),g=c([]),B=V({suspensionState:1}),I=async()=>{m.value=!0;try{g.value=await U(B)}finally{m.value=!1}},b=c(null),i=c(),u=c({rule:[],option:{}}),r=c(),M=async o=>{r.value=o,o.formType==10?(J(u,o.formConf,o.formFields),b.value=await W(o.id)):o.formCustomCreatePath&&await v.push({path:o.formCustomCreatePath})},$=async o=>{if(!(!i.value||!r.value)){i.value.btn.loading(!0);try{await H({processDefinitionId:r.value.id,variables:o}),D.success("发起流程成功"),v.go(-1)}finally{i.value.btn.loading(!1)}}};return O(()=>{I()}),(o,a)=>{const p=l("el-table-column"),L=G,T=l("el-tag"),y=j,C=l("el-button"),h=l("el-table"),x=E,w=l("form-create"),F=l("el-col"),S=l("el-card"),A=X("loading");return n(r)?(f(),_(x,{key:1},{default:t(()=>[e(S,{class:"box-card"},{default:t(()=>[k("div",Z,[k("span",ee,"申请信息【"+P(n(r).name)+"】",1),e(C,{style:{float:"right"},type:"primary",onClick:a[0]||(a[0]=s=>r.value=void 0)},{default:t(()=>[e(y,{icon:"ep:delete"}),a[3]||(a[3]=d(" 选择其它流程 "))]),_:1})]),e(F,{offset:6,span:16,style:{"margin-top":"20px"}},{default:t(()=>[e(w,{api:n(i),"onUpdate:api":a[1]||(a[1]=s=>q(i)?i.value=s:null),option:n(u).option,rule:n(u).rule,onSubmit:$},null,8,["api","option","rule"])]),_:1})]),_:1}),e(Q,{"bpmn-xml":n(b)},null,8,["bpmn-xml"])]),_:1})):(f(),_(x,{key:0},{default:t(()=>[Y((f(),_(h,{data:n(g)},{default:t(()=>[e(p,{align:"center",label:"流程名称",prop:"name"}),e(p,{align:"center",label:"流程分类",prop:"category"},{default:t(s=>[e(L,{type:n(K).BPM_MODEL_CATEGORY,value:s.row.category},null,8,["type","value"])]),_:1}),e(p,{align:"center",label:"流程版本",prop:"version"},{default:t(s=>[e(T,null,{default:t(()=>[d("v"+P(s.row.version),1)]),_:2},1024)]),_:1}),e(p,{align:"center",label:"流程描述",prop:"description"}),e(p,{align:"center",label:"操作"},{default:t(s=>[e(C,{link:"",type:"primary",onClick:oe=>M(s.row)},{default:t(()=>[e(y,{icon:"ep:plus"}),a[2]||(a[2]=d(" 选择 "))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[A,n(m)]])]),_:1}))}}});export{de as default};
