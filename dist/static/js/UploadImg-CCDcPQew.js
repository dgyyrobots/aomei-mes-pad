/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{d as B,az as s,bB as S,r as y,bC as U,bx as _,by as $,g as E,c as n,o as i,j as d,i as l,a as c,p as D,m as M,F as N,l as u,K as j,t as f,N as A,C as W,U as b,z as q,A as H}from"./index-lcC3l4R2.js";import{c as K}from"./index-Bn4cwl4J.js";const L={class:"upload-box"},P=["src"],F={key:0},G={key:0},J={key:0},O={key:1,class:"upload-empty"},Q={class:"el-upload__tip"},R=B({name:"UploadImg",__name:"UploadImg",props:{modelValue:s.string.def(""),updateUrl:s.string.def(void 0),drag:s.bool.def(!0),disabled:s.bool.def(!1),fileSize:s.number.def(5),fileType:s.array.def(["image/jpeg","image/png","image/gif"]),height:s.string.def("150px"),width:s.string.def("150px"),borderradius:s.string.def("8px"),showDelete:s.bool.def(!0),showBtnText:s.bool.def(!0)},emits:["update:modelValue"],setup(e,{emit:v}){S(t=>({"664dd262":e.width,"970a6d84":e.height,"286d9a95":e.borderradius}));const m=e,{t:p}=A(),r=q(),g=y(`id-${U()}`),k=t=>{K({zIndex:9999999,urlList:[t]})},h=v,x=()=>{h("update:modelValue","")},w=y({Authorization:`Bearer ${$()}`,"tenant-id":_()}),C=()=>{const t=document.querySelector(`#${g.value} .el-upload__input`);t&&t.dispatchEvent(new MouseEvent("click"))},V=t=>{const o=t.size/1024/1024<m.fileSize,a=m.fileType;return a.includes(t.type)||r.notifyWarning("上传图片不符合所需的格式！"),o||r.notifyWarning(`上传图片大小不能超过 ${m.fileSize}M！`),a.includes(t.type)&&o},z=t=>{r.success("上传成功"),h("update:modelValue",t.data)},T=()=>{r.notifyError("图片上传失败，请您重新上传！")};return(t,o)=>{const a=j,I=E("el-upload");return i(),n("div",L,[d(I,{id:c(g),accept:e.fileType.join(","),action:e.updateUrl,"before-upload":V,class:D(["upload",e.drag?"no-border":""]),drag:e.drag,headers:c(w),multiple:!1,"on-error":T,"on-success":z,"show-file-list":!1},{default:M(()=>[e.modelValue?(i(),n(N,{key:0},[l("img",{class:"upload-image",src:e.modelValue},null,8,P),l("div",{class:"upload-handle",onClick:o[1]||(o[1]=W(()=>{},["stop"]))},[l("div",{class:"handle-icon",onClick:C},[d(a,{icon:"ep:edit"}),e.showBtnText?(i(),n("span",F,f(c(p)("action.edit")),1)):u("",!0)]),l("div",{class:"handle-icon",onClick:o[0]||(o[0]=X=>k(e.modelValue))},[d(a,{icon:"ep:zoom-in"}),e.showBtnText?(i(),n("span",G,f(c(p)("action.detail")),1)):u("",!0)]),e.showDelete?(i(),n("div",{key:0,class:"handle-icon",onClick:x},[d(a,{icon:"ep:delete"}),e.showBtnText?(i(),n("span",J,f(c(p)("action.del")),1)):u("",!0)])):u("",!0)])],64)):(i(),n("div",O,[b(t.$slots,"empty",{},()=>[d(a,{icon:"ep:plus"})],!0)]))]),_:3},8,["id","accept","action","class","drag","headers"]),l("div",Q,[b(t.$slots,"tip",{},void 0,!0)])])}}}),ee=H(R,[["__scopeId","data-v-91da71a3"]]);export{ee as _};
