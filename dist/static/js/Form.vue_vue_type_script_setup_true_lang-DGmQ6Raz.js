/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{d as H,r,f as J,Y as W,g as f,h as X,c as Z,o as N,F as h,j as e,_ as ee,a as o,y as le,m as t,w as te,k as ae,v as V,K as oe,D as de,aU as ue,aP as ie,N as ne,z as me}from"./index-D3S9e4gi.js";import{b as se,c as re,u as pe}from"./index-Ca1yU0f9.js";import{_ as fe}from"./TemplateSelect.vue_vue_type_script_setup_true_lang-Czas1WCU.js";const ce="top",be=H({__name:"Form",emits:["success"],setup(ve,{expose:w,emit:D}){const{t:q}=ne(),C=me(),c=r(!1),g=r(""),v=r(!1),U=r(""),l=r({id:void 0,sourceCode:void 0,oqcCode:void 0,oqcName:void 0,templateId:void 0,clientId:void 0,clientCode:void 0,clientName:void 0,batchCode:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityMinCheck:void 0,quantityMaxUnqualified:void 0,quantityOut:void 0,quantityCheck:void 0,quantityUnqualified:void 0,quantityQuanlified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,checkResult:void 0,outDate:void 0,inspectDate:void 0,inspector:void 0,status:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0}),M=J({oqcCode:[{required:!0,message:"出货检验单编号不能为空",trigger:"change"}],templateId:[{required:!0,message:"检验模板ID不能为空",trigger:"change"}],clientId:[{required:!0,message:"客户ID不能为空",trigger:"change"}],clientName:[{required:!0,message:"客户名称不能为空",trigger:"change"}],itemId:[{required:!0,message:"产品物料ID不能为空",trigger:"change"}],quantityOut:[{required:!0,message:"发货数量不能为空",trigger:"change"}],quantityCheck:[{required:!0,message:"本次检测数量不能为空",trigger:"change"}]}),b=r();w({open:async(u,a)=>{if(c.value=!0,g.value=q("action."+u),U.value=u,j(),a){v.value=!0;try{l.value=await se(a)}finally{v.value=!1}}}});const x=D,S=async()=>{await b.value.validate(),v.value=!0;try{const u=l.value;U.value==="create"?(u.status="0",await re(u),C.success(q("common.createSuccess"))):(await pe(u),C.success(q("common.updateSuccess"))),c.value=!1,x("success")}finally{v.value=!1}},j=()=>{l.value={id:void 0,sourceCode:void 0,oqcCode:void 0,oqcName:void 0,templateId:void 0,clientId:void 0,clientCode:void 0,clientName:void 0,batchCode:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityMinCheck:void 0,quantityMaxUnqualified:void 0,quantityOut:void 0,quantityCheck:void 0,quantityUnqualified:void 0,quantityQuanlified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,checkResult:void 0,outDate:void 0,inspectDate:void 0,inspector:void 0,status:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0},b.value?.resetFields()};W(l,()=>{l.value.crQuantity==null||l.value.quantityOut==null?l.value.crRate=void 0:l.value.crRate=(l.value.crQuantity/l.value.quantityOut).toFixed(2),l.value.majQuantity==null||l.value.quantityOut==null?l.value.majRate=void 0:l.value.majRate=(l.value.majQuantity/l.value.quantityOut).toFixed(2),l.value.minQuantity==null||l.value.quantityOut==null?l.value.minRate=void 0:l.value.minRate=(l.value.minQuantity/l.value.quantityOut).toFixed(2)},{deep:!0});const k=r(),F=()=>{k.value.showFlag()},P=u=>{u!=null&&u!=null&&(console.log(u),l.value.clientId=u.id,l.value.clientName=u.name,l.value.clientCode=u.clientCode)},I=r(),$=()=>{I.value.showFlag()},T=u=>{u!=null&&u!=null&&(console.log(u.id),l.value.itemId=u.id,l.value.itemCode=u.itemCode,l.value.itemName=u.itemName,l.value.specification=u.specification,l.value.unitOfMeasure=u.unitOfMeasure)},R=r(),B=()=>{R.value.open()},z=u=>{u!=null&&u!=null&&(console.log(u),l.value.templateId=u.selectedRows.id,l.value.itemCode=u.selectedRows.itemCode,l.value.itemName=u.selectedRows.itemName,l.value.specification=u.selectedRows.specification,l.value.unitOfMeasure=u.selectedRows.unitOfMeasure,l.value.itemCode=u.selectedPro[0].itemCode,l.value.itemId=u.selectedPro[0].itemId,l.value.itemName=u.selectedPro[0].itemName,l.value.specification=u.selectedPro[0].specification,l.value.unitOfMeasure=u.selectedPro[0].unitOfMeasure,l.value.quantityMinCheck=u.selectedPro[0].quantityCheck,l.value.quantityMaxUnqualified=u.selectedPro[0].quantityUnqualified)},p=r(!0);return(u,a)=>{const E=f("SwitchS"),m=f("el-input"),i=f("el-form-item"),n=f("el-col"),s=f("el-row"),_=f("el-divider"),O=oe,y=f("el-button"),Q=f("el-date-picker"),K=f("el-form"),L=ee,Y=ue,A=ie,G=X("loading");return N(),Z(h,null,[e(L,{title:o(g),modelValue:o(c),"onUpdate:modelValue":a[31]||(a[31]=d=>le(c)?c.value=d:null),width:"80%"},{footer:t(()=>[e(y,{onClick:S,type:"primary",disabled:o(v)},{default:t(()=>a[36]||(a[36]=[V("确 定")])),_:1},8,["disabled"]),e(y,{onClick:a[30]||(a[30]=d=>c.value=!1)},{default:t(()=>a[37]||(a[37]=[V("取 消")])),_:1})]),default:t(()=>[te((N(),ae(K,{ref_key:"formRef",ref:b,model:o(l),rules:o(M),"label-width":"100px","label-position":ce},{default:t(()=>[e(s,{"el-row":"",gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"出货检验单编号",prop:"oqcCode"},{default:t(()=>[e(m,{modelValue:o(l).oqcCode,"onUpdate:modelValue":a[0]||(a[0]=d=>o(l).oqcCode=d),placeholder:"请输入出货检验单编号",disabled:o(p)},{append:t(()=>[e(E,{name:"QMS_OQC_CODE",obj:o(l),val:"oqcCode"},null,8,["obj"])]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"出货检验单名称",prop:"oqcName"},{default:t(()=>[e(m,{modelValue:o(l).oqcName,"onUpdate:modelValue":a[1]||(a[1]=d=>o(l).oqcName=d),placeholder:"请输入出货检验单名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>a[32]||(a[32]=[V("订单信息")])),_:1}),e(s,{"el-row":"",gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"订单编号",prop:"sourceCode"},{default:t(()=>[e(m,{modelValue:o(l).sourceCode,"onUpdate:modelValue":a[2]||(a[2]=d=>o(l).sourceCode=d),placeholder:"请输入订单编号"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"批次号",prop:"batchCode"},{default:t(()=>[e(m,{modelValue:o(l).batchCode,"onUpdate:modelValue":a[3]||(a[3]=d=>o(l).batchCode=d),placeholder:"请输入批次号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{"el-row":"",gutter:20},{default:t(()=>[e(n,{span:8},{default:t(()=>[e(i,{label:"客户ID",prop:"clientId"},{default:t(()=>[e(m,{modelValue:o(l).clientId,"onUpdate:modelValue":a[4]||(a[4]=d=>o(l).clientId=d),placeholder:"请输入客户ID",disabled:o(p)},{append:t(()=>[e(y,{onClick:F},{default:t(()=>[e(O,{icon:"ep:search",class:"mr-5px"})]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(n,{span:8},{default:t(()=>[e(i,{label:"客户编码",prop:"clientCode"},{default:t(()=>[e(m,{modelValue:o(l).clientCode,"onUpdate:modelValue":a[5]||(a[5]=d=>o(l).clientCode=d),placeholder:"请输入客户编码",disabled:o(p)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(n,{span:8},{default:t(()=>[e(i,{label:"客户名称",prop:"clientName"},{default:t(()=>[e(m,{modelValue:o(l).clientName,"onUpdate:modelValue":a[6]||(a[6]=d=>o(l).clientName=d),placeholder:"请输入客户名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>a[33]||(a[33]=[V("模板信息")])),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"检验模板ID",prop:"templateId"},{default:t(()=>[e(m,{modelValue:o(l).templateId,"onUpdate:modelValue":a[7]||(a[7]=d=>o(l).templateId=d),placeholder:"请输入检验模板ID",maxlength:"",disabled:o(p)},{append:t(()=>[e(y,{onClick:B},{default:t(()=>[e(O,{icon:"ep:search",class:"mr-5px"})]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"产品物料ID",prop:"itemId"},{default:t(()=>[e(m,{modelValue:o(l).itemId,"onUpdate:modelValue":a[8]||(a[8]=d=>o(l).itemId=d),placeholder:"请输入产品物料ID",disabled:o(p)},{append:t(()=>[e(y,{onClick:$,icon:o(de)},null,8,["icon"])]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"产品物料编码",prop:"itemCode"},{default:t(()=>[e(m,{modelValue:o(l).itemCode,"onUpdate:modelValue":a[9]||(a[9]=d=>o(l).itemCode=d),placeholder:"请输入产品物料编码",disabled:o(p)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"产品物料名称",prop:"itemName"},{default:t(()=>[e(m,{modelValue:o(l).itemName,"onUpdate:modelValue":a[10]||(a[10]=d=>o(l).itemName=d),placeholder:"请输入产品物料名称",disabled:o(p)},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"规格型号",prop:"specification"},{default:t(()=>[e(m,{modelValue:o(l).specification,"onUpdate:modelValue":a[11]||(a[11]=d=>o(l).specification=d),placeholder:"请输入规格型号",disabled:o(p)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"单位",prop:"unitOfMeasure"},{default:t(()=>[e(m,{modelValue:o(l).unitOfMeasure,"onUpdate:modelValue":a[12]||(a[12]=d=>o(l).unitOfMeasure=d),placeholder:"请输入单位",disabled:o(p)},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"最低检测数",prop:"quantityMinCheck"},{default:t(()=>[e(m,{modelValue:o(l).quantityMinCheck,"onUpdate:modelValue":a[13]||(a[13]=d=>o(l).quantityMinCheck=d),placeholder:"请输入最低检测数",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"最大不合格数",prop:"quantityMaxUnqualified"},{default:t(()=>[e(m,{modelValue:o(l).quantityMaxUnqualified,"onUpdate:modelValue":a[14]||(a[14]=d=>o(l).quantityMaxUnqualified=d),placeholder:"请输入最大不合格数",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>a[34]||(a[34]=[V("检测信息")])),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"发货数量",prop:"quantityOut"},{default:t(()=>[e(m,{modelValue:o(l).quantityOut,"onUpdate:modelValue":a[15]||(a[15]=d=>o(l).quantityOut=d),placeholder:"请输入发货数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"本次检测数量",prop:"quantityCheck"},{default:t(()=>[e(m,{modelValue:o(l).quantityCheck,"onUpdate:modelValue":a[16]||(a[16]=d=>o(l).quantityCheck=d),placeholder:"请输入本次检测数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"合格数量",prop:"quantityQuanlified"},{default:t(()=>[e(m,{modelValue:o(l).quantityQuanlified,"onUpdate:modelValue":a[17]||(a[17]=d=>o(l).quantityQuanlified=d),placeholder:"请输入合格数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"不合格数",prop:"quantityUnqualified"},{default:t(()=>[e(m,{modelValue:o(l).quantityUnqualified,"onUpdate:modelValue":a[18]||(a[18]=d=>o(l).quantityUnqualified=d),placeholder:"请输入不合格数",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:14},{default:t(()=>[e(i,{label:"致命缺陷数量",prop:"crQuantity"},{default:t(()=>[e(m,{modelValue:o(l).crQuantity,"onUpdate:modelValue":a[19]||(a[19]=d=>o(l).crQuantity=d),placeholder:"请输入致命缺陷数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:10},{default:t(()=>[e(i,{label:"致命缺陷率",prop:"crRate"},{default:t(()=>[e(m,{modelValue:o(l).crRate,"onUpdate:modelValue":a[20]||(a[20]=d=>o(l).crRate=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:14},{default:t(()=>[e(i,{label:"严重缺陷数量",prop:"majQuantity"},{default:t(()=>[e(m,{modelValue:o(l).majQuantity,"onUpdate:modelValue":a[21]||(a[21]=d=>o(l).majQuantity=d),placeholder:"请输入严重缺陷数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:10},{default:t(()=>[e(i,{label:"严重缺陷率",prop:"majRate"},{default:t(()=>[e(m,{modelValue:o(l).majRate,"onUpdate:modelValue":a[22]||(a[22]=d=>o(l).majRate=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:14},{default:t(()=>[e(i,{label:"轻微缺陷数量",prop:"minQuantity"},{default:t(()=>[e(m,{modelValue:o(l).minQuantity,"onUpdate:modelValue":a[23]||(a[23]=d=>o(l).minQuantity=d),placeholder:"请输入轻微缺陷数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:10},{default:t(()=>[e(i,{label:"轻微缺陷率",prop:"minRate"},{default:t(()=>[e(m,{modelValue:o(l).minRate,"onUpdate:modelValue":a[24]||(a[24]=d=>o(l).minRate=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>a[35]||(a[35]=[V("检测结果")])),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"检测结果",prop:"checkResult"},{default:t(()=>[e(m,{modelValue:o(l).checkResult,"onUpdate:modelValue":a[25]||(a[25]=d=>o(l).checkResult=d),placeholder:"请输入检测结果"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"检测人员",prop:"inspector"},{default:t(()=>[e(m,{modelValue:o(l).inspector,"onUpdate:modelValue":a[26]||(a[26]=d=>o(l).inspector=d),placeholder:"请输入检测人员"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"出货日期",prop:"outDate"},{default:t(()=>[e(Q,{modelValue:o(l).outDate,"onUpdate:modelValue":a[27]||(a[27]=d=>o(l).outDate=d),type:"date","value-format":"x",placeholder:"选择出货日期"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"检测日期",prop:"inspectDate"},{default:t(()=>[e(Q,{modelValue:o(l).inspectDate,"onUpdate:modelValue":a[28]||(a[28]=d=>o(l).inspectDate=d),type:"date","value-format":"x",placeholder:"选择检测日期"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,null,{default:t(()=>[e(i,{label:"备注",prop:"remark"},{default:t(()=>[e(m,{modelValue:o(l).remark,"onUpdate:modelValue":a[29]||(a[29]=d=>o(l).remark=d),placeholder:"请输入备注",rows:2,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[G,o(v)]])]),_:1},8,["title","modelValue"]),e(Y,{ref_key:"Client",ref:k,onOnSelected:P},null,512),e(A,{ref_key:"Select",ref:I,onOnSelected:T},null,512),e(fe,{ref_key:"template",ref:R,onOnSelected:z},null,512)],64)}}});export{be as _};
