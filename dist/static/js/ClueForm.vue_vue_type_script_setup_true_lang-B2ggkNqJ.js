/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{V as p,d as z,r as d,f as P,g as m,h as j,k as g,o as V,m as r,w as E,a as l,j as a,c as G,F as M,n as A,v as U,y as H,_ as J,N as K,cG as O,z as Q}from"./index-BW9ifGp0.js";const ee=async s=>await p.get({url:"/crm/clue/page",params:s}),W=async s=>await p.get({url:`/crm/clue/get?id=${s}`}),X=async s=>await p.post({url:"/crm/clue/create",data:s}),Y=async s=>await p.put({url:"/crm/clue/update",data:s}),le=async s=>await p.delete({url:`/crm/clue/delete?id=${s}`}),oe=async s=>await p.download({url:"/crm/clue/export-excel",params:s}),te=z({__name:"ClueForm",emits:["success"],setup(s,{expose:C,emit:I}){const{t:_}=K(),b=Q(),i=d(!1),w=d(""),c=d(!1),y=d(""),k=d([]),t=d({id:void 0,name:void 0,customerId:void 0,contactNextTime:void 0,telephone:void 0,mobile:void 0,address:void 0,ownerUserId:void 0,contactLastTime:void 0,remark:void 0}),T=P({name:[{required:!0,message:"线索名称不能为空",trigger:"blur"}],customerId:[{required:!0,message:"客户不能为空",trigger:"blur"}]}),v=d();C({open:async(f,e)=>{i.value=!0,w.value=_(`action.${f}`),y.value=f,D();const n=await O({pageNo:1,pageSize:100,pool:!1});if(k.value=n.list,e){c.value=!0;try{t.value=await W(e)}finally{c.value=!1}}}});const N=I,F=async()=>{if(!(!v||!await v.value.validate())){c.value=!0;try{const e=t.value;y.value==="create"?(await X(e),b.success(_("common.createSuccess"))):(await Y(e),b.success(_("common.updateSuccess"))),i.value=!1,N("success")}finally{c.value=!1}}},D=()=>{t.value={id:void 0,name:void 0,customerId:void 0,contactNextTime:void 0,telephone:void 0,mobile:void 0,address:void 0,ownerUserId:void 0,contactLastTime:void 0,remark:void 0},v.value?.resetFields()};return(f,e)=>{const n=m("el-input"),u=m("el-form-item"),L=m("el-option"),$=m("el-select"),R=m("el-date-picker"),q=m("el-form"),x=m("el-button"),B=J,S=j("loading");return V(),g(B,{modelValue:l(i),"onUpdate:modelValue":e[9]||(e[9]=o=>H(i)?i.value=o:null),title:l(w)},{footer:r(()=>[a(x,{disabled:l(c),type:"primary",onClick:F},{default:r(()=>e[10]||(e[10]=[U("确 定")])),_:1},8,["disabled"]),a(x,{onClick:e[8]||(e[8]=o=>i.value=!1)},{default:r(()=>e[11]||(e[11]=[U("取 消")])),_:1})]),default:r(()=>[E((V(),g(q,{ref_key:"formRef",ref:v,"label-width":"100px",model:l(t),rules:l(T)},{default:r(()=>[a(u,{label:"线索名称",prop:"name"},{default:r(()=>[a(n,{modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=o=>l(t).name=o),placeholder:"请输入线索名称"},null,8,["modelValue"])]),_:1}),a(u,{label:"客户",prop:"customerId"},{default:r(()=>[a($,{modelValue:l(t).customerId,"onUpdate:modelValue":e[1]||(e[1]=o=>l(t).customerId=o),clearable:"",placeholder:"请选择客户"},{default:r(()=>[(V(!0),G(M,null,A(l(k),o=>(V(),g(L,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"下次联系时间",prop:"contactNextTime"},{default:r(()=>[a(R,{modelValue:l(t).contactNextTime,"onUpdate:modelValue":e[2]||(e[2]=o=>l(t).contactNextTime=o),placeholder:"选择下次联系时间",type:"date","value-format":"x"},null,8,["modelValue"])]),_:1}),a(u,{label:"电话",prop:"telephone"},{default:r(()=>[a(n,{modelValue:l(t).telephone,"onUpdate:modelValue":e[3]||(e[3]=o=>l(t).telephone=o),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),a(u,{label:"手机号",prop:"mobile"},{default:r(()=>[a(n,{modelValue:l(t).mobile,"onUpdate:modelValue":e[4]||(e[4]=o=>l(t).mobile=o),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),a(u,{label:"地址",prop:"address"},{default:r(()=>[a(n,{modelValue:l(t).address,"onUpdate:modelValue":e[5]||(e[5]=o=>l(t).address=o),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),a(u,{label:"负责人",prop:"ownerUserId"},{default:r(()=>[a(n,{modelValue:l(t).ownerUserId,"onUpdate:modelValue":e[6]||(e[6]=o=>l(t).ownerUserId=o),placeholder:"请输入负责人"},null,8,["modelValue"])]),_:1}),a(u,{label:"备注",prop:"remark"},{default:r(()=>[a(n,{modelValue:l(t).remark,"onUpdate:modelValue":e[7]||(e[7]=o=>l(t).remark=o),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[S,l(c)]])]),_:1},8,["modelValue","title"])}}});export{te as _,le as d,oe as e,ee as g};
