/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{d as Y,r as u,b as j,f as G,g as n,h as H,k as p,o as d,m as a,w as J,a as o,j as r,l as K,N as Q,c as T,F as b,n as V,v as _,t as v,i as D,y as W,_ as X,z as Z}from"./index-BuFigy1A.js";import{i as h}from"./spu-Wk_UdoYF.js";import{h as P,C as ee,i as oe}from"./constants-BPQb3nxh.js";import{c as x,D as O}from"./dict-Ve5yp9Dm.js";const te={style:{float:"left"}},le={style:{float:"right","font-size":"13px",color:"#8492a6"}},ie=Y({name:"ProductBrandForm",__name:"RewardForm",setup(ae,{expose:U}){const y=u([]);j(()=>{h().then(i=>{y.value=i})});const{t:g}=Q(),N=Z(),m=u(!1),S=u(""),c=u(!1),w=u(""),l=u({id:void 0,name:void 0,startAndEndTime:void 0,startTime:void 0,endTime:void 0,conditionType:oe.PRICE.type,remark:void 0,productScope:P.ALL.scope,productSpuIds:void 0,rules:void 0}),R=G({name:[{required:!0,message:"活动名称不能为空",trigger:"blur"}],startAndEndTime:[{required:!0,message:"活动时间不能为空",trigger:"blur"}],conditionType:[{required:!0,message:"条件类型不能为空",trigger:"change"}],productScope:[{required:!0,message:"商品范围不能为空",trigger:"blur"}],productSpuIds:[{required:!0,message:"商品范围不能为空",trigger:"blur"}]}),f=u();U({open:async(i,t)=>{if(m.value=!0,S.value=g(`action.${i}`),w.value=i,F(),t){c.value=!0;try{l.value={conditionType:10,description:"",id:void 0,name:"测试活动",picUrl:"",productScope:2,productSpuIds:[634],remark:"测试备注",startAndEndTime:[new Date,new Date("2023-12-31")],status:0}}finally{c.value=!1}}}});const A=async()=>{!f||!await f.value.validate()||(console.log(l.value),N.success("已在控制台打印数据"))},F=()=>{l.value={id:void 0,name:"",picUrl:"",status:ee.ENABLE,description:""},f.value?.resetFields()};return(i,t)=>{const k=n("el-input"),s=n("el-form-item"),B=n("el-date-picker"),E=n("el-radio"),I=n("el-radio-group"),L=n("el-option"),q=n("el-select"),M=n("el-form"),C=n("el-button"),z=X,$=H("loading");return d(),p(z,{modelValue:o(m),"onUpdate:modelValue":t[7]||(t[7]=e=>W(m)?m.value=e:null),title:o(S)},{footer:a(()=>[r(C,{disabled:o(c),type:"primary",onClick:A},{default:a(()=>t[8]||(t[8]=[_("确 定")])),_:1},8,["disabled"]),r(C,{onClick:t[6]||(t[6]=e=>m.value=!1)},{default:a(()=>t[9]||(t[9]=[_("取 消")])),_:1})]),default:a(()=>[J((d(),p(M,{ref_key:"formRef",ref:f,"label-width":"80px",model:o(l),rules:o(R)},{default:a(()=>[r(s,{label:"活动名称",prop:"name"},{default:a(()=>[r(k,{modelValue:o(l).name,"onUpdate:modelValue":t[0]||(t[0]=e=>o(l).name=e),placeholder:"请输入活动名称"},null,8,["modelValue"])]),_:1}),r(s,{label:"活动时间",prop:"startAndEndTime"},{default:a(()=>[r(B,{modelValue:o(l).startAndEndTime,"onUpdate:modelValue":t[1]||(t[1]=e=>o(l).startAndEndTime=e),"end-placeholder":o(g)("common.endTimeText"),"range-separator":"-","start-placeholder":o(g)("common.startTimeText"),type:"datetimerange"},null,8,["modelValue","end-placeholder","start-placeholder"])]),_:1}),r(s,{label:"条件类型",prop:"conditionType"},{default:a(()=>[r(I,{modelValue:o(l).conditionType,"onUpdate:modelValue":t[2]||(t[2]=e=>o(l).conditionType=e)},{default:a(()=>[(d(!0),T(b,null,V(o(x)(o(O).PROMOTION_CONDITION_TYPE),e=>(d(),p(E,{key:e.value,label:parseInt(e.value)},{default:a(()=>[_(v(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(s,{label:"优惠设置"}),r(s,{label:"活动商品",prop:"productScope"},{default:a(()=>[r(I,{modelValue:o(l).productScope,"onUpdate:modelValue":t[3]||(t[3]=e=>o(l).productScope=e)},{default:a(()=>[(d(!0),T(b,null,V(o(x)(o(O).PROMOTION_PRODUCT_SCOPE),e=>(d(),p(E,{key:e.value,label:parseInt(e.value)},{default:a(()=>[_(v(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(l).productScope===o(P).SPU.scope?(d(),p(s,{key:0,prop:"productSpuIds"},{default:a(()=>[r(q,{modelValue:o(l).productSpuIds,"onUpdate:modelValue":t[4]||(t[4]=e=>o(l).productSpuIds=e),clearable:"",filterable:"",multiple:"",placeholder:"请选择活动商品",size:"small",style:{width:"400px"}},{default:a(()=>[(d(!0),T(b,null,V(o(y),e=>(d(),p(L,{key:e.id,label:e.name,value:e.id},{default:a(()=>[D("span",te,v(e.name),1),D("span",le,"￥"+v((e.price/100).toFixed(2)),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):K("",!0),r(s,{label:"备注",prop:"remark"},{default:a(()=>[r(k,{modelValue:o(l).remark,"onUpdate:modelValue":t[5]||(t[5]=e=>o(l).remark=e),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[$,o(c)]])]),_:1},8,["modelValue","title"])}}});export{ie as _};
