/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as $,r as m,f as j,g as n,h as z,k as c,o as u,m as r,w as H,a,j as o,c as v,F as b,n as V,v as T,t as G,y as J,_ as K,N as Q,z as W}from"./index-BdC40rFX.js";import{b as X}from"./index-ZBO8emIN.js";import{g as Z,c as h,u as ee}from"./index-USiu8hts.js";import{C as w}from"./constants-BPQb3nxh.js";import{g as le,D as y,c as L}from"./dict-D4wjFrBa.js";const me=$({name:"SystemSmsTemplateForm",__name:"SmsTemplateForm",emits:["success"],setup(ae,{expose:A,emit:M}){const{t:_}=Q(),S=W(),d=m(!1),I=m(""),i=m(!1),k=m(""),t=m({id:void 0,type:void 0,status:w.ENABLE,code:"",name:"",content:"",remark:"",apiTemplateId:"",channelId:void 0}),N=j({type:[{required:!0,message:"短信类型不能为空",trigger:"change"}],status:[{required:!0,message:"开启状态不能为空",trigger:"blur"}],code:[{required:!0,message:"模板编码不能为空",trigger:"blur"}],name:[{required:!0,message:"模板名称不能为空",trigger:"blur"}],content:[{required:!0,message:"模板内容不能为空",trigger:"blur"}],apiTemplateId:[{required:!0,message:"短信 API 的模板编号不能为空",trigger:"blur"}],channelId:[{required:!0,message:"短信渠道编号不能为空",trigger:"change"}]}),f=m(),E=m([]);A({open:async(g,l)=>{if(d.value=!0,I.value=_(`action.${g}`),k.value=g,F(),l){i.value=!0;try{t.value=await Z(l)}finally{i.value=!1}}E.value=await X()}});const q=M,x=async()=>{if(!(!f||!await f.value.validate())){i.value=!0;try{const l=t.value;k.value==="create"?(await h(l),S.success(_("common.createSuccess"))):(await ee(l),S.success(_("common.updateSuccess"))),d.value=!1,q("success")}finally{i.value=!1}}},F=()=>{t.value={id:void 0,type:void 0,status:w.ENABLE,code:"",name:"",content:"",remark:"",apiTemplateId:"",channelId:void 0},f.value?.resetFields()};return(g,l)=>{const C=n("el-option"),D=n("el-select"),s=n("el-form-item"),p=n("el-input"),P=n("el-radio"),B=n("el-radio-group"),O=n("el-form"),U=n("el-button"),R=K,Y=z("loading");return u(),c(R,{modelValue:a(d),"onUpdate:modelValue":l[9]||(l[9]=e=>J(d)?d.value=e:null),title:a(I)},{footer:r(()=>[o(U,{disabled:a(i),type:"primary",onClick:x},{default:r(()=>l[10]||(l[10]=[T("确 定")])),_:1},8,["disabled"]),o(U,{onClick:l[8]||(l[8]=e=>d.value=!1)},{default:r(()=>l[11]||(l[11]=[T("取 消")])),_:1})]),default:r(()=>[H((u(),c(O,{ref_key:"formRef",ref:f,"label-width":"140px",model:a(t),rules:a(N)},{default:r(()=>[o(s,{label:"短信渠道编号",prop:"channelId"},{default:r(()=>[o(D,{modelValue:a(t).channelId,"onUpdate:modelValue":l[0]||(l[0]=e=>a(t).channelId=e),placeholder:"请选择短信渠道编号"},{default:r(()=>[(u(!0),v(b,null,V(a(E),e=>(u(),c(C,{key:e.id,label:e.signature+`【 ${a(le)(a(y).SYSTEM_SMS_CHANNEL_CODE,e.code)}】`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"短信类型",prop:"type"},{default:r(()=>[o(D,{modelValue:a(t).type,"onUpdate:modelValue":l[1]||(l[1]=e=>a(t).type=e),placeholder:"请选择短信类型"},{default:r(()=>[(u(!0),v(b,null,V(a(L)(a(y).SYSTEM_SMS_TEMPLATE_TYPE),e=>(u(),c(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"模板编号",prop:"code"},{default:r(()=>[o(p,{modelValue:a(t).code,"onUpdate:modelValue":l[2]||(l[2]=e=>a(t).code=e),placeholder:"请输入模板编号"},null,8,["modelValue"])]),_:1}),o(s,{label:"模板名称",prop:"name"},{default:r(()=>[o(p,{modelValue:a(t).name,"onUpdate:modelValue":l[3]||(l[3]=e=>a(t).name=e),placeholder:"请输入模板名称"},null,8,["modelValue"])]),_:1}),o(s,{label:"模板内容",prop:"content"},{default:r(()=>[o(p,{modelValue:a(t).content,"onUpdate:modelValue":l[4]||(l[4]=e=>a(t).content=e),placeholder:"请输入模板内容",type:"textarea"},null,8,["modelValue"])]),_:1}),o(s,{label:"开启状态",prop:"status"},{default:r(()=>[o(B,{modelValue:a(t).status,"onUpdate:modelValue":l[5]||(l[5]=e=>a(t).status=e)},{default:r(()=>[(u(!0),v(b,null,V(a(L)(a(y).COMMON_STATUS),e=>(u(),c(P,{key:e.value,label:e.value},{default:r(()=>[T(G(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"短信 API 模板编号",prop:"apiTemplateId"},{default:r(()=>[o(p,{modelValue:a(t).apiTemplateId,"onUpdate:modelValue":l[6]||(l[6]=e=>a(t).apiTemplateId=e),placeholder:"请输入短信 API 的模板编号"},null,8,["modelValue"])]),_:1}),o(s,{label:"备注",prop:"remark"},{default:r(()=>[o(p,{modelValue:a(t).remark,"onUpdate:modelValue":l[7]||(l[7]=e=>a(t).remark=e),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[Y,a(i)]])]),_:1},8,["modelValue","title"])}}});export{me as _};
