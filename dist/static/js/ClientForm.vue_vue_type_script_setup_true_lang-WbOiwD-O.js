/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{V as y,d as P,r as b,f as Y,g as d,h as j,k as i,o as u,m as r,w as H,a as l,j as a,c as p,F as m,n as c,v as U,t as J,y as K,_ as Q,N as W,z as X}from"./index-BdmDrM2Y.js";import{_ as Z}from"./UploadImg-BE45TJSs.js";import{C as h}from"./constants-BPQb3nxh.js";import{c as ee,D as O,d as le}from"./dict-Cm-9nniQ.js";const ie=n=>y.get({url:"/system/oauth2-client/page",params:n}),te=n=>y.get({url:`/system/oauth2-client/get?id=${n}`}),oe=n=>y.post({url:"/system/oauth2-client/create",data:n}),ae=n=>y.put({url:"/system/oauth2-client/update",data:n}),pe=n=>y.delete({url:`/system/oauth2-client/delete?id=${n}`}),me=P({name:"SystemOAuth2ClientForm",__name:"ClientForm",emits:["success"],setup(n,{expose:q,emit:D}){const{t:k}=W(),I=X(),f=b(!1),w=b(""),V=b(!1),x=b(""),o=b({id:void 0,clientId:void 0,secret:void 0,name:void 0,logo:void 0,description:void 0,status:h.ENABLE,accessTokenValiditySeconds:30*60,refreshTokenValiditySeconds:30*24*60,redirectUris:[],authorizedGrantTypes:[],scopes:[],autoApproveScopes:[],authorities:[],resourceIds:[],additionalInformation:void 0}),E=Y({clientId:[{required:!0,message:"客户端编号不能为空",trigger:"blur"}],secret:[{required:!0,message:"客户端密钥不能为空",trigger:"blur"}],name:[{required:!0,message:"应用名不能为空",trigger:"blur"}],logo:[{required:!0,message:"应用图标不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}],accessTokenValiditySeconds:[{required:!0,message:"访问令牌的有效期不能为空",trigger:"blur"}],refreshTokenValiditySeconds:[{required:!0,message:"刷新令牌的有效期不能为空",trigger:"blur"}],redirectUris:[{required:!0,message:"可重定向的 URI 地址不能为空",trigger:"blur"}],authorizedGrantTypes:[{required:!0,message:"授权类型不能为空",trigger:"blur"}]}),T=b();q({open:async(S,t)=>{if(f.value=!0,w.value=k(`action.${S}`),x.value=S,z(),t){V.value=!0;try{o.value=await te(t)}finally{V.value=!1}}}});const N=D,R=async()=>{if(!(!T||!await T.value.validate())){V.value=!0;try{const t=o.value;x.value==="create"?(await oe(t),I.success(k("common.createSuccess"))):(await ae(t),I.success(k("common.updateSuccess"))),f.value=!1,N("success")}finally{V.value=!1}}},z=()=>{o.value={id:void 0,clientId:void 0,secret:void 0,name:void 0,logo:void 0,description:void 0,status:h.ENABLE,accessTokenValiditySeconds:30*60,refreshTokenValiditySeconds:30*24*60,redirectUris:[],authorizedGrantTypes:[],scopes:[],autoApproveScopes:[],authorities:[],resourceIds:[],additionalInformation:void 0},T.value?.resetFields()};return(S,t)=>{const _=d("el-input"),s=d("el-form-item"),F=Z,G=d("el-radio"),B=d("el-radio-group"),A=d("el-input-number"),v=d("el-option"),g=d("el-select"),$=d("el-form"),C=d("el-button"),L=Q,M=j("loading");return u(),i(L,{modelValue:l(f),"onUpdate:modelValue":t[16]||(t[16]=e=>K(f)?f.value=e:null),"max-height":"500px",scroll:"",title:l(w)},{footer:r(()=>[a(C,{disabled:l(V),type:"primary",onClick:R},{default:r(()=>t[17]||(t[17]=[U("确 定")])),_:1},8,["disabled"]),a(C,{onClick:t[15]||(t[15]=e=>f.value=!1)},{default:r(()=>t[18]||(t[18]=[U("取 消")])),_:1})]),default:r(()=>[H((u(),i($,{ref_key:"formRef",ref:T,"label-width":"160px",model:l(o),rules:l(E)},{default:r(()=>[a(s,{label:"客户端编号",prop:"secret"},{default:r(()=>[a(_,{modelValue:l(o).clientId,"onUpdate:modelValue":t[0]||(t[0]=e=>l(o).clientId=e),placeholder:"请输入客户端编号"},null,8,["modelValue"])]),_:1}),a(s,{label:"客户端密钥",prop:"secret"},{default:r(()=>[a(_,{modelValue:l(o).secret,"onUpdate:modelValue":t[1]||(t[1]=e=>l(o).secret=e),placeholder:"请输入客户端密钥"},null,8,["modelValue"])]),_:1}),a(s,{label:"应用名",prop:"name"},{default:r(()=>[a(_,{modelValue:l(o).name,"onUpdate:modelValue":t[2]||(t[2]=e=>l(o).name=e),placeholder:"请输入应用名"},null,8,["modelValue"])]),_:1}),a(s,{label:"应用图标"},{default:r(()=>[a(F,{modelValue:l(o).logo,"onUpdate:modelValue":t[3]||(t[3]=e=>l(o).logo=e),limit:1},null,8,["modelValue"])]),_:1}),a(s,{label:"应用描述"},{default:r(()=>[a(_,{modelValue:l(o).description,"onUpdate:modelValue":t[4]||(t[4]=e=>l(o).description=e),placeholder:"请输入应用名",type:"textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"状态",prop:"status"},{default:r(()=>[a(B,{modelValue:l(o).status,"onUpdate:modelValue":t[5]||(t[5]=e=>l(o).status=e)},{default:r(()=>[(u(!0),p(m,null,c(l(ee)(l(O).COMMON_STATUS),e=>(u(),i(G,{key:e.value,label:e.value},{default:r(()=>[U(J(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"访问令牌的有效期",prop:"accessTokenValiditySeconds"},{default:r(()=>[a(A,{modelValue:l(o).accessTokenValiditySeconds,"onUpdate:modelValue":t[6]||(t[6]=e=>l(o).accessTokenValiditySeconds=e),placeholder:"单位：秒"},null,8,["modelValue"])]),_:1}),a(s,{label:"刷新令牌的有效期",prop:"refreshTokenValiditySeconds"},{default:r(()=>[a(A,{modelValue:l(o).refreshTokenValiditySeconds,"onUpdate:modelValue":t[7]||(t[7]=e=>l(o).refreshTokenValiditySeconds=e),placeholder:"单位：秒"},null,8,["modelValue"])]),_:1}),a(s,{label:"授权类型",prop:"authorizedGrantTypes"},{default:r(()=>[a(g,{modelValue:l(o).authorizedGrantTypes,"onUpdate:modelValue":t[8]||(t[8]=e=>l(o).authorizedGrantTypes=e),filterable:"",multiple:"",placeholder:"请输入授权类型",style:{width:"500px"}},{default:r(()=>[(u(!0),p(m,null,c(l(le)(l(O).SYSTEM_OAUTH2_GRANT_TYPE),e=>(u(),i(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"授权范围",prop:"scopes"},{default:r(()=>[a(g,{modelValue:l(o).scopes,"onUpdate:modelValue":t[9]||(t[9]=e=>l(o).scopes=e),"allow-create":"",filterable:"",multiple:"",placeholder:"请输入授权范围",style:{width:"500px"}},{default:r(()=>[(u(!0),p(m,null,c(l(o).scopes,e=>(u(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"自动授权范围",prop:"autoApproveScopes"},{default:r(()=>[a(g,{modelValue:l(o).autoApproveScopes,"onUpdate:modelValue":t[10]||(t[10]=e=>l(o).autoApproveScopes=e),filterable:"",multiple:"",placeholder:"请输入授权范围",style:{width:"500px"}},{default:r(()=>[(u(!0),p(m,null,c(l(o).scopes,e=>(u(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"可重定向的 URI 地址",prop:"redirectUris"},{default:r(()=>[a(g,{modelValue:l(o).redirectUris,"onUpdate:modelValue":t[11]||(t[11]=e=>l(o).redirectUris=e),"allow-create":"",filterable:"",multiple:"",placeholder:"请输入可重定向的 URI 地址",style:{width:"500px"}},{default:r(()=>[(u(!0),p(m,null,c(l(o).redirectUris,e=>(u(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"权限",prop:"authorities"},{default:r(()=>[a(g,{modelValue:l(o).authorities,"onUpdate:modelValue":t[12]||(t[12]=e=>l(o).authorities=e),"allow-create":"",filterable:"",multiple:"",placeholder:"请输入权限",style:{width:"500px"}},{default:r(()=>[(u(!0),p(m,null,c(l(o).authorities,e=>(u(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"资源",prop:"resourceIds"},{default:r(()=>[a(g,{modelValue:l(o).resourceIds,"onUpdate:modelValue":t[13]||(t[13]=e=>l(o).resourceIds=e),"allow-create":"",filterable:"",multiple:"",placeholder:"请输入资源",style:{width:"500px"}},{default:r(()=>[(u(!0),p(m,null,c(l(o).resourceIds,e=>(u(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"附加信息",prop:"additionalInformation"},{default:r(()=>[a(_,{modelValue:l(o).additionalInformation,"onUpdate:modelValue":t[14]||(t[14]=e=>l(o).additionalInformation=e),placeholder:"请输入附加信息，JSON 格式数据",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[M,l(V)]])]),_:1},8,["modelValue","title"])}}});export{me as _,pe as d,ie as g};
