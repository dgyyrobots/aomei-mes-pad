/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{d as A,r as m,f as G,Y as H,g as p,h as J,c as W,o as M,F as X,j as e,_ as Z,a as o,y as h,m as t,w as ee,k as le,v as c,K as te,aP as ae,N as oe,z as de}from"./index-FPuwcz_Y.js";import{b as ue,c as ie,u as ne}from"./index-BDI3yjGB.js";import{_ as re}from"./TemplateSelect.vue_vue_type_script_setup_true_lang-CVERIwTc.js";import{_ as se}from"./SupplierSelect.vue_vue_type_script_setup_true_lang-Cr6OxKkR.js";const me="top",qe=A({__name:"Form",emits:["success"],setup(pe,{expose:D,emit:w}){const{t:_}=oe(),b=de(),f=m(!1),C=m(""),v=m(!1),R=m(""),l=m({id:void 0,iqcCode:void 0,iqcName:void 0,templateId:void 0,vendorId:void 0,vendorCode:void 0,vendorName:void 0,vendorNick:void 0,vendorBatch:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityMinCheck:void 0,quantityMaxUnqualified:void 0,quantityRecived:void 0,quantityCheck:void 0,quantityUnqualified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,checkResult:void 0,reciveDate:void 0,inspectDate:void 0,inspector:void 0,status:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0}),Q=G({iqcCode:[{required:!0,message:"来料检验单编号不能为空",trigger:"change"}],iqcName:[{required:!0,message:"来料检验单名称不能为空",trigger:"change"}],templateId:[{required:!0,message:"检验模板ID不能为空",trigger:"change"}],vendorId:[{required:!0,message:"供应商ID不能为空",trigger:"change"}],vendorCode:[{required:!0,message:"供应商编码不能为空",trigger:"change"}],vendorName:[{required:!0,message:"供应商名称不能为空",trigger:"change"}],itemId:[{required:!0,message:"产品物料ID不能为空",trigger:"change"}],quantityRecived:[{required:!0,message:"本次接收数量不能为空",trigger:"change"}],quantityCheck:[{required:!0,message:"本次检测数量不能为空",trigger:"change"}]}),g=m();D({open:async(u,a)=>{if(f.value=!0,C.value=_("action."+u),R.value=u,O(),a){v.value=!0;try{l.value=await ue(a)}finally{v.value=!1}}}});const x=w,S=async()=>{await g.value.validate(),v.value=!0;try{const u=l.value;R.value==="create"?(u.status="0",await ie(u),b.success(_("common.createSuccess"))):(await ne(u),b.success(_("common.updateSuccess"))),f.value=!1,x("success")}finally{v.value=!1}},O=()=>{l.value={id:void 0,iqcCode:void 0,iqcName:void 0,templateId:void 0,vendorId:void 0,vendorCode:void 0,vendorName:void 0,vendorNick:void 0,vendorBatch:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityMinCheck:void 0,quantityMaxUnqualified:void 0,quantityRecived:void 0,quantityCheck:void 0,quantityUnqualified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,checkResult:void 0,reciveDate:void 0,inspectDate:void 0,inspector:void 0,status:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0},g.value?.resetFields()},j=m(),P=u=>{u!=null&&u!=null&&(console.log(u.id),l.value.itemId=u.id,l.value.itemCode=u.itemCode,l.value.itemName=u.itemName,l.value.specification=u.specification,l.value.unitOfMeasure=u.unitOfMeasure)};H(l,(u,a)=>{l.value.crQuantity==null||l.value.quantityRecived==null?l.value.crRate=void 0:l.value.crRate=(l.value.crQuantity/l.value.quantityRecived).toFixed(2),l.value.majQuantity==null||l.value.quantityRecived==null?l.value.majRate=void 0:l.value.majRate=(l.value.majQuantity/l.value.quantityRecived).toFixed(2),l.value.minQuantity==null||l.value.quantityRecived==null?l.value.minRate=void 0:l.value.minRate=(l.value.minQuantity/l.value.quantityRecived).toFixed(2)},{deep:!0});const k=m(),F=()=>{k.value.open()},B=u=>{u!=null&&u!=null&&(console.log(u.selectedTmp),l.value.templateId=u.selectedRows.id,l.value.itemCode=u.selectedRows.itemCode,l.value.itemName=u.selectedRows.itemName,l.value.specification=u.selectedRows.specification,l.value.unitOfMeasure=u.selectedRows.unitOfMeasure,l.value.itemCode=u.selectedPro[0].itemCode,l.value.itemId=u.selectedPro[0].itemId,l.value.itemName=u.selectedPro[0].itemName,l.value.specification=u.selectedPro[0].specification,l.value.unitOfMeasure=u.selectedPro[0].unitOfMeasure,l.value.quantityMinCheck=u.selectedPro[0].quantityCheck,l.value.quantityMaxUnqualified=u.selectedPro[0].quantityUnqualified)},U=m(),T=()=>{U.value.open()},$=u=>{u!=null&&u!=null&&(console.log(u.selectedTmp[0].quantityCheck,u.selectedTmp[0].quantityUnqualified),l.value.vendorId=u.id,l.value.vendorCode=u.vendorCode,l.value.vendorName=u.vendorName,l.value.specification=u.selectedRows.specification,l.value.unitOfMeasure=u.selectedRows.unitOfMeasure,l.value.itemCode=u.selectedPro[0].itemCode,l.value.itemId=u.selectedPro[0].itemId,l.value.itemName=u.selectedPro[0].itemName,l.value.specification=u.selectedPro[0].specification,l.value.unitOfMeasure=u.selectedPro[0].unitOfMeasure,l.value.quantityMinCheck=u.selectedPro[0].quantityCheck,l.value.quantityMaxUnqualified=u.selectedPro[0].quantityUnqualified)},V=m(!0);return(u,a)=>{const E=p("SwitchS"),r=p("el-input"),i=p("el-form-item"),n=p("el-col"),s=p("el-row"),y=p("el-divider"),I=te,q=p("el-button"),N=p("el-date-picker"),z=p("el-form"),K=Z,L=ae,Y=J("loading");return M(),W(X,null,[e(K,{title:o(C),modelValue:o(f),"onUpdate:modelValue":a[30]||(a[30]=d=>h(f)?f.value=d:null),width:"80%"},{footer:t(()=>[e(q,{onClick:S,type:"primary",disabled:o(v)},{default:t(()=>a[35]||(a[35]=[c("确 定")])),_:1},8,["disabled"]),e(q,{onClick:a[29]||(a[29]=d=>f.value=!1)},{default:t(()=>a[36]||(a[36]=[c("取 消")])),_:1})]),default:t(()=>[ee((M(),le(z,{ref_key:"formRef",ref:g,model:o(l),rules:o(Q),"label-width":"100px","label-position":me},{default:t(()=>[e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"来料检验单编号",prop:"iqcCode"},{default:t(()=>[e(r,{modelValue:o(l).iqcCode,"onUpdate:modelValue":a[0]||(a[0]=d=>o(l).iqcCode=d),placeholder:"请输入来料检验单编号"},{append:t(()=>[e(E,{name:"QMS_IQC_CODE",obj:o(l),val:"iqcCode"},null,8,["obj"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"来料检验单名称",prop:"iqcName"},{default:t(()=>[e(r,{modelValue:o(l).iqcName,"onUpdate:modelValue":a[1]||(a[1]=d=>o(l).iqcName=d),placeholder:"请输入来料检验单名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>a[31]||(a[31]=[c("供应商信息")])),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:8},{default:t(()=>[e(i,{label:"供应商编码",prop:"vendorCode"},{default:t(()=>[e(r,{modelValue:o(l).vendorCode,"onUpdate:modelValue":a[2]||(a[2]=d=>o(l).vendorCode=d),placeholder:"请输入供应商编码"},{append:t(()=>[e(q,{onClick:T},{default:t(()=>[e(I,{icon:"ep:search",class:"mr-5px"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:t(()=>[e(i,{label:"供应商ID",prop:"vendorId"},{default:t(()=>[e(r,{modelValue:o(l).vendorId,"onUpdate:modelValue":a[3]||(a[3]=d=>o(l).vendorId=d),placeholder:"请输入供应商ID"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:t(()=>[e(i,{label:"供应商批次号",prop:"vendorBatch"},{default:t(()=>[e(r,{modelValue:o(l).vendorBatch,"onUpdate:modelValue":a[4]||(a[4]=d=>o(l).vendorBatch=d),placeholder:"请输入供应商批次号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"供应商名称",prop:"vendorName"},{default:t(()=>[e(r,{modelValue:o(l).vendorName,"onUpdate:modelValue":a[5]||(a[5]=d=>o(l).vendorName=d),placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"供应商简称",prop:"vendorNick"},{default:t(()=>[e(r,{modelValue:o(l).vendorNick,"onUpdate:modelValue":a[6]||(a[6]=d=>o(l).vendorNick=d),placeholder:"请输入供应商简称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>a[32]||(a[32]=[c("模板信息")])),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"检验模板ID",prop:"templateId"},{default:t(()=>[e(r,{modelValue:o(l).templateId,"onUpdate:modelValue":a[7]||(a[7]=d=>o(l).templateId=d),placeholder:"请输入检验模板ID",maxlength:"",disabled:o(V)},{append:t(()=>[e(q,{onClick:F},{default:t(()=>[e(I,{icon:"ep:search",class:"mr-5px"})]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"产品物料ID",prop:"itemId"},{default:t(()=>[e(r,{modelValue:o(l).itemId,"onUpdate:modelValue":a[8]||(a[8]=d=>o(l).itemId=d),placeholder:"请输入产品物料ID",disabled:o(V)},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"产品物料编码",prop:"itemCode"},{default:t(()=>[e(r,{modelValue:o(l).itemCode,"onUpdate:modelValue":a[9]||(a[9]=d=>o(l).itemCode=d),placeholder:"请输入产品物料编码",disabled:o(V)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"产品物料名称",prop:"itemName"},{default:t(()=>[e(r,{modelValue:o(l).itemName,"onUpdate:modelValue":a[10]||(a[10]=d=>o(l).itemName=d),placeholder:"请输入产品物料名称",disabled:o(V)},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"最低检测数",prop:"quantityMinCheck"},{default:t(()=>[e(r,{modelValue:o(l).quantityMinCheck,"onUpdate:modelValue":a[11]||(a[11]=d=>o(l).quantityMinCheck=d),placeholder:"请输入最低检测数",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(i,{label:"最大不合格数",prop:"quantityMaxUnqualified"},{default:t(()=>[e(r,{modelValue:o(l).quantityMaxUnqualified,"onUpdate:modelValue":a[12]||(a[12]=d=>o(l).quantityMaxUnqualified=d),placeholder:"请输入最大不合格数",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"规格型号",prop:"specification"},{default:t(()=>[e(r,{modelValue:o(l).specification,"onUpdate:modelValue":a[13]||(a[13]=d=>o(l).specification=d),placeholder:"请输入规格型号"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"单位",prop:"unitOfMeasure"},{default:t(()=>[e(r,{modelValue:o(l).unitOfMeasure,"onUpdate:modelValue":a[14]||(a[14]=d=>o(l).unitOfMeasure=d),placeholder:"请输入单位"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>a[33]||(a[33]=[c("检测信息")])),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(i,{label:"本次接收数量",prop:"quantityRecived"},{default:t(()=>[e(r,{modelValue:o(l).quantityRecived,"onUpdate:modelValue":a[15]||(a[15]=d=>o(l).quantityRecived=d),placeholder:"请输入本次接收数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"本次检测数量",prop:"quantityCheck"},{default:t(()=>[e(r,{modelValue:o(l).quantityCheck,"onUpdate:modelValue":a[16]||(a[16]=d=>o(l).quantityCheck=d),placeholder:"请输入本次检测数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"不合格数",prop:"quantityUnqualified"},{default:t(()=>[e(r,{modelValue:o(l).quantityUnqualified,"onUpdate:modelValue":a[17]||(a[17]=d=>o(l).quantityUnqualified=d),placeholder:"请输入不合格数",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"致命缺陷数量",prop:"crQuantity"},{default:t(()=>[e(r,{modelValue:o(l).crQuantity,"onUpdate:modelValue":a[18]||(a[18]=d=>o(l).crQuantity=d),placeholder:"请输入致命缺陷数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"致命缺陷率",prop:"crRate"},{default:t(()=>[e(r,{modelValue:o(l).crRate,"onUpdate:modelValue":a[19]||(a[19]=d=>o(l).crRate=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20,offset:0},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"严重缺陷数量",prop:"majQuantity"},{default:t(()=>[e(r,{modelValue:o(l).majQuantity,"onUpdate:modelValue":a[20]||(a[20]=d=>o(l).majQuantity=d),placeholder:"请输入严重缺陷数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"严重缺陷率",prop:"majRate"},{default:t(()=>[e(r,{modelValue:o(l).majRate,"onUpdate:modelValue":a[21]||(a[21]=d=>o(l).majRate=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"轻微缺陷数量",prop:"minQuantity"},{default:t(()=>[e(r,{modelValue:o(l).minQuantity,"onUpdate:modelValue":a[22]||(a[22]=d=>o(l).minQuantity=d),placeholder:"请输入轻微缺陷数量",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"轻微缺陷率",prop:"minRate"},{default:t(()=>[e(r,{modelValue:o(l).minRate,"onUpdate:modelValue":a[23]||(a[23]=d=>o(l).minRate=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>a[34]||(a[34]=[c("检测结果")])),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"检测结果",prop:"checkResult"},{default:t(()=>[e(r,{modelValue:o(l).checkResult,"onUpdate:modelValue":a[24]||(a[24]=d=>o(l).checkResult=d),placeholder:"请输入检测结果"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"检测人员",prop:"inspector"},{default:t(()=>[e(r,{modelValue:o(l).inspector,"onUpdate:modelValue":a[25]||(a[25]=d=>o(l).inspector=d),placeholder:"请输入检测人员"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"来料日期",prop:"reciveDate"},{default:t(()=>[e(N,{modelValue:o(l).reciveDate,"onUpdate:modelValue":a[26]||(a[26]=d=>o(l).reciveDate=d),type:"date","value-format":"x",placeholder:"选择来料日期"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,offset:0},{default:t(()=>[e(i,{label:"检测日期",prop:"inspectDate"},{default:t(()=>[e(N,{modelValue:o(l).inspectDate,"onUpdate:modelValue":a[27]||(a[27]=d=>o(l).inspectDate=d),type:"date","value-format":"x",placeholder:"选择检测日期"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(n,null,{default:t(()=>[e(i,{label:"备注",prop:"remark"},{default:t(()=>[e(r,{modelValue:o(l).remark,"onUpdate:modelValue":a[28]||(a[28]=d=>o(l).remark=d),placeholder:"请输入备注",rows:2,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[Y,o(v)]])]),_:1},8,["title","modelValue"]),e(L,{ref_key:"Select",ref:j,onOnSelected:P},null,512),e(re,{ref_key:"template",ref:k,onOnSelected:B},null,512),e(se,{ref_key:"supplier",ref:U,onOnSelected:$},null,512)],64)}}});export{qe as _};
