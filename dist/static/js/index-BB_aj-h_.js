/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{d as j,r as c,f as J,b as W,g as r,h as P,c as S,o as p,j as e,m as n,a,J as G,F as U,n as X,k as d,w as g,v as _,K as Z,L as h,M as ee,z as te,N as le}from"./index-DMg0mq0e.js";import{_ as ae}from"./DictTag.vue_vue_type_script_lang-sQcOd7JH.js";import{_ as ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DPMk4m5L.js";import{_ as oe,g as re,d as se}from"./BannerForm.vue_vue_type_script_setup_true_lang-10f6OqhG.js";import{c as ie}from"./index-C4Z-ZzKf.js";import{c as pe,D as k}from"./dict-BEquckDR.js";import"./color-B5phLuB-.js";import"./UploadImg-CavEizuR.js";const ye=j({name:"Banner",__name:"index",setup(me){const C=te(),{t:$}=le(),b=c(!0),x=c(0),T=c([]),o=J({pageNo:1,pageSize:10,title:null,status:null,createTime:[]}),N=c(),I=s=>{ie({urlList:[s]})},m=async()=>{b.value=!0;try{const s=await re(o);T.value=s.list,x.value=s.total}finally{b.value=!1}},v=()=>{o.pageNo=1,m()},F=()=>{N.value.resetFields(),v()},V=c(),B=(s,t)=>{V.value.open(s,t)},R=async s=>{try{await C.delConfirm(),await se(s),C.success($("common.delSuccess")),await m()}catch(t){console.log(t)}};return W(()=>{m()}),(s,t)=>{const Y=r("el-input"),f=r("el-form-item"),z=r("el-option"),L=r("el-select"),q=r("el-date-picker"),y=Z,u=r("el-button"),A=r("el-form"),D=ne,i=r("el-table-column"),E=r("el-image"),M=ae,K=r("el-table"),H=ee,w=P("hasPermi"),Q=P("loading");return p(),S(U,null,[e(D,null,{default:n(()=>[e(A,{ref_key:"queryFormRef",ref:N,class:"-mb-15px",inline:!0,"label-width":"100px",model:a(o)},{default:n(()=>[e(f,{label:"Banner标题",prop:"title"},{default:n(()=>[e(Y,{modelValue:a(o).title,"onUpdate:modelValue":t[0]||(t[0]=l=>a(o).title=l),class:"!w-240px",clearable:"",placeholder:"请输入Banner标题",onKeyup:G(v,["enter"])},null,8,["modelValue"])]),_:1}),e(f,{label:"活动状态",prop:"status"},{default:n(()=>[e(L,{modelValue:a(o).status,"onUpdate:modelValue":t[1]||(t[1]=l=>a(o).status=l),class:"!w-240px",clearable:"",placeholder:"全部"},{default:n(()=>[(p(!0),S(U,null,X(a(pe)(a(k).COMMON_STATUS),l=>(p(),d(z,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"创建时间",prop:"createTime"},{default:n(()=>[e(q,{modelValue:a(o).createTime,"onUpdate:modelValue":t[2]||(t[2]=l=>a(o).createTime=l),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(f,null,{default:n(()=>[e(u,{onClick:v},{default:n(()=>[e(y,{class:"mr-5px",icon:"ep:search"}),t[6]||(t[6]=_(" 搜索 "))]),_:1}),e(u,{onClick:F},{default:n(()=>[e(y,{class:"mr-5px",icon:"ep:refresh"}),t[7]||(t[7]=_(" 重置 "))]),_:1}),g((p(),d(u,{plain:"",type:"primary",onClick:t[3]||(t[3]=l=>B("create"))},{default:n(()=>[e(y,{class:"mr-5px",icon:"ep:plus"}),t[8]||(t[8]=_(" 新增 "))]),_:1})),[[w,["promotion:banner:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(D,null,{default:n(()=>[g((p(),d(K,{data:a(T),"show-overflow-tooltip":!0,stripe:!0},{default:n(()=>[e(i,{align:"center",label:"Banner标题",prop:"title"}),e(i,{align:"center",label:"图片","min-width":"80",prop:"picUrl"},{default:n(({row:l})=>[e(E,{class:"h-30px w-30px",src:l.picUrl,onClick:O=>I(l.picUrl)},null,8,["src","onClick"])]),_:1}),e(i,{align:"center",label:"状态",prop:"status"},{default:n(l=>[e(M,{type:a(k).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(i,{align:"center",label:"定位",prop:"position"},{default:n(l=>[e(M,{type:a(k).PROMOTION_BANNER_POSITION,value:l.row.position},null,8,["type","value"])]),_:1}),e(i,{align:"center",label:"跳转地址",prop:"url"}),e(i,{align:"center",formatter:a(h),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),e(i,{align:"center",label:"排序",prop:"sort"}),e(i,{align:"center",label:"描述",prop:"memo"}),e(i,{align:"center",label:"操作"},{default:n(l=>[g((p(),d(u,{link:"",type:"primary",onClick:O=>B("update",l.row.id)},{default:n(()=>t[9]||(t[9]=[_("编辑")])),_:2},1032,["onClick"])),[[w,["promotion:banner:update"]]]),g((p(),d(u,{link:"",type:"danger",onClick:O=>R(l.row.id)},{default:n(()=>t[10]||(t[10]=[_("删除")])),_:2},1032,["onClick"])),[[w,["promotion:banner:delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,a(b)]]),e(H,{limit:a(o).pageSize,"onUpdate:limit":t[4]||(t[4]=l=>a(o).pageSize=l),page:a(o).pageNo,"onUpdate:page":t[5]||(t[5]=l=>a(o).pageNo=l),total:a(x),onPagination:m},null,8,["limit","page","total"])]),_:1}),e(oe,{ref_key:"formRef",ref:V,onSuccess:m},null,512)],64)}}});export{ye as default};
