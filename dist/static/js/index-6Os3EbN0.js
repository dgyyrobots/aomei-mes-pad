/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{d as le,r as C,f as U,b as ne,g as f,h as F,c as N,o as c,j as l,m as a,a as n,J as ae,F as T,n as te,k as r,w as v,v as A,K as oe,M as ce,z as ie,N as re}from"./index-BW9ifGp0.js";import{_ as se}from"./ContentWrap.vue_vue_type_script_setup_true_lang-58zNwBTb.js";import{_ as de}from"./index-hVfLpCoZ.js";import{_ as ue}from"./AppForm.vue_vue_type_script_setup_true_lang-kxLczzvD.js";import{_ as _e}from"./AlipayChannelForm.vue_vue_type_script_setup_true_lang-CuIECGxj.js";import{_ as pe}from"./MockChannelForm.vue_vue_type_script_setup_true_lang-D7vppsF_.js";import{_ as me}from"./WeixinChannelForm.vue_vue_type_script_setup_true_lang-Dzb9dlTL.js";import{a as fe,b as ke,d as ye}from"./index-BWX6oqUS.js";import{a as o,C as w}from"./constants-BPQb3nxh.js";import{c as Ce,D as Ae}from"./dict-BcQRoIPV.js";import"./index-BzegOFgQ.js";const We=le({name:"PayApp",__name:"index",setup(Pe){const P=ie(),{t:X}=re(),b=C(!0),L=C(0),h=C([]),m=U({pageNo:1,pageSize:10,name:void 0,status:void 0,remark:void 0,payNotifyUrl:void 0,refundNotifyUrl:void 0,createTime:[]}),Y=C(),y=async()=>{b.value=!0;try{const s=await fe(m);h.value=s.list,L.value=s.total}finally{b.value=!1}},$=()=>{m.pageNo=1,y()},D=()=>{Y.value.resetFields(),$()},M=async s=>{const t=s.status===w.ENABLE?"启用":"停用";try{await P.confirm(`确认要"${t}""${s.name}"应用吗?`),await ke({id:s.id,status:s.status}),P.success(`${t}成功`)}catch{s.status=s.status===w.ENABLE?w.DISABLE:w.ENABLE}},x=C(),R=(s,t)=>{x.value.open(s,t)},O=async s=>{try{await P.delConfirm(),await ye(s),P.success(X("common.delSuccess")),await y()}catch(t){console.log(t)}},k=(s,t)=>s?s.indexOf(t)!==-1:!1,W=C(),E=C(),B=C(),V=U({appId:null,payCode:null}),_=async(s,t)=>{if(V.appId=s.id,V.payCode=t,t.indexOf("alipay_")===0){W.value.open(s.id,t);return}if(t.indexOf("wx_")===0){E.value.open(s.id,t);return}t.indexOf("mock")===0&&B.value.open(s.id,t)};return ne(async()=>{await y()}),(s,t)=>{const K=de,Q=f("el-input"),g=f("el-form-item"),z=f("el-option"),q=f("el-select"),H=f("el-date-picker"),u=oe,i=f("el-button"),j=f("el-form"),S=se,p=f("el-table-column"),J=f("el-switch"),G=f("el-table"),Z=ce,I=F("hasPermi"),ee=F("loading");return c(),N(T,null,[l(K,{title:"支付功能开启",url:"https://doc.iocoder.cn/pay/build/"}),l(S,null,{default:a(()=>[l(j,{ref_key:"queryFormRef",ref:Y,class:"-mb-15px",inline:!0,"label-width":"68px",model:n(m)},{default:a(()=>[l(g,{label:"应用名",prop:"name"},{default:a(()=>[l(Q,{modelValue:n(m).name,"onUpdate:modelValue":t[0]||(t[0]=e=>n(m).name=e),class:"!w-240px",clearable:"",placeholder:"请输入应用名",onKeyup:ae($,["enter"])},null,8,["modelValue"])]),_:1}),l(g,{label:"开启状态",prop:"status"},{default:a(()=>[l(q,{modelValue:n(m).status,"onUpdate:modelValue":t[1]||(t[1]=e=>n(m).status=e),class:"!w-240px",clearable:"",placeholder:"请选择开启状态"},{default:a(()=>[(c(!0),N(T,null,te(n(Ce)(n(Ae).COMMON_STATUS),e=>(c(),r(z,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"创建时间",prop:"createTime"},{default:a(()=>[l(H,{modelValue:n(m).createTime,"onUpdate:modelValue":t[2]||(t[2]=e=>n(m).createTime=e),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),l(g,null,{default:a(()=>[l(i,{onClick:$},{default:a(()=>[l(u,{class:"mr-5px",icon:"ep:search"}),t[6]||(t[6]=A(" 搜索 "))]),_:1}),l(i,{onClick:D},{default:a(()=>[l(u,{class:"mr-5px",icon:"ep:refresh"}),t[7]||(t[7]=A(" 重置 "))]),_:1}),v((c(),r(i,{plain:"",type:"primary",onClick:t[3]||(t[3]=e=>R("create"))},{default:a(()=>[l(u,{class:"mr-5px",icon:"ep:plus"}),t[8]||(t[8]=A(" 新增 "))]),_:1})),[[I,["pay:app:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(S,null,{default:a(()=>[v((c(),r(G,{data:n(h)},{default:a(()=>[l(p,{align:"center",label:"应用编号",prop:"id"}),l(p,{align:"center",label:"应用名",prop:"name"}),l(p,{align:"center",label:"开启状态",prop:"status"},{default:a(e=>[l(J,{modelValue:e.row.status,"onUpdate:modelValue":d=>e.row.status=d,"active-value":0,"inactive-value":1,onChange:d=>M(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(p,{align:"center",label:"支付宝配置"},{default:a(()=>[l(p,{align:"center",label:n(o).ALIPAY_APP.name},{default:a(e=>[k(e.row.channelCodes,n(o).ALIPAY_APP.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).ALIPAY_APP.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).ALIPAY_APP.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"]),l(p,{align:"center",label:n(o).ALIPAY_PC.name},{default:a(e=>[k(e.row.channelCodes,n(o).ALIPAY_PC.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).ALIPAY_PC.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).ALIPAY_PC.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"]),l(p,{align:"center",label:n(o).ALIPAY_WAP.name},{default:a(e=>[k(e.row.channelCodes,n(o).ALIPAY_WAP.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).ALIPAY_WAP.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).ALIPAY_WAP.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"]),l(p,{align:"center",label:n(o).ALIPAY_QR.name},{default:a(e=>[k(e.row.channelCodes,n(o).ALIPAY_QR.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).ALIPAY_QR.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).ALIPAY_QR.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"]),l(p,{align:"center",label:n(o).ALIPAY_BAR.name},{default:a(e=>[k(e.row.channelCodes,n(o).ALIPAY_BAR.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).ALIPAY_BAR.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).ALIPAY_BAR.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"])]),_:1}),l(p,{align:"center",label:"微信配置"},{default:a(()=>[l(p,{align:"center",label:n(o).WX_LITE.name},{default:a(e=>[k(e.row.channelCodes,n(o).WX_LITE.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).WX_LITE.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).WX_LITE.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"]),l(p,{align:"center",label:n(o).WX_PUB.name},{default:a(e=>[k(e.row.channelCodes,n(o).WX_PUB.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).WX_PUB.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).WX_PUB.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"]),l(p,{align:"center",label:n(o).WX_APP.name},{default:a(e=>[k(e.row.channelCodes,n(o).WX_APP.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).WX_APP.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).WX_APP.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"])]),_:1}),l(p,{align:"center",label:"模拟支付配置"},{default:a(()=>[l(p,{align:"center",label:n(o).MOCK.name},{default:a(e=>[k(e.row.channelCodes,n(o).MOCK.code)?(c(),r(i,{key:0,circle:"",type:"success",onClick:d=>_(e.row,n(o).MOCK.code)},{default:a(()=>[l(u,{icon:"ep:check"})]),_:2},1032,["onClick"])):(c(),r(i,{key:1,circle:"",type:"danger",onClick:d=>_(e.row,n(o).MOCK.code)},{default:a(()=>[l(u,{icon:"ep:close"})]),_:2},1032,["onClick"]))]),_:1},8,["label"])]),_:1}),l(p,{align:"center",fixed:"right",label:"操作","min-width":"110"},{default:a(e=>[v((c(),r(i,{link:"",type:"primary",onClick:d=>R("update",e.row.id)},{default:a(()=>t[9]||(t[9]=[A("编辑")])),_:2},1032,["onClick"])),[[I,["pay:app:update"]]]),v((c(),r(i,{link:"",type:"danger",onClick:d=>O(e.row.id)},{default:a(()=>t[10]||(t[10]=[A("删除")])),_:2},1032,["onClick"])),[[I,["pay:app:delete"]]])]),_:1})]),_:1},8,["data"])),[[ee,n(b)]]),l(Z,{limit:n(m).pageSize,"onUpdate:limit":t[4]||(t[4]=e=>n(m).pageSize=e),page:n(m).pageNo,"onUpdate:page":t[5]||(t[5]=e=>n(m).pageNo=e),total:n(L),onPagination:y},null,8,["limit","page","total"])]),_:1}),l(ue,{ref_key:"formRef",ref:x,onSuccess:y},null,512),l(_e,{ref_key:"alipayFormRef",ref:W,onSuccess:y},null,512),l(me,{ref_key:"weixinFormRef",ref:E,onSuccess:y},null,512),l(pe,{ref_key:"mockFormRef",ref:B,onSuccess:y},null,512)],64)}}});export{We as default};
