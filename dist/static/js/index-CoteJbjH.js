/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{d as X,u as Z,r as y,f as ee,b as le,g as s,h as ae,c as m,o as u,j as l,m as n,a,J as S,F as c,n as g,k as _,v as T,K as te,w as ne,t as f,i as k,c6 as oe,x as re,M as se,bY as ue}from"./index-BdmDrM2Y.js";import{_ as pe}from"./DictTag.vue_vue_type_script_lang-bjcRCBWf.js";import{_ as ie}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CIA3YA7G.js";import{e as de}from"./index-Bm5JJyH_.js";import{c as me}from"./index-DAvM7WNv.js";import{d as x,D as b}from"./dict-Cm-9nniQ.js";import"./color-B5phLuB-.js";const ce={class:"flex items-center"},_e={class:"mr-10px"},Ae=X({name:"TradeAfterSale",__name:"index",setup(fe){const{push:U}=Z(),D=y(!0),C=y(0),R=y([]),F=y([{label:"全部",value:"0"}]),P=y(),o=ee({pageNo:1,pageSize:10,no:null,status:"0",orderNo:null,spuName:null,createTime:[],way:null,type:null}),w=async()=>{D.value=!0;try{const r=ue(o);r.status==="0"&&delete r.status;const t=await de(r);R.value=t.list,C.value=t.total}finally{D.value=!1}},v=async()=>{o.pageNo=1,await w()},I=()=>{P.value?.resetFields(),v()},K=async r=>{o.status=r.paneName,await w()},B=r=>{U({name:"TradeAfterSaleDetail",params:{id:r}})},M=r=>{U({name:"TradeOrderDetail",params:{orderId:r}})},h=r=>{me({urlList:[r]})};return le(async()=>{await w();for(const r of x(b.TRADE_AFTER_SALE_STATUS))F.value.push({label:r.label,value:r.value})}),(r,t)=>{const N=s("el-input"),i=s("el-form-item"),V=s("el-option"),E=s("el-select"),q=s("el-date-picker"),Y=te,A=s("el-button"),z=s("el-form"),L=ie,O=s("el-tab-pane"),W=s("el-tabs"),p=s("el-table-column"),H=s("el-image"),Q=s("el-tag"),$=pe,j=s("el-table"),J=se,G=ae("loading");return u(),m(c,null,[l(L,null,{default:n(()=>[l(z,{ref_key:"queryFormRef",ref:P,inline:!0,"label-width":"68px",model:a(o)},{default:n(()=>[l(i,{label:"商品名称",prop:"spuName"},{default:n(()=>[l(N,{modelValue:a(o).spuName,"onUpdate:modelValue":t[0]||(t[0]=e=>a(o).spuName=e),class:"!w-280px",clearable:"",placeholder:"请输入商品 SPU 名称",onKeyup:S(v,["enter"])},null,8,["modelValue"])]),_:1}),l(i,{label:"退款编号",prop:"no"},{default:n(()=>[l(N,{modelValue:a(o).no,"onUpdate:modelValue":t[1]||(t[1]=e=>a(o).no=e),class:"!w-280px",clearable:"",placeholder:"请输入退款编号",onKeyup:S(v,["enter"])},null,8,["modelValue"])]),_:1}),l(i,{label:"订单编号",prop:"orderNo"},{default:n(()=>[l(N,{modelValue:a(o).orderNo,"onUpdate:modelValue":t[2]||(t[2]=e=>a(o).orderNo=e),class:"!w-280px",clearable:"",placeholder:"请输入订单编号",onKeyup:S(v,["enter"])},null,8,["modelValue"])]),_:1}),l(i,{label:"售后状态",prop:"status"},{default:n(()=>[l(E,{modelValue:a(o).status,"onUpdate:modelValue":t[3]||(t[3]=e=>a(o).status=e),class:"!w-280px",clearable:"",placeholder:"请选择售后状态"},{default:n(()=>[l(V,{label:"全部",value:"0"}),(u(!0),m(c,null,g(a(x)(a(b).TRADE_AFTER_SALE_STATUS),e=>(u(),_(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"售后方式",prop:"way"},{default:n(()=>[l(E,{modelValue:a(o).way,"onUpdate:modelValue":t[4]||(t[4]=e=>a(o).way=e),class:"!w-280px",clearable:"",placeholder:"请选择售后方式"},{default:n(()=>[(u(!0),m(c,null,g(a(x)(a(b).TRADE_AFTER_SALE_WAY),e=>(u(),_(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"售后类型",prop:"type"},{default:n(()=>[l(E,{modelValue:a(o).type,"onUpdate:modelValue":t[5]||(t[5]=e=>a(o).type=e),class:"!w-280px",clearable:"",placeholder:"请选择售后类型"},{default:n(()=>[(u(!0),m(c,null,g(a(x)(a(b).TRADE_AFTER_SALE_TYPE),e=>(u(),_(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"创建时间",prop:"createTime"},{default:n(()=>[l(q,{modelValue:a(o).createTime,"onUpdate:modelValue":t[6]||(t[6]=e=>a(o).createTime=e),class:"!w-260px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"自定义时间","start-placeholder":"自定义时间",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),l(i,null,{default:n(()=>[l(A,{onClick:v},{default:n(()=>[l(Y,{class:"mr-5px",icon:"ep:search"}),t[10]||(t[10]=T(" 搜索 "))]),_:1}),l(A,{onClick:I},{default:n(()=>[l(Y,{class:"mr-5px",icon:"ep:refresh"}),t[11]||(t[11]=T(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(L,null,{default:n(()=>[l(W,{modelValue:a(o).status,"onUpdate:modelValue":t[7]||(t[7]=e=>a(o).status=e),onTabClick:K},{default:n(()=>[(u(!0),m(c,null,g(a(F),e=>(u(),_(O,{key:e.label,label:e.label,name:e.value},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),ne((u(),_(j,{data:a(R)},{default:n(()=>[l(p,{align:"center",label:"退款编号","min-width":"200",prop:"no"}),l(p,{align:"center",label:"订单编号","min-width":"200",prop:"orderNo"},{default:n(({row:e})=>[l(A,{link:"",type:"primary",onClick:d=>M(e.orderId)},{default:n(()=>[T(f(e.orderNo),1)]),_:2},1032,["onClick"])]),_:1}),l(p,{label:"商品信息","min-width":"600",prop:"spuName"},{default:n(({row:e})=>[k("div",ce,[l(H,{class:"mr-10px h-30px w-30px",src:e.picUrl,onClick:d=>h(e.picUrl)},null,8,["src","onClick"]),k("span",_e,f(e.spuName),1),(u(!0),m(c,null,g(e.properties,d=>(u(),_(Q,{key:d.propertyId,class:"mr-10px"},{default:n(()=>[T(f(d.propertyName)+": "+f(d.valueName),1)]),_:2},1024))),128))])]),_:1}),l(p,{align:"center",label:"订单金额",prop:"refundPrice"},{default:n(e=>[k("span",null,f(a(oe)(e.row.refundPrice))+" 元",1)]),_:1}),l(p,{align:"center",label:"买家",prop:"user.nickname"}),l(p,{align:"center",label:"申请时间",prop:"createTime",width:"180"},{default:n(e=>[k("span",null,f(a(re)(e.row.createTime)),1)]),_:1}),l(p,{align:"center",label:"售后状态",width:"100"},{default:n(e=>[l($,{type:a(b).TRADE_AFTER_SALE_STATUS,value:e.row.status},null,8,["type","value"])]),_:1}),l(p,{align:"center",label:"售后方式"},{default:n(e=>[l($,{type:a(b).TRADE_AFTER_SALE_WAY,value:e.row.way},null,8,["type","value"])]),_:1}),l(p,{align:"center",fixed:"right",label:"操作",width:"160"},{default:n(({row:e})=>[l(A,{link:"",type:"primary",onClick:d=>B(e.id)},{default:n(()=>t[12]||(t[12]=[T("处理退款")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,a(D)]]),l(J,{limit:a(o).pageSize,"onUpdate:limit":t[8]||(t[8]=e=>a(o).pageSize=e),page:a(o).pageNo,"onUpdate:page":t[9]||(t[9]=e=>a(o).pageNo=e),total:a(C),onPagination:w},null,8,["limit","page","total"])]),_:1})],64)}}});export{Ae as default};
