/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as N,aA as _,dh as R,O as T,r as h,Y as $,g as v,c as i,o as s,F as S,i as u,j as t,k as L,l as D,n as E,m as b,w as F,$ as I,K as U,a as g,bJ as V,A as j}from"./index-5TqN_QR1.js";import{b as q}from"./spu-BZrcAj3N.js";import{_ as J}from"./SpuTableSelect.vue_vue_type_script_setup_true_lang-4cQd-I5B.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-fpmIiri3.js";import"./tree-vSlcEeQq.js";import"./category-BwdC4E8L.js";const K={class:"flex flex-wrap items-center gap-8px"},M={class:"relative h-full w-full"},O=N({name:"SpuShowcase",__name:"SpuShowcase",props:{modelValue:R([Number,Array]).isRequired,limit:_.number.def(Number.MAX_VALUE),disabled:_.bool.def(!1)},emits:["update:modelValue","change"],setup(n,{emit:w}){const a=n,k=T(()=>a.disabled?!1:a.limit?l.value.length<a.limit:!0),l=h([]);$(()=>a.modelValue,async()=>{const e=V(a.modelValue)?a.modelValue:a.modelValue?[a.modelValue]:[];if(e.length===0){l.value=[];return}(l.value.length===0||l.value.some(d=>!e.includes(d.id)))&&(l.value=await q(e))},{immediate:!0});const r=h(),x=()=>{r.value.open(l.value)},C=e=>{l.value=V(e)?e:[e],m()},y=e=>{l.value.splice(e,1),m()},o=w,m=()=>{if(a.limit===1){const e=l.value.length>0?l.value[0]:null;o("update:modelValue",e?.id||0),o("change",e)}else o("update:modelValue",l.value.map(e=>e.id)),o("change",l.value)};return(e,d)=>{const A=v("el-image"),p=U,f=v("el-tooltip");return s(),i(S,null,[u("div",K,[(s(!0),i(S,null,E(g(l),(c,B)=>(s(),i("div",{key:c.id,class:"select-box spu-pic"},[t(f,{content:c.name},{default:b(()=>[u("div",M,[t(A,{class:"h-full w-full",src:c.picUrl},null,8,["src"]),F(t(p,{class:"del-icon",icon:"ep:circle-close-filled",onClick:X=>y(B)},null,8,["onClick"]),[[I,!n.disabled]])])]),_:2},1032,["content"])]))),128)),g(k)?(s(),L(f,{key:0,content:"选择商品"},{default:b(()=>[u("div",{class:"select-box",onClick:x},[t(p,{icon:"ep:plus"})])]),_:1})):D("",!0)]),t(J,{ref_key:"spuTableSelectRef",ref:r,multiple:n.limit!=1,onChange:C},null,8,["multiple"])],64)}}}),W=j(O,[["__scopeId","data-v-05b9d23c"]]);export{W as default};
