/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{d as D,by as M,O as S,r as v,f as E,g as u,c as L,o as y,j as o,m as n,a,k as N,l as R,v as b,K as j,y as z,z as O,A as W}from"./index-BW9ifGp0.js";import{_ as H}from"./main.vue_vue_type_script_setup_true_lang-PkHWekHU.js";import{W as K}from"./main-BhgkI9vm.js";import{u as P,U as q}from"./useUpload-BGl72F0U.js";import"./main-BfKBHo14.js";import"./main-CK_1MZ9A.js";import"./index-CbkmbD5O.js";import"./index-o23WMxSp.js";const F=D({__name:"TabVideo",props:{modelValue:{}},emits:["update:modelValue"],setup(g,{emit:U}){const k=O(),x="undefined/admin-api/mp/material/upload-temporary",I={Authorization:`Bearer ${M()}`},w=g,$=U,t=S({get:()=>w.modelValue,set:e=>$("update:modelValue",e)}),d=v(!1),p=v([]),i=E({accountId:t.value.accountId,type:"video",title:"",introduction:""}),A=e=>P(q.Video,10)(e),B=e=>{if(e.code!==0)return k.error(`上传出错：${e.msg}`),!1;p.value=[],i.title="",i.introduction="",m(e.data)},m=e=>{d.value=!1,t.value.mediaId=e.mediaId,t.value.url=e.url,t.value.name=e.name,e.title&&(t.value.title=e.title||""),e.introduction&&(t.value.description=e.introduction||"")};return(e,l)=>{const f=u("el-input"),r=u("el-row"),_=j,V=u("el-button"),C=u("el-dialog"),c=u("el-col"),T=u("el-upload");return y(),L("div",null,[o(r,null,{default:n(()=>[o(f,{modelValue:a(t).title,"onUpdate:modelValue":l[0]||(l[0]=s=>a(t).title=s),class:"input-margin-bottom",placeholder:"请输入标题"},null,8,["modelValue"]),o(f,{modelValue:a(t).description,"onUpdate:modelValue":l[1]||(l[1]=s=>a(t).description=s),class:"input-margin-bottom",placeholder:"请输入描述"},null,8,["modelValue"]),o(r,{class:"ope-row",justify:"center"},{default:n(()=>[a(t).url?(y(),N(a(H),{key:0,url:a(t).url},null,8,["url"])):R("",!0)]),_:1}),o(c,null,{default:n(()=>[o(r,{align:"middle",style:{"text-align":"center"}},{default:n(()=>[o(c,{span:12},{default:n(()=>[o(V,{type:"success",onClick:l[2]||(l[2]=s=>d.value=!0)},{default:n(()=>[l[4]||(l[4]=b(" 素材库选择 ")),o(_,{icon:"ep:circle-check"})]),_:1}),o(C,{modelValue:a(d),"onUpdate:modelValue":l[3]||(l[3]=s=>z(d)?d.value=s:null),"append-to-body":"","destroy-on-close":"",title:"选择视频",width:"90%"},{default:n(()=>[o(a(K),{"account-id":a(t).accountId,type:"video",onSelectMaterial:m},null,8,["account-id"])]),_:1},8,["modelValue"])]),_:1}),o(c,{span:12},{default:n(()=>[o(T,{action:x,"before-upload":A,data:a(i),"file-list":a(p),headers:I,limit:1,multiple:"","on-success":B},{default:n(()=>[o(V,{type:"primary"},{default:n(()=>[l[5]||(l[5]=b(" 新建视频 ")),o(_,{icon:"ep:upload"})]),_:1})]),_:1},8,["data","file-list"])]),_:1})]),_:1})]),_:1})]),_:1})])}}}),oe=W(F,[["__scopeId","data-v-237bb5be"]]);export{oe as default};
