/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{d as B,r as p,f as D,g as r,h as v,c as i,o as c,j as e,m as l,a as t,w as d,F as h,n as M,k as j,K as q,Z as A,M as L,z as U,N as W,A as E}from"./index-BW9ifGp0.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-58zNwBTb.js";import{_ as R}from"./index-hVfLpCoZ.js";import{g as V,d as Z}from"./index-o23WMxSp.js";import{_ as G}from"./main.vue_vue_type_script_setup_true_lang-CTcNI6Uc.js";import H from"./main-BfKBHo14.js";import"./index-BL7mIi5o.js";const J={class:"waterfall"},O=B({name:"MpFreePublish",__name:"index",setup(Q){const u=U(),{t:I}=W(),_=p(!0),f=p(0),g=p([]),o=D({pageNo:1,pageSize:10,accountId:-1}),y=a=>{o.accountId=a,o.pageNo=1,m()},m=async()=>{try{_.value=!0;const a=await V(o);g.value=a.list,f.value=a.total}finally{_.value=!1}},b=async a=>{try{await u.delConfirm("删除后用户将无法访问此页面，确定删除？"),await Z(o.accountId,a.articleId),u.success(I("common.delSuccess")),await m()}catch(s){console.log(s)}};return(a,s)=>{const x=R,C=r("el-form-item"),P=r("el-form"),w=K,k=q,N=r("el-button"),F=r("el-row"),S=L,$=v("hasPermi"),z=v("loading");return c(),i(h,null,[e(x,{title:"公众号图文",url:"https://doc.iocoder.cn/mp/article/"}),e(w,null,{default:l(()=>[e(P,{ref:"queryFormRef",class:"-mb-15px",inline:!0,"label-width":"68px",model:t(o)},{default:l(()=>[e(C,{label:"公众号",prop:"accountId"},{default:l(()=>[e(t(G),{onChange:y})]),_:1})]),_:1},8,["model"])]),_:1}),e(w,null,{default:l(()=>[d((c(),i("div",J,[(c(!0),i(h,null,M(t(g),n=>d((c(),i("div",{key:n.articleId,class:"waterfall-item"},[e(t(H),{articles:n.content.newsItem},null,8,["articles"]),e(F,{class:"ope-row",justify:"center"},{default:l(()=>[d((c(),j(N,{circle:"",type:"danger",onClick:T=>b(n)},{default:l(()=>[e(k,{icon:"ep:delete"})]),_:2},1032,["onClick"])),[[$,["mp:free-publish:delete"]]])]),_:2},1024)])),[[A,n.content&&n.content.newsItem]])),128))])),[[z,t(_)]]),e(S,{limit:t(o).pageSize,"onUpdate:limit":s[0]||(s[0]=n=>t(o).pageSize=n),page:t(o).pageNo,"onUpdate:page":s[1]||(s[1]=n=>t(o).pageNo=n),total:t(f),onPagination:m},null,8,["limit","page","total"])]),_:1})],64)}}}),se=E(O,[["__scopeId","data-v-f9edf5f4"]]);export{se as default};
