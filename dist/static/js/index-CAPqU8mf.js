/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{_ as S}from"./ContentWrap.vue_vue_type_script_setup_true_lang-fpmIiri3.js";import{V as T,d as $,r as p,O as B,f as I,b as j,g as s,h as q,k as b,o as g,m as l,w as V,a as n,j as t,$ as F,v as d,y as L,z as O,N as W}from"./index-5TqN_QR1.js";const A=async()=>await T.get({url:"/member/config/get"}),H=async v=>await T.put({url:"/member/config/save",data:v}),Q=$({name:"MemberConfig",__name:"index",setup(v){const{t:w}=W(),y=O(),D=p(!1),m=p(!1),o=p({id:void 0,pointTradeDeductEnable:!0,pointTradeDeductUnitPrice:0,pointTradeDeductMaxPrice:0,pointTradeGivePoint:0}),c=B({get:()=>(o.value.pointTradeDeductUnitPrice/100).toFixed(2),set:i=>{o.value.pointTradeDeductUnitPrice=Math.round(i*100)}}),P=I({}),f=p(),x=async()=>{if(!(!f||!await f.value.validate())){m.value=!0;try{const e=o.value;await H(e),y.success(w("common.updateSuccess")),D.value=!1}finally{m.value=!1}}},U=async()=>{try{const i=await A();if(i===null)return;o.value=i}catch(i){cosnole.log(i)}};return j(()=>{U()}),(i,e)=>{const C=s("el-input"),u=s("el-form-item"),M=s("el-switch"),r=s("el-text"),_=s("el-input-number"),k=s("el-tab-pane"),z=s("el-tabs"),E=s("el-button"),G=s("el-form"),R=S,N=q("loading");return g(),b(R,null,{default:l(()=>[V((g(),b(G,{ref_key:"formRef",ref:f,"label-width":"120px",model:n(o),rules:n(P)},{default:l(()=>[V(t(u,{label:"hideId"},{default:l(()=>[t(C,{modelValue:n(o).id,"onUpdate:modelValue":e[0]||(e[0]=a=>n(o).id=a)},null,8,["modelValue"])]),_:1},512),[[F,!1]]),t(z,null,{default:l(()=>[t(k,{label:"积分"},{default:l(()=>[t(u,{label:"积分抵扣",prop:"pointTradeDeductEnable"},{default:l(()=>[t(M,{modelValue:n(o).pointTradeDeductEnable,"onUpdate:modelValue":e[1]||(e[1]=a=>n(o).pointTradeDeductEnable=a),style:{"user-select":"none"}},null,8,["modelValue"]),t(r,{class:"w-full",size:"small",type:"info"},{default:l(()=>e[5]||(e[5]=[d("下单积分是否抵用订单金额")])),_:1})]),_:1}),t(u,{label:"积分抵扣",prop:"pointTradeDeductUnitPrice"},{default:l(()=>[t(_,{modelValue:n(c),"onUpdate:modelValue":e[2]||(e[2]=a=>L(c)?c.value=a:null),placeholder:"请输入积分抵扣金额",precision:2},null,8,["modelValue"]),t(r,{class:"w-full",size:"small",type:"info"},{default:l(()=>e[6]||(e[6]=[d("积分抵用比例(1 积分抵多少金额)，单位：元")])),_:1})]),_:1}),t(u,{label:"积分抵扣最大值",prop:"pointTradeDeductMaxPrice"},{default:l(()=>[t(_,{modelValue:n(o).pointTradeDeductMaxPrice,"onUpdate:modelValue":e[3]||(e[3]=a=>n(o).pointTradeDeductMaxPrice=a),placeholder:"请输入积分抵扣最大值"},null,8,["modelValue"]),t(r,{class:"w-full",size:"small",type:"info"},{default:l(()=>e[7]||(e[7]=[d("单次下单积分使用上限，0 不限制")])),_:1})]),_:1}),t(u,{label:"1 元赠送多少分",prop:"pointTradeGivePoint"},{default:l(()=>[t(_,{modelValue:n(o).pointTradeGivePoint,"onUpdate:modelValue":e[4]||(e[4]=a=>n(o).pointTradeGivePoint=a),placeholder:"请输入 1 元赠送多少积分"},null,8,["modelValue"]),t(r,{class:"w-full",size:"small",type:"info"},{default:l(()=>e[8]||(e[8]=[d("下单支付金额按比例赠送积分（实际支付 1 元赠送多少积分）")])),_:1})]),_:1})]),_:1})]),_:1}),t(u,null,{default:l(()=>[t(E,{type:"primary",onClick:x},{default:l(()=>e[9]||(e[9]=[d("保存")])),_:1})]),_:1})]),_:1},8,["model","rules"])),[[N,n(m)]])]),_:1})}}});export{Q as default};
