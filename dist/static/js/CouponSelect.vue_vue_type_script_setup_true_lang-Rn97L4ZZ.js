/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{d as j,r as u,f as W,g as s,h,k as g,o as i,m as o,j as e,a as t,c as D,F as x,n as U,v as _,K as G,w as J,t as X,L as Z,M as ee,y as te,_ as le}from"./index-DMg0mq0e.js";import{_ as ae}from"./DictTag.vue_vue_type_script_lang-sQcOd7JH.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DPMk4m5L.js";import{g as ne}from"./couponTemplate-lgHupTRH.js";import{c as F,D as m}from"./dict-BEquckDR.js";import{d as re,v as se,r as ue,t as pe}from"./formatter-DKrGX0p5.js";const ve=j({name:"CouponSelect",__name:"CouponSelect",props:{multipleSelection:{}},emits:["update:multipleSelection"],setup(ie,{expose:M,emit:I}){const R=I,p=u(!1),Y=u("选择优惠卷"),E=u(!1),v=u(!0),T=u(0),C=u([]),n=W({pageNo:1,pageSize:10,name:null,status:null,discountType:null,type:null,createTime:[]}),w=u(),O=async()=>{v.value=!0;try{const d=await ne(n);C.value=d.list,T.value=d.total}finally{v.value=!1}},b=()=>{n.pageNo=1,O()},S=()=>{w?.value?.resetFields(),b()};M({open:async()=>{p.value=!0,S()}});const L=d=>{R("update:multipleSelection",d)},$=()=>{p.value=!1};return(d,a)=>{const q=s("el-input"),c=s("el-form-item"),V=s("el-option"),k=s("el-select"),z=s("el-date-picker"),N=G,f=s("el-button"),A=s("el-form"),P=oe,r=s("el-table-column"),y=ae,B=s("el-table"),K=ee,H=le,Q=h("loading");return i(),g(H,{modelValue:t(p),"onUpdate:modelValue":a[7]||(a[7]=l=>te(p)?p.value=l:null),title:t(Y),width:"65%"},{footer:o(()=>[e(f,{disabled:t(E),type:"primary",onClick:$},{default:o(()=>a[10]||(a[10]=[_("确 定")])),_:1},8,["disabled"]),e(f,{onClick:a[6]||(a[6]=l=>p.value=!1)},{default:o(()=>a[11]||(a[11]=[_("取 消")])),_:1})]),default:o(()=>[e(P,null,{default:o(()=>[e(A,{ref_key:"queryFormRef",ref:w,class:"-mb-15px",inline:!0,"label-width":"82px",model:t(n)},{default:o(()=>[e(c,{label:"优惠券名称",prop:"name"},{default:o(()=>[e(q,{modelValue:t(n).name,"onUpdate:modelValue":a[0]||(a[0]=l=>t(n).name=l),class:"!w-240px",clearable:"",placeholder:"请输入优惠劵名",onKeyup:b},null,8,["modelValue"])]),_:1}),e(c,{label:"优惠类型",prop:"discountType"},{default:o(()=>[e(k,{modelValue:t(n).discountType,"onUpdate:modelValue":a[1]||(a[1]=l=>t(n).discountType=l),class:"!w-240px",clearable:"",placeholder:"请选择优惠券类型"},{default:o(()=>[(i(!0),D(x,null,U(t(F)(t(m).PROMOTION_DISCOUNT_TYPE),l=>(i(),g(V,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"优惠券状态",prop:"status"},{default:o(()=>[e(k,{modelValue:t(n).status,"onUpdate:modelValue":a[2]||(a[2]=l=>t(n).status=l),class:"!w-240px",clearable:"",placeholder:"请选择优惠券状态"},{default:o(()=>[(i(!0),D(x,null,U(t(F)(t(m).COMMON_STATUS),l=>(i(),g(V,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"创建时间",prop:"createTime"},{default:o(()=>[e(z,{modelValue:t(n).createTime,"onUpdate:modelValue":a[3]||(a[3]=l=>t(n).createTime=l),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(c,null,{default:o(()=>[e(f,{onClick:b},{default:o(()=>[e(N,{class:"mr-5px",icon:"ep:search"}),a[8]||(a[8]=_(" 搜索 "))]),_:1}),e(f,{onClick:S},{default:o(()=>[e(N,{class:"mr-5px",icon:"ep:refresh"}),a[9]||(a[9]=_(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,null,{default:o(()=>[J((i(),g(B,{data:t(C),onSelectionChange:L},{default:o(()=>[e(r,{type:"selection",width:"55"}),e(r,{label:"优惠券名称","min-width":"140",prop:"name"}),e(r,{label:"类型","min-width":"80",prop:"productScope"},{default:o(l=>[e(y,{type:t(m).PROMOTION_PRODUCT_SCOPE,value:l.row.productScope},null,8,["type","value"])]),_:1}),e(r,{label:"优惠","min-width":"100",prop:"discount"},{default:o(l=>[e(y,{type:t(m).PROMOTION_DISCOUNT_TYPE,value:l.row.discountType},null,8,["type","value"]),_(" "+X(t(re)(l.row)),1)]),_:1}),e(r,{label:"领取方式","min-width":"100",prop:"takeType"},{default:o(l=>[e(y,{type:t(m).PROMOTION_COUPON_TAKE_TYPE,value:l.row.takeType},null,8,["type","value"])]),_:1}),e(r,{align:"center",formatter:t(se),label:"使用时间",prop:"validityType",width:"185"},null,8,["formatter"]),e(r,{align:"center",label:"发放数量",prop:"totalCount"}),e(r,{align:"center",formatter:t(ue),label:"剩余数量",prop:"totalCount"},null,8,["formatter"]),e(r,{align:"center",formatter:t(pe),label:"领取上限",prop:"takeLimitCount"},null,8,["formatter"]),e(r,{align:"center",label:"状态",prop:"status"},{default:o(l=>[e(y,{type:t(m).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",formatter:t(Z),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"])]),_:1},8,["data"])),[[Q,t(v)]]),e(K,{limit:t(n).pageSize,"onUpdate:limit":a[4]||(a[4]=l=>t(n).pageSize=l),page:t(n).pageNo,"onUpdate:page":a[5]||(a[5]=l=>t(n).pageNo=l),total:t(T),onPagination:O},null,8,["limit","page","total"])]),_:1})]),_:1},8,["modelValue","title"])}}});export{ve as _};
