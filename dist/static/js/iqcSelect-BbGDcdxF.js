/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{d as W,r as s,f as A,b as J,g as d,h as X,k as U,o as D,m as r,j as e,w as G,a as o,J as v,v as f,K as Z,y as w,t as ee,L as C,M as le,i as te,_ as ae,X as oe,z as ne,N as re}from"./index-D3S9e4gi.js";import{_ as ie}from"./DictTag.vue_vue_type_script_lang-DqsMypuM.js";import{D as se}from"./dict-D5UmY5m8.js";import{g as pe}from"./index-Bv-Gj6jf.js";import"./color-B5phLuB-.js";const de={class:"dialog-footer"},ve=W({name:"Oqc",__name:"iqcSelect",emits:["onSelected"],setup(ue,{expose:S,emit:T}){const M=ne(),{t:h}=re(),y=s(!0),q=s([]),V=s(0),n=A({pageNo:1,pageSize:10,iqcCode:void 0,iqcName:void 0,itemCode:void 0,itemName:void 0,createTime:[]}),x=s();s(!1);const g=async()=>{y.value=!0;try{const p=await pe(n);q.value=p.list,V.value=p.total}finally{y.value=!1}},u=()=>{n.pageNo=1,g()},P=()=>{x.value.resetFields(),u()};s();const F=s({}),K=p=>{F.value=p,console.log(p)};J(()=>{console.log("onMounted,,,src/views/oqc/oqc/index.vue"),g()}),s();let i=s(!1);S({showFlag:()=>{i.value=!0,oe(()=>{g(),getWorkshops(),getProcess()})}});const c=s(),N=s([]),B=p=>{p&&(N.value=p)},I=T,Q=()=>{if(c.value==null||c.value==0){M.warning(h("请至少选择一条数据!"));return}I("onSelected",N.value),i.value=!1};return(p,l)=>{const b=d("el-input"),m=d("el-form-item"),Y=d("el-date-picker"),k=Z,_=d("el-button"),j=d("el-form"),z=d("el-radio"),t=d("el-table-column"),E=ie,$=d("el-table"),L=le,O=ae,H=X("loading");return D(),U(O,{title:"来料检验单选择",modelValue:o(i),"onUpdate:modelValue":l[9]||(l[9]=a=>w(i)?i.value=a:i=a),visible:o(i),"onUpdate:visible":l[10]||(l[10]=a=>w(i)?i.value=a:i=a),modal:!1,width:"80%",center:""},{footer:r(()=>[te("div",de,[e(_,{type:"primary",onClick:Q},{default:r(()=>l[14]||(l[14]=[f("确 定")])),_:1}),e(_,{onClick:l[8]||(l[8]=a=>w(i)?i.value=!1:i=!1)},{default:r(()=>l[15]||(l[15]=[f("取 消")])),_:1})])]),default:r(()=>[e(j,{class:"-mb-15px",model:o(n),ref_key:"queryFormRef",ref:x,inline:!0,"label-width":"110px"},{default:r(()=>[e(m,{label:"来料检验单编号",prop:"iqcCode"},{default:r(()=>[e(b,{modelValue:o(n).iqcCode,"onUpdate:modelValue":l[0]||(l[0]=a=>o(n).iqcCode=a),placeholder:"请输入来料检验单编号",clearable:"",onKeyup:v(u,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(m,{label:"来料检验单名称",prop:"iqcName"},{default:r(()=>[e(b,{modelValue:o(n).iqcName,"onUpdate:modelValue":l[1]||(l[1]=a=>o(n).iqcName=a),placeholder:"请输入来料检验单名称",clearable:"",onKeyup:v(u,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(m,{label:"产品物料编码",prop:"itemCode"},{default:r(()=>[e(b,{modelValue:o(n).itemCode,"onUpdate:modelValue":l[2]||(l[2]=a=>o(n).itemCode=a),placeholder:"请输入产品物料编码",clearable:"",onKeyup:v(u,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(m,{label:"产品物料名称",prop:"itemName"},{default:r(()=>[e(b,{modelValue:o(n).itemName,"onUpdate:modelValue":l[3]||(l[3]=a=>o(n).itemName=a),placeholder:"请输入产品物料名称",clearable:"",onKeyup:v(u,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(m,{label:"创建时间",prop:"createTime"},{default:r(()=>[e(Y,{modelValue:o(n).createTime,"onUpdate:modelValue":l[4]||(l[4]=a=>o(n).createTime=a),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(m,null,{default:r(()=>[e(_,{onClick:u},{default:r(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),l[11]||(l[11]=f(" 搜索 "))]),_:1}),e(_,{onClick:P},{default:r(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),l[12]||(l[12]=f(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"]),G((D(),U($,{data:o(q),stripe:!0,"show-overflow-tooltip":!0,"highlight-current-row":"",onCurrentChange:K},{default:r(()=>[e(t,{width:"55",align:"center"},{default:r(a=>[e(z,{modelValue:o(c),"onUpdate:modelValue":l[5]||(l[5]=R=>w(c)?c.value=R:null),label:a.row.id,onChange:R=>B(a.row)},{default:r(()=>l[13]||(l[13]=[f(ee(""))])),_:2},1032,["modelValue","label","onChange"])]),_:1}),e(t,{label:"来料检验单编号",align:"center",prop:"iqcCode",width:"150"}),e(t,{label:"来料检验单名称",align:"center",prop:"iqcName",width:"150"}),e(t,{label:"单据状态",align:"center",prop:"status"},{default:r(a=>[e(E,{type:o(se).BPM_PROCESS_INSTANCE_RESULT,value:a.row.status},null,8,["type","value"])]),_:1}),e(t,{label:"供应商编码",align:"center",prop:"vendorCode"}),e(t,{label:"供应商名称",align:"center",prop:"vendorName"}),e(t,{label:"供应商批次号",align:"center",prop:"vendorBatch"}),e(t,{label:"产品物料编码",align:"center",prop:"itemCode"}),e(t,{label:"产品物料名称",align:"center",prop:"itemName"}),e(t,{label:"规格型号",align:"center",prop:"specification"}),e(t,{label:"单位",align:"center",prop:"unitOfMeasure"}),e(t,{label:"最低检测数",align:"center",prop:"quantityMinCheck"}),e(t,{label:"最大不合格数",align:"center",prop:"quantityMaxUnqualified"}),e(t,{label:"本次接收数量",align:"center",prop:"quantityRecived"}),e(t,{label:"本次检测数量",align:"center",prop:"quantityCheck"}),e(t,{label:"不合格数",align:"center",prop:"quantityUnqualified"}),e(t,{label:"致命缺陷率",align:"center",prop:"crRate"}),e(t,{label:"严重缺陷率",align:"center",prop:"majRate"}),e(t,{label:"轻微缺陷率",align:"center",prop:"minRate"}),e(t,{label:"致命缺陷数量",align:"center",prop:"crQuantity"}),e(t,{label:"严重缺陷数量",align:"center",prop:"majQuantity"}),e(t,{label:"轻微缺陷数量",align:"center",prop:"minQuantity"}),e(t,{label:"检测结果",align:"center",prop:"checkResult"}),e(t,{label:"来料日期",align:"center",prop:"reciveDate",formatter:o(C),width:"180px"},null,8,["formatter"]),e(t,{label:"检测日期",align:"center",prop:"inspectDate",formatter:o(C),width:"180px"},null,8,["formatter"]),e(t,{label:"检测人员",align:"center",prop:"inspector"}),e(t,{label:"备注",align:"center",prop:"remark"}),e(t,{label:"创建时间",align:"center",prop:"createTime",formatter:o(C),width:"180px"},null,8,["formatter"])]),_:1},8,["data"])),[[H,o(y)]]),e(L,{total:o(V),page:o(n).pageNo,"onUpdate:page":l[6]||(l[6]=a=>o(n).pageNo=a),limit:o(n).pageSize,"onUpdate:limit":l[7]||(l[7]=a=>o(n).pageSize=a),onPagination:g,style:{float:"none","justify-content":"flex-end"}},null,8,["total","page","limit"])]),_:1},8,["modelValue","visible"])}}});export{ve as default};
