/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{_ as q}from"./Descriptions-5F4moFrt.js";import{_ as M}from"./DictTag.vue_vue_type_script_lang-sQcOd7JH.js";import{_ as P}from"./ActivityOrdersSort.vue_vue_type_script_setup_true_lang-Cqc1fmG5.js";import{o as J}from"./spu.data-CXzFn5mA.js";import{d as K,az as I,r as f,f as Q,Y as W,g as s,c as S,o as i,k as T,l as V,a,m as o,j as t,y as X,F as h,n as k,z as Z,v as F,t as R,c1 as ee}from"./index-DMg0mq0e.js";import{D as _}from"./dict-BEquckDR.js";import{u as te}from"./useCrudSchemas-CGb8S5Zu.js";import{r as w}from"./formRules-B7VVnYvt.js";const ce=K({name:"OtherSettingsForm",__name:"OtherSettingsForm",props:{propFormData:{type:Object,default:()=>{}},activeName:I.string.def(""),isDetail:I.bool.def(!1)},emits:["update:activeName"],setup(v,{expose:x,emit:D}){const G=Z(),{allSchemas:A}=te(J),B=v,y=f([{dictType:"promotionTypes",label:"秒杀",value:1,colorType:"warning",cssClass:""},{dictType:"promotionTypes",label:"砍价",value:2,colorType:"warning",cssClass:""},{dictType:"promotionTypes",label:"拼团",value:3,colorType:"warning",cssClass:""}]),g=f(),l=f({sort:1,giveIntegral:1,virtualSalesCount:1,recommendHot:!1,recommendBenefit:!1,recommendBest:!1,recommendNew:!1,recommendGood:!1,activityOrders:[]}),E=Q({sort:[w],giveIntegral:[w],virtualSalesCount:[w]}),N=[{name:"是否热卖",value:"recommendHot"},{name:"是否优惠",value:"recommendBenefit"},{name:"是否精品",value:"recommendBest"},{name:"是否新品",value:"recommendNew"},{name:"是否优品",value:"recommendGood"}],m=f([]),L=()=>{N.forEach(({value:r})=>{l.value[r]=m.value.includes(r)})};W(()=>B.propFormData,r=>{r&&(ee(l.value,r),N.forEach(({value:n})=>{l.value[n]&&!m.value.includes(n)&&m.value.push(n)}))},{immediate:!0});const U=D;return x({validate:async()=>{if(g)return await a(g).validate(r=>{if(r)Object.assign(B.propFormData,l.value);else throw G.warning("商品其他设置未完善！！"),U("update:activeName","otherSettings"),new Error("商品其他设置未完善！！")})}}),(r,n)=>{const b=s("el-input-number"),c=s("el-form-item"),u=s("el-col"),C=s("el-row"),H=s("el-checkbox"),j=s("el-checkbox-group"),z=s("el-form"),d=M,Y=s("el-tag"),$=q;return i(),S(h,null,[v.isDetail?V("",!0):(i(),T(z,{key:0,ref_key:"otherSettingsFormRef",ref:g,"label-width":"120px",model:a(l),rules:a(E)},{default:o(()=>[t(C,null,{default:o(()=>[t(u,{span:24},{default:o(()=>[t(C,{gutter:20},{default:o(()=>[t(u,{span:8},{default:o(()=>[t(c,{label:"商品排序",prop:"sort"},{default:o(()=>[t(b,{modelValue:a(l).sort,"onUpdate:modelValue":n[0]||(n[0]=e=>a(l).sort=e),min:0},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:8},{default:o(()=>[t(c,{label:"赠送积分",prop:"giveIntegral"},{default:o(()=>[t(b,{modelValue:a(l).giveIntegral,"onUpdate:modelValue":n[1]||(n[1]=e=>a(l).giveIntegral=e),min:0},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:8},{default:o(()=>[t(c,{label:"虚拟销量",prop:"virtualSalesCount"},{default:o(()=>[t(b,{modelValue:a(l).virtualSalesCount,"onUpdate:modelValue":n[2]||(n[2]=e=>a(l).virtualSalesCount=e),min:0,placeholder:"请输入虚拟销量"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(u,{span:24},{default:o(()=>[t(c,{label:"商品推荐"},{default:o(()=>[t(j,{modelValue:a(m),"onUpdate:modelValue":n[3]||(n[3]=e=>X(m)?m.value=e:null),onChange:L},{default:o(()=>[(i(),S(h,null,k(N,(e,p)=>t(H,{key:p,label:e.value},{default:o(()=>[F(R(e.name),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(u,{span:24},{default:o(()=>[t(c,{label:"活动优先级"},{default:o(()=>[t(P,{"activity-orders":a(l).activityOrders,"onUpdate:activityOrders":n[4]||(n[4]=e=>a(l).activityOrders=e),"promotion-types":a(y)},null,8,["activity-orders","promotion-types"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),v.isDetail?(i(),T($,{key:1,data:a(l),schema:a(A).detailSchema},{recommendHot:o(({row:e})=>[t(d,{type:a(_).INFRA_BOOLEAN_STRING,value:e.recommendHot},null,8,["type","value"])]),recommendBenefit:o(({row:e})=>[t(d,{type:a(_).INFRA_BOOLEAN_STRING,value:e.recommendBenefit},null,8,["type","value"])]),recommendBest:o(({row:e})=>[t(d,{type:a(_).INFRA_BOOLEAN_STRING,value:e.recommendBest},null,8,["type","value"])]),recommendNew:o(({row:e})=>[t(d,{type:a(_).INFRA_BOOLEAN_STRING,value:e.recommendNew},null,8,["type","value"])]),recommendGood:o(({row:e})=>[t(d,{type:a(_).INFRA_BOOLEAN_STRING,value:e.recommendGood},null,8,["type","value"])]),activityOrders:o(({row:e})=>[(i(!0),S(h,null,k(e.activityOrders,p=>(i(),T(Y,{key:p,class:"mr-[10px]",type:a(y).find(O=>O.value===p)?.colorType},{default:o(()=>[F(R(a(y).find(O=>O.value===p)?.label),1)]),_:2},1032,["type"]))),128))]),_:1},8,["data","schema"])):V("",!0)],64)}}});export{ce as _};
