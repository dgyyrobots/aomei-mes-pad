/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as T,r as u,f as U,g as d,h as $,k as V,o as y,m as t,w as B,a as o,j as i,v as C,y as S,_ as j,N as z,z as L}from"./index-5TqN_QR1.js";import{a as M,b as A,d as E}from"./index-BOemFbmI.js";const O=T({__name:"Demo03CourseForm",emits:["success"],setup(G,{expose:w,emit:D}){const{t:c}=z(),v=L(),a=u(!1),p=u(""),l=u(!1),_=u(""),s=u({id:void 0,studentId:void 0,name:void 0,score:void 0}),k=U({studentId:[{required:!0,message:"学生编号不能为空",trigger:"blur"}],name:[{required:!0,message:"名字不能为空",trigger:"blur"}],score:[{required:!0,message:"分数不能为空",trigger:"blur"}]}),f=u();w({open:async(r,e,m)=>{if(a.value=!0,p.value=c(`action.${r}`),_.value=r,F(),s.value.studentId=m,e){l.value=!0;try{s.value=await M(e)}finally{l.value=!1}}}});const x=D,I=async()=>{await f.value.validate(),l.value=!0;try{const r=s.value;_.value==="create"?(await A(r),v.success(c("common.createSuccess"))):(await E(r),v.success(c("common.updateSuccess"))),a.value=!1,x("success")}finally{l.value=!1}},F=()=>{s.value={id:void 0,studentId:void 0,name:void 0,score:void 0},f.value?.resetFields()};return(r,e)=>{const m=d("el-input"),g=d("el-form-item"),R=d("el-form"),b=d("el-button"),q=j,N=$("loading");return y(),V(q,{modelValue:o(a),"onUpdate:modelValue":e[3]||(e[3]=n=>S(a)?a.value=n:null),title:o(p)},{footer:t(()=>[i(b,{disabled:o(l),type:"primary",onClick:I},{default:t(()=>e[4]||(e[4]=[C("确 定")])),_:1},8,["disabled"]),i(b,{onClick:e[2]||(e[2]=n=>a.value=!1)},{default:t(()=>e[5]||(e[5]=[C("取 消")])),_:1})]),default:t(()=>[B((y(),V(R,{ref_key:"formRef",ref:f,"label-width":"100px",model:o(s),rules:o(k)},{default:t(()=>[i(g,{label:"名字",prop:"name"},{default:t(()=>[i(m,{modelValue:o(s).name,"onUpdate:modelValue":e[0]||(e[0]=n=>o(s).name=n),placeholder:"请输入名字"},null,8,["modelValue"])]),_:1}),i(g,{label:"分数",prop:"score"},{default:t(()=>[i(m,{modelValue:o(s).score,"onUpdate:modelValue":e[1]||(e[1]=n=>o(s).score=n),placeholder:"请输入分数"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[N,o(l)]])]),_:1},8,["modelValue","title"])}}});export{O as _};
