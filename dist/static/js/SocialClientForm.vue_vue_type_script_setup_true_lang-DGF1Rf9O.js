/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{V as v,d as L,r as m,f as A,g as c,h as j,k as p,o as u,m as o,w as z,a as t,j as s,l as K,c as S,F as I,n as C,v as f,t as w,y as G,_ as H,N as J,z as Q}from"./index-lcC3l4R2.js";import{c as k,D as U}from"./dict-B7jb0IEc.js";const te=async r=>await v.get({url:"/system/social-client/page",params:r}),W=async r=>await v.get({url:`/system/social-client/get?id=${r}`}),X=async r=>await v.post({url:"/system/social-client/create",data:r}),Z=async r=>await v.put({url:"/system/social-client/update",data:r}),ae=async r=>await v.delete({url:`/system/social-client/delete?id=${r}`}),oe=L({__name:"SocialClientForm",emits:["success"],setup(r,{expose:F,emit:N}){const{t:b}=J(),D=Q(),i=m(!1),q=m(""),d=m(!1),x=m(""),a=m({id:void 0,name:void 0,socialType:void 0,userType:void 0,clientId:void 0,clientSecret:void 0,agentId:void 0,status:0}),R=A({name:[{required:!0,message:"应用名不能为空",trigger:"blur"}],socialType:[{required:!0,message:"社交平台不能为空",trigger:"blur"}],userType:[{required:!0,message:"用户类型不能为空",trigger:"blur"}],clientId:[{required:!0,message:"客户端编号不能为空",trigger:"blur"}],clientSecret:[{required:!0,message:"客户端密钥不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]}),g=m();F({open:async(y,e)=>{if(i.value=!0,q.value=b(`action.${y}`),x.value=y,O(),e){d.value=!0;try{a.value=await W(e)}finally{d.value=!1}}}});const $=N,M=async()=>{if(!(!g||!await g.value.validate())){d.value=!0;try{const e=a.value;x.value==="create"?(await X(e),D.success(b("common.createSuccess"))):(await Z(e),D.success(b("common.updateSuccess"))),i.value=!1,$("success")}finally{d.value=!1}}},O=()=>{a.value={id:void 0,name:void 0,socialType:void 0,userType:void 0,clientId:void 0,clientSecret:void 0,agentId:void 0,status:0},g.value?.resetFields()};return(y,e)=>{const _=c("el-input"),n=c("el-form-item"),V=c("el-radio"),T=c("el-radio-group"),P=c("el-form"),E=c("el-button"),Y=H,B=j("loading");return u(),p(Y,{modelValue:t(i),"onUpdate:modelValue":e[8]||(e[8]=l=>G(i)?i.value=l:null),title:t(q)},{footer:o(()=>[s(E,{disabled:t(d),type:"primary",onClick:M},{default:o(()=>e[9]||(e[9]=[f("确 定")])),_:1},8,["disabled"]),s(E,{onClick:e[7]||(e[7]=l=>i.value=!1)},{default:o(()=>e[10]||(e[10]=[f("取 消")])),_:1})]),default:o(()=>[z((u(),p(P,{ref_key:"formRef",ref:g,"label-width":"120px",model:t(a),rules:t(R)},{default:o(()=>[s(n,{label:"应用名",prop:"name"},{default:o(()=>[s(_,{modelValue:t(a).name,"onUpdate:modelValue":e[0]||(e[0]=l=>t(a).name=l),placeholder:"请输入应用名"},null,8,["modelValue"])]),_:1}),s(n,{label:"社交平台",prop:"socialType"},{default:o(()=>[s(T,{modelValue:t(a).socialType,"onUpdate:modelValue":e[1]||(e[1]=l=>t(a).socialType=l)},{default:o(()=>[(u(!0),S(I,null,C(t(k)(t(U).SYSTEM_SOCIAL_TYPE),l=>(u(),p(V,{key:l.value,label:l.value},{default:o(()=>[f(w(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(n,{label:"用户类型",prop:"userType"},{default:o(()=>[s(T,{modelValue:t(a).userType,"onUpdate:modelValue":e[2]||(e[2]=l=>t(a).userType=l)},{default:o(()=>[(u(!0),S(I,null,C(t(k)(t(U).USER_TYPE),l=>(u(),p(V,{key:l.value,label:l.value},{default:o(()=>[f(w(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(n,{label:"客户端编号",prop:"clientId"},{default:o(()=>[s(_,{modelValue:t(a).clientId,"onUpdate:modelValue":e[3]||(e[3]=l=>t(a).clientId=l),placeholder:"请输入客户端编号,对应各平台的appKey"},null,8,["modelValue"])]),_:1}),s(n,{label:"客户端密钥",prop:"clientSecret"},{default:o(()=>[s(_,{modelValue:t(a).clientSecret,"onUpdate:modelValue":e[4]||(e[4]=l=>t(a).clientSecret=l),placeholder:"请输入客户端密钥,对应各平台的appSecret"},null,8,["modelValue"])]),_:1}),t(a).socialType===30?(u(),p(n,{key:0,label:"agentId",prop:"agentId"},{default:o(()=>[s(_,{modelValue:t(a).agentId,"onUpdate:modelValue":e[5]||(e[5]=l=>t(a).agentId=l),placeholder:"授权方的网页应用 ID，有则填"},null,8,["modelValue"])]),_:1})):K("",!0),s(n,{label:"状态",prop:"status"},{default:o(()=>[s(T,{modelValue:t(a).status,"onUpdate:modelValue":e[6]||(e[6]=l=>t(a).status=l)},{default:o(()=>[(u(!0),S(I,null,C(t(k)(t(U).COMMON_STATUS),l=>(u(),p(V,{key:l.value,label:l.value},{default:o(()=>[f(w(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[B,t(d)]])]),_:1},8,["modelValue","title"])}}});export{oe as _,ae as d,te as g};
