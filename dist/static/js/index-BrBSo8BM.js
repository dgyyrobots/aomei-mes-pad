/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{_ as J}from"./DictTag.vue_vue_type_script_lang-CGh0XIVR.js";import{_ as X}from"./ContentWrap.vue_vue_type_script_setup_true_lang-58zNwBTb.js";import{d as G,bE as W,r as d,f as Z,b as ee,g as i,h as $,c as N,o as u,j as e,w as f,l as te,m as o,a as n,J as oe,F as O,n as le,k as _,v as p,K as ne,X as ae,z as se,bH as D,N as re}from"./index-BW9ifGp0.js";import{_ as ie}from"./index-hVfLpCoZ.js";import{_ as ue}from"./MenuForm.vue_vue_type_script_setup_true_lang-BQiO2nG6.js";import{b as pe,d as me}from"./index-y6hrDlp9.js";import{c as ce,D as F}from"./dict-BcQRoIPV.js";import{h as de}from"./tree-vSlcEeQq.js";import"./color-B5phLuB-.js";import"./constants-BPQb3nxh.js";const Te=G({name:"SystemMenu",__name:"index",setup(_e){const{wsCache:E}=W(),{t:U}=re(),b=se(),k=d(!0),M=d([]),m=Z({name:void 0,status:void 0}),S=d(),C=d(!1),g=d(!0),v=async()=>{k.value=!0;try{const a=await pe(m);M.value=de(a)}finally{k.value=!1}},x=()=>{v()},A=()=>{S.value.resetFields(),x()},V=d(),h=(a,t,y)=>{V.value.open(a,t,y)},K=()=>{g.value=!1,C.value=!C.value,ae(()=>{g.value=!0})},L=async()=>{try{await b.confirm("即将更新缓存刷新浏览器！","刷新菜单缓存"),E.delete(D.USER),E.delete(D.ROLE_ROUTERS),location.reload()}catch(a){console.log(a)}},P=async a=>{try{await b.delConfirm(),await me(a),b.success(U("common.delSuccess")),await v()}catch(t){console.log(t)}};return ee(()=>{v()}),(a,t)=>{const y=ie,q=i("el-input"),T=i("el-form-item"),B=i("el-option"),I=i("el-select"),c=ne,s=i("el-button"),H=i("el-form"),Q=X,r=i("el-table-column"),Y=J,j=i("el-table"),w=$("hasPermi"),z=$("loading");return u(),N(O,null,[e(y,{title:"功能权限",url:"https://doc.iocoder.cn/resource-permission"}),e(y,{title:"菜单路由",url:"https://doc.iocoder.cn/vue3/route/"}),e(Q,null,{default:o(()=>[e(H,{ref_key:"queryFormRef",ref:S,class:"-mb-15px",inline:!0,"label-width":"68px",model:n(m)},{default:o(()=>[e(T,{label:"菜单名称",prop:"name"},{default:o(()=>[e(q,{modelValue:n(m).name,"onUpdate:modelValue":t[0]||(t[0]=l=>n(m).name=l),class:"!w-240px",clearable:"",placeholder:"请输入菜单名称",onKeyup:oe(x,["enter"])},null,8,["modelValue"])]),_:1}),e(T,{label:"状态",prop:"status"},{default:o(()=>[e(I,{modelValue:n(m).status,"onUpdate:modelValue":t[1]||(t[1]=l=>n(m).status=l),class:"!w-240px",clearable:"",placeholder:"请选择菜单状态"},{default:o(()=>[(u(!0),N(O,null,le(n(ce)(n(F).COMMON_STATUS),l=>(u(),_(B,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(T,null,{default:o(()=>[e(s,{onClick:x},{default:o(()=>[e(c,{class:"mr-5px",icon:"ep:search"}),t[3]||(t[3]=p(" 搜索 "))]),_:1}),e(s,{onClick:A},{default:o(()=>[e(c,{class:"mr-5px",icon:"ep:refresh"}),t[4]||(t[4]=p(" 重置 "))]),_:1}),f((u(),_(s,{plain:"",type:"primary",onClick:t[2]||(t[2]=l=>h("create"))},{default:o(()=>[e(c,{class:"mr-5px",icon:"ep:plus"}),t[5]||(t[5]=p(" 新增 "))]),_:1})),[[w,["system:menu:create"]]]),e(s,{plain:"",type:"danger",onClick:K},{default:o(()=>[e(c,{class:"mr-5px",icon:"ep:sort"}),t[6]||(t[6]=p(" 展开/折叠 "))]),_:1}),e(s,{plain:"",onClick:L},{default:o(()=>[e(c,{class:"mr-5px",icon:"ep:refresh"}),t[7]||(t[7]=p(" 刷新菜单缓存 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),n(g)?f((u(),_(j,{key:0,data:n(M),"default-expand-all":n(C),"row-key":"id"},{default:o(()=>[e(r,{label:"菜单名称",prop:"name","show-overflow-tooltip":!0,width:"250"}),e(r,{align:"center",label:"图标",prop:"icon",width:"100"},{default:o(l=>[e(c,{icon:l.row.icon},null,8,["icon"])]),_:1}),e(r,{label:"排序",prop:"sort",width:"60"}),e(r,{label:"权限标识",prop:"permission","show-overflow-tooltip":!0}),e(r,{label:"组件路径",prop:"component","show-overflow-tooltip":!0}),e(r,{label:"组件名称",prop:"componentName","show-overflow-tooltip":!0}),e(r,{label:"状态",prop:"status",width:"80"},{default:o(l=>[e(Y,{type:n(F).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",label:"操作"},{default:o(l=>[f((u(),_(s,{link:"",type:"primary",onClick:R=>h("update",l.row.id)},{default:o(()=>t[8]||(t[8]=[p("修改")])),_:2},1032,["onClick"])),[[w,["system:menu:update"]]]),f((u(),_(s,{link:"",type:"primary",onClick:R=>h("create",void 0,l.row.id)},{default:o(()=>t[9]||(t[9]=[p(" 新增 ")])),_:2},1032,["onClick"])),[[w,["system:menu:create"]]]),f((u(),_(s,{link:"",type:"danger",onClick:R=>P(l.row.id)},{default:o(()=>t[10]||(t[10]=[p("删除")])),_:2},1032,["onClick"])),[[w,["system:menu:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[z,n(k)]]):te("",!0),e(ue,{ref_key:"formRef",ref:V,onSuccess:v},null,512)],64)}}});export{Te as default};
