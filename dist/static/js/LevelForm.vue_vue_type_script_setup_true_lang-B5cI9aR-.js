/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{d as R,r as m,f as A,g as s,h as O,k as b,o as f,m as o,w as $,a,j as l,c as j,F as z,n as Y,v as V,t as G,y as H,_ as J,N as K,z as Q}from"./index-D3eRVKjp.js";import{_ as W}from"./UploadImg-RBMQ5RP3.js";import{c as X,D as Z}from"./dict-CqgorI4d.js";import{g as h,c as ee,u as le}from"./index-BYqhrWpd.js";import{C}from"./constants-BPQb3nxh.js";const ie=R({name:"MemberLevelForm",__name:"LevelForm",emits:["success"],setup(oe,{expose:L,emit:D}){const{t:_}=K(),x=Q(),r=m(!1),w=m(""),i=m(!1),U=m(""),n=m({id:void 0,name:void 0,experience:void 0,level:void 0,discountPercent:void 0,icon:void 0,backgroundUrl:void 0,status:C.ENABLE}),E=A({name:[{required:!0,message:"等级名称不能为空",trigger:"blur"}],experience:[{required:!0,message:"升级经验不能为空",trigger:"blur"}],level:[{required:!0,message:"等级不能为空",trigger:"blur"}],discountPercent:[{required:!0,message:"享受折扣不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}]}),p=m();L({open:async(c,e)=>{if(r.value=!0,w.value=_(`action.${c}`),U.value=c,T(),e){i.value=!0;try{n.value=await h(e)}finally{i.value=!1}}}});const F=D,P=async()=>{if(!(!p||!await p.value.validate())){i.value=!0;try{const e=n.value;U.value==="create"?(await ee(e),x.success(_("common.createSuccess"))):(await le(e),x.success(_("common.updateSuccess"))),r.value=!1,F("success")}finally{i.value=!1}}},T=()=>{n.value={id:void 0,name:void 0,experience:void 0,level:void 0,discountPercent:void 0,icon:void 0,backgroundUrl:void 0,status:C.ENABLE},p.value?.resetFields()};return(c,e)=>{const N=s("el-input"),u=s("el-form-item"),d=s("el-col"),v=s("el-input-number"),g=s("el-row"),k=W,S=s("el-radio"),q=s("el-radio-group"),B=s("el-form"),y=s("el-button"),I=J,M=O("loading");return f(),b(I,{modelValue:a(r),"onUpdate:modelValue":e[8]||(e[8]=t=>H(r)?r.value=t:null),title:a(w),width:"800"},{footer:o(()=>[l(y,{disabled:a(i),type:"primary",onClick:P},{default:o(()=>e[9]||(e[9]=[V("确 定")])),_:1},8,["disabled"]),l(y,{onClick:e[7]||(e[7]=t=>r.value=!1)},{default:o(()=>e[10]||(e[10]=[V("取 消")])),_:1})]),default:o(()=>[$((f(),b(B,{ref_key:"formRef",ref:p,"label-width":"110px",model:a(n),rules:a(E)},{default:o(()=>[l(g,null,{default:o(()=>[l(d,{span:12},{default:o(()=>[l(u,{label:"等级名称",prop:"name"},{default:o(()=>[l(N,{modelValue:a(n).name,"onUpdate:modelValue":e[0]||(e[0]=t=>a(n).name=t),class:"!w-240px",placeholder:"请输入等级名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(u,{label:"等级",prop:"level"},{default:o(()=>[l(v,{modelValue:a(n).level,"onUpdate:modelValue":e[1]||(e[1]=t=>a(n).level=t),class:"!w-240px",min:0,placeholder:"请输入等级",precision:0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,null,{default:o(()=>[l(d,{span:12},{default:o(()=>[l(u,{label:"升级经验",prop:"experience"},{default:o(()=>[l(v,{modelValue:a(n).experience,"onUpdate:modelValue":e[2]||(e[2]=t=>a(n).experience=t),class:"!w-240px",min:0,placeholder:"请输入升级经验",precision:0},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(u,{label:"享受折扣(%)",prop:"discountPercent"},{default:o(()=>[l(v,{modelValue:a(n).discountPercent,"onUpdate:modelValue":e[3]||(e[3]=t=>a(n).discountPercent=t),class:"!w-240px",max:100,min:0,placeholder:"请输入享受折扣",precision:0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,null,{default:o(()=>[l(d,{span:12},{default:o(()=>[l(u,{label:"等级图标"},{default:o(()=>[l(k,{modelValue:a(n).icon,"onUpdate:modelValue":e[4]||(e[4]=t=>a(n).icon=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(u,{label:"背景图"},{default:o(()=>[l(k,{modelValue:a(n).backgroundUrl,"onUpdate:modelValue":e[5]||(e[5]=t=>a(n).backgroundUrl=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(u,{label:"状态",prop:"status"},{default:o(()=>[l(q,{modelValue:a(n).status,"onUpdate:modelValue":e[6]||(e[6]=t=>a(n).status=t)},{default:o(()=>[(f(!0),j(z,null,Y(a(X)(a(Z).COMMON_STATUS),t=>(f(),b(S,{key:t.value,label:t.value},{default:o(()=>[V(G(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[M,a(i)]])]),_:1},8,["modelValue","title"])}}});export{ie as _};
