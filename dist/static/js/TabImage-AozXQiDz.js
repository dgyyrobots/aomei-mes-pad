/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as $,bz as j,O as N,r as I,f as z,g as c,c as r,o as i,k as E,a as s,i as p,l as L,j as a,t as R,m as l,K as O,v as k,y as W,z as H,A as K}from"./index-5TqN_QR1.js";import{W as P}from"./main-pGDeaqBi.js";import{u as h,U as q}from"./useUpload-Ddt1STrl.js";import"./main-BNvOlHte.js";import"./main-DKwuz0RU.js";import"./main.vue_vue_type_script_setup_true_lang-B-Np959Q.js";import"./index-2Iu8TY9q.js";import"./index-DDc9nqNA.js";const F={key:0,class:"select-item"},G=["src"],J={key:0,class:"item-name"},Q=$({__name:"TabImage",props:{modelValue:{}},emits:["update:modelValue"],setup(V,{emit:b}){const U=H(),x="undefined/admin-api/mp/material/upload-temporary",w={Authorization:`Bearer ${j()}`},B=V,C=b,e=N({get:()=>B.modelValue,set:t=>C("update:modelValue",t)}),n=I(!1),m=I([]),d=z({accountId:e.value.accountId,type:"image",title:"",introduction:""}),D=t=>h(q.Image,2)(t),A=t=>{if(t.code!==0)return U.error(`上传出错：${t.msg}`),!1;m.value=[],d.title="",d.introduction="",_(t.data)},M=()=>{e.value.mediaId=null,e.value.url=null,e.value.name=null},_=t=>{n.value=!1,e.value.mediaId=t.mediaId,e.value.url=t.url,e.value.name=t.name};return(t,o)=>{const f=O,u=c("el-button"),g=c("el-row"),S=c("el-dialog"),v=c("el-col"),T=c("el-upload");return i(),r("div",null,[s(e).url?(i(),r("div",F,[p("img",{class:"material-img",src:s(e).url},null,8,G),s(e).name?(i(),r("p",J,R(s(e).name),1)):L("",!0),a(g,{class:"ope-row",justify:"center"},{default:l(()=>[a(u,{circle:"",type:"danger",onClick:M},{default:l(()=>[a(f,{icon:"ep:delete"})]),_:1})]),_:1})])):(i(),E(g,{key:1,align:"middle",style:{"text-align":"center"}},{default:l(()=>[a(v,{class:"col-select",span:12},{default:l(()=>[a(u,{type:"success",onClick:o[0]||(o[0]=y=>n.value=!0)},{default:l(()=>[o[2]||(o[2]=k(" 素材库选择 ")),a(f,{icon:"ep:circle-check"})]),_:1}),a(S,{modelValue:s(n),"onUpdate:modelValue":o[1]||(o[1]=y=>W(n)?n.value=y:null),"append-to-body":"","destroy-on-close":"",title:"选择图片",width:"90%"},{default:l(()=>[a(s(P),{"account-id":s(e).accountId,type:"image",onSelectMaterial:_},null,8,["account-id"])]),_:1},8,["modelValue"])]),_:1}),a(v,{class:"col-add",span:12},{default:l(()=>[a(T,{action:x,"before-upload":D,data:s(d),"file-list":s(m),headers:w,limit:1,multiple:"","on-success":A},{tip:l(()=>o[4]||(o[4]=[p("span",null,[p("div",{class:"el-upload__tip"},"支持 bmp/png/jpeg/jpg/gif 格式，大小不超过 2M")],-1)])),default:l(()=>[a(u,{type:"primary"},{default:l(()=>o[3]||(o[3]=[k("上传图片")])),_:1})]),_:1},8,["data","file-list"])]),_:1})]),_:1}))])}}}),se=K(Q,[["__scopeId","data-v-fe870f1a"]]);export{se as default};
