/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as R,r as u,f as j,g as d,h as B,k as _,o as c,_ as M,a as o,y as L,m as n,w as O,j as t,c as P,F as X,n as Y,v as b,N as $,z}from"./index-BdC40rFX.js";import{a as Q,D as A}from"./dict-D4wjFrBa.js";import{a as G,c as H,u as J}from"./index-BQcIsKYc.js";const oe=R({__name:"qmsIndexForm",emits:["success"],setup(K,{expose:T,emit:C}){const{t:v}=$(),x=z(),s=u(!1),g=u(""),r=u(!1),V=u(""),a=u({id:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0}),k=j({indexCode:[{required:!0,message:"检测项编码不能为空",trigger:"change"}],indexName:[{required:!0,message:"检测项名称不能为空",trigger:"change"}],indexType:[{required:!0,message:"检测项类型不能为空",trigger:"change"}]}),f=u();T({open:async(i,e)=>{if(s.value=!0,g.value=v("action."+i),V.value=i,N(),e){r.value=!0;try{a.value=await G(e)}finally{r.value=!1}}}});const q=C,w=async()=>{await f.value.validate(),r.value=!0;try{const i=a.value;V.value==="create"?(await H(i),x.success(v("common.createSuccess"))):(await J(i),x.success(v("common.updateSuccess"))),s.value=!1,q("success")}finally{r.value=!1}},N=()=>{a.value={id:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0},f.value?.resetFields()};return(i,e)=>{const D=d("SwitchS"),p=d("el-input"),m=d("el-form-item"),S=d("el-option"),I=d("el-select"),E=d("el-form"),y=d("el-button"),F=M,U=B("loading");return c(),_(F,{title:o(g),modelValue:o(s),"onUpdate:modelValue":e[6]||(e[6]=l=>L(s)?s.value=l:null),width:"90%"},{footer:n(()=>[t(y,{onClick:w,type:"primary",disabled:o(r)},{default:n(()=>e[7]||(e[7]=[b("确 定")])),_:1},8,["disabled"]),t(y,{onClick:e[5]||(e[5]=l=>s.value=!1)},{default:n(()=>e[8]||(e[8]=[b("取 消")])),_:1})]),default:n(()=>[O((c(),_(E,{ref_key:"formRef",ref:f,model:o(a),rules:o(k),"label-width":"100px"},{default:n(()=>[t(m,{label:"检测项编码",prop:"indexCode"},{default:n(()=>[t(p,{modelValue:o(a).indexCode,"onUpdate:modelValue":e[0]||(e[0]=l=>o(a).indexCode=l),placeholder:"请输入检测项编码"},{append:n(()=>[t(D,{name:"QMS_INDEX_CODE",obj:o(a),val:"indexCode"},null,8,["obj"])]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"检测项名称",prop:"indexName"},{default:n(()=>[t(p,{modelValue:o(a).indexName,"onUpdate:modelValue":e[1]||(e[1]=l=>o(a).indexName=l),placeholder:"请输入检测项名称"},null,8,["modelValue"])]),_:1}),t(m,{label:"检测项类型",prop:"indexType"},{default:n(()=>[t(I,{modelValue:o(a).indexType,"onUpdate:modelValue":e[2]||(e[2]=l=>o(a).indexType=l),placeholder:"请选择检测项类型"},{default:n(()=>[(c(!0),P(X,null,Y(o(Q)(o(A).MES_INDEX_TYPE),l=>(c(),_(S,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"检测工具",prop:"qcTool"},{default:n(()=>[t(p,{modelValue:o(a).qcTool,"onUpdate:modelValue":e[3]||(e[3]=l=>o(a).qcTool=l),placeholder:"请输入检测工具"},null,8,["modelValue"])]),_:1}),t(m,{label:"备注",prop:"remark"},{default:n(()=>[t(p,{modelValue:o(a).remark,"onUpdate:modelValue":e[4]||(e[4]=l=>o(a).remark=l),placeholder:"请输入备注",rows:2,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[U,o(r)]])]),_:1},8,["title","modelValue"])}}});export{oe as _};
