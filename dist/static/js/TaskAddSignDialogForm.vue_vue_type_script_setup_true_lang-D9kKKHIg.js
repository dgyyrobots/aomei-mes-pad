/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{d as R,r,g as i,h as $,k as c,o as p,_ as A,a as l,y as S,m as o,w as T,j as a,c as q,n as N,F as j,v,z}from"./index-BdmDrM2Y.js";import{t as E}from"./index-DS7aqjKl.js";import{g as M}from"./index-BXAiRI9b.js";const P=R({name:"BpmTaskUpdateAssigneeForm",__name:"TaskAddSignDialogForm",emits:["success"],setup(G,{expose:y,emit:k}){const V=z(),n=r(!1),u=r(!1),s=r({id:"",userIdList:[],type:""}),L=r({userIdList:[{required:!0,message:"加签处理人不能为空",trigger:"change"}],reason:[{required:!0,message:"加签理由不能为空",trigger:"change"}]}),d=r(),_=r([]);y({open:async m=>{n.value=!0,F(),s.value.id=m,_.value=await M()}});const w=k,g=async m=>{if(!(!d||!await d.value.validate())){u.value=!0,s.value.type=m;try{await E(s.value),V.success("加签成功"),n.value=!1,w("success")}finally{u.value=!1}}},F=()=>{s.value={id:"",userIdList:[],type:""},d.value?.resetFields()};return(m,e)=>{const x=i("el-option"),C=i("el-select"),b=i("el-form-item"),I=i("el-input"),D=i("el-form"),f=i("el-button"),U=A,B=$("loading");return p(),c(U,{modelValue:l(n),"onUpdate:modelValue":e[5]||(e[5]=t=>S(n)?n.value=t:null),title:"加签",width:"500"},{footer:o(()=>[a(f,{disabled:l(u),type:"primary",onClick:e[2]||(e[2]=t=>g("before"))},{default:o(()=>e[6]||(e[6]=[v("向前加签")])),_:1},8,["disabled"]),a(f,{disabled:l(u),type:"primary",onClick:e[3]||(e[3]=t=>g("after"))},{default:o(()=>e[7]||(e[7]=[v("向后加签")])),_:1},8,["disabled"]),a(f,{onClick:e[4]||(e[4]=t=>n.value=!1)},{default:o(()=>e[8]||(e[8]=[v("取 消")])),_:1})]),default:o(()=>[T((p(),c(D,{ref_key:"formRef",ref:d,"label-width":"110px",model:l(s),rules:l(L)},{default:o(()=>[a(b,{label:"加签处理人",prop:"userIdList"},{default:o(()=>[a(C,{modelValue:l(s).userIdList,"onUpdate:modelValue":e[0]||(e[0]=t=>l(s).userIdList=t),clearable:"",multiple:"",style:{width:"100%"}},{default:o(()=>[(p(!0),q(j,null,N(l(_),t=>(p(),c(x,{key:t.id,label:t.nickname,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(b,{label:"加签理由",prop:"reason"},{default:o(()=>[a(I,{modelValue:l(s).reason,"onUpdate:modelValue":e[1]||(e[1]=t=>l(s).reason=t),clearable:"",placeholder:"请输入加签理由"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[B,l(u)]])]),_:1},8,["modelValue"])}}});export{P as _};
