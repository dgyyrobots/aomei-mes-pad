/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as j,r as _,f as J,b as W,g as s,h as S,c as E,o as i,j as t,m as l,a as o,J as X,F as M,n as Z,k as d,w as g,v as c,K as h,L as ee,M as te,z as ae,N as le}from"./index-C8VsLzxx.js";import{_ as oe}from"./DictTag.vue_vue_type_script_lang-lHf-rDoT.js";import{_ as ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DmvxiVVs.js";import{_ as re}from"./index-DEPOhjYW.js";import{_ as se,g as ie,d as pe,u as me,t as ce}from"./FileConfigForm.vue_vue_type_script_setup_true_lang-51k2cGdZ.js";import{c as ue,D as F}from"./dict-_inVRzR5.js";import"./color-B5phLuB-.js";const ke=j({name:"InfraFileConfig",__name:"index",setup(de){const f=ae(),{t:x}=le(),w=_(!0),N=_(0),T=_([]),n=J({pageNo:1,pageSize:10,name:void 0,storage:void 0,createTime:[]}),$=_(),u=async()=>{w.value=!0;try{const r=await ie(n);T.value=r.list,N.value=r.total}finally{w.value=!1}},b=()=>{n.pageNo=1,u()},P=()=>{$.value.resetFields(),b()},I=_(),V=(r,e)=>{I.value.open(r,e)},A=async r=>{try{await f.delConfirm(),await pe(r),f.success(x("common.delSuccess")),await u()}catch(e){console.log(e)}},L=async r=>{try{await f.confirm(`是否确认修改配置编号为"${r}"的数据项为主配置?`),await me(r),f.success(x("common.updateSuccess")),await u()}catch(e){console.log(e)}},O=async r=>{try{const e=await ce(r);f.alert(`测试通过，上传文件成功！访问地址：${e}`)}catch(e){console.log(e)}};return W(()=>{u()}),(r,e)=>{const U=re,Y=s("el-input"),y=s("el-form-item"),z=s("el-option"),B=s("el-select"),q=s("el-date-picker"),k=h,p=s("el-button"),G=s("el-form"),D=ne,m=s("el-table-column"),R=oe,K=s("el-table"),H=te,v=S("hasPermi"),Q=S("loading");return i(),E(M,null,[t(U,{title:"上传下载",url:"https://doc.iocoder.cn/file/"}),t(D,null,{default:l(()=>[t(G,{ref_key:"queryFormRef",ref:$,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(n)},{default:l(()=>[t(y,{label:"配置名",prop:"name"},{default:l(()=>[t(Y,{modelValue:o(n).name,"onUpdate:modelValue":e[0]||(e[0]=a=>o(n).name=a),class:"!w-240px",clearable:"",placeholder:"请输入配置名",onKeyup:X(b,["enter"])},null,8,["modelValue"])]),_:1}),t(y,{label:"存储器",prop:"storage"},{default:l(()=>[t(B,{modelValue:o(n).storage,"onUpdate:modelValue":e[1]||(e[1]=a=>o(n).storage=a),class:"!w-240px",clearable:"",placeholder:"请选择存储器"},{default:l(()=>[(i(!0),E(M,null,Z(o(ue)(o(F).INFRA_FILE_STORAGE),a=>(i(),d(z,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(y,{label:"创建时间",prop:"createTime"},{default:l(()=>[t(q,{modelValue:o(n).createTime,"onUpdate:modelValue":e[2]||(e[2]=a=>o(n).createTime=a),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),t(y,null,{default:l(()=>[t(p,{onClick:b},{default:l(()=>[t(k,{class:"mr-5px",icon:"ep:search"}),e[6]||(e[6]=c(" 搜索 "))]),_:1}),t(p,{onClick:P},{default:l(()=>[t(k,{class:"mr-5px",icon:"ep:refresh"}),e[7]||(e[7]=c(" 重置 "))]),_:1}),g((i(),d(p,{plain:"",type:"primary",onClick:e[3]||(e[3]=a=>V("create"))},{default:l(()=>[t(k,{class:"mr-5px",icon:"ep:plus"}),e[8]||(e[8]=c(" 新增 "))]),_:1})),[[v,["infra:file-config:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(D,null,{default:l(()=>[g((i(),d(K,{data:o(T)},{default:l(()=>[t(m,{align:"center",label:"编号",prop:"id"}),t(m,{align:"center",label:"配置名",prop:"name"}),t(m,{align:"center",label:"存储器",prop:"storage"},{default:l(a=>[t(R,{type:o(F).INFRA_FILE_STORAGE,value:a.row.storage},null,8,["type","value"])]),_:1}),t(m,{align:"center",label:"备注",prop:"remark"}),t(m,{align:"center",label:"主配置",prop:"primary"},{default:l(a=>[t(R,{type:o(F).INFRA_BOOLEAN_STRING,value:a.row.master},null,8,["type","value"])]),_:1}),t(m,{align:"center",formatter:o(ee),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),t(m,{align:"center",label:"操作",width:"240px"},{default:l(a=>[g((i(),d(p,{link:"",type:"primary",onClick:C=>V("update",a.row.id)},{default:l(()=>e[9]||(e[9]=[c(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["infra:file-config:update"]]]),g((i(),d(p,{disabled:a.row.master,link:"",type:"primary",onClick:C=>L(a.row.id)},{default:l(()=>e[10]||(e[10]=[c(" 主配置 ")])),_:2},1032,["disabled","onClick"])),[[v,["infra:file-config:update"]]]),t(p,{link:"",type:"primary",onClick:C=>O(a.row.id)},{default:l(()=>e[11]||(e[11]=[c("测试")])),_:2},1032,["onClick"]),g((i(),d(p,{link:"",type:"danger",onClick:C=>A(a.row.id)},{default:l(()=>e[12]||(e[12]=[c("删除")])),_:2},1032,["onClick"])),[[v,["infra:config:delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,o(w)]]),t(H,{limit:o(n).pageSize,"onUpdate:limit":e[4]||(e[4]=a=>o(n).pageSize=a),page:o(n).pageNo,"onUpdate:page":e[5]||(e[5]=a=>o(n).pageNo=a),total:o(N),onPagination:u},null,8,["limit","page","total"])]),_:1}),t(se,{ref_key:"formRef",ref:I,onSuccess:u},null,512)],64)}}});export{ke as default};
