/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{d as V,r as s,f as Y,b as j,g as m,h as x,c as q,o as g,j as e,m as o,a as r,v as f,K as z,w as F,k as N,i as U,t as M,L as Q,l as K,M as W,F as G}from"./index-D3S9e4gi.js";import{_ as H}from"./DictTag.vue_vue_type_script_lang-DqsMypuM.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DXTslarw.js";import O from"./CreatePayTransfer-Pu8zM4dz.js";import{_ as X,g as Z}from"./DemoTransferForm.vue_vue_type_script_setup_true_lang-305yZfHu.js";import{D as P}from"./dict-D5UmY5m8.js";import"./color-B5phLuB-.js";import"./index-DWUF712z.js";import"./wx_app-pH-apRHu.js";const de=V({__name:"index",setup(ee){const u=s(!0),y=s(0),v=s([]),i=Y({pageNo:1,pageSize:10}),b=s();let d={appId:void 0,merchantTransferId:void 0,type:void 0,price:void 0,subject:void 0,userName:void 0,alipayLogonId:void 0,openid:void 0};const p=async()=>{u.value=!0;try{const l=await Z(i);v.value=l.list,y.value=l.total}finally{u.value=!1}},w=()=>{i.pageNo=1,p()},h=()=>{b.value.resetFields(),w()},T=s(),k=s(),R=l=>{T.value.open(l)},I=l=>{d={...l},d.merchantTransferId=l.id.toString(),d.subject="示例转账",k.value.showPayTransfer(d)};return j(()=>{p()}),(l,t)=>{const _=z,c=m("el-button"),$=m("el-form-item"),D=m("el-form"),C=J,n=m("el-table-column"),S=H,A=m("el-table"),E=W,B=x("hasPermi"),L=x("loading");return g(),q(G,null,[e(C,null,{default:o(()=>[e(D,{ref_key:"queryFormRef",ref:b,class:"-mb-15px",inline:!0,"label-width":"68px",model:r(i)},{default:o(()=>[e($,null,{default:o(()=>[e(c,{onClick:w},{default:o(()=>[e(_,{class:"mr-5px",icon:"ep:search"}),t[3]||(t[3]=f(" 搜索 "))]),_:1}),e(c,{onClick:h},{default:o(()=>[e(_,{class:"mr-5px",icon:"ep:refresh"}),t[4]||(t[4]=f(" 重置 "))]),_:1}),e(c,{plain:"",type:"primary",onClick:t[0]||(t[0]=a=>R("create"))},{default:o(()=>[e(_,{icon:"ep:plus"}),t[5]||(t[5]=f(" 创建业务转账单 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(C,null,{default:o(()=>[F((g(),N(A,{data:r(v),"show-overflow-tooltip":!0},{default:o(()=>[e(n,{align:"center",label:"订单编号",prop:"id"}),e(n,{align:"center",label:"转账类型",prop:"type",width:"120"},{default:o(a=>[e(S,{type:r(P).PAY_TRANSFER_TYPE,value:a.row.type},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"转账金额",prop:"price"},{default:o(a=>[U("span",null,"￥"+M((a.row.price/100).toFixed(2)),1)]),_:1}),e(n,{align:"center",label:"收款人姓名",prop:"userName",width:"120"}),e(n,{align:"center",label:"支付宝登录账号",prop:"alipayLogonId",width:"180"}),e(n,{align:"center",label:"微信 openid",prop:"openid",width:"120"}),e(n,{align:"center",label:"转账状态",prop:"transferStatus"},{default:o(a=>[e(S,{type:r(P).PAY_TRANSFER_STATUS,value:a.row.transferStatus},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"转账单号",prop:"payTransferId"}),e(n,{align:"center",label:"支付渠道",prop:"payChannelCode"}),e(n,{align:"center",formatter:r(Q),label:"转账时间",prop:"transferTime",width:"180px"},null,8,["formatter"]),e(n,{align:"center","class-name":"small-padding fixed-width",fixed:"right",label:"操作",width:"100"},{default:o(a=>[a.row.transferStatus===0?F((g(),N(c,{key:0,link:"",type:"primary",onClick:te=>I(a.row)},{default:o(()=>t[6]||(t[6]=[f(" 发起转账 ")])),_:2},1032,["onClick"])),[[B,["pay:transfer:create"]]]):K("",!0)]),_:1})]),_:1},8,["data"])),[[L,r(u)]]),e(E,{limit:r(i).pageSize,"onUpdate:limit":t[1]||(t[1]=a=>r(i).pageSize=a),page:r(i).pageNo,"onUpdate:page":t[2]||(t[2]=a=>r(i).pageNo=a),total:r(y),onPagination:p},null,8,["limit","page","total"])]),_:1}),e(X,{ref_key:"demoFormRef",ref:T,onSuccess:p},null,512),e(O,{ref_key:"payTransferRef",ref:k,onSuccess:p},null,512)],64)}}});export{de as default};
