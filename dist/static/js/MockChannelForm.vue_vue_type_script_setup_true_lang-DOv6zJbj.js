/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{d as O,r as d,g as m,h as B,c as b,o as f,j as n,_ as I,a as t,y as U,m as l,w as L,k as y,F as h,n as A,v as p,t as J,z as $,N as j}from"./index-D3eRVKjp.js";import{C as q}from"./constants-BPQb3nxh.js";import{d as z,D as P}from"./dict-CqgorI4d.js";import{g as Y,c as G,u as H}from"./index-BMpk3N0C.js";const ae=O({name:"MockChannelForm",__name:"MockChannelForm",emits:["success"],setup(K,{expose:w,emit:V}){const{t:_}=j(),v=$(),r=d(!1),g=d(""),u=d(!1),a=d({appId:"",code:"",status:void 0,feeRate:0,remark:"",config:{name:"mock-conf"}}),x={status:[{required:!0,message:"渠道状态不能为空",trigger:"blur"}]},c=d();w({open:async(s,e)=>{r.value=!0,u.value=!0,F(s,e);try{const i=await Y(s,e);i&&i.id&&(a.value=i,a.value.config=JSON.parse(i.config)),g.value=a.value.id?"编辑支付渠道":"创建支付渠道"}finally{u.value=!1}}});const D=V,S=async()=>{if(!(!c||!await c.value.validate())){u.value=!0;try{const e={...a.value};e.config=JSON.stringify(a.value.config),e.id?(await H(e),v.success(_("common.updateSuccess"))):(await G(e),v.success(_("common.createSuccess"))),r.value=!1,D("success")}finally{u.value=!1}}},F=(s,e)=>{a.value={appId:s,code:e,status:q.ENABLE,remark:"",feeRate:0,config:{name:"mock-conf"}},c.value?.resetFields()};return(s,e)=>{const i=m("el-radio"),N=m("el-radio-group"),k=m("el-form-item"),R=m("el-input"),T=m("el-form"),C=m("el-button"),E=I,M=B("loading");return f(),b("div",null,[n(E,{modelValue:t(r),"onUpdate:modelValue":e[3]||(e[3]=o=>U(r)?r.value=o:null),title:t(g),width:"800px",onClosed:s.close},{footer:l(()=>[n(C,{disabled:t(u),type:"primary",onClick:S},{default:l(()=>e[4]||(e[4]=[p("确 定")])),_:1},8,["disabled"]),n(C,{onClick:e[2]||(e[2]=o=>r.value=!1)},{default:l(()=>e[5]||(e[5]=[p("取 消")])),_:1})]),default:l(()=>[L((f(),y(T,{ref_key:"formRef",ref:c,"label-width":"100px",model:t(a),rules:x},{default:l(()=>[n(k,{label:"渠道状态","label-width":"180px",prop:"status"},{default:l(()=>[n(N,{modelValue:t(a).status,"onUpdate:modelValue":e[0]||(e[0]=o=>t(a).status=o)},{default:l(()=>[(f(!0),b(h,null,A(t(z)(t(P).COMMON_STATUS),o=>(f(),y(i,{key:parseInt(o.value),label:parseInt(o.value)},{default:l(()=>[p(J(o.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(k,{label:"备注","label-width":"180px",prop:"remark"},{default:l(()=>[n(R,{modelValue:t(a).remark,"onUpdate:modelValue":e[1]||(e[1]=o=>t(a).remark=o),style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[M,t(u)]])]),_:1},8,["modelValue","title","onClosed"])])}}});export{ae as _};
