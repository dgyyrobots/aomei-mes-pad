/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{d as S,by as T,O as E,r as V,f as L,g as d,c as U,o as f,j as l,i as m,m as a,k as N,a as t,K as R,v,y as q,z}from"./index-BuFigy1A.js";import{W as O}from"./main-B-KlQd_I.js";import{u as W,U as H}from"./useUpload-B7tqBLUS.js";const K=["src"],P={class:"thumb-but"},J=S({__name:"TabMusic",props:{modelValue:{}},emits:["update:modelValue"],setup(b,{emit:M}){const k=z(),x="undefined/admin-api/mp/material/upload-temporary",I={Authorization:`Bearer ${T()}`},w=b,B=M,o=E({get:()=>w.modelValue,set:n=>B("update:modelValue",n)}),u=V(!1),y=V([]),p=L({accountId:o.value.accountId,type:"thumb",title:"",introduction:""}),j=n=>W(H.Image,2)(n),$=n=>{if(n.code!==0)return k.error(`上传出错：${n.msg}`),!1;y.value=[],p.title="",p.introduction="",g(n.data)},g=n=>{u.value=!1,o.value.thumbMediaId=n.mediaId,o.value.thumbMediaUrl=n.url};return(n,e)=>{const A=R,i=d("el-row"),_=d("el-button"),C=d("el-upload"),c=d("el-col"),D=d("el-dialog"),r=d("el-input");return f(),U("div",null,[l(i,{align:"middle",justify:"center"},{default:a(()=>[l(c,{span:6},{default:a(()=>[l(i,{align:"middle",class:"thumb-div",justify:"center"},{default:a(()=>[l(c,{span:24},{default:a(()=>[l(i,{align:"middle",justify:"center"},{default:a(()=>[t(o).thumbMediaUrl?(f(),U("img",{key:0,src:t(o).thumbMediaUrl,style:{width:"100px"}},null,8,K)):(f(),N(A,{key:1,icon:"ep:plus"}))]),_:1}),l(i,{align:"middle",justify:"center",style:{"margin-top":"2%"}},{default:a(()=>[m("div",P,[l(C,{action:x,"before-upload":j,data:t(p),"file-list":t(y),headers:I,limit:1,multiple:"","on-success":$},{trigger:a(()=>[l(_,{link:"",type:"primary"},{default:a(()=>e[6]||(e[6]=[v("本地上传")])),_:1})]),default:a(()=>[l(_,{link:"",style:{"margin-left":"5px"},type:"primary",onClick:e[0]||(e[0]=s=>u.value=!0)},{default:a(()=>e[7]||(e[7]=[v("素材库选择")])),_:1})]),_:1},8,["data","file-list"])])]),_:1})]),_:1})]),_:1}),l(D,{modelValue:t(u),"onUpdate:modelValue":e[1]||(e[1]=s=>q(u)?u.value=s:null),"append-to-body":"","destroy-on-close":"",title:"选择图片",width:"80%"},{default:a(()=>[l(t(O),{"account-id":t(o).accountId,type:"image",onSelectMaterial:g},null,8,["account-id"])]),_:1},8,["modelValue"])]),_:1}),l(c,{span:18},{default:a(()=>[l(r,{modelValue:t(o).title,"onUpdate:modelValue":e[2]||(e[2]=s=>t(o).title=s),placeholder:"请输入标题"},null,8,["modelValue"]),e[8]||(e[8]=m("div",{style:{margin:"20px 0"}},null,-1)),l(r,{modelValue:t(o).description,"onUpdate:modelValue":e[3]||(e[3]=s=>t(o).description=s),placeholder:"请输入描述"},null,8,["modelValue"])]),_:1})]),_:1}),e[9]||(e[9]=m("div",{style:{margin:"20px 0"}},null,-1)),l(r,{modelValue:t(o).musicUrl,"onUpdate:modelValue":e[4]||(e[4]=s=>t(o).musicUrl=s),placeholder:"请输入音乐链接"},null,8,["modelValue"]),e[10]||(e[10]=m("div",{style:{margin:"20px 0"}},null,-1)),l(r,{modelValue:t(o).hqMusicUrl,"onUpdate:modelValue":e[5]||(e[5]=s=>t(o).hqMusicUrl=s),placeholder:"请输入高质量音乐链接"},null,8,["modelValue"])])}}});export{J as _};
