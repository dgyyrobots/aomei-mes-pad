/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{d as ne,r as c,f as re,b as ie,g as i,h as B,c as _,o as r,j as l,m as t,a as e,F as x,n as P,k as u,w as d,Z as se,v as k,K as pe,c5 as z,i as D,t as f,b_ as ce,L as ue,M as me,A as de}from"./index-FPuwcz_Y.js";import{_ as _e}from"./DictTag.vue_vue_type_script_lang-o_bnFpkw.js";import{_ as fe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-32ziCa0j.js";import{a as ve}from"./index-DV9lUj0e.js";import{f as ge,e as ye}from"./index-BbafQWHR.js";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang-TQ6aZpJq.js";import{D as be}from"./constants-BPQb3nxh.js";import{D as Q}from"./dict-C9lD-gwA.js";import{f as xe}from"./formatter-EeFqDoot.js";import{_ as ke}from"./OrderPickUpForm.vue_vue_type_script_setup_true_lang-D3wRMmtK.js";import"./color-B5phLuB-.js";import"./CountTo.vue_vue_type_script_setup_true_lang-J4ZPBq7u.js";import"./index-B4QOgckq.js";import"./index-BwIv2w0v.js";import"./OrderDeliveryForm.vue_vue_type_script_setup_true_lang-Ds4zPuxJ.js";import"./OrderUpdateAddressForm.vue_vue_type_script_setup_true_lang-G9_MCDAS.js";import"./index-CXspfiw7.js";import"./tree-vSlcEeQq.js";import"./OrderUpdatePriceForm.vue_vue_type_script_setup_true_lang-CR7htFDA.js";import"./OrderUpdateRemarkForm.vue_vue_type_script_setup_true_lang-CtoJ5coJ.js";const we={class:"mr-10px"},Se={class:"flex flex-col flex-wrap gap-1"},Ue=ne({name:"PickUpOrder",__name:"index",setup(Pe){const m=c(!0),C=c(2),F=c([]),q=c(),R={pageNo:1,pageSize:10,createTime:void 0,deliveryType:be.PICK_UP.type,pickUpStoreId:void 0},n=c({...R}),v=re({queryParam:"no"}),g=c(),A=c([{value:"no",label:"订单号"},{value:"userId",label:"用户UID"},{value:"userNickname",label:"用户昵称"},{value:"userMobile",label:"用户电话"}]),H=y=>{A.value.filter(o=>o.value!==y)?.forEach(o=>{o.value in n.value&&delete n.value[o.value]})},w=async()=>{m.value=!0;try{g.value=await ge(e(n));const y=await ye(e(n));F.value=y.list,C.value=y.total}finally{m.value=!1}},E=async()=>{n.value.pageNo=1,await w()},K=()=>{q.value?.resetFields(),n.value={...R},E()},T=c([]),j=async()=>{T.value=await ve()},L=c(),G=()=>{L.value.open()};return ie(()=>{w(),j()}),(y,o)=>{const W=i("el-date-picker"),S=i("el-form-item"),Y=i("el-option"),M=i("el-select"),Z=i("el-input"),I=pe,N=i("el-button"),J=i("el-form"),O=fe,U=i("el-col"),X=i("el-row"),s=i("el-table-column"),ee=i("el-image"),le=i("el-tag"),$=_e,ae=i("el-table"),te=me,oe=B("hasPermi"),b=B("loading");return r(),_(x,null,[l(O,null,{default:t(()=>[l(J,{ref_key:"queryFormRef",ref:q,class:"-mb-15px",inline:!0,"label-width":"68px",model:e(n)},{default:t(()=>[l(S,{label:"创建时间",prop:"createTime"},{default:t(()=>[l(W,{modelValue:e(n).createTime,"onUpdate:modelValue":o[0]||(o[0]=a=>e(n).createTime=a),class:"!w-280px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"自定义时间","start-placeholder":"自定义时间",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),l(S,{label:"自提门店",prop:"pickUpStoreId"},{default:t(()=>[l(M,{modelValue:e(n).pickUpStoreId,"onUpdate:modelValue":o[1]||(o[1]=a=>e(n).pickUpStoreId=a),class:"!w-280px",clearable:"",multiple:"",placeholder:"全部"},{default:t(()=>[(r(!0),_(x,null,P(e(T),a=>(r(),u(Y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(S,{label:"聚合搜索"},{default:t(()=>[d(l(Z,{modelValue:e(n)[e(v).queryParam],"onUpdate:modelValue":o[3]||(o[3]=a=>e(n)[e(v).queryParam]=a),class:"!w-280px",clearable:"",placeholder:"请输入",type:e(v).queryParam==="userId"?"number":"text"},{prepend:t(()=>[l(M,{modelValue:e(v).queryParam,"onUpdate:modelValue":o[2]||(o[2]=a=>e(v).queryParam=a),class:"!w-110px",placeholder:"全部",onChange:H},{default:t(()=>[(r(!0),_(x,null,P(e(A),a=>(r(),u(Y,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","type"]),[[se,!0]])]),_:1}),l(S,null,{default:t(()=>[l(N,{onClick:E},{default:t(()=>[l(I,{class:"mr-5px",icon:"ep:search"}),o[6]||(o[6]=k(" 搜索 "))]),_:1}),l(N,{onClick:K},{default:t(()=>[l(I,{class:"mr-5px",icon:"ep:refresh"}),o[7]||(o[7]=k(" 重置 "))]),_:1}),d((r(),u(N,{plain:"",type:"success",onClick:G},{default:t(()=>[l(I,{class:"mr-5px",icon:"ep:check"}),o[8]||(o[8]=k(" 核销 "))]),_:1})),[[oe,["trade:order:pick-up"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(X,{class:"summary",gutter:16},{default:t(()=>[d((r(),u(U,{sm:6,xs:12},{default:t(()=>[l(h,{icon:"icon-park-outline:transaction-order","icon-bg-color":"text-blue-500","icon-color":"bg-blue-100",title:"订单数量",value:e(g)?.orderCount||0},null,8,["value"])]),_:1})),[[b,e(m)]]),d((r(),u(U,{sm:6,xs:12},{default:t(()=>[l(h,{decimals:2,icon:"streamline:money-cash-file-dollar-common-money-currency-cash-file","icon-bg-color":"text-purple-500","icon-color":"bg-purple-100",prefix:"￥",title:"订单金额",value:e(z)(e(g)?.orderPayPrice||0)},null,8,["value"])]),_:1})),[[b,e(m)]]),d((r(),u(U,{sm:6,xs:12},{default:t(()=>[l(h,{icon:"heroicons:receipt-refund","icon-bg-color":"text-yellow-500","icon-color":"bg-yellow-100",title:"退款单数",value:e(g)?.afterSaleCount||0},null,8,["value"])]),_:1})),[[b,e(m)]]),d((r(),u(U,{sm:6,xs:12},{default:t(()=>[l(h,{decimals:2,icon:"ri:refund-2-line","icon-bg-color":"text-green-500","icon-color":"bg-green-100",prefix:"￥",title:"退款金额",value:e(z)(e(g)?.afterSalePrice||0)},null,8,["value"])]),_:1})),[[b,e(m)]])]),_:1}),l(O,null,{default:t(()=>[d((r(),u(ae,{data:e(F)},{default:t(()=>[l(s,{align:"center",label:"订单号","min-width":"180",prop:"no"}),l(s,{align:"center",label:"用户信息","min-width":"80",prop:"user.nickname"}),l(s,{align:"center",label:"推荐人信息","min-width":"100",prop:"brokerageUser.nickname"}),l(s,{align:"center",label:"商品信息","min-width":"300",prop:"spuName"},{default:t(({row:a})=>[(r(!0),_(x,null,P(a.items,p=>(r(),_("div",{key:p.id,class:"flex items-center"},[l(ee,{class:"mr-10px h-30px w-30px flex-shrink-0","preview-src-list":[p.picUrl],"preview-teleported":"",src:p.picUrl},null,8,["preview-src-list","src"]),D("span",we,f(p.spuName),1),D("div",Se,[(r(!0),_(x,null,P(p.properties,V=>(r(),u(le,{key:V.propertyId,class:"mr-10px"},{default:t(()=>[k(f(V.propertyName)+": "+f(V.valueName),1)]),_:2},1024))),128)),D("span",null,f(e(ce)(p.price))+" 元 x "+f(p.count),1)])]))),128))]),_:1}),l(s,{align:"center",formatter:e(xe),label:"实付金额(元)","min-width":"110",prop:"payPrice"},null,8,["formatter"]),l(s,{align:"center",label:"核销员","min-width":"70",prop:"storeStaffName"}),l(s,{align:"center",label:"核销门店","min-width":"80",prop:"pickUpStoreId"},{default:t(({row:a})=>[k(f(e(T).find(p=>p.id===a.pickUpStoreId)?.name),1)]),_:1}),l(s,{align:"center",label:"支付状态","min-width":"80",prop:"payStatus"},{default:t(({row:a})=>[l($,{type:e(Q).INFRA_BOOLEAN_STRING,value:a.payStatus||!1},null,8,["type","value"])]),_:1}),l(s,{align:"center",label:"订单状态",prop:"status",width:"120"},{default:t(({row:a})=>[l($,{type:e(Q).TRADE_ORDER_STATUS,value:a.status},null,8,["type","value"])]),_:1}),l(s,{align:"center",formatter:e(ue),label:"下单时间","min-width":"170",prop:"createTime"},null,8,["formatter"])]),_:1},8,["data"])),[[b,e(m)]]),l(te,{limit:e(n).pageSize,"onUpdate:limit":o[4]||(o[4]=a=>e(n).pageSize=a),page:e(n).pageNo,"onUpdate:page":o[5]||(o[5]=a=>e(n).pageNo=a),total:e(C),onPagination:w},null,8,["limit","page","total"])]),_:1}),l(ke,{ref_key:"pickUpForm",ref:L,onSuccess:w},null,512)],64)}}}),He=de(Ue,[["__scopeId","data-v-f1398c58"]]);export{He as default};
