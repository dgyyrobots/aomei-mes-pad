/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{_ as R}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CIA3YA7G.js";import{d as T,r as m,f as U,Y as V,g as w,h as N,c as j,o as i,F as q,j as a,m as l,w as p,k as d,v as y,K as E,a as o,L as K,M as Q,z as W,N as Y}from"./index-BdmDrM2Y.js";import{_ as h}from"./Demo03CourseForm.vue_vue_type_script_setup_true_lang-KkwrH_aD.js";import{e as A,f as G}from"./index-zcv5_QWt.js";const Z=T({__name:"Demo03CourseList",props:{studentId:{}},setup($){const{t:x}=Y(),u=W(),f=$,_=m(!1),C=m([]),k=m(0),n=U({pageNo:1,pageSize:10,studentId:void 0});V(()=>f.studentId,t=>{n.studentId=t,D()},{immediate:!1});const c=async()=>{_.value=!0;try{const t=await A(n);C.value=t.list,k.value=t.total}finally{_.value=!1}},D=()=>{n.pageNo=1,c()},b=m(),I=(t,e)=>{if(!f.studentId){u.error("请选择一个学生");return}b.value.open(t,e,f.studentId)},P=async t=>{try{await u.delConfirm(),await G(t),u.success(x("common.delSuccess")),await c()}catch(e){console.log(e)}};return(t,e)=>{const S=E,g=w("el-button"),r=w("el-table-column"),z=w("el-table"),F=Q,B=R,v=N("hasPermi"),L=N("loading");return i(),j(q,null,[a(B,null,{default:l(()=>[p((i(),d(g,{plain:"",type:"primary",onClick:e[0]||(e[0]=s=>I("create"))},{default:l(()=>[a(S,{class:"mr-5px",icon:"ep:plus"}),e[3]||(e[3]=y(" 新增 "))]),_:1})),[[v,["infra:demo03-student:create"]]]),p((i(),d(z,{data:o(C),"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[a(r,{align:"center",label:"编号",prop:"id"}),a(r,{align:"center",label:"名字",prop:"name"}),a(r,{align:"center",label:"分数",prop:"score"}),a(r,{align:"center",formatter:o(K),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),a(r,{align:"center",label:"操作"},{default:l(s=>[p((i(),d(g,{link:"",type:"primary",onClick:M=>I("update",s.row.id)},{default:l(()=>e[4]||(e[4]=[y(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["infra:demo03-student:update"]]]),p((i(),d(g,{link:"",type:"danger",onClick:M=>P(s.row.id)},{default:l(()=>e[5]||(e[5]=[y("删除")])),_:2},1032,["onClick"])),[[v,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[L,o(_)]]),a(F,{limit:o(n).pageSize,"onUpdate:limit":e[1]||(e[1]=s=>o(n).pageSize=s),page:o(n).pageNo,"onUpdate:page":e[2]||(e[2]=s=>o(n).pageNo=s),total:o(k),onPagination:c},null,8,["limit","page","total"])]),_:1}),a(h,{ref_key:"formRef",ref:b,onSuccess:c},null,512)],64)}}});export{Z as _};
