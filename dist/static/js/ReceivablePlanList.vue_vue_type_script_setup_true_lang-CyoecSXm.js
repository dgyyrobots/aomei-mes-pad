/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{_ as B}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CIA3YA7G.js";import{d as S,r as p,f as $,u as F,Y as L,g as s,h,c as M,o as g,F as U,j as e,m as l,v as b,K as Y,w as V,a as t,k as j,t as q,L as A,M as K}from"./index-BdmDrM2Y.js";import{_ as O}from"./DictTag.vue_vue_type_script_lang-bjcRCBWf.js";import{_ as Q,g as W}from"./ReceivablePlanForm.vue_vue_type_script_setup_true_lang-BDUkiVuO.js";import{B as G}from"./index-DLhPPZUi.js";import{f as H}from"./formatter-DKe2Y-S-.js";import{D as J}from"./dict-Cm-9nniQ.js";const re=S({name:"CrmReceivablePlanList",__name:"ReceivablePlanList",props:{bizType:{},bizId:{}},setup(v){const c=v,m=p(!0),_=p(0),f=p([]),a=$({pageNo:1,pageSize:10,customerId:void 0}),u=async()=>{m.value=!0;try{a.customerId=void 0;let r={list:[],total:0};switch(c.bizType){case G.CRM_CUSTOMER:a.customerId=c.bizId,r=await W(a);break;default:return}f.value=r.list,_.value=r.total}finally{m.value=!1}},y=()=>{a.pageNo=1,u()},d=p(),C=()=>{d.value.open("create")},{push:w}=F(),k=r=>{w({name:"CrmReceivablePlanDetail",params:{id:r}})};return L(()=>[c.bizId,c.bizType],()=>{y()},{immediate:!0,deep:!0}),(r,i)=>{const R=Y,T=s("el-button"),z=s("el-row"),P=s("el-link"),o=s("el-table-column"),E=O,I=s("el-table"),N=K,x=B,D=h("loading");return g(),M(U,null,[e(z,{justify:"end"},{default:l(()=>[e(T,{onClick:C},{default:l(()=>[e(R,{class:"mr-5px",icon:"icon-park:income"}),i[2]||(i[2]=b(" 创建回款计划 "))]),_:1})]),_:1}),e(x,{class:"mt-10px"},{default:l(()=>[V((g(),j(I,{data:t(f),"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[e(o,{align:"center",fixed:"left",label:"期数",prop:"no"},{default:l(n=>[e(P,{type:"primary",underline:!1,onClick:X=>k(n.row.id)},{default:l(()=>[b(q(n.row.period),1)]),_:2},1032,["onClick"])]),_:1}),e(o,{align:"center",label:"客户名称",prop:"customerName"}),e(o,{align:"center",label:"合同编号",prop:"contractNo"}),e(o,{align:"center",formatter:t(H),label:"计划还款金额（元）",prop:"price"},null,8,["formatter"]),e(o,{align:"center",formatter:t(A),label:"计划还款日期",prop:"returnTime",width:"180px"},null,8,["formatter"]),e(o,{align:"center",label:"计划还款方式",prop:"auditStatus"},{default:l(n=>[e(E,{type:t(J).CRM_RECEIVABLE_RETURN_TYPE,value:n.row.returnType},null,8,["type","value"])]),_:1}),e(o,{align:"center",label:"提前几日提醒",prop:"remindDays"}),e(o,{align:"center",label:"备注",prop:"remark"})]),_:1},8,["data"])),[[D,t(m)]]),e(N,{limit:t(a).pageSize,"onUpdate:limit":i[0]||(i[0]=n=>t(a).pageSize=n),page:t(a).pageNo,"onUpdate:page":i[1]||(i[1]=n=>t(a).pageNo=n),total:t(_),onPagination:u},null,8,["limit","page","total"])]),_:1}),e(Q,{ref_key:"formRef",ref:d,onSuccess:u},null,512)],64)}}});export{re as _};
