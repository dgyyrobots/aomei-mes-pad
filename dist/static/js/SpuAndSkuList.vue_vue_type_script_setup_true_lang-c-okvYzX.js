/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{d as v,r as l,Y as k,g as c,k as b,o as x,m as i,j as o,a as r,U as L,v as C,t as S,b$ as P}from"./index-D3S9e4gi.js";import{c as I}from"./index-C2BNATKF.js";import{_ as D}from"./SkuList.vue_vue_type_script_setup_true_lang-CB7B6JOX.js";const V=v({name:"PromotionSpuAndSkuList",__name:"SpuAndSkuList",props:{spuList:{},ruleConfig:{},spuPropertyListP:{}},setup(g,{expose:w}){const d=g,m=l([]),f=l(),n=l([]),_=l();w({getSkuConfigs:e=>{f.value.validateSku();const a=[];return n.value.forEach(t=>{t.spuDetail.skus.forEach(u=>{a.push(u[e])})}),a}});const y=e=>{I({zIndex:99999999,urlList:[e]})};return k(()=>d.spuList,e=>{e&&(m.value=e)},{deep:!0,immediate:!0}),k(()=>d.spuPropertyListP,e=>{e&&(n.value=e,setTimeout(()=>{_.value=e.map(a=>a.spuId)},200))},{deep:!0,immediate:!0}),(e,a)=>{const t=c("el-table-column"),u=c("el-image"),h=c("el-table");return x(),b(h,{data:r(m),"expand-row-keys":r(_),"row-key":"id"},{default:i(()=>[o(t,{type:"expand",width:"30"},{default:i(({row:s})=>[o(r(D),{ref_key:"skuListRef",ref:f,"is-activity-component":!0,"prop-form-data":r(n).find(p=>p.spuId===s.id)?.spuDetail,"property-list":r(n).find(p=>p.spuId===s.id)?.propertyList,"rule-config":e.ruleConfig},{extension:i(()=>[L(e.$slots,"default")]),_:2},1032,["prop-form-data","property-list","rule-config"])]),_:3}),o(t,{key:"id",align:"center",label:"商品编号",prop:"id"}),o(t,{label:"商品图","min-width":"80"},{default:i(({row:s})=>[o(u,{class:"h-30px w-30px",src:s.picUrl,onClick:p=>y(s.picUrl)},null,8,["src","onClick"])]),_:1}),o(t,{label:"商品名称","min-width":"300",prop:"name","show-overflow-tooltip":!0}),o(t,{align:"center",label:"商品售价","min-width":"90",prop:"price"},{default:i(({row:s})=>[C(S(r(P)(s.price)),1)]),_:1}),o(t,{align:"center",label:"销量","min-width":"90",prop:"salesCount"}),o(t,{align:"center",label:"库存","min-width":"90",prop:"stock"})]),_:3},8,["data","expand-row-keys"])}}});export{V as _};
