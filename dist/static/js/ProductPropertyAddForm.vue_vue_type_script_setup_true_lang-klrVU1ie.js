/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as N,r as l,f as B,Y as I,g as d,h as T,k as _,o as y,_ as U,a as t,y as $,m as r,w as j,j as p,v as g,z as q,N as z}from"./index-C8VsLzxx.js";import{g as M,a as S}from"./property-DkQkyhkB.js";const G=N({name:"ProductPropertyForm",__name:"ProductPropertyAddForm",props:{propertyList:{type:Array,default:()=>{}}},setup(b,{expose:V}){const{t:w}=z(),k=q(),a=l(!1),x=l("添加商品属性"),n=l(!1),s=l({name:""}),P=B({name:[{required:!0,message:"名称不能为空",trigger:"blur"}]}),u=l(),f=l([]),C=b;I(()=>C.propertyList,i=>{i&&(f.value=i)},{deep:!0,immediate:!0}),V({open:async()=>{a.value=!0,L()}});const F=async()=>{if(!(!u||!await u.value.validate())){n.value=!0;try{const e=s.value,o=await M({name:e.name});if(o.length===0){const c=await S(e);f.value.push({id:c,...s.value,values:[]})}else o[0].values===null&&(o[0].values=[]),o[0].values=[],f.value.push(o[0]);k.success(w("common.createSuccess")),a.value=!1}finally{n.value=!1}}},L=()=>{s.value={name:""},u.value?.resetFields()};return(i,e)=>{const o=d("el-input"),c=d("el-form-item"),D=d("el-form"),v=d("el-button"),R=U,A=T("loading");return y(),_(R,{modelValue:t(a),"onUpdate:modelValue":e[2]||(e[2]=m=>$(a)?a.value=m:null),title:t(x)},{footer:r(()=>[p(v,{disabled:t(n),type:"primary",onClick:F},{default:r(()=>e[3]||(e[3]=[g("确 定")])),_:1},8,["disabled"]),p(v,{onClick:e[1]||(e[1]=m=>a.value=!1)},{default:r(()=>e[4]||(e[4]=[g("取 消")])),_:1})]),default:r(()=>[j((y(),_(D,{ref_key:"formRef",ref:u,"label-width":"80px",model:t(s),rules:t(P)},{default:r(()=>[p(c,{label:"属性名称",prop:"name"},{default:r(()=>[p(o,{modelValue:t(s).name,"onUpdate:modelValue":e[0]||(e[0]=m=>t(s).name=m),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[A,t(n)]])]),_:1},8,["modelValue","title"])}}});export{G as _};
