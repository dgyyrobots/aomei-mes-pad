/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{_ as G}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CIA3YA7G.js";import{_ as L}from"./UploadImgs-CwkRwUw3.js";import{d as Y,r as F,f as $,b as j,g as d,h as H,k as m,o as i,m as a,w as z,a as o,j as r,$ as J,c as g,F as k,n as _,v as n,t as U,z as Q}from"./index-BdmDrM2Y.js";import{s as X,g as Z}from"./index-CgsQjVCN.js";import{c as v,D as w}from"./dict-Cm-9nniQ.js";import"./UploadImgs.vue_vue_type_script_setup_true_lang-6j2zQmpw.js";const ne=Y({name:"TradeConfig",__name:"index",setup(h){const B=Q(),b=F(!1),V=F(),t=F({id:null,afterSaleRefundReasons:[],afterSaleReturnReasons:[],deliveryExpressFreeEnabled:!1,deliveryExpressFreePrice:0,deliveryPickUpEnabled:!1,brokerageEnabled:!1,brokerageEnabledCondition:void 0,brokerageBindMode:void 0,brokeragePosterUrls:[],brokerageFirstPercent:0,brokerageSecondPercent:0,brokerageWithdrawMinPrice:0,brokerageWithdrawFeePercent:0,brokerageBankNames:[],brokerageFrozenDays:0,brokerageWithdrawTypes:[]}),M=$({deliveryExpressFreePrice:[{required:!0,message:"满额包邮不能为空",trigger:"blur"}],brokerageEnabledCondition:[{required:!0,message:"分佣模式不能为空",trigger:"blur"}],brokerageBindMode:[{required:!0,message:"分销关系绑定模式不能为空",trigger:"blur"}],brokerageFirstPercent:[{required:!0,message:"一级返佣比例不能为空",trigger:"blur"}],brokerageSecondPercent:[{required:!0,message:"二级返佣比例不能为空",trigger:"blur"}],brokerageWithdrawMinPrice:[{required:!0,message:"用户提现最低金额不能为空",trigger:"blur"}],brokerageWithdrawFeePercent:[{required:!0,message:"提现手续费不能为空",trigger:"blur"}],brokerageBankNames:[{required:!0,message:"提现银行不能为空",trigger:"blur"}],brokerageFrozenDays:[{required:!0,message:"佣金冻结时间不能为空",trigger:"blur"}],brokerageWithdrawTypes:[{required:!0,message:"提现方式不能为空",trigger:"change"}]}),D=async()=>{if(!(b.value||!V||!await V.value.validate())){b.value=!0;try{const e={...t.value};e.brokeragePosterUrls=t.value.brokeragePosterUrls.map(y=>y?.url?y.url:y),e.deliveryExpressFreePrice=e.deliveryExpressFreePrice*100,e.brokerageWithdrawMinPrice=e.brokerageWithdrawMinPrice*100,await X(e),B.success("保存成功")}finally{b.value=!1}}},S=async()=>{b.value=!0;try{const p=await Z();p!=null&&(p.brokeragePosterUrls=p.brokeragePosterUrls.map(e=>({url:e})),t.value=p,t.value.deliveryExpressFreePrice=p.deliveryExpressFreePrice/100,t.value.brokerageWithdrawMinPrice=p.brokerageWithdrawMinPrice/100)}finally{b.value=!1}};return j(()=>{S()}),(p,e)=>{const y=d("el-input"),s=d("el-form-item"),P=d("el-option"),E=d("el-select"),x=d("el-tab-pane"),R=d("el-switch"),u=d("el-text"),f=d("el-input-number"),c=d("el-radio"),W=d("el-radio-group"),C=L,T=d("el-checkbox"),N=d("el-checkbox-group"),q=d("el-tabs"),A=d("el-button"),I=d("el-form"),O=G,K=H("loading");return i(),m(O,null,{default:a(()=>[z((i(),m(I,{ref_key:"formRef",ref:V,"label-width":"120px",model:o(t),rules:o(M)},{default:a(()=>[z(r(s,{label:"hideId"},{default:a(()=>[r(y,{modelValue:o(t).id,"onUpdate:modelValue":e[0]||(e[0]=l=>o(t).id=l)},null,8,["modelValue"])]),_:1},512),[[J,!1]]),r(q,null,{default:a(()=>[r(x,{label:"售后"},{default:a(()=>[r(s,{label:"退款理由",prop:"afterSaleRefundReasons"},{default:a(()=>[r(E,{modelValue:o(t).afterSaleRefundReasons,"onUpdate:modelValue":e[1]||(e[1]=l=>o(t).afterSaleRefundReasons=l),"allow-create":"",filterable:"",multiple:"",placeholder:"请直接输入退款理由"},{default:a(()=>[(i(!0),g(k,null,_(o(t).afterSaleRefundReasons,l=>(i(),m(P,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(s,{label:"退货理由",prop:"afterSaleReturnReasons"},{default:a(()=>[r(E,{modelValue:o(t).afterSaleReturnReasons,"onUpdate:modelValue":e[2]||(e[2]=l=>o(t).afterSaleReturnReasons=l),"allow-create":"",filterable:"",multiple:"",placeholder:"请直接输入退货理由"},{default:a(()=>[(i(!0),g(k,null,_(o(t).afterSaleReturnReasons,l=>(i(),m(P,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),r(x,{label:"配送"},{default:a(()=>[r(s,{label:"启用包邮",prop:"deliveryExpressFreeEnabled"},{default:a(()=>[r(R,{modelValue:o(t).deliveryExpressFreeEnabled,"onUpdate:modelValue":e[3]||(e[3]=l=>o(t).deliveryExpressFreeEnabled=l),style:{"user-select":"none"}},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[17]||(e[17]=[n("商城是否启用全场包邮")])),_:1})]),_:1}),r(s,{label:"满额包邮",prop:"deliveryExpressFreePrice"},{default:a(()=>[r(f,{modelValue:o(t).deliveryExpressFreePrice,"onUpdate:modelValue":e[4]||(e[4]=l=>o(t).deliveryExpressFreePrice=l),class:"!w-xs",min:0,placeholder:"请输入满额包邮",precision:2},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[18]||(e[18]=[n("商城商品满多少金额即可包邮，单位：元")])),_:1})]),_:1}),r(s,{label:"启用门店自提",prop:"deliveryPickUpEnabled"},{default:a(()=>[r(R,{modelValue:o(t).deliveryPickUpEnabled,"onUpdate:modelValue":e[5]||(e[5]=l=>o(t).deliveryPickUpEnabled=l),style:{"user-select":"none"}},null,8,["modelValue"])]),_:1})]),_:1}),r(x,{label:"分销"},{default:a(()=>[r(s,{label:"分佣启用",prop:"brokerageEnabled"},{default:a(()=>[r(R,{modelValue:o(t).brokerageEnabled,"onUpdate:modelValue":e[6]||(e[6]=l=>o(t).brokerageEnabled=l),style:{"user-select":"none"}},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[19]||(e[19]=[n("商城是否开启分销模式")])),_:1})]),_:1}),r(s,{label:"分佣模式",prop:"brokerageEnabledCondition"},{default:a(()=>[r(W,{modelValue:o(t).brokerageEnabledCondition,"onUpdate:modelValue":e[7]||(e[7]=l=>o(t).brokerageEnabledCondition=l)},{default:a(()=>[(i(!0),g(k,null,_(o(v)(o(w).BROKERAGE_ENABLED_CONDITION),l=>(i(),m(c,{key:l.value,label:l.value},{default:a(()=>[n(U(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[20]||(e[20]=[n("人人分销：每个用户都可以成为推广员")])),_:1}),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[21]||(e[21]=[n("指定分销：仅可在后台手动设置推广员")])),_:1})]),_:1}),r(s,{label:"分销关系绑定",prop:"brokerageBindMode"},{default:a(()=>[r(W,{modelValue:o(t).brokerageBindMode,"onUpdate:modelValue":e[8]||(e[8]=l=>o(t).brokerageBindMode=l)},{default:a(()=>[(i(!0),g(k,null,_(o(v)(o(w).BROKERAGE_BIND_MODE),l=>(i(),m(c,{key:l.value,label:l.value},{default:a(()=>[n(U(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[22]||(e[22]=[n("首次绑定：只要用户没有推广人，随时都可以绑定推广关系")])),_:1}),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[23]||(e[23]=[n("注册绑定：只有新用户注册时或首次进入系统时才可以绑定推广关系")])),_:1})]),_:1}),r(s,{label:"分销海报图"},{default:a(()=>[r(C,{modelValue:o(t).brokeragePosterUrls,"onUpdate:modelValue":e[9]||(e[9]=l=>o(t).brokeragePosterUrls=l),height:"125px",width:"75px"},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[24]||(e[24]=[n("个人中心分销海报图片，建议尺寸 600x1000")])),_:1})]),_:1}),r(s,{label:"一级返佣比例",prop:"brokerageFirstPercent"},{default:a(()=>[r(f,{modelValue:o(t).brokerageFirstPercent,"onUpdate:modelValue":e[10]||(e[10]=l=>o(t).brokerageFirstPercent=l),class:"!w-xs",max:100,min:0,placeholder:"请输入一级返佣比例"},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[25]||(e[25]=[n("订单交易成功后给推广人返佣的百分比")])),_:1})]),_:1}),r(s,{label:"二级返佣比例",prop:"brokerageSecondPercent"},{default:a(()=>[r(f,{modelValue:o(t).brokerageSecondPercent,"onUpdate:modelValue":e[11]||(e[11]=l=>o(t).brokerageSecondPercent=l),class:"!w-xs",max:100,min:0,placeholder:"请输入二级返佣比例"},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[26]||(e[26]=[n("订单交易成功后给推广人的推荐人返佣的百分比")])),_:1})]),_:1}),r(s,{label:"佣金冻结天数",prop:"brokerageFrozenDays"},{default:a(()=>[r(f,{modelValue:o(t).brokerageFrozenDays,"onUpdate:modelValue":e[12]||(e[12]=l=>o(t).brokerageFrozenDays=l),class:"!w-xs",min:0,placeholder:"请输入佣金冻结天数"},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[27]||(e[27]=[n("防止用户退款，佣金被提现了，所以需要设置佣金冻结时间，单位：天")])),_:1})]),_:1}),r(s,{label:"提现最低金额",prop:"brokerageWithdrawMinPrice"},{default:a(()=>[r(f,{modelValue:o(t).brokerageWithdrawMinPrice,"onUpdate:modelValue":e[13]||(e[13]=l=>o(t).brokerageWithdrawMinPrice=l),class:"!w-xs",min:0,placeholder:"请输入提现最低金额",precision:2},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[28]||(e[28]=[n("用户提现最低金额限制，单位：元")])),_:1})]),_:1}),r(s,{label:"提现手续费",prop:"brokerageWithdrawFeePercent"},{default:a(()=>[r(f,{modelValue:o(t).brokerageWithdrawFeePercent,"onUpdate:modelValue":e[14]||(e[14]=l=>o(t).brokerageWithdrawFeePercent=l),class:"!w-xs",max:100,min:0,placeholder:"请输入提现手续费"},null,8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[29]||(e[29]=[n(" 提现手续费百分比，范围 0-100，0 为无提现手续费。例：设置 10，即收取 10% 手续费，提现 10 元，到账 9 元，1 元手续费 ")])),_:1})]),_:1}),r(s,{label:"提现方式",prop:"brokerageWithdrawTypes"},{default:a(()=>[r(N,{modelValue:o(t).brokerageWithdrawTypes,"onUpdate:modelValue":e[15]||(e[15]=l=>o(t).brokerageWithdrawTypes=l)},{default:a(()=>[(i(!0),g(k,null,_(o(v)(o(w).BROKERAGE_WITHDRAW_TYPE),l=>(i(),m(T,{key:l.value,label:l.value},{default:a(()=>[n(U(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[30]||(e[30]=[n("商城开通提现的付款方式")])),_:1})]),_:1}),r(s,{label:"提现银行",prop:"brokerageBankNames"},{default:a(()=>[r(E,{modelValue:o(t).brokerageBankNames,"onUpdate:modelValue":e[16]||(e[16]=l=>o(t).brokerageBankNames=l),multiple:"",placeholder:"请选择提现银行"},{default:a(()=>[(i(!0),g(k,null,_(o(v)(o(w).BROKERAGE_BANK_NAME),l=>(i(),m(P,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(u,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[31]||(e[31]=[n("商城开通提现的银行列表")])),_:1})]),_:1})]),_:1})]),_:1}),r(s,null,{default:a(()=>[r(A,{loading:o(b),type:"primary",onClick:D},{default:a(()=>e[32]||(e[32]=[n("保存")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])),[[K,o(b)]])]),_:1})}}});export{ne as default};
