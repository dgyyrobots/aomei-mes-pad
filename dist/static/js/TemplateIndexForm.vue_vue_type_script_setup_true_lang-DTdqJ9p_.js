/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{d as z,r as v,f as I,Y as A,g as h,h as M,c as T,o as _,F as y,w as C,j as e,a as t,k as b,m as d,v as g,K,n as X}from"./index-BW9ifGp0.js";import{a as G,D as H}from"./dict-BcQRoIPV.js";import{a as J}from"./index-DrIL8I6l.js";import{_ as Q}from"./TemplateList.vue_vue_type_script_setup_true_lang-DfzyD4Mk.js";const de=z({__name:"TemplateIndexForm",props:{templateId:{}},setup(q,{expose:$}){const f=q,x=v(!1),c=v([]),r=I({templateId:[{required:!0,message:"检测模板ID不能为空",trigger:"change"}],indexId:[{required:!0,message:"检测项ID不能为空",trigger:"change"}],indexCode:[{required:!0,message:"检测项编码不能为空",trigger:"change"}],indexName:[{required:!0,message:"检测项名称不能为空",trigger:"change"}],indexType:[{required:!0,message:"检测项类型不能为空",trigger:"change"}]}),U=v();A(()=>f.templateId,async p=>{if(c.value=[],!!p)try{x.value=!0,c.value=await J(p)}finally{x.value=!1}},{immediate:!0}),v(!1),I({id:void 0,templateId:void 0,indexId:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,checkMethod:void 0,standerVal:void 0,unitOfMeasure:void 0,thresholdMax:void 0,thresholdMin:void 0,docUrl:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0});const w=()=>{const p={id:void 0,templateId:void 0,indexId:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,checkMethod:void 0,standerVal:void 0,unitOfMeasure:void 0,thresholdMax:void 0,thresholdMin:void 0,docUrl:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0};p.templateId=f.templateId,c.value.push(p)},D=p=>{c.value.splice(p,1)},N=()=>U.value.validate(),O=()=>c.value;v();const k=v(),E=()=>{k.value.showFlag()},B=p=>{p.forEach(i=>{const m={id:void 0,templateId:void 0,indexId:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,checkMethod:void 0,standerVal:void 0,unitOfMeasure:void 0,thresholdMax:void 0,thresholdMin:void 0,docUrl:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0};m.indexId=i.id,m.indexCode=i.indexCode,m.indexName=i.indexName,m.indexType=i.indexType,m.remark=i.remark,m.qcTool=i.qcTool,m.templateId=f.templateId,c.value.push(m)}),console.log(c.value)};return $({validate:N,getData:O}),(p,i)=>{const m=K,V=h("el-button"),u=h("el-form-item"),n=h("el-table-column"),s=h("el-input"),F=h("el-option"),P=h("el-select"),S=h("el-table"),L=h("el-form"),R=h("el-row"),Y=M("hasPermi"),j=M("loading");return _(),T(y,null,[C((_(),b(L,{ref_key:"formRef",ref:U,model:t(c),rules:t(r),"label-width":"0px","inline-message":!0},{default:d(()=>[e(u,null,{default:d(()=>[C((_(),b(V,{type:"primary",plain:"",onClick:E},{default:d(()=>[e(m,{icon:"ep:plus",class:"mr-5px"}),i[0]||(i[0]=g(" 新增 "))]),_:1})),[[Y,["qmcbasic:template:create"]]])]),_:1}),e(S,{data:t(c),class:"-mt-10px"},{default:d(()=>[e(n,{label:"序号",type:"index",width:"100"}),e(n,{label:"检测项ID","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.indexId`,rules:t(r).indexId,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.indexId,"onUpdate:modelValue":a=>l.indexId=a,placeholder:"请输入检测项ID"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"检测项编码","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.indexCode`,rules:t(r).indexCode,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.indexCode,"onUpdate:modelValue":a=>l.indexCode=a,placeholder:"请输入检测项编码"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"检测项名称","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.indexName`,rules:t(r).indexName,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.indexName,"onUpdate:modelValue":a=>l.indexName=a,placeholder:"请输入检测项名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"检测项类型","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.indexType`,rules:t(r).indexType,class:"mb-0px!"},{default:d(()=>[e(P,{modelValue:l.indexType,"onUpdate:modelValue":a=>l.indexType=a,placeholder:"请选择检测项类型"},{default:d(()=>[(_(!0),T(y,null,X(t(G)(t(H).MES_INDEX_TYPE),a=>(_(),b(F,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"检测工具","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.qcTool`,rules:t(r).qcTool,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.qcTool,"onUpdate:modelValue":a=>l.qcTool=a,placeholder:"请输入检测工具"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"检测要求","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.checkMethod`,rules:t(r).checkMethod,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.checkMethod,"onUpdate:modelValue":a=>l.checkMethod=a,placeholder:"请输入检测要求"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"标准值","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.standerVal`,rules:t(r).standerVal,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.standerVal,"onUpdate:modelValue":a=>l.standerVal=a,placeholder:"请输入标准值"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"单位","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.unitOfMeasure`,rules:t(r).unitOfMeasure,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.unitOfMeasure,"onUpdate:modelValue":a=>l.unitOfMeasure=a,placeholder:"请输入单位"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"误差上限","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.thresholdMax`,rules:t(r).thresholdMax,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.thresholdMax,"onUpdate:modelValue":a=>l.thresholdMax=a,placeholder:"请输入误差上限"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"误差下限","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.thresholdMin`,rules:t(r).thresholdMin,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.thresholdMin,"onUpdate:modelValue":a=>l.thresholdMin=a,placeholder:"请输入误差下限"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"说明图","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.docUrl`,rules:t(r).docUrl,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.docUrl,"onUpdate:modelValue":a=>l.docUrl=a,placeholder:"请输入说明图"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{label:"备注","min-width":"150"},{default:d(({row:l,$index:o})=>[e(u,{prop:`${o}.remark`,rules:t(r).remark,class:"mb-0px!"},{default:d(()=>[e(s,{modelValue:l.remark,"onUpdate:modelValue":a=>l.remark=a,placeholder:"请输入备注"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(n,{align:"center",fixed:"right",label:"操作",width:"60"},{default:d(({$index:l})=>[e(V,{onClick:o=>D(l),link:""},{default:d(()=>i[1]||(i[1]=[g("—")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model","rules"])),[[j,t(x)]]),e(R,{justify:"center",class:"mt-3"},{default:d(()=>[e(V,{onClick:w,round:""},{default:d(()=>i[2]||(i[2]=[g("+ 添加检测模板项")])),_:1})]),_:1}),e(Q,{ref_key:"Template",ref:k,onOnSelected:B},null,512)],64)}}});export{de as _};
