/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{d as Q,r as _,f as j,b as J,g as i,h as D,c as O,o as r,j as t,m as o,a,J as G,F as U,n as H,k as m,w as f,v as c,K as W,L as X,M as Z,z as h,N as ee}from"./index-D3S9e4gi.js";import{_ as te}from"./DictTag.vue_vue_type_script_lang-DqsMypuM.js";import{_ as le}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DXTslarw.js";import{_ as oe,g as ae,d as ne,p as se}from"./NoticeForm.vue_vue_type_script_setup_true_lang-BTsYHdxw.js";import{c as ie,D as C}from"./dict-D5UmY5m8.js";import"./color-B5phLuB-.js";import"./style.css_vue_type_style_index_0_src_true_lang-DzOdDvxI.js";import"./locale-DrqPyNfh.js";import"./constants-BPQb3nxh.js";const ve=Q({name:"SystemNotice",__name:"index",setup(re){const g=h(),{t:N}=ee(),v=_(!0),x=_(0),S=_([]),n=j({pageNo:1,pageSize:10,title:"",type:void 0,status:void 0}),T=_(),d=async()=>{v.value=!0;try{const s=await ae(n);S.value=s.list,x.value=s.total}finally{v.value=!1}},b=()=>{n.pageNo=1,d()},E=()=>{T.value.resetFields(),b()},$=_(),M=(s,e)=>{$.value.open(s,e)},z=async s=>{try{await g.delConfirm(),await ne(s),g.success(N("common.delSuccess")),await d()}catch(e){console.log(e)}},I=async s=>{try{await g.confirm("是否推送所选中通知？"),await se(s),g.success(N("推送成功"))}catch(e){console.log(e)}};return J(()=>{d()}),(s,e)=>{const R=i("el-input"),w=i("el-form-item"),q=i("el-option"),B=i("el-select"),k=W,p=i("el-button"),K=i("el-form"),P=le,u=i("el-table-column"),V=te,L=i("el-table"),Y=Z,y=D("hasPermi"),A=D("loading");return r(),O(U,null,[t(P,null,{default:o(()=>[t(K,{ref_key:"queryFormRef",ref:T,class:"-mb-15px",inline:!0,"label-width":"68px",model:a(n)},{default:o(()=>[t(w,{label:"公告标题",prop:"title"},{default:o(()=>[t(R,{modelValue:a(n).title,"onUpdate:modelValue":e[0]||(e[0]=l=>a(n).title=l),class:"!w-240px",clearable:"",placeholder:"请输入公告标题",onKeyup:G(b,["enter"])},null,8,["modelValue"])]),_:1}),t(w,{label:"公告状态",prop:"status"},{default:o(()=>[t(B,{modelValue:a(n).status,"onUpdate:modelValue":e[1]||(e[1]=l=>a(n).status=l),class:"!w-240px",clearable:"",placeholder:"请选择公告状态"},{default:o(()=>[(r(!0),O(U,null,H(a(ie)(a(C).COMMON_STATUS),l=>(r(),m(q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,null,{default:o(()=>[t(p,{onClick:b},{default:o(()=>[t(k,{class:"mr-5px",icon:"ep:search"}),e[5]||(e[5]=c(" 搜索 "))]),_:1}),t(p,{onClick:E},{default:o(()=>[t(k,{class:"mr-5px",icon:"ep:refresh"}),e[6]||(e[6]=c(" 重置 "))]),_:1}),f((r(),m(p,{plain:"",type:"primary",onClick:e[2]||(e[2]=l=>M("create"))},{default:o(()=>[t(k,{class:"mr-5px",icon:"ep:plus"}),e[7]||(e[7]=c(" 新增 "))]),_:1})),[[y,["system:notice:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(P,null,{default:o(()=>[f((r(),m(L,{data:a(S)},{default:o(()=>[t(u,{align:"center",label:"公告编号",prop:"id"}),t(u,{align:"center",label:"公告标题",prop:"title"}),t(u,{align:"center",label:"公告类型",prop:"type"},{default:o(l=>[t(V,{type:a(C).SYSTEM_NOTICE_TYPE,value:l.row.type},null,8,["type","value"])]),_:1}),t(u,{align:"center",label:"状态",prop:"status"},{default:o(l=>[t(V,{type:a(C).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),t(u,{align:"center",formatter:a(X),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),t(u,{align:"center",label:"操作"},{default:o(l=>[f((r(),m(p,{link:"",type:"primary",onClick:F=>M("update",l.row.id)},{default:o(()=>e[8]||(e[8]=[c("编辑")])),_:2},1032,["onClick"])),[[y,["system:notice:update"]]]),f((r(),m(p,{link:"",type:"danger",onClick:F=>z(l.row.id)},{default:o(()=>e[9]||(e[9]=[c("删除")])),_:2},1032,["onClick"])),[[y,["system:notice:delete"]]]),f((r(),m(p,{link:"",onClick:F=>I(l.row.id)},{default:o(()=>e[10]||(e[10]=[c("推送")])),_:2},1032,["onClick"])),[[y,["system:notice:update"]]])]),_:1})]),_:1},8,["data"])),[[A,a(v)]]),t(Y,{limit:a(n).pageSize,"onUpdate:limit":e[3]||(e[3]=l=>a(n).pageSize=l),page:a(n).pageNo,"onUpdate:page":e[4]||(e[4]=l=>a(n).pageNo=l),total:a(x),onPagination:d},null,8,["limit","page","total"])]),_:1}),t(oe,{ref_key:"formRef",ref:$,onSuccess:d},null,512)],64)}}});export{ve as default};
