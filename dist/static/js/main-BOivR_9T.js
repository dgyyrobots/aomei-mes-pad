/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{V as N,d as q,r as U,f as L,b as O,g as P,h as A,c as p,o,l as h,w as I,j as a,F,n as M,i as T,t as K,m as d,v as S,K as G,a as t,M as H,k as V,L as E,A as J}from"./index-D3eRVKjp.js";import Q from"./main-C-_U4TFm.js";import R from"./main-s-oOJ6F8.js";import{_ as X}from"./main.vue_vue_type_script_setup_true_lang-B8IpPM1S.js";import{g as Y}from"./index-Cfz7fdCx.js";import{g as Z}from"./index-CqFXHsjX.js";var x=(i=>(i.Draft="2",i.Published="1",i))(x||{});const ee=i=>N.get({url:"/mp/draft/page",params:i}),we=(i,m)=>N.post({url:`/mp/draft/create?accountId=${i}`,data:{articles:m}}),be=(i,m,r)=>N.put({url:`/mp/draft/update?accountId=${i}&mediaId=${m}`,method:"put",data:r}),ke=(i,m)=>N.delete({url:`/mp/draft/delete?accountId=${i}&mediaId=${m}`}),te={class:"pb-30px"},ae={key:0},le={class:"waterfall"},ne=["src"],oe={class:"item-name"},ie={key:1},se={key:2},re={key:3},ce={class:"waterfall"},pe={key:0},de=q({name:"WxMaterialSelect",__name:"main",props:{type:{},accountId:{},newsType:{default:x.Published}},emits:["select-material"],setup(i,{emit:m}){const r=i,W=m,_=U(!1),g=U(0),f=U([]),n=L({pageNo:1,pageSize:10,accountId:r.accountId}),v=s=>{W("select-material",s)},$=async()=>{_.value=!0;try{r.type==="news"&&r.newsType===x.Published?await B():r.type==="news"&&r.newsType===x.Draft?await j():await w()}finally{_.value=!1}},w=async()=>{const s=await Y({...n,type:r.type});f.value=s.list,g.value=s.total},B=async()=>{const s=await Z(n);s.list.forEach(l=>{l.content.newsItem.forEach(u=>{u.picUrl=u.thumbUrl})}),f.value=s.list,g.value=s.total},j=async()=>{const s=await ee(n);s.list.forEach(l=>{l.content.newsItem.forEach(u=>{u.picUrl=u.thumbUrl})}),f.value=s.list,g.value=s.total};return O(async()=>{$()}),(s,l)=>{const y=G,u=P("el-button"),z=P("el-row"),b=H,c=P("el-table-column"),D=P("el-table"),k=A("loading");return o(),p("div",te,[r.type==="image"?(o(),p("div",ae,[I((o(),p("div",le,[(o(!0),p(F,null,M(t(f),e=>(o(),p("div",{key:e.mediaId,class:"waterfall-item"},[T("img",{class:"material-img",src:e.url},null,8,ne),T("p",oe,K(e.name),1),a(z,{class:"ope-row"},{default:d(()=>[a(u,{type:"success",onClick:C=>v(e)},{default:d(()=>[l[8]||(l[8]=S(" 选择 ")),a(y,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))])),[[k,t(_)]]),a(b,{limit:t(n).pageSize,"onUpdate:limit":l[0]||(l[0]=e=>t(n).pageSize=e),page:t(n).pageNo,"onUpdate:page":l[1]||(l[1]=e=>t(n).pageNo=e),total:t(g),onPagination:w},null,8,["limit","page","total"])])):r.type==="voice"?(o(),p("div",ie,[I((o(),V(D,{data:t(f)},{default:d(()=>[a(c,{align:"center",label:"编号",prop:"mediaId"}),a(c,{align:"center",label:"文件名",prop:"name"}),a(c,{align:"center",label:"语音"},{default:d(e=>[a(t(R),{url:e.row.url},null,8,["url"])]),_:1}),a(c,{align:"center",formatter:t(E),label:"上传时间",prop:"createTime",width:"180"},null,8,["formatter"]),a(c,{align:"center",fixed:"right",label:"操作"},{default:d(e=>[a(u,{link:"",type:"primary",onClick:C=>v(e.row)},{default:d(()=>[l[9]||(l[9]=S(" 选择 ")),a(y,{icon:"ep:plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,t(_)]]),a(b,{limit:t(n).pageSize,"onUpdate:limit":l[2]||(l[2]=e=>t(n).pageSize=e),page:t(n).pageNo,"onUpdate:page":l[3]||(l[3]=e=>t(n).pageNo=e),total:t(g),onPagination:$},null,8,["limit","page","total"])])):r.type==="video"?(o(),p("div",se,[I((o(),V(D,{data:t(f)},{default:d(()=>[a(c,{align:"center",label:"编号",prop:"mediaId"}),a(c,{align:"center",label:"文件名",prop:"name"}),a(c,{align:"center",label:"标题",prop:"title"}),a(c,{align:"center",label:"介绍",prop:"introduction"}),a(c,{align:"center",label:"视频"},{default:d(e=>[a(t(X),{url:e.row.url},null,8,["url"])]),_:1}),a(c,{align:"center",formatter:t(E),label:"上传时间",prop:"createTime",width:"180"},null,8,["formatter"]),a(c,{align:"center","class-name":"small-padding fixed-width",fixed:"right",label:"操作"},{default:d(e=>[a(u,{link:"",type:"primary",onClick:C=>v(e.row)},{default:d(()=>[l[10]||(l[10]=S(" 选择 ")),a(y,{icon:"akar-icons:circle-plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,t(_)]]),a(b,{limit:t(n).pageSize,"onUpdate:limit":l[4]||(l[4]=e=>t(n).pageSize=e),page:t(n).pageNo,"onUpdate:page":l[5]||(l[5]=e=>t(n).pageNo=e),total:t(g),onPagination:w},null,8,["limit","page","total"])])):r.type==="news"?(o(),p("div",re,[I((o(),p("div",ce,[(o(!0),p(F,null,M(t(f),e=>(o(),p("div",{key:e.mediaId,class:"waterfall-item"},[e.content&&e.content.newsItem?(o(),p("div",pe,[a(t(Q),{articles:e.content.newsItem},null,8,["articles"]),a(z,{class:"ope-row"},{default:d(()=>[a(u,{type:"success",onClick:C=>v(e)},{default:d(()=>[l[11]||(l[11]=S(" 选择 ")),a(y,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)])):h("",!0)]))),128))])),[[k,t(_)]]),a(b,{limit:t(n).pageSize,"onUpdate:limit":l[6]||(l[6]=e=>t(n).pageSize=e),page:t(n).pageNo,"onUpdate:page":l[7]||(l[7]=e=>t(n).pageNo=e),total:t(g),onPagination:w},null,8,["limit","page","total"])])):h("",!0)])}}}),ue=J(de,[["__scopeId","data-v-b4761b42"]]),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{ue as W,we as c,ke as d,ee as g,Pe as m,be as u};
