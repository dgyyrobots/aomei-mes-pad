/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as j,u as J,r as v,f as W,b as X,g as y,h as Z,c as s,o as u,F as d,j as o,m as r,a as l,k as n,l as x,n as f,J as G,w as Y,Z as h,v as I,K as ee,M as le}from"./index-C8VsLzxx.js";import{_ as ae}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DmvxiVVs.js";import{g as te}from"./index-DdHMl-aC.js";import{a as oe}from"./index-CXFvxTTu.js";import{e as re}from"./index-DqPrdxal.js";import{D as E}from"./constants-BPQb3nxh.js";import{c as V,D as b,a as ue}from"./dict-_inVRzR5.js";import ne from"./OrderTableColumn-DFoxnnw5.js";const be=j({__name:"UserOrderList",props:{userId:{}},setup(P){const{push:A}=J(),k=v(!0),S=v(0),g=v([]),C=v([]),R=v([]),L=v(),t=v({pageNo:1,pageSize:10,userId:P.userId,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0}),_=W({queryParam:""}),N=v([{value:"no",label:"订单号"},{value:"userNickname",label:"用户昵称"},{value:"userMobile",label:"用户电话"}]),M=c=>{N.value.filter(a=>a.value!==c)?.forEach(a=>{a.value in t.value&&delete t.value[a.value]})},T=async()=>{t.value.pageNo=1,await U()},F=()=>{L.value?.resetFields(),t.value.userId=P.userId,T()},U=async()=>{k.value=!0;try{const c=await re(t.value);g.value=c.list,S.value=c.total}finally{k.value=!1}},K=c=>{A({name:"TradeOrderDetail",params:{orderId:c}})};return X(async()=>{await U(),C.value=await oe(),R.value=await te()}),(c,a)=>{const i=y("el-option"),m=y("el-select"),p=y("el-form-item"),$=y("el-date-picker"),q=y("el-input"),w=ee,D=y("el-button"),z=y("el-form"),O=ae,B=y("el-table"),H=le,Q=Z("loading");return u(),s(d,null,[o(O,null,{default:r(()=>[o(z,{ref_key:"queryFormRef",ref:L,class:"-mb-15px",inline:!0,"label-width":"68px",model:l(t)},{default:r(()=>[o(p,{label:"订单状态",prop:"status"},{default:r(()=>[o(m,{modelValue:l(t).status,"onUpdate:modelValue":a[0]||(a[0]=e=>l(t).status=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:r(()=>[(u(!0),s(d,null,f(l(V)(l(b).TRADE_ORDER_STATUS),e=>(u(),n(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"支付方式",prop:"payChannelCode"},{default:r(()=>[o(m,{modelValue:l(t).payChannelCode,"onUpdate:modelValue":a[1]||(a[1]=e=>l(t).payChannelCode=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:r(()=>[(u(!0),s(d,null,f(l(ue)(l(b).PAY_CHANNEL_CODE),e=>(u(),n(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"创建时间",prop:"createTime"},{default:r(()=>[o($,{modelValue:l(t).createTime,"onUpdate:modelValue":a[2]||(a[2]=e=>l(t).createTime=e),class:"!w-280px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"自定义时间","start-placeholder":"自定义时间",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),o(p,{label:"订单来源",prop:"terminal"},{default:r(()=>[o(m,{modelValue:l(t).terminal,"onUpdate:modelValue":a[3]||(a[3]=e=>l(t).terminal=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:r(()=>[(u(!0),s(d,null,f(l(V)(l(b).TERMINAL),e=>(u(),n(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"订单类型",prop:"type"},{default:r(()=>[o(m,{modelValue:l(t).type,"onUpdate:modelValue":a[4]||(a[4]=e=>l(t).type=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:r(()=>[(u(!0),s(d,null,f(l(V)(l(b).TRADE_ORDER_TYPE),e=>(u(),n(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"配送方式",prop:"deliveryType"},{default:r(()=>[o(m,{modelValue:l(t).deliveryType,"onUpdate:modelValue":a[5]||(a[5]=e=>l(t).deliveryType=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:r(()=>[(u(!0),s(d,null,f(l(V)(l(b).TRADE_DELIVERY_TYPE),e=>(u(),n(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(t).deliveryType===l(E).EXPRESS.type?(u(),n(p,{key:0,label:"快递公司",prop:"logisticsId"},{default:r(()=>[o(m,{modelValue:l(t).logisticsId,"onUpdate:modelValue":a[6]||(a[6]=e=>l(t).logisticsId=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:r(()=>[(u(!0),s(d,null,f(l(R),e=>(u(),n(i,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):x("",!0),l(t).deliveryType===l(E).PICK_UP.type?(u(),n(p,{key:1,label:"自提门店",prop:"pickUpStoreId"},{default:r(()=>[o(m,{modelValue:l(t).pickUpStoreId,"onUpdate:modelValue":a[7]||(a[7]=e=>l(t).pickUpStoreId=e),class:"!w-280px",clearable:"",multiple:"",placeholder:"全部"},{default:r(()=>[(u(!0),s(d,null,f(l(C),e=>(u(),n(i,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):x("",!0),l(t).deliveryType===l(E).PICK_UP.type?(u(),n(p,{key:2,label:"核销码",prop:"pickUpVerifyCode"},{default:r(()=>[o(q,{modelValue:l(t).pickUpVerifyCode,"onUpdate:modelValue":a[8]||(a[8]=e=>l(t).pickUpVerifyCode=e),class:"!w-280px",clearable:"",placeholder:"请输入自提核销码",onKeyup:G(T,["enter"])},null,8,["modelValue"])]),_:1})):x("",!0),o(p,{label:"聚合搜索"},{default:r(()=>[Y(o(q,{modelValue:l(t)[l(_).queryParam],"onUpdate:modelValue":a[10]||(a[10]=e=>l(t)[l(_).queryParam]=e),class:"!w-280px",clearable:"",placeholder:"请输入"},{prepend:r(()=>[o(m,{modelValue:l(_).queryParam,"onUpdate:modelValue":a[9]||(a[9]=e=>l(_).queryParam=e),class:"!w-110px",clearable:"",placeholder:"全部",onChange:M},{default:r(()=>[(u(!0),s(d,null,f(l(N),e=>(u(),n(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),[[h,!0]])]),_:1}),o(p,null,{default:r(()=>[o(D,{onClick:T},{default:r(()=>[o(w,{class:"mr-5px",icon:"ep:search"}),a[13]||(a[13]=I(" 搜索 "))]),_:1}),o(D,{onClick:F},{default:r(()=>[o(w,{class:"mr-5px",icon:"ep:refresh"}),a[14]||(a[14]=I(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o(O,null,{default:r(()=>[Y((u(),n(B,{data:l(g),"row-key":"id"},{default:r(()=>[o(l(ne),{list:l(g),"pick-up-store-list":l(C)},{default:r(({row:e})=>[o(D,{link:"",type:"primary",onClick:pe=>K(e.id)},{default:r(()=>[o(w,{icon:"ep:notification"}),a[15]||(a[15]=I(" 详情 "))]),_:2},1032,["onClick"])]),_:1},8,["list","pick-up-store-list"])]),_:1},8,["data"])),[[Q,l(k)]]),o(H,{limit:l(t).pageSize,"onUpdate:limit":a[11]||(a[11]=e=>l(t).pageSize=e),page:l(t).pageNo,"onUpdate:page":a[12]||(a[12]=e=>l(t).pageNo=e),total:l(S),onPagination:U},null,8,["limit","page","total"])]),_:1})],64)}}});export{be as _};
