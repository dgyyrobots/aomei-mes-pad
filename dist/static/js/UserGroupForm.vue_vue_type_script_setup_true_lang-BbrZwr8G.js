/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as O,r as n,f as $,g as r,h as j,k as f,o as m,m as a,w as z,a as l,j as s,c as w,F as C,n as I,v as _,t as P,y as Y,_ as H,N as J,z as K}from"./index-BdC40rFX.js";import{c as Q,D as W}from"./dict-D4wjFrBa.js";import{C as D}from"./constants-BPQb3nxh.js";import{a as X,c as Z,u as h}from"./index-DAvGflWj.js";import{g as ee}from"./index-CRfpNMbL.js";const ue=O({name:"UserGroupForm",__name:"UserGroupForm",emits:["success"],setup(te,{expose:x,emit:E}){const{t:v}=J(),g=K(),u=n(!1),b=n(""),i=n(!1),U=n(""),o=n({id:void 0,name:void 0,description:void 0,memberUserIds:void 0,status:D.ENABLE}),F=$({name:[{required:!0,message:"组名不能为空",trigger:"blur"}],description:[{required:!0,message:"描述不能为空",trigger:"blur"}],memberUserIds:[{required:!0,message:"成员不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]}),d=n(),V=n([]);x({open:async(p,e)=>{if(u.value=!0,b.value=v(`action.${p}`),U.value=p,L(),e){i.value=!0;try{o.value=await X(e)}finally{i.value=!1}}V.value=await ee()}});const S=E,T=async()=>{if(!(!d||!await d.value.validate())){i.value=!0;try{const e=o.value;U.value==="create"?(await Z(e),g.success(v("common.createSuccess"))):(await h(e),g.success(v("common.updateSuccess"))),u.value=!1,S("success")}finally{i.value=!1}}},L=()=>{o.value={id:void 0,name:void 0,description:void 0,memberUserIds:void 0,status:D.ENABLE},d.value?.resetFields()};return(p,e)=>{const y=r("el-input"),c=r("el-form-item"),N=r("el-option"),B=r("el-select"),G=r("el-radio"),q=r("el-radio-group"),R=r("el-form"),k=r("el-button"),A=H,M=j("loading");return m(),f(A,{modelValue:l(u),"onUpdate:modelValue":e[5]||(e[5]=t=>Y(u)?u.value=t:null),title:l(b)},{footer:a(()=>[s(k,{disabled:l(i),type:"primary",onClick:T},{default:a(()=>e[6]||(e[6]=[_("确 定")])),_:1},8,["disabled"]),s(k,{onClick:e[4]||(e[4]=t=>u.value=!1)},{default:a(()=>e[7]||(e[7]=[_("取 消")])),_:1})]),default:a(()=>[z((m(),f(R,{ref_key:"formRef",ref:d,"label-width":"100px",model:l(o),rules:l(F)},{default:a(()=>[s(c,{label:"组名",prop:"name"},{default:a(()=>[s(y,{modelValue:l(o).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(o).name=t),placeholder:"请输入组名"},null,8,["modelValue"])]),_:1}),s(c,{label:"描述"},{default:a(()=>[s(y,{modelValue:l(o).description,"onUpdate:modelValue":e[1]||(e[1]=t=>l(o).description=t),placeholder:"请输入描述",type:"textarea"},null,8,["modelValue"])]),_:1}),s(c,{label:"成员",prop:"memberUserIds"},{default:a(()=>[s(B,{modelValue:l(o).memberUserIds,"onUpdate:modelValue":e[2]||(e[2]=t=>l(o).memberUserIds=t),multiple:"",placeholder:"请选择成员"},{default:a(()=>[(m(!0),w(C,null,I(l(V),t=>(m(),f(N,{key:t.id,label:t.nickname,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(c,{label:"状态",prop:"status"},{default:a(()=>[s(q,{modelValue:l(o).status,"onUpdate:modelValue":e[3]||(e[3]=t=>l(o).status=t)},{default:a(()=>[(m(!0),w(C,null,I(l(Q)(l(W).COMMON_STATUS),t=>(m(),f(G,{key:t.value,label:t.value},{default:a(()=>[_(P(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[M,l(i)]])]),_:1},8,["modelValue","title"])}}});export{ue as _};
