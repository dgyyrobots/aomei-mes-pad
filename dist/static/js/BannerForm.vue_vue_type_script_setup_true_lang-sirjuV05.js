/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{V as _,d as G,r as p,f as H,g as s,h as J,k as v,o as f,m as t,w as K,a as o,j as a,c as N,F as O,n as q,v as b,t as x,y as Q,_ as W,N as X,z as Z}from"./index-D3S9e4gi.js";import{_ as h}from"./UploadImg-CUQh6boc.js";import{c as C,D as I}from"./dict-D5UmY5m8.js";const se=async n=>await _.get({url:"/promotion/banner/page",params:n}),ee=async n=>await _.get({url:`/promotion/banner/get?id=${n}`}),le=async n=>await _.post({url:"/promotion/banner/create",data:n}),te=async n=>await _.put({url:"/promotion/banner/update",data:n}),ue=async n=>await _.delete({url:`/promotion/banner/delete?id=${n}`}),ie=G({__name:"BannerForm",emits:["success"],setup(n,{expose:R,emit:F}){const{t:V}=X(),U=Z(),d=p(!1),w=p(""),m=p(!1),B=p(""),r=p({id:void 0,title:void 0,picUrl:void 0,status:0,position:1,url:void 0,sort:0,memo:void 0}),S=H({title:[{required:!0,message:"Banner 标题不能为空",trigger:"blur"}],picUrl:[{required:!0,message:"图片 URL 不能为空",trigger:"blur"}],status:[{required:!0,message:"活动状态不能为空",trigger:"blur"}],position:[{required:!0,message:"位置不能为空",trigger:"blur"}],sort:[{required:!0,message:"排序不能为空",trigger:"blur"}],url:[{required:!0,message:"跳转地址不能为空",trigger:"blur"}]}),c=p();R({open:async(g,e)=>{if(d.value=!0,w.value=V(`action.${g}`),B.value=g,P(),e){m.value=!0;try{r.value=await ee(e)}finally{m.value=!1}}}});const $=F,M=async()=>{if(!(!c||!await c.value.validate())){m.value=!0;try{const e=r.value;B.value==="create"?(await le(e),U.success(V("common.createSuccess"))):(await te(e),U.success(V("common.updateSuccess"))),d.value=!1,$("success")}finally{m.value=!1}}},P=()=>{r.value={id:void 0,title:void 0,picUrl:void 0,status:0,position:1,url:void 0,sort:0,memo:void 0},c.value?.resetFields()};return(g,e)=>{const y=s("el-input"),u=s("el-form-item"),i=s("el-col"),E=h,L=s("el-input-number"),k=s("el-radio"),T=s("el-radio-group"),A=s("el-row"),j=s("el-form"),D=s("el-button"),z=W,Y=J("loading");return f(),v(z,{modelValue:o(d),"onUpdate:modelValue":e[8]||(e[8]=l=>Q(d)?d.value=l:null),title:o(w)},{footer:t(()=>[a(D,{disabled:o(m),type:"primary",onClick:M},{default:t(()=>e[9]||(e[9]=[b("确 定")])),_:1},8,["disabled"]),a(D,{onClick:e[7]||(e[7]=l=>d.value=!1)},{default:t(()=>e[10]||(e[10]=[b("取 消")])),_:1})]),default:t(()=>[K((f(),v(j,{ref_key:"formRef",ref:c,"label-width":"100px",model:o(r),rules:o(S)},{default:t(()=>[a(A,null,{default:t(()=>[a(i,{span:24},{default:t(()=>[a(u,{label:"标题",prop:"title"},{default:t(()=>[a(y,{modelValue:o(r).title,"onUpdate:modelValue":e[0]||(e[0]=l=>o(r).title=l),placeholder:"请输入 Banner 标题"},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:24},{default:t(()=>[a(u,{label:"图片",prop:"picUrl"},{default:t(()=>[a(E,{modelValue:o(r).picUrl,"onUpdate:modelValue":e[1]||(e[1]=l=>o(r).picUrl=l)},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:24},{default:t(()=>[a(u,{label:"跳转地址",prop:"url"},{default:t(()=>[a(y,{modelValue:o(r).url,"onUpdate:modelValue":e[2]||(e[2]=l=>o(r).url=l),placeholder:"请输入跳转地址"},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:24},{default:t(()=>[a(u,{label:"排序",prop:"sort"},{default:t(()=>[a(L,{modelValue:o(r).sort,"onUpdate:modelValue":e[3]||(e[3]=l=>o(r).sort=l),clearable:"","controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:24},{default:t(()=>[a(u,{label:"状态",prop:"status"},{default:t(()=>[a(T,{modelValue:o(r).status,"onUpdate:modelValue":e[4]||(e[4]=l=>o(r).status=l)},{default:t(()=>[(f(!0),N(O,null,q(o(C)(o(I).COMMON_STATUS),l=>(f(),v(k,{key:l.value,label:l.value},{default:t(()=>[b(x(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(i,{span:24},{default:t(()=>[a(u,{label:"位置",prop:"position"},{default:t(()=>[a(T,{modelValue:o(r).position,"onUpdate:modelValue":e[5]||(e[5]=l=>o(r).position=l)},{default:t(()=>[(f(!0),N(O,null,q(o(C)(o(I).PROMOTION_BANNER_POSITION),l=>(f(),v(k,{key:l.value,label:l.value},{default:t(()=>[b(x(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(i,{span:24},{default:t(()=>[a(u,{label:"描述",prop:"memo"},{default:t(()=>[a(y,{modelValue:o(r).memo,"onUpdate:modelValue":e[6]||(e[6]=l=>o(r).memo=l),placeholder:"请输入描述",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[Y,o(m)]])]),_:1},8,["modelValue","title"])}}});export{ie as _,ue as d,se as g};
