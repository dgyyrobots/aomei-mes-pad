/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as ae,u as te,r as s,f as oe,Y as re,b as ne,g as p,h as K,c as m,o as n,j as t,m as o,a as l,k as u,l as w,F as v,n as f,J as ue,w as T,$ as de,v as k,K as pe,i as se,M as ie}from"./index-5TqN_QR1.js";import{_ as me}from"./ContentWrap.vue_vue_type_script_setup_true_lang-fpmIiri3.js";import ve from"./OrderTableColumn-CoOdWfGJ.js";import{g as ye}from"./index-D-E5eQm4.js";import{a as ce}from"./index-3HynN63R.js";import{e as fe}from"./index-C5ZK3F2z.js";import{D as U,T as _e}from"./constants-BPQb3nxh.js";import{c as E,D as g,a as be}from"./dict-B2yk4gHf.js";import{_ as ke}from"./OrderDeliveryForm.vue_vue_type_script_setup_true_lang-S6314lxh.js";import{_ as Ve}from"./OrderUpdateRemarkForm.vue_vue_type_script_setup_true_lang-uHT02SCM.js";import"./DictTag.vue_vue_type_script_lang-cZQMmgs8.js";import"./color-B5phLuB-.js";import"./index-DKaFcMYS.js";const ge={class:"flex items-center justify-center"},Oe=ae({name:"TradeOrder",__name:"index",setup(Ce){const{currentRoute:z,push:B}=te(),x=s(!0),I=s(2),D=s([]),R=s(),r=s({pageNo:1,pageSize:10,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0}),V=oe({queryParam:""}),N=s([{value:"no",label:"订单号"},{value:"userId",label:"用户UID"},{value:"userNickname",label:"用户昵称"},{value:"userMobile",label:"用户电话"}]),H=i=>{N.value.filter(a=>a.value!==i)?.forEach(a=>{a.value in r.value&&delete r.value[a.value]})},_=async()=>{x.value=!0;try{const i=await fe(l(r));D.value=i.list,I.value=i.total}finally{x.value=!1}},S=async()=>{r.value.pageNo=1,await _()},h=()=>{R.value?.resetFields(),r.value={pageNo:1,pageSize:10,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0},S()},j=i=>{B({name:"TradeOrderDetail",params:{id:i}})},q=s(),L=s(),Q=(i,a)=>{switch(i){case"remark":L.value?.open(a);break;case"delivery":q.value?.open(a);break}};re(()=>z.value,()=>{_()});const P=s([]),O=s([]);return ne(async()=>{await _(),P.value=await ce(),O.value=await ye()}),(i,a)=>{const y=p("el-option"),c=p("el-select"),d=p("el-form-item"),X=p("el-date-picker"),Y=p("el-input"),b=pe,C=p("el-button"),J=p("el-form"),F=me,A=p("el-dropdown-item"),W=p("el-dropdown-menu"),G=p("el-dropdown"),Z=p("el-table"),ee=ie,$=K("hasPermi"),le=K("loading");return n(),m(v,null,[t(F,null,{default:o(()=>[t(J,{ref_key:"queryFormRef",ref:R,class:"-mb-15px",inline:!0,"label-width":"68px",model:l(r)},{default:o(()=>[t(d,{label:"订单状态",prop:"status"},{default:o(()=>[t(c,{modelValue:l(r).status,"onUpdate:modelValue":a[0]||(a[0]=e=>l(r).status=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:o(()=>[(n(!0),m(v,null,f(l(E)(l(g).TRADE_ORDER_STATUS),e=>(n(),u(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"支付方式",prop:"payChannelCode"},{default:o(()=>[t(c,{modelValue:l(r).payChannelCode,"onUpdate:modelValue":a[1]||(a[1]=e=>l(r).payChannelCode=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:o(()=>[(n(!0),m(v,null,f(l(be)(l(g).PAY_CHANNEL_CODE),e=>(n(),u(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"创建时间",prop:"createTime"},{default:o(()=>[t(X,{modelValue:l(r).createTime,"onUpdate:modelValue":a[2]||(a[2]=e=>l(r).createTime=e),class:"!w-280px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"自定义时间","start-placeholder":"自定义时间",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),t(d,{label:"订单来源",prop:"terminal"},{default:o(()=>[t(c,{modelValue:l(r).terminal,"onUpdate:modelValue":a[3]||(a[3]=e=>l(r).terminal=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:o(()=>[(n(!0),m(v,null,f(l(E)(l(g).TERMINAL),e=>(n(),u(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"订单类型",prop:"type"},{default:o(()=>[t(c,{modelValue:l(r).type,"onUpdate:modelValue":a[4]||(a[4]=e=>l(r).type=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:o(()=>[(n(!0),m(v,null,f(l(E)(l(g).TRADE_ORDER_TYPE),e=>(n(),u(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"配送方式",prop:"deliveryType"},{default:o(()=>[t(c,{modelValue:l(r).deliveryType,"onUpdate:modelValue":a[5]||(a[5]=e=>l(r).deliveryType=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:o(()=>[(n(!0),m(v,null,f(l(E)(l(g).TRADE_DELIVERY_TYPE),e=>(n(),u(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(r).deliveryType===l(U).EXPRESS.type?(n(),u(d,{key:0,label:"快递公司",prop:"logisticsId"},{default:o(()=>[t(c,{modelValue:l(r).logisticsId,"onUpdate:modelValue":a[6]||(a[6]=e=>l(r).logisticsId=e),class:"!w-280px",clearable:"",placeholder:"全部"},{default:o(()=>[(n(!0),m(v,null,f(l(O),e=>(n(),u(y,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):w("",!0),l(r).deliveryType===l(U).PICK_UP.type?(n(),u(d,{key:1,label:"自提门店",prop:"pickUpStoreId"},{default:o(()=>[t(c,{modelValue:l(r).pickUpStoreId,"onUpdate:modelValue":a[7]||(a[7]=e=>l(r).pickUpStoreId=e),class:"!w-280px",clearable:"",multiple:"",placeholder:"全部"},{default:o(()=>[(n(!0),m(v,null,f(l(P),e=>(n(),u(y,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):w("",!0),l(r).deliveryType===l(U).PICK_UP.type?(n(),u(d,{key:2,label:"核销码",prop:"pickUpVerifyCode"},{default:o(()=>[t(Y,{modelValue:l(r).pickUpVerifyCode,"onUpdate:modelValue":a[8]||(a[8]=e=>l(r).pickUpVerifyCode=e),class:"!w-280px",clearable:"",placeholder:"请输入自提核销码",onKeyup:ue(S,["enter"])},null,8,["modelValue"])]),_:1})):w("",!0),t(d,{label:"聚合搜索"},{default:o(()=>[T(t(Y,{modelValue:l(r)[l(V).queryParam],"onUpdate:modelValue":a[10]||(a[10]=e=>l(r)[l(V).queryParam]=e),class:"!w-280px",clearable:"",placeholder:"请输入",type:l(V).queryParam==="userId"?"number":"text"},{prepend:o(()=>[t(c,{modelValue:l(V).queryParam,"onUpdate:modelValue":a[9]||(a[9]=e=>l(V).queryParam=e),class:"!w-110px",clearable:"",placeholder:"全部",onChange:H},{default:o(()=>[(n(!0),m(v,null,f(l(N),e=>(n(),u(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","type"]),[[de,!0]])]),_:1}),t(d,null,{default:o(()=>[t(C,{onClick:S},{default:o(()=>[t(b,{class:"mr-5px",icon:"ep:search"}),a[13]||(a[13]=k(" 搜索 "))]),_:1}),t(C,{onClick:h},{default:o(()=>[t(b,{class:"mr-5px",icon:"ep:refresh"}),a[14]||(a[14]=k(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(F,null,{default:o(()=>[T((n(),u(Z,{data:l(D),"row-key":"id"},{default:o(()=>[t(l(ve),{list:l(D),"pick-up-store-list":l(P)},{default:o(({row:e})=>[se("div",ge,[T((n(),u(C,{link:"",type:"primary",onClick:M=>j(e.id)},{default:o(()=>[t(b,{icon:"ep:notification"}),a[15]||(a[15]=k(" 详情 "))]),_:2},1032,["onClick"])),[[$,["trade:order:query"]]]),T((n(),u(G,{onCommand:M=>Q(M,e)},{dropdown:o(()=>[t(W,null,{default:o(()=>[e.deliveryType===l(U).EXPRESS.type&&e.status===l(_e).UNDELIVERED.status?(n(),u(A,{key:0,command:"delivery"},{default:o(()=>[t(b,{icon:"ep:takeaway-box"}),a[17]||(a[17]=k(" 发货 "))]),_:1})):w("",!0),t(A,{command:"remark"},{default:o(()=>[t(b,{icon:"ep:chat-line-square"}),a[18]||(a[18]=k(" 备注 "))]),_:1})]),_:2},1024)]),default:o(()=>[t(C,{link:"",type:"primary"},{default:o(()=>[t(b,{icon:"ep:d-arrow-right"}),a[16]||(a[16]=k(" 更多 "))]),_:1})]),_:2},1032,["onCommand"])),[[$,["trade:order:update"]]])])]),_:1},8,["list","pick-up-store-list"])]),_:1},8,["data"])),[[le,l(x)]]),t(ee,{limit:l(r).pageSize,"onUpdate:limit":a[11]||(a[11]=e=>l(r).pageSize=e),page:l(r).pageNo,"onUpdate:page":a[12]||(a[12]=e=>l(r).pageNo=e),total:l(I),onPagination:_},null,8,["limit","page","total"])]),_:1}),t(ke,{ref_key:"deliveryFormRef",ref:q,onSuccess:_},null,512),t(Ve,{ref_key:"updateRemarkForm",ref:L,onSuccess:_},null,512)],64)}}});export{Oe as default};
