/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{d as $,r as a,g as b,k as z,o as A,m as t,j as c,a as s,y as _,i as d,v as m,_ as E,z as S,bx as U,by as w,N as D}from"./index-lcC3l4R2.js";const G=$({name:"InfraFileForm",__name:"FileForm",emits:["success"],setup(H,{expose:F,emit:x}){const{t:k}=D(),n=S(),o=a(!1),l=a(!1),y=void 0,p=a(),r=a([]),f=a({path:""}),i=a();F({open:async()=>{o.value=!0,I()}});const V=g=>{f.value.path=g.name},C=()=>{if(r.value.length==0){n.error("请上传文件");return}p.value={Authorization:`Bearer ${w()}`,"tenant-id":U()},s(i)?.submit()},B=x,N=()=>{o.value=!1,l.value=!1,s(i)?.clearFiles(),n.success(k("common.createSuccess")),B("success")},j=()=>{n.error("上传失败，请您重新上传！"),l.value=!1},I=()=>{l.value=!1,i.value?.clearFiles()},L=()=>{n.error("最多只能上传一个文件！")};return(g,e)=>{const R=b("el-upload"),v=b("el-button"),T=E;return A(),z(T,{modelValue:s(o),"onUpdate:modelValue":e[2]||(e[2]=u=>_(o)?o.value=u:null),title:"上传文件"},{footer:t(()=>[c(v,{disabled:s(l),type:"primary",onClick:C},{default:t(()=>e[6]||(e[6]=[m("确 定")])),_:1},8,["disabled"]),c(v,{onClick:e[1]||(e[1]=u=>o.value=!1)},{default:t(()=>e[7]||(e[7]=[m("取 消")])),_:1})]),default:t(()=>[c(R,{ref_key:"uploadRef",ref:i,"file-list":s(r),"onUpdate:fileList":e[0]||(e[0]=u=>_(r)?r.value=u:null),accept:".jpg, .png, .gif",action:s(y),"auto-upload":!1,data:s(f),disabled:s(l),drag:"",headers:s(p),limit:1,"on-change":V,"on-error":j,"on-exceed":L,"on-success":N},{tip:t(()=>e[3]||(e[3]=[d("div",{class:"el-upload__tip",style:{color:"red"}},"提示：仅允许导入 jpg、png、gif 格式文件！",-1)])),default:t(()=>[e[4]||(e[4]=d("i",{class:"el-icon-upload"},null,-1)),e[5]||(e[5]=d("div",{class:"el-upload__text"},[m(" 将文件拖到此处，或 "),d("em",null,"点击上传")],-1))]),_:1},8,["file-list","action","data","disabled","headers"])]),_:1},8,["modelValue"])}}});export{G as _};
