/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as j,r as n,f as Y,g as r,h as G,k as p,o as u,m as a,w as H,a as t,j as s,c as w,F as k,n as I,i as D,v as _,t as J,y as K,_ as Q,N as W,z as X}from"./index-C8VsLzxx.js";import{_ as Z}from"./UploadImg-BGTH0mL0.js";import{a as h,g as ee,c as le,u as te}from"./category-BnYvgNqf.js";import{C as P}from"./constants-BPQb3nxh.js";import{c as oe,D as ae}from"./dict-_inVRzR5.js";const pe=j({name:"ProductCategory",__name:"CategoryForm",emits:["success"],setup(se,{expose:E,emit:N}){const{t:g}=W(),v=X(),i=n(!1),b=n(""),m=n(!1),V=n(""),o=n({id:void 0,name:"",picUrl:"",bigPicUrl:"",status:P.ENABLE}),T=Y({parentId:[{required:!0,message:"请选择上级分类",trigger:"blur"}],name:[{required:!0,message:"分类名称不能为空",trigger:"blur"}],picUrl:[{required:!0,message:"分类图片不能为空",trigger:"blur"}],sort:[{required:!0,message:"分类排序不能为空",trigger:"blur"}],status:[{required:!0,message:"开启状态不能为空",trigger:"blur"}]}),f=n(),y=n([]);E({open:async(c,e)=>{if(i.value=!0,b.value=g(`action.${c}`),V.value=c,L(),e){m.value=!0;try{o.value=await h(e)}finally{m.value=!1}}y.value=await ee({parentId:0})}});const B=N,F=async()=>{if(!(!f||!await f.value.validate())){m.value=!0;try{const e=o.value;V.value==="create"?(await le(e),v.success(g("common.createSuccess"))):(await te(e),v.success(g("common.updateSuccess"))),i.value=!1,B("success")}finally{m.value=!1}}},L=()=>{o.value={id:void 0,name:"",picUrl:"",bigPicUrl:"",status:P.ENABLE},f.value?.resetFields()};return(c,e)=>{const U=r("el-option"),S=r("el-select"),d=r("el-form-item"),q=r("el-input"),C=Z,R=r("el-input-number"),z=r("el-radio"),A=r("el-radio-group"),M=r("el-form"),x=r("el-button"),O=Q,$=G("loading");return u(),p(O,{modelValue:t(i),"onUpdate:modelValue":e[7]||(e[7]=l=>K(i)?i.value=l:null),title:t(b)},{footer:a(()=>[s(x,{disabled:t(m),type:"primary",onClick:F},{default:a(()=>e[10]||(e[10]=[_("确 定")])),_:1},8,["disabled"]),s(x,{onClick:e[6]||(e[6]=l=>i.value=!1)},{default:a(()=>e[11]||(e[11]=[_("取 消")])),_:1})]),default:a(()=>[H((u(),p(M,{ref_key:"formRef",ref:f,"label-width":"120px",model:t(o),rules:t(T)},{default:a(()=>[s(d,{label:"上级分类",prop:"parentId"},{default:a(()=>[s(S,{modelValue:t(o).parentId,"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).parentId=l),placeholder:"请选择上级分类"},{default:a(()=>[(u(),p(U,{key:0,label:"顶级分类",value:0})),(u(!0),w(k,null,I(t(y),l=>(u(),p(U,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(d,{label:"分类名称",prop:"name"},{default:a(()=>[s(q,{modelValue:t(o).name,"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).name=l),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),s(d,{label:"移动端分类图",prop:"picUrl"},{default:a(()=>[s(C,{modelValue:t(o).picUrl,"onUpdate:modelValue":e[2]||(e[2]=l=>t(o).picUrl=l),"is-show-tip":!1,limit:1},null,8,["modelValue"]),e[8]||(e[8]=D("div",{class:"pl-10px",style:{"font-size":"10px"}},"推荐 180x180 图片分辨率",-1))]),_:1}),s(d,{label:"PC 端分类图",prop:"bigPicUrl"},{default:a(()=>[s(C,{modelValue:t(o).bigPicUrl,"onUpdate:modelValue":e[3]||(e[3]=l=>t(o).bigPicUrl=l),"is-show-tip":!1,limit:1},null,8,["modelValue"]),e[9]||(e[9]=D("div",{class:"pl-10px",style:{"font-size":"10px"}},"推荐 468x340 图片分辨率",-1))]),_:1}),s(d,{label:"分类排序",prop:"sort"},{default:a(()=>[s(R,{modelValue:t(o).sort,"onUpdate:modelValue":e[4]||(e[4]=l=>t(o).sort=l),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),s(d,{label:"开启状态",prop:"status"},{default:a(()=>[s(A,{modelValue:t(o).status,"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).status=l)},{default:a(()=>[(u(!0),w(k,null,I(t(oe)(t(ae).COMMON_STATUS),l=>(u(),p(z,{key:l.value,label:l.value},{default:a(()=>[_(J(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[$,t(m)]])]),_:1},8,["modelValue","title"])}}});export{pe as _};
