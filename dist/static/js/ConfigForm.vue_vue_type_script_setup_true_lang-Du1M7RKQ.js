/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as I,r as i,f as S,g as m,h as E,k as c,o as v,m as r,w as L,a as l,j as t,c as O,F as $,n as A,v as _,t as j,y as z,_ as G,N as M,z as P}from"./index-BdC40rFX.js";import{b as Y,D as H}from"./dict-D4wjFrBa.js";import{g as J,c as K,u as Q}from"./index-Dc8kyoIG.js";const le=I({name:"InfraConfigForm",__name:"ConfigForm",emits:["success"],setup(W,{expose:C,emit:w}){const{t:g}=M(),b=P(),s=i(!1),y=i(""),u=i(!1),V=i(""),o=i({id:void 0,category:"",name:"",key:"",value:"",visible:!0,remark:""}),D=S({category:[{required:!0,message:"参数分类不能为空",trigger:"blur"}],name:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],key:[{required:!0,message:"参数键名不能为空",trigger:"blur"}],value:[{required:!0,message:"参数键值不能为空",trigger:"blur"}],visible:[{required:!0,message:"是否可见不能为空",trigger:"blur"}]}),p=i();C({open:async(f,e)=>{if(s.value=!0,y.value=g(`action.${f}`),V.value=f,U(),e){u.value=!0;try{o.value=await J(e)}finally{u.value=!1}}}});const F=w,x=async()=>{if(!(!p||!await p.value.validate())){u.value=!0;try{const e=o.value;V.value==="create"?(await K(e),b.success(g("common.createSuccess"))):(await Q(e),b.success(g("common.updateSuccess"))),s.value=!1,F("success")}finally{u.value=!1}}},U=()=>{o.value={id:void 0,category:"",name:"",key:"",value:"",visible:!0,remark:""},p.value?.resetFields()};return(f,e)=>{const d=m("el-input"),n=m("el-form-item"),N=m("el-radio"),R=m("el-radio-group"),T=m("el-form"),k=m("el-button"),q=G,B=E("loading");return v(),c(q,{modelValue:l(s),"onUpdate:modelValue":e[7]||(e[7]=a=>z(s)?s.value=a:null),title:l(y)},{footer:r(()=>[t(k,{disabled:l(u),type:"primary",onClick:x},{default:r(()=>e[8]||(e[8]=[_("确 定")])),_:1},8,["disabled"]),t(k,{onClick:e[6]||(e[6]=a=>s.value=!1)},{default:r(()=>e[9]||(e[9]=[_("取 消")])),_:1})]),default:r(()=>[L((v(),c(T,{ref_key:"formRef",ref:p,"label-width":"80px",model:l(o),rules:l(D)},{default:r(()=>[t(n,{label:"参数分类",prop:"category"},{default:r(()=>[t(d,{modelValue:l(o).category,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).category=a),placeholder:"请输入参数分类"},null,8,["modelValue"])]),_:1}),t(n,{label:"参数名称",prop:"name"},{default:r(()=>[t(d,{modelValue:l(o).name,"onUpdate:modelValue":e[1]||(e[1]=a=>l(o).name=a),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),t(n,{label:"参数键名",prop:"key"},{default:r(()=>[t(d,{modelValue:l(o).key,"onUpdate:modelValue":e[2]||(e[2]=a=>l(o).key=a),placeholder:"请输入参数键名"},null,8,["modelValue"])]),_:1}),t(n,{label:"参数键值",prop:"value"},{default:r(()=>[t(d,{modelValue:l(o).value,"onUpdate:modelValue":e[3]||(e[3]=a=>l(o).value=a),placeholder:"请输入参数键值"},null,8,["modelValue"])]),_:1}),t(n,{label:"是否可见",prop:"visible"},{default:r(()=>[t(R,{modelValue:l(o).visible,"onUpdate:modelValue":e[4]||(e[4]=a=>l(o).visible=a)},{default:r(()=>[(v(!0),O($,null,A(l(Y)(l(H).INFRA_BOOLEAN_STRING),a=>(v(),c(N,{key:a.value,label:a.value},{default:r(()=>[_(j(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"备注",prop:"remark"},{default:r(()=>[t(d,{modelValue:l(o).remark,"onUpdate:modelValue":e[5]||(e[5]=a=>l(o).remark=a),placeholder:"请输入内容",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[B,l(u)]])]),_:1},8,["modelValue","title"])}}});export{le as _};
