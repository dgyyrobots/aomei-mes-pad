/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{d as _e,r as c,f as be,b as ye,g as u,h as Q,c as I,o as d,j as e,m as a,a as o,J as M,F as K,n as ve,k as m,w as f,v as p,K as we,t as Ce,L as T,l as V,M as ke,i as Y,y as qe,z as xe,N as Ve}from"./index-D3eRVKjp.js";import{_ as Se}from"./DictTag.vue_vue_type_script_lang-h3s-iN69.js";import{_ as Ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dg75KKir.js";import{a as Re,D as A}from"./dict-CqgorI4d.js";import{d as $e}from"./download-U6qaYcnP.js";import{g as De,o as Me,a as Te,u as Ue}from"./index-D1sWbDST.js";import{_ as Fe}from"./Form.vue_vue_type_script_setup_true_lang-D3pPuR8V.js";import{_ as Pe}from"./LineList.vue_vue_type_script_setup_true_lang-BT9pYCsz.js";import{_ as Ee}from"./DetailForm.vue_vue_type_script_setup_true_lang-DYZLPeQM.js";import"./color-B5phLuB-.js";import"./TemplateSelect.vue_vue_type_script_setup_true_lang-DMGqXhwJ.js";import"./index-C8ftKWym.js";import"./TemplateForm.vue_vue_type_script_setup_true_lang-5AzvreON.js";import"./TemplateIndexForm.vue_vue_type_script_setup_true_lang-BKyTog2H.js";import"./TemplateList.vue_vue_type_script_setup_true_lang-CwrxS03C.js";import"./index-CFnrUYqN.js";import"./qmsIndexForm.vue_vue_type_script_setup_true_lang-uXNZcrqu.js";import"./TemplateProductForm.vue_vue_type_script_setup_true_lang-KFMW0Lgt.js";import"./TemplateIndexList.vue_vue_type_script_setup_true_lang-DnYeW_44.js";import"./TemplateProductList.vue_vue_type_script_setup_true_lang-Cub4EO0o.js";import"./LineForm.vue_vue_type_script_setup_true_lang-LU44c-uw.js";import"./IndexSlect.vue_vue_type_script_setup_true_lang-BgM1kCxU.js";const ze={class:"dialog-footer"},it=_e({name:"Oqc",__name:"index",setup(je){const U=c(),H=n=>{U.value.showFlag(n)},S=xe(),{t:F}=Ve(),k=c(!0),P=c([]),E=c(0),i=be({pageNo:1,pageSize:10,sourceCode:void 0,oqcCode:void 0,oqcName:void 0,status:void 0,createTime:[]}),z=c(),_=c(!1),b=async()=>{k.value=!0;try{const n=await De(i);P.value=n.list,E.value=n.total}finally{k.value=!1}},q=()=>{i.pageNo=1,b()},h=()=>{z.value.resetFields(),q()},j=c(),B=(n,t)=>{j.value.open(n,t)},J=async n=>{try{await S.delConfirm(),await Me(n),S.success(F("common.delSuccess")),await b()}catch{}},W=async()=>{try{await S.exportConfirm(),_.value=!0;const n=await Te(i);$e.excel(n,"出货检验.xls")}catch{}finally{_.value=!1}},R=c({}),G=n=>{R.value=n};ye(()=>{console.log("onMounted,,,src/views/oqc/oqc/index.vue"),b()});const L=c(),N=(n,t,x)=>{L.value.open(n,t,x)},$=n=>n=="0",X=n=>n=="1",Z=n=>n=="2",ee=n=>{n.status="1",console.log(n),te(n)},te=async n=>{k.value=!0;try{const t=n;console.log("data",t),await Ue(t),S.success(F("common.updateSuccess"))}finally{b(),k.value=!1}},O=c(),v=c(!1),le=n=>{v.value=!0,O.value=n},ae=()=>{ee(O.value),v.value=!1};return(n,t)=>{const x=u("el-input"),w=u("el-form-item"),oe=u("el-option"),ne=u("el-select"),re=u("el-date-picker"),y=we,s=u("el-button"),ie=u("el-form"),D=Ne,r=u("el-table-column"),se=Se,pe=u("el-table"),ue=ke,de=u("el-tab-pane"),ce=u("el-tabs"),me=u("StateMent"),fe=u("el-dialog"),g=Q("hasPermi"),ge=Q("loading");return d(),I(K,null,[e(D,null,{default:a(()=>[e(ie,{class:"-mb-15px",model:o(i),ref_key:"queryFormRef",ref:z,inline:!0,"label-width":"110px"},{default:a(()=>[e(w,{label:"订单编号",prop:"sourceCode"},{default:a(()=>[e(x,{modelValue:o(i).sourceCode,"onUpdate:modelValue":t[0]||(t[0]=l=>o(i).sourceCode=l),placeholder:"请输入订单编号",clearable:"",onKeyup:M(q,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(w,{label:"出货检验单编号",prop:"oqcCode"},{default:a(()=>[e(x,{modelValue:o(i).oqcCode,"onUpdate:modelValue":t[1]||(t[1]=l=>o(i).oqcCode=l),placeholder:"请输入出货检验单编号",clearable:"",onKeyup:M(q,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(w,{label:"出货检验单名称",prop:"oqcName"},{default:a(()=>[e(x,{modelValue:o(i).oqcName,"onUpdate:modelValue":t[2]||(t[2]=l=>o(i).oqcName=l),placeholder:"请输入出货检验单名称",clearable:"",onKeyup:M(q,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(w,{label:"单据状态",prop:"status"},{default:a(()=>[e(ne,{modelValue:o(i).status,"onUpdate:modelValue":t[3]||(t[3]=l=>o(i).status=l),placeholder:"请选择单据状态",clearable:"",class:"!w-240px"},{default:a(()=>[(d(!0),I(K,null,ve(o(Re)(o(A).BPM_PROCESS_INSTANCE_RESULT),l=>(d(),m(oe,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"创建时间",prop:"createTime"},{default:a(()=>[e(re,{modelValue:o(i).createTime,"onUpdate:modelValue":t[4]||(t[4]=l=>o(i).createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(w,null,{default:a(()=>[e(s,{onClick:q},{default:a(()=>[e(y,{icon:"ep:search",class:"mr-5px"}),t[12]||(t[12]=p(" 搜索 "))]),_:1}),e(s,{onClick:h},{default:a(()=>[e(y,{icon:"ep:refresh",class:"mr-5px"}),t[13]||(t[13]=p(" 重置 "))]),_:1}),f((d(),m(s,{type:"primary",plain:"",onClick:t[5]||(t[5]=l=>B("create"))},{default:a(()=>[e(y,{icon:"ep:plus",class:"mr-5px"}),t[14]||(t[14]=p(" 新增 "))]),_:1})),[[g,["oqc::create"]]]),f((d(),m(s,{type:"success",plain:"",onClick:W,loading:o(_)},{default:a(()=>[e(y,{icon:"ep:download",class:"mr-5px"}),t[15]||(t[15]=p(" 导出 "))]),_:1},8,["loading"])),[[g,["oqc::export"]]]),f((d(),m(s,{type:"warning",plain:"",onClick:t[6]||(t[6]=l=>N("detail","zhijian",o(R).id)),loading:o(_)},{default:a(()=>[e(y,{icon:"ep:notification",class:"mr-5px"}),t[16]||(t[16]=p(" 审核 "))]),_:1},8,["loading"])),[[g,["oqc::export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(D,null,{default:a(()=>[f((d(),m(pe,{data:o(P),stripe:!0,"show-overflow-tooltip":!0,"highlight-current-row":"",onCurrentChange:G},{default:a(()=>[e(r,{label:"出货检验单编号",align:"center",prop:"oqcCode",width:"150"},{default:a(l=>[f((d(),m(s,{link:"",type:"primary",onClick:C=>N("detail","chakan",l.row.id)},{default:a(()=>[p(Ce(l.row.oqcCode),1)]),_:2},1032,["onClick"])),[[g,["oqc::create"]]])]),_:1}),e(r,{label:"出货检验单名称",align:"center",prop:"oqcName",width:"150"}),e(r,{label:"单据状态",align:"center",prop:"status"},{default:a(l=>[e(se,{type:o(A).BPM_PROCESS_INSTANCE_RESULT,value:l.row.status},null,8,["type","value"])]),_:1}),e(r,{label:"客户编码",align:"center",prop:"clientCode"}),e(r,{label:"客户名称",align:"center",prop:"clientName"}),e(r,{label:"批次号",align:"center",prop:"batchCode"}),e(r,{label:"产品物料编码",align:"center",prop:"itemCode"}),e(r,{label:"产品物料名称",align:"center",prop:"itemName"}),e(r,{label:"规格型号",align:"center",prop:"specification"}),e(r,{label:"单位",align:"center",prop:"unitOfMeasure"}),e(r,{label:"最低检测数",align:"center",prop:"quantityMinCheck"}),e(r,{label:"最大不合格数",align:"center",prop:"quantityMaxUnqualified"}),e(r,{label:"发货数量",align:"center",prop:"quantityOut"}),e(r,{label:"本次检测数量",align:"center",prop:"quantityCheck"}),e(r,{label:"不合格数",align:"center",prop:"quantityUnqualified"}),e(r,{label:"合格数量",align:"center",prop:"quantityQuanlified"}),e(r,{label:"致命缺陷率",align:"center",prop:"crRate"}),e(r,{label:"严重缺陷率",align:"center",prop:"majRate"}),e(r,{label:"轻微缺陷率",align:"center",prop:"minRate"}),e(r,{label:"致命缺陷数量",align:"center",prop:"crQuantity"}),e(r,{label:"严重缺陷数量",align:"center",prop:"majQuantity"}),e(r,{label:"轻微缺陷数量",align:"center",prop:"minQuantity"}),e(r,{label:"检测结果",align:"center",prop:"checkResult"}),e(r,{label:"出货日期",align:"center",prop:"outDate",formatter:o(T),width:"180px"},null,8,["formatter"]),e(r,{label:"检测日期",align:"center",prop:"inspectDate",formatter:o(T),width:"180px"},null,8,["formatter"]),e(r,{label:"检测人员",align:"center",prop:"inspector"}),e(r,{label:"备注",align:"center",prop:"remark"}),e(r,{label:"创建时间",align:"center",prop:"createTime",formatter:o(T),width:"180px"},null,8,["formatter"]),e(r,{label:"操作",align:"center",fixed:"right",width:"250"},{default:a(l=>[$(l.row.status)?f((d(),m(s,{key:0,type:"warning",link:"",onClick:C=>le(l.row),loading:o(_)},{default:a(()=>t[17]||(t[17]=[p(" 提交审核 ")])),_:2},1032,["onClick","loading"])),[[g,["oqc::update"]]]):V("",!0),$(l.row.status)?f((d(),m(s,{key:1,link:"",type:"primary",onClick:C=>B("update",l.row.id)},{default:a(()=>t[18]||(t[18]=[p(" 编辑 ")])),_:2},1032,["onClick"])),[[g,["oqc::update"]]]):V("",!0),$(l.row.status)?f((d(),m(s,{key:2,link:"",type:"danger",onClick:C=>J(l.row.id)},{default:a(()=>t[19]||(t[19]=[p(" 删除 ")])),_:2},1032,["onClick"])),[[g,["oqc::delete"]]]):V("",!0),X(l.row.status)?f((d(),m(s,{key:3,type:"warning",plain:"",onClick:C=>N("detail","zhijian",l.row.id),loading:o(_)},{default:a(()=>[e(y,{icon:"ep:notification",class:"mr-5px"}),t[20]||(t[20]=p(" 审核 "))]),_:2},1032,["onClick","loading"])),[[g,["oqc::export"]]]):V("",!0),Z(l.row.status)?f((d(),m(s,{key:4,type:"warning",plain:"",onClick:C=>N("detail","zhijian",l.row.id),loading:o(_)},{default:a(()=>[e(y,{icon:"ep:notification",class:"mr-5px"}),t[21]||(t[21]=p(" 反审核 "))]),_:2},1032,["onClick","loading"])),[[g,["oqc::export"]]]):V("",!0),e(s,{link:"",type:"primary",onClick:C=>H(l.row)},{default:a(()=>t[22]||(t[22]=[p(" 报表 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ge,o(k)]]),e(ue,{total:o(E),page:o(i).pageNo,"onUpdate:page":t[7]||(t[7]=l=>o(i).pageNo=l),limit:o(i).pageSize,"onUpdate:limit":t[8]||(t[8]=l=>o(i).pageSize=l),onPagination:b},null,8,["total","page","limit"])]),_:1}),e(D,null,{default:a(()=>[e(ce,{"model-value":"line"},{default:a(()=>[e(de,{label:"出货检验单行",name:"line"},{default:a(()=>[e(Pe,{"oqc-id":o(R).id},null,8,["oqc-id"])]),_:1})]),_:1})]),_:1}),e(Fe,{ref_key:"formRef",ref:j,onSuccess:b},null,512),e(me,{ref_key:"StateMentRef",ref:U,type:"qms_oqc"},null,512),e(Ee,{ref_key:"detailFormRef",ref:L,onSuccess:b},null,512),e(fe,{modelValue:o(v),"onUpdate:modelValue":t[11]||(t[11]=l=>qe(v)?v.value=l:null),title:"系统提示",width:"30%",center:""},{footer:a(()=>[Y("span",ze,[e(s,{onClick:t[9]||(t[9]=l=>v.value=!1)},{default:a(()=>t[23]||(t[23]=[p("取消")])),_:1}),e(s,{type:"primary",onClick:t[10]||(t[10]=l=>ae())},{default:a(()=>t[24]||(t[24]=[p(" 确认 ")])),_:1})])]),default:a(()=>[t[25]||(t[25]=Y("span",null," 确认提交审核？ ",-1))]),_:1},8,["modelValue"])],64)}}});export{it as default};
