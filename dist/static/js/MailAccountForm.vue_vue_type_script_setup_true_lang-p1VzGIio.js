/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{d as b,r as l,g as k,h as x,k as A,o as C,m as c,w as S,i as F,a as t,j as v,v as p,y as N,_ as R,N as B,z as D}from"./index-DMg0mq0e.js";import{a as T,r as $}from"./account.data-oOwKlqTv.js";import{g as h,c as j,u as z}from"./index-DWFqjMnW.js";const E=["rules","schema"],H=b({name:"SystemMailAccountForm",__name:"MailAccountForm",emits:["success"],setup(I,{expose:_,emit:g}){const{t:i}=B(),u=D(),a=l(!1),m=l(""),s=l(!1),f=l(""),o=l();_({open:async(n,e)=>{if(a.value=!0,m.value=i(`action.${n}`),f.value=n,e){s.value=!0;try{const r=await h(e);o.value.setValues(r)}finally{s.value=!1}}}});const y=g,V=async()=>{if(!(!o||!await o.value.getElFormRef().validate())){s.value=!0;try{const e=o.value.formModel;f.value==="create"?(await j(e),u.success(i("common.createSuccess"))):(await z(e),u.success(i("common.updateSuccess"))),a.value=!1,y("success")}finally{s.value=!1}}};return(n,e)=>{const r=k("el-button"),w=R,M=x("loading");return C(),A(w,{modelValue:t(a),"onUpdate:modelValue":e[1]||(e[1]=d=>N(a)?a.value=d:null),title:t(m)},{footer:c(()=>[v(r,{disabled:t(s),type:"primary",onClick:V},{default:c(()=>e[2]||(e[2]=[p("确 定")])),_:1},8,["disabled"]),v(r,{onClick:e[0]||(e[0]=d=>a.value=!1)},{default:c(()=>e[3]||(e[3]=[p("取 消")])),_:1})]),default:c(()=>[S(F("form",{ref_key:"formRef",ref:o,rules:t($),schema:t(T).formSchema},null,8,E),[[M,t(s)]])]),_:1},8,["modelValue","title"])}}});export{H as _};
