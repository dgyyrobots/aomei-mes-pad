/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{d as S,P as k,k as x,o as w,Q as G,a as g,r,O as J,b as K,R as X,f as Y,I as Z,B as ee,g as s,h as te,c as ae,j as e,i as c,m as a,S as ne,w as oe,E as le,v as m,C as se,D as re,t as ie,T as pe,z as ue,A as de}from"./index-DMg0mq0e.js";import{_ as ce}from"./DictTag.vue_vue_type_script_lang-sQcOd7JH.js";import{_ as me,a as ge,b as _e}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-D0K0ngK2.js";import{g as fe,d as ve}from"./index-L2itq620.js";import"./color-B5phLuB-.js";import"./dict-BEquckDR.js";const we=S({name:"VabPagination",__name:"index",props:{...k.props,layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},setup(_){return(t,f)=>(w(),x(g(k),G({background:_.background,"current-page":t.currentPage},t.$attrs,{"default-current-page":t.defaultCurrentPage,"default-page-size":t.defaultPageSize,disabled:t.disabled,"hide-on-single-page":t.hideOnSinglePage,layout:_.layout,"next-icon":t.nextIcon,"next-text":t.nextText,"page-count":t.pageCount,"page-size":t.pageSize,"page-sizes":t.pageSizes,"pager-count":t.pagerCount,"popper-class":t.popperClass,"prev-icon":t.prevIcon,"prev-text":t.prevText,small:t.small,teleported:t.teleported,total:t.total}),null,16,["background","current-page","default-current-page","default-page-size","disabled","hide-on-single-page","layout","next-icon","next-text","page-count","page-size","page-sizes","pager-count","popper-class","prev-icon","prev-text","small","teleported","total"]))}}),be={class:"report-container"},he={class:"content-area"},ye={class:"query-form-wrapper"},ze={class:"pagination-wrapper"},Ce=S({name:"WorkOrder",__name:"report",setup(_){const t=r(window.innerWidth),f=r(window.innerHeight),B=r(t.value<=820),N=J(()=>f.value-280),{success:q}=ue(),b=()=>{t.value=window.innerWidth,f.value=window.innerHeight,B.value=t.value<=820};K(()=>{window.addEventListener("resize",b)}),X(()=>{window.removeEventListener("resize",b)});const h=r(),y=r([]),d=r(!0),z=r(0);r([]);const l=Y({pageNo:1,pageSize:20});Z(()=>{h.value?.doLayout()});const u=async()=>{d.value=!0;try{const n=await fe(l);y.value=n.list,z.value=n.total}catch(n){console.error("获取数据失败",n)}finally{d.value=!1}},P=n=>{l.pageNo=1,l.pageSize=n,u()},D=n=>{l.pageNo=n,u()},V=()=>{l.pageNo=1,u()},E=async n=>{if(n.id){await pe.confirm("您确定要删除当前项吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const{msg:o}=await ve(n.id);await u(),q(o)}};ee(()=>{u()});const M=n=>{console.log(n)};return(n,o)=>{const T=s("el-icon"),W=s("el-menu-item"),$=s("el-menu"),v=s("el-button"),H=me,I=s("el-input"),C=s("el-form-item"),L=s("el-form"),R=ge,O=_e,i=s("el-table-column"),j=ce,A=s("el-empty"),U=s("el-table"),F=we,Q=te("loading");return w(),ae("div",be,[e($,{"default-active":"fq",mode:"horizontal",class:"menu-list"},{default:a(()=>[e(W,{index:"fq"},{default:a(()=>[e(T,null,{default:a(()=>[e(g(ne))]),_:1}),o[2]||(o[2]=c("span",null,"统一报工",-1))]),_:1})]),_:1}),c("div",he,[c("div",ye,[e(O,{class:"query-form"},{default:a(()=>[e(H,null,{default:a(()=>[e(v,{icon:g(le),type:"primary",plain:""},{default:a(()=>o[3]||(o[3]=[m("新增")])),_:1},8,["icon"])]),_:1}),e(R,null,{default:a(()=>[e(L,{inline:"",model:l,onSubmit:o[1]||(o[1]=se(()=>{},["prevent"])),class:"form-inline"},{default:a(()=>[e(C,{label:"工单标题"},{default:a(()=>[e(I,{modelValue:l.title,"onUpdate:modelValue":o[0]||(o[0]=p=>l.title=p),clearable:"",placeholder:"请输入工单标题"},null,8,["modelValue"])]),_:1}),e(C,null,{default:a(()=>[e(v,{icon:g(re),loading:d.value,"native-type":"submit",type:"primary",onClick:V,plain:""},{default:a(()=>o[4]||(o[4]=[m("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),oe((w(),x(U,{ref_key:"tableRef",ref:h,border:"",data:y.value,onSelectionChange:M,class:"data-table","max-height":N.value},{empty:a(()=>[e(A,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[e(i,{type:"selection",width:"50"}),e(i,{align:"center",label:"序号",width:"80"},{default:a(({$index:p})=>[m(ie(p+1),1)]),_:1}),e(i,{align:"center",label:"工单号",prop:"workorderCode","show-overflow-tooltip":""}),e(i,{align:"center",label:"标题",prop:"workorderName","show-overflow-tooltip":""}),e(i,{align:"center",label:"产品名称",prop:"productName","show-overflow-tooltip":""}),e(i,{align:"center",label:"工单状态"},{default:a(p=>[e(j,{type:"mes_order_status",value:p.row.status},null,8,["value"])]),_:1}),e(i,{align:"center",label:"操作",fixed:"right"},{default:a(({row:p})=>[e(v,{text:"",type:"danger",onClick:ke=>E(p)},{default:a(()=>o[5]||(o[5]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","max-height"])),[[Q,d.value]]),c("div",ze,[e(F,{"current-page":l.pageNo,"page-size":l.pageSize,total:z.value,onCurrentChange:D,onSizeChange:P},null,8,["current-page","page-size","total"])])])])}}}),De=de(Ce,[["__scopeId","data-v-1f23e9d4"]]);export{De as default};
