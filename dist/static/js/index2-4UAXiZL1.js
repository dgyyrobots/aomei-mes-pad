/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{d as J,r as u,f as W,b as G,g as s,h as S,c as R,o as p,j as t,m as o,a as l,J as $,F,n as X,k as d,w as g,v as c,K as Z,L as h,M as ee,z as te,N as ae}from"./index-DMg0mq0e.js";import{_ as le}from"./DictTag.vue_vue_type_script_lang-sQcOd7JH.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DPMk4m5L.js";import{_ as ne,g as re,d as se,e as pe}from"./UReportDataForm.vue_vue_type_script_setup_true_lang-B7JBiYGa.js";import{c as ie,D as P}from"./dict-BEquckDR.js";import{d as me}from"./download-U6qaYcnP.js";import"./color-B5phLuB-.js";import"./style.css_vue_type_style_index_0_src_true_lang-CDYV1aNO.js";import"./locale-CS6E0x_J.js";const ke=J({name:"UReportData",__name:"index2",setup(ue){const w=te(),{t:I}=ae(),k=u(!0),C=u([]),D=u(0),n=W({pageNo:1,pageSize:10,name:null,status:null,remark:null,createTime:[]}),V=u(),x=u(!1),f=async()=>{k.value=!0;try{const r=await re(n);C.value=r.list,D.value=r.total}finally{k.value=!1}},y=()=>{n.pageNo=1,f()},O=()=>{V.value.resetFields(),y()},U=u(),T=(r,e)=>{U.value.open(r,e)},Y=async r=>{try{await w.delConfirm(),await se(r),w.success(I("common.delSuccess")),await f()}catch(e){console.log(e)}},z=async()=>{try{await w.exportConfirm(),x.value=!0;const r=await pe(n);me.excel(r,"Ureport2报表.xls")}catch(r){console.log(r)}finally{x.value=!1}};return G(()=>{f()}),(r,e)=>{const M=s("el-input"),_=s("el-form-item"),K=s("el-option"),L=s("el-select"),q=s("el-date-picker"),v=Z,m=s("el-button"),B=s("el-form"),N=oe,i=s("el-table-column"),E=le,A=s("el-table"),H=ee,b=S("hasPermi"),Q=S("loading");return p(),R(F,null,[t(N,null,{default:o(()=>[t(B,{ref_key:"queryFormRef",ref:V,class:"-mb-15px",inline:!0,"label-width":"68px",model:l(n)},{default:o(()=>[t(_,{label:"文件名称",prop:"name"},{default:o(()=>[t(M,{modelValue:l(n).name,"onUpdate:modelValue":e[0]||(e[0]=a=>l(n).name=a),class:"!w-240px",clearable:"",placeholder:"请输入文件名称",onKeyup:$(y,["enter"])},null,8,["modelValue"])]),_:1}),t(_,{label:"状态",prop:"status"},{default:o(()=>[t(L,{modelValue:l(n).status,"onUpdate:modelValue":e[1]||(e[1]=a=>l(n).status=a),class:"!w-240px",clearable:"",placeholder:"请选择状态"},{default:o(()=>[(p(!0),R(F,null,X(l(ie)(l(P).COMMON_STATUS),a=>(p(),d(K,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"备注",prop:"remark"},{default:o(()=>[t(M,{modelValue:l(n).remark,"onUpdate:modelValue":e[2]||(e[2]=a=>l(n).remark=a),class:"!w-240px",clearable:"",placeholder:"请输入备注",onKeyup:$(y,["enter"])},null,8,["modelValue"])]),_:1}),t(_,{label:"创建时间",prop:"createTime"},{default:o(()=>[t(q,{modelValue:l(n).createTime,"onUpdate:modelValue":e[3]||(e[3]=a=>l(n).createTime=a),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),t(_,null,{default:o(()=>[t(m,{onClick:y},{default:o(()=>[t(v,{class:"mr-5px",icon:"ep:search"}),e[7]||(e[7]=c(" 搜索 "))]),_:1}),t(m,{onClick:O},{default:o(()=>[t(v,{class:"mr-5px",icon:"ep:refresh"}),e[8]||(e[8]=c(" 重置 "))]),_:1}),g((p(),d(m,{plain:"",type:"primary",onClick:e[4]||(e[4]=a=>T("create"))},{default:o(()=>[t(v,{class:"mr-5px",icon:"ep:plus"}),e[9]||(e[9]=c(" 新增 "))]),_:1})),[[b,["report:ureport-data:create"]]]),g((p(),d(m,{loading:l(x),plain:"",type:"success",onClick:z},{default:o(()=>[t(v,{class:"mr-5px",icon:"ep:download"}),e[10]||(e[10]=c(" 导出 "))]),_:1},8,["loading"])),[[b,["report:ureport-data:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(N,null,{default:o(()=>[g((p(),d(A,{data:l(C),"show-overflow-tooltip":!0,stripe:!0},{default:o(()=>[t(i,{align:"center",label:"ID",prop:"id"}),t(i,{align:"center",label:"文件名称",prop:"name"}),t(i,{align:"center",label:"状态",prop:"status"},{default:o(a=>[t(E,{type:l(P).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),t(i,{align:"center",label:"文件内容",prop:"content"}),t(i,{align:"center",label:"备注",prop:"remark"}),t(i,{align:"center",formatter:l(h),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),t(i,{align:"center",label:"操作"},{default:o(a=>[g((p(),d(m,{link:"",type:"primary",onClick:j=>T("update",a.row.id)},{default:o(()=>e[11]||(e[11]=[c(" 编辑 ")])),_:2},1032,["onClick"])),[[b,["report:ureport-data:update"]]]),g((p(),d(m,{link:"",type:"danger",onClick:j=>Y(a.row.id)},{default:o(()=>e[12]||(e[12]=[c("删除")])),_:2},1032,["onClick"])),[[b,["report:ureport-data:delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,l(k)]]),t(H,{limit:l(n).pageSize,"onUpdate:limit":e[5]||(e[5]=a=>l(n).pageSize=a),page:l(n).pageNo,"onUpdate:page":e[6]||(e[6]=a=>l(n).pageNo=a),total:l(D),onPagination:f},null,8,["limit","page","total"])]),_:1}),t(ne,{ref_key:"formRef",ref:U,onSuccess:f},null,512)],64)}}});export{ke as default};
