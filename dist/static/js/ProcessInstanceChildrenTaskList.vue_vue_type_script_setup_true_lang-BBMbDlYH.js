/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{_ as x}from"./DictTag.vue_vue_type_script_lang-CGh0XIVR.js";import{d as B,r as u,g as p,k as d,o as c,a,y as D,m as r,j as e,L as y,l as S,v,K as E,i as I,t as w,aM as _,z as P}from"./index-BW9ifGp0.js";import{D as U}from"./dict-BcQRoIPV.js";import{_ as $}from"./TaskSubSignDialogForm.vue_vue_type_script_name_TaskRollbackDialogForm_setup_true_lang-C1qlAeKr.js";const K=B({name:"ProcessInstanceChildrenTaskList",__name:"ProcessInstanceChildrenTaskList",setup(L,{expose:C}){const T=P(),m=u(!1),l=u({});C({open:async n=>{if(_(n.children)){T.warning("该任务没有子任务");return}l.value=n,m.value=!0}});const f=u(),b=n=>{f.value.open(n.id)},g=n=>{if(n&&n.children&&!_(n.children)){const t=n.children.find(i=>i.result===1||i.result===9);return!_(t)}return!1};return(n,t)=>{const i=E,k=p("el-button"),s=p("el-table-column"),V=x,h=p("el-table"),N=p("el-drawer");return c(),d(N,{modelValue:a(m),"onUpdate:modelValue":t[1]||(t[1]=o=>D(m)?m.value=o:null),size:"70%",title:"子任务"},{header:r(()=>[I("h4",null,"【"+w(a(l).name)+" 】审批人："+w(a(l).assigneeUser?.nickname),1),g(a(l))?(c(),d(k,{key:0,plain:"",style:{"margin-left":"5px"},type:"danger",onClick:t[0]||(t[0]=o=>b(a(l)))},{default:r(()=>[e(i,{icon:"ep:remove"}),t[2]||(t[2]=v(" 减签 "))]),_:1})):S("",!0)]),default:r(()=>[e(h,{border:"",data:a(l).children,"row-key":"id",style:{width:"100%"}},{default:r(()=>[e(s,{label:"审批人",prop:"assigneeUser.nickname"}),e(s,{label:"所在部门",prop:"assigneeUser.deptName"}),e(s,{label:"审批状态",prop:"result"},{default:r(o=>[e(V,{type:a(U).BPM_PROCESS_INSTANCE_RESULT,value:o.row.result},null,8,["type","value"])]),_:1}),e(s,{align:"center",formatter:a(y),label:"提交时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",formatter:a(y),label:"结束时间",prop:"endTime",width:"180"},null,8,["formatter"]),e(s,{label:"操作",prop:"operation"},{default:r(o=>[g(o.row)?(c(),d(k,{key:0,plain:"",type:"danger",onClick:M=>b(o.row)},{default:r(()=>[e(i,{icon:"ep:remove"}),t[3]||(t[3]=v(" 减签 "))]),_:2},1032,["onClick"])):S("",!0)]),_:1})]),_:1},8,["data"]),e($,{ref_key:"taskSubSignDialogForm",ref:f},null,512)]),_:1},8,["modelValue"])}}});export{K as _};
