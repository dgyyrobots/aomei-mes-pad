/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{_ as U}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dq4j5fFx.js";import{d as $,r as p,f as F,u as P,Y as h,g as s,h as E,c as L,o as g,F as M,j as e,m as n,v as b,K as Y,w as j,a as t,k as A,t as V,L as q,M as K}from"./index-BuFigy1A.js";import{_ as O}from"./DictTag.vue_vue_type_script_lang-DcBSip_F.js";import{_ as Q,g as W}from"./ReceivableForm.vue_vue_type_script_setup_true_lang-OQ_4hHdj.js";import{B as G}from"./index-DYCK7WH7.js";import{f as H}from"./formatter-yC4cK5fd.js";import{D as J}from"./dict-Ve5yp9Dm.js";const re=$({name:"CrmReceivableList",__name:"ReceivableList",props:{bizType:{},bizId:{}},setup(v){const c=v,m=p(!0),_=p(0),f=p([]),a=F({pageNo:1,pageSize:10,customerId:void 0}),u=async()=>{m.value=!0;try{a.customerId=void 0;let l={list:[],total:0};switch(c.bizType){case G.CRM_CUSTOMER:a.customerId=c.bizId,l=await W(a);break;default:return}f.value=l.list,_.value=l.total}finally{m.value=!1}},y=()=>{a.pageNo=1,u()},d=p(),w=()=>{d.value.open("create")},{push:C}=P(),T=l=>{C({name:"CrmReceivableDetail",params:{id:l}})};return h(()=>[c.bizId,c.bizType],()=>{y()},{immediate:!0,deep:!0}),(l,r)=>{const k=Y,z=s("el-button"),R=s("el-row"),S=s("el-link"),i=s("el-table-column"),I=O,x=s("el-table"),D=K,N=U,B=E("loading");return g(),L(M,null,[e(R,{justify:"end"},{default:n(()=>[e(z,{onClick:w},{default:n(()=>[e(k,{class:"mr-5px",icon:"icon-park:income-one"}),r[2]||(r[2]=b(" 创建回款 "))]),_:1})]),_:1}),e(N,{class:"mt-10px"},{default:n(()=>[j((g(),A(x,{data:t(f),"show-overflow-tooltip":!0,stripe:!0},{default:n(()=>[e(i,{align:"center",fixed:"left",label:"回款编号",prop:"no"},{default:n(o=>[e(S,{type:"primary",underline:!1,onClick:X=>T(o.row.id)},{default:n(()=>[b(V(o.row.no),1)]),_:2},1032,["onClick"])]),_:1}),e(i,{align:"center",label:"合同编号",prop:"contractNo"}),e(i,{align:"center",formatter:t(H),label:"回款金额（元）",prop:"price"},null,8,["formatter"]),e(i,{align:"center",label:"负责人",prop:"ownerUserName"}),e(i,{align:"center",label:"状态",prop:"auditStatus"},{default:n(o=>[e(I,{type:t(J).CRM_AUDIT_STATUS,value:o.row.auditStatus},null,8,["type","value"])]),_:1}),e(i,{align:"center",formatter:t(q),label:"回款日期",prop:"returnTime",width:"180px"},null,8,["formatter"])]),_:1},8,["data"])),[[B,t(m)]]),e(D,{limit:t(a).pageSize,"onUpdate:limit":r[0]||(r[0]=o=>t(a).pageSize=o),page:t(a).pageNo,"onUpdate:page":r[1]||(r[1]=o=>t(a).pageNo=o),total:t(_),onPagination:u},null,8,["limit","page","total"])]),_:1}),e(Q,{ref_key:"formRef",ref:d,onSuccess:u},null,512)],64)}}});export{re as _};
