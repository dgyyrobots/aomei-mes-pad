/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{_ as R,P as E}from"./index-XmN0ZF0S.js";import{d as S,r as s,f as U,u as x,ac as z,H as M,b as N,z as j,a as e,g as p,k as w,l as A,o as d,m as i,j as f,y as G,c as H,F as K,n as $,K as q}from"./index-BdmDrM2Y.js";import{u as J}from"./page-B3q8DLAz.js";import{g as O,u as Q}from"./template-BZ05gR9q.js";import"./vuedraggable.umd-C1ri6RVx.js";const te=S({name:"DiyTemplateDecorate",__name:"decorate",setup(W){const a=s(0),m=U([{name:"基础设置",icon:"ep:iphone"},{name:"首页",icon:"ep:home-filled"},{name:"我的",icon:"ep:user-filled"}]),_=j(),l=s(!1),t=s(),v=s(),o=s(),h=async r=>{l.value=!0;try{t.value=await O(r),o.value=t.value}finally{l.value=!1}},g=[],c=s(g),V=()=>{if(a.value===0){c.value=g,o.value=t.value;return}c.value=E,o.value=t.value.pages.find(r=>r.name===m[a.value].name)},D=async()=>{if(v){l.value=!0;try{a.value===0?await Q(e(t)):await J(e(o)),_.success("保存成功")}finally{l.value=!1}}},k=()=>{t.value={id:void 0,name:"",used:!1,usedTime:void 0,remark:"",previewImageUrls:[],property:"",pages:[]},v.value?.resetFields()},{currentRoute:P}=x(),{delView:T}=z(),y=M();return N(()=>{if(k(),!y.params.id){_.warning("参数错误，页面编号不能为空！"),T(e(P));return}h(y.params.id)}),(r,u)=>{const C=q,F=p("el-radio-button"),I=p("el-tooltip"),B=p("el-radio-group"),L=R;return e(t)&&!e(l)?(d(),w(L,{key:0,modelValue:e(o).property,"onUpdate:modelValue":u[1]||(u[1]=n=>e(o).property=n),libs:e(c),"show-navigation-bar":e(a)!==0,"show-page-config":e(a)!==0,"show-tab-bar":e(a)===0,title:e(m)[e(a)].name,onSave:D},{toolBarLeft:i(()=>[f(B,{modelValue:e(a),"onUpdate:modelValue":u[0]||(u[0]=n=>G(a)?a.value=n:null),class:"h-full!",onChange:V},{default:i(()=>[(d(!0),H(K,null,$(e(m),(n,b)=>(d(),w(I,{key:b,content:n.name},{default:i(()=>[f(F,{label:b},{default:i(()=>[f(C,{icon:n.icon,size:24},null,8,["icon"])]),_:2},1032,["label"])]),_:2},1032,["content"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","libs","show-navigation-bar","show-page-config","show-tab-bar","title"])):A("",!0)}}});export{te as default};
