/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{_ as X}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C6z1f3RI.js";import{_ as Z}from"./DictTag.vue_vue_type_script_lang-G_4C17ZW.js";import{g as h,a as ee,r as te,b as le,c as ae}from"./index-CQ1ccYeO.js";import{c as oe}from"./index-Bn4cwl4J.js";import{d as se,H as ne,u as re,r as P,ac as ue,b as ie,g as d,c as k,o as c,j as e,m as t,v as n,t as r,a as l,x,c5 as C,F as R,n as D,k as _,l as g,i as b,q as ce,z as de,N as pe,bI as me,A as _e}from"./index-lcC3l4R2.js";import{D as m,g as fe,e as ye}from"./dict-B7jb0IEc.js";import{_ as be}from"./AfterSaleDisagreeForm.vue_vue_type_script_setup_true_lang-BJxbhc--.js";import"./color-B5phLuB-.js";const ve={class:"el-timeline-right-content"},Ee=se({name:"TradeAfterSaleDetail",__name:"index",setup(Te){const{t:w}=pe(),p=de(),{params:F}=ne(),{push:I,currentRoute:Y}=re(),a=P({order:{},logs:[]}),N=P(),V=u=>{switch(ye(m.USER_TYPE,u)?.colorType){case"success":return"#67C23A";case"info":return"#909399";case"warning":return"#E6A23C";case"danger":return"#F56C6C"}return"#409EFF"},y=async()=>{const u=F.id;if(u){const o=await h(u);o==null&&(p.notifyError("售后订单不存在"),z()),a.value=o}},$=async()=>{try{await p.confirm("是否同意售后？"),await ee(a.value.id),p.success(w("common.success")),await y()}catch(u){console.log(u)}},U=async()=>{N.value?.open(a.value)},L=async()=>{try{await p.confirm("是否确认收货？"),await te(a.value.id),p.success(w("common.success")),await y()}catch(u){console.log(u)}},B=async()=>{try{await p.confirm("是否拒绝收货？"),await le(a.value.id),p.success(w("common.success")),await y()}catch(u){console.log(u)}},M=async()=>{try{await p.confirm("是否确认退款？"),await ae(a.value.id),p.success(w("common.success")),await y()}catch(u){console.log(u)}},O=u=>{const o=[];me(u)?u.forEach(s=>{o.push(s.url)}):o.push(u),oe({urlList:o})},{delView:j}=ue(),z=()=>{j(l(Y)),I({name:"TradeAfterSale"})};return ie(async()=>{await y()}),(u,o)=>{const s=d("el-descriptions-item"),f=Z,v=d("el-descriptions"),H=d("el-image"),E=d("el-button"),W=d("el-tag"),A=d("el-table-column"),q=d("el-table"),S=d("el-col"),G=d("el-row"),J=d("el-timeline-item"),K=d("el-timeline"),Q=X;return c(),k(R,null,[e(Q,null,{default:t(()=>[e(v,{title:"订单信息"},{default:t(()=>[e(s,{label:"订单号: "},{default:t(()=>[n(r(l(a).orderNo),1)]),_:1}),e(s,{label:"配送方式: "},{default:t(()=>[e(f,{type:l(m).TRADE_DELIVERY_TYPE,value:l(a).order.deliveryType},null,8,["type","value"])]),_:1}),e(s,{label:"订单类型: "},{default:t(()=>[e(f,{type:l(m).TRADE_ORDER_TYPE,value:l(a).order.type},null,8,["type","value"])]),_:1}),e(s,{label:"收货人: "},{default:t(()=>[n(r(l(a).order.receiverName),1)]),_:1}),e(s,{label:"买家留言: "},{default:t(()=>[n(r(l(a).order.userRemark),1)]),_:1}),e(s,{label:"订单来源: "},{default:t(()=>[e(f,{type:l(m).TERMINAL,value:l(a).order.terminal},null,8,["type","value"])]),_:1}),e(s,{label:"联系电话: "},{default:t(()=>[n(r(l(a).order.receiverMobile),1)]),_:1}),e(s,{label:"商家备注: "},{default:t(()=>[n(r(l(a).order.remark),1)]),_:1}),e(s,{label:"支付单号: "},{default:t(()=>[n(r(l(a).order.payOrderId),1)]),_:1}),e(s,{label:"付款方式: "},{default:t(()=>[e(f,{type:l(m).PAY_CHANNEL_CODE,value:l(a).order.payChannelCode},null,8,["type","value"])]),_:1}),e(s,{label:"买家: "},{default:t(()=>[n(r(l(a)?.user?.nickname),1)]),_:1})]),_:1}),e(v,{title:"售后信息"},{default:t(()=>[e(s,{label:"退款编号: "},{default:t(()=>[n(r(l(a).no),1)]),_:1}),e(s,{label:"申请时间: "},{default:t(()=>[n(r(l(x)(l(a).auditTime)),1)]),_:1}),e(s,{label:"售后类型: "},{default:t(()=>[e(f,{type:l(m).TRADE_AFTER_SALE_TYPE,value:l(a).type},null,8,["type","value"])]),_:1}),e(s,{label:"售后方式: "},{default:t(()=>[e(f,{type:l(m).TRADE_AFTER_SALE_WAY,value:l(a).way},null,8,["type","value"])]),_:1}),e(s,{label:"退款金额: "},{default:t(()=>[n(r(l(C)(l(a).refundPrice)),1)]),_:1}),e(s,{label:"退款原因: "},{default:t(()=>[n(r(l(a).applyReason),1)]),_:1}),e(s,{label:"补充描述: "},{default:t(()=>[n(r(l(a).applyDescription),1)]),_:1}),e(s,{label:"凭证图片: "},{default:t(()=>[(c(!0),k(R,null,D(l(a).applyPicUrls,(i,T)=>(c(),_(H,{key:T,class:"mr-10px h-60px w-60px",src:i.url,onClick:o[0]||(o[0]=ge=>O(l(a).applyPicUrls))},null,8,["src"]))),128))]),_:1})]),_:1}),e(v,{column:1,title:"退款状态"},{default:t(()=>[e(s,{label:"退款状态: "},{default:t(()=>[e(f,{type:l(m).TRADE_AFTER_SALE_STATUS,value:l(a).status},null,8,["type","value"])]),_:1}),e(s,{"label-class-name":"no-colon"},{default:t(()=>[l(a).status===10?(c(),_(E,{key:0,type:"primary",onClick:$},{default:t(()=>o[1]||(o[1]=[n("同意售后")])),_:1})):g("",!0),l(a).status===10?(c(),_(E,{key:1,type:"primary",onClick:U},{default:t(()=>o[2]||(o[2]=[n("拒绝售后")])),_:1})):g("",!0),l(a).status===30?(c(),_(E,{key:2,type:"primary",onClick:L},{default:t(()=>o[3]||(o[3]=[n("确认收货")])),_:1})):g("",!0),l(a).status===30?(c(),_(E,{key:3,type:"primary",onClick:B},{default:t(()=>o[4]||(o[4]=[n("拒绝收货")])),_:1})):g("",!0),l(a).status===40?(c(),_(E,{key:4,type:"primary",onClick:M},{default:t(()=>o[5]||(o[5]=[n("确认退款")])),_:1})):g("",!0)]),_:1}),e(s,null,{label:t(()=>o[6]||(o[6]=[b("span",{style:{color:"red"}},"提醒:",-1)])),default:t(()=>[o[7]||(o[7]=n(" 如果未发货，请点击同意退款给买家。 ")),o[8]||(o[8]=b("br",null,null,-1)),o[9]||(o[9]=n(" 如果实际已发货，请主动与买家联系。 ")),o[10]||(o[10]=b("br",null,null,-1)),o[11]||(o[11]=n(" 如果订单整体退款后，优惠券和余额会退还给买家. "))]),_:1})]),_:1}),e(v,{title:"商品信息"},{default:t(()=>[e(s,{"label-class-name":"no-colon"},{default:t(()=>[e(G,{gutter:20},{default:t(()=>[e(S,{span:15},{default:t(()=>[e(q,{border:"",data:[l(a).orderItem]},{default:t(()=>[e(A,{label:"商品",prop:"spuName",width:"auto"},{default:t(({row:i})=>[n(r(i.spuName)+" ",1),(c(!0),k(R,null,D(i.properties,T=>(c(),_(W,{key:T.propertyId},{default:t(()=>[n(r(T.propertyName)+": "+r(T.valueName),1)]),_:2},1024))),128))]),_:1}),e(A,{label:"商品原价",prop:"price",width:"150"},{default:t(({row:i})=>[n(r(l(C)(i.price))+" 元",1)]),_:1}),e(A,{label:"数量",prop:"count",width:"100"}),e(A,{label:"合计",prop:"payPrice",width:"150"},{default:t(({row:i})=>[n(r(l(C)(i.payPrice))+" 元",1)]),_:1})]),_:1},8,["data"])]),_:1}),e(S,{span:10})]),_:1})]),_:1})]),_:1}),e(v,{title:"售后日志"},{default:t(()=>[e(s,{"label-class-name":"no-colon"},{default:t(()=>[e(K,null,{default:t(()=>[(c(!0),k(R,null,D(l(a).logs,i=>(c(),_(J,{key:i.id,placement:"top",timestamp:l(x)(i.createTime)},{dot:t(()=>[b("span",{class:"dot-node-style",style:ce({backgroundColor:V(i.userType)})},r(l(fe)(l(m).USER_TYPE,i.userType)[0]||"系"),5)]),default:t(()=>[b("div",ve,[b("span",null,r(i.content),1)])]),_:2},1032,["timestamp"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(be,{ref_key:"updateAuditReasonFormRef",ref:N,onSuccess:y},null,512)],64)}}}),Pe=_e(Ee,[["__scopeId","data-v-36983f9c"]]);export{Pe as default};
