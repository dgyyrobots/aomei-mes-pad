/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{V as E,d as Q,r as _,f as j,b as J,g as s,h,c as C,o as c,j as e,m as n,a as t,J as P,F as S,n as G,k as y,v as b,K as H,w as F,L as N,M as W,z as X,N as Z}from"./index-BuFigy1A.js";import{_ as ee}from"./DictTag.vue_vue_type_script_lang-DcBSip_F.js";import{_ as te}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dq4j5fFx.js";import{_ as le}from"./index-Bm6lKD5Z.js";import{c as oe,D as U}from"./dict-Ve5yp9Dm.js";import"./color-B5phLuB-.js";const ne=i=>E.get({url:"/system/oauth2-token/page",params:i}),ae=i=>E.delete({url:`/system/oauth2-token/delete?accessToken=${i}`}),de=Q({name:"SystemTokenClient",__name:"index",setup(i){const k=X(),{t:$}=Z(),f=_(!0),v=_(0),T=_([]),a=j({pageNo:1,pageSize:10,userId:null,userType:void 0,clientId:null}),w=_(),p=async()=>{f.value=!0;try{const u=await ne(a);T.value=u.list,v.value=u.total}finally{f.value=!1}},m=()=>{a.pageNo=1,p()},D=()=>{w.value.resetFields(),m()},q=async u=>{try{await k.confirm("是否要强制退出用户"),await ae(u),k.success($("common.success")),await p()}catch(l){console.log(l)}};return J(()=>{p()}),(u,l)=>{const z=le,x=s("el-input"),d=s("el-form-item"),K=s("el-option"),L=s("el-select"),I=H,g=s("el-button"),R=s("el-form"),V=te,r=s("el-table-column"),A=ee,B=s("el-table"),M=W,O=h("hasPermi"),Y=h("loading");return c(),C(S,null,[e(z,{title:"OAuth 2.0（SSO 单点登录)",url:"https://doc.iocoder.cn/oauth2/"}),e(V,null,{default:n(()=>[e(R,{ref_key:"queryFormRef",ref:w,class:"-mb-15px",inline:!0,"label-width":"90px",model:t(a)},{default:n(()=>[e(d,{label:"用户编号",prop:"userId"},{default:n(()=>[e(x,{modelValue:t(a).userId,"onUpdate:modelValue":l[0]||(l[0]=o=>t(a).userId=o),class:"!w-240px",clearable:"",placeholder:"请输入用户编号",onKeyup:P(m,["enter"])},null,8,["modelValue"])]),_:1}),e(d,{label:"用户类型",prop:"userType"},{default:n(()=>[e(L,{modelValue:t(a).userType,"onUpdate:modelValue":l[1]||(l[1]=o=>t(a).userType=o),class:"!w-240px",clearable:"",placeholder:"请选择用户类型"},{default:n(()=>[(c(!0),C(S,null,G(t(oe)(t(U).USER_TYPE),o=>(c(),y(K,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"客户端编号",prop:"clientId"},{default:n(()=>[e(x,{modelValue:t(a).clientId,"onUpdate:modelValue":l[2]||(l[2]=o=>t(a).clientId=o),class:"!w-240px",clearable:"",placeholder:"请输入客户端编号",onKeyup:P(m,["enter"])},null,8,["modelValue"])]),_:1}),e(d,null,{default:n(()=>[e(g,{onClick:m},{default:n(()=>[e(I,{class:"mr-5px",icon:"ep:search"}),l[5]||(l[5]=b(" 搜索 "))]),_:1}),e(g,{onClick:D},{default:n(()=>[e(I,{class:"mr-5px",icon:"ep:refresh"}),l[6]||(l[6]=b(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(V,null,{default:n(()=>[F((c(),y(B,{data:t(T)},{default:n(()=>[e(r,{align:"center",label:"访问令牌",prop:"accessToken",width:"300"}),e(r,{align:"center",label:"刷新令牌",prop:"refreshToken",width:"300"}),e(r,{align:"center",label:"用户编号",prop:"userId"}),e(r,{align:"center",label:"用户类型",prop:"userType"},{default:n(o=>[e(A,{type:t(U).USER_TYPE,value:o.row.userType},null,8,["type","value"])]),_:1}),e(r,{align:"center",formatter:t(N),label:"过期时间",prop:"expiresTime",width:"180"},null,8,["formatter"]),e(r,{align:"center",formatter:t(N),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(r,{align:"center",label:"操作"},{default:n(o=>[F((c(),y(g,{link:"",type:"danger",onClick:se=>q(o.row.accessToken)},{default:n(()=>l[7]||(l[7]=[b(" 强退 ")])),_:2},1032,["onClick"])),[[O,["system:oauth2-token:delete"]]])]),_:1})]),_:1},8,["data"])),[[Y,t(f)]]),e(M,{limit:t(a).pageSize,"onUpdate:limit":l[3]||(l[3]=o=>t(a).pageSize=o),page:t(a).pageNo,"onUpdate:page":l[4]||(l[4]=o=>t(a).pageNo=o),total:t(v),onPagination:p},null,8,["limit","page","total"])]),_:1})],64)}}});export{de as default};
