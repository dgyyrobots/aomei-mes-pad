/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{_ as M}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C6z1f3RI.js";import{d as R,r as c,f as T,Y as U,g as k,h as N,c as V,o as i,F as h,j as a,m as l,w as m,k as p,v as w,K as j,a as n,L as q,M as E,z as K,N as Q}from"./index-lcC3l4R2.js";import{_ as W}from"./Demo03GradeForm.vue_vue_type_script_setup_true_lang-CY5vSHR0.js";import{k as Y,l as A}from"./index-D1R9Jo9j.js";const Z=R({__name:"Demo03GradeList",props:{studentId:{}},setup($){const{t:x}=Q(),u=K(),f=$,_=c(!1),y=c([]),b=c(0),o=T({pageNo:1,pageSize:10,studentId:void 0});U(()=>f.studentId,t=>{o.studentId=t,D()},{immediate:!1});const d=async()=>{_.value=!0;try{const t=await Y(o);y.value=t.list,b.value=t.total}finally{_.value=!1}},D=()=>{o.pageNo=1,d()},C=c(),I=(t,e)=>{if(!f.studentId){u.error("请选择一个学生");return}C.value.open(t,e,f.studentId)},P=async t=>{try{await u.delConfirm(),await A(t),u.success(x("common.delSuccess")),await d()}catch(e){console.log(e)}};return(t,e)=>{const S=j,g=k("el-button"),r=k("el-table-column"),z=k("el-table"),F=E,B=M,v=N("hasPermi"),G=N("loading");return i(),V(h,null,[a(B,null,{default:l(()=>[m((i(),p(g,{plain:"",type:"primary",onClick:e[0]||(e[0]=s=>I("create"))},{default:l(()=>[a(S,{class:"mr-5px",icon:"ep:plus"}),e[3]||(e[3]=w(" 新增 "))]),_:1})),[[v,["infra:demo03-student:create"]]]),m((i(),p(z,{data:n(y),"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[a(r,{align:"center",label:"编号",prop:"id"}),a(r,{align:"center",label:"名字",prop:"name"}),a(r,{align:"center",label:"班主任",prop:"teacher"}),a(r,{align:"center",formatter:n(q),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),a(r,{align:"center",label:"操作"},{default:l(s=>[m((i(),p(g,{link:"",type:"primary",onClick:L=>I("update",s.row.id)},{default:l(()=>e[4]||(e[4]=[w(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["infra:demo03-student:update"]]]),m((i(),p(g,{link:"",type:"danger",onClick:L=>P(s.row.id)},{default:l(()=>e[5]||(e[5]=[w("删除")])),_:2},1032,["onClick"])),[[v,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[G,n(_)]]),a(F,{limit:n(o).pageSize,"onUpdate:limit":e[1]||(e[1]=s=>n(o).pageSize=s),page:n(o).pageNo,"onUpdate:page":e[2]||(e[2]=s=>n(o).pageNo=s),total:n(b),onPagination:d},null,8,["limit","page","total"])]),_:1}),a(W,{ref_key:"formRef",ref:C,onSuccess:d},null,512)],64)}}});export{Z as _};
