/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as w,aA as n,f as q,aD as E,b as N,O as $,Y as v,a as i,c as B,o as M,p as R,at as z,t as O,bA as P}from"./index-BdC40rFX.js";const j=w({name:"CountTo",__name:"CountTo",props:{startVal:n.number.def(0),endVal:n.number.def(2021),duration:n.number.def(3e3),autoplay:n.bool.def(!0),decimals:n.number.validate(o=>o>=0).def(0),decimal:n.string.def("."),separator:n.string.def(","),prefix:n.string.def(""),suffix:n.string.def(""),useEasing:n.bool.def(!0),easingFn:{type:Function,default(o,p,m,d){return m*(-Math.pow(2,-10*o/d)+1)*1024/1023+p}}},emits:["mounted","callback"],setup(o,{expose:p,emit:m}){const{getPrefixCls:d}=z(),S=d("count-to"),t=o,b=m,V=l=>{const{decimals:r,decimal:c,separator:e,suffix:s,prefix:h}=t;l=Number(l).toFixed(r),l+="";const F=l.split(".");let u=F[0];const k=F.length>1?c+F[1]:"",A=/(\d+)(\d{3})/;if(e&&!P(e))for(;A.test(u);)u=u.replace(A,`$1${e}$2`);return h+u+k+s},a=q({localStartVal:t.startVal,displayValue:V(t.startVal),printVal:null,paused:!1,localDuration:t.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),y=E(a,"displayValue");N(()=>{t.autoplay&&g(),b("mounted")});const f=$(()=>t.startVal>t.endVal);v([()=>t.startVal,()=>t.endVal],()=>{t.autoplay&&g()});const g=()=>{const{startVal:l,duration:r}=t;a.localStartVal=l,a.startTime=null,a.localDuration=r,a.paused=!1,a.rAF=requestAnimationFrame(x)},T=()=>{a.paused?(C(),a.paused=!1):(D(),a.paused=!0)},D=()=>{cancelAnimationFrame(a.rAF)},C=()=>{a.startTime=null,a.localDuration=+a.remaining,a.localStartVal=+a.printVal,requestAnimationFrame(x)},_=()=>{a.startTime=null,cancelAnimationFrame(a.rAF),a.displayValue=V(t.startVal)},x=l=>{const{useEasing:r,easingFn:c,endVal:e}=t;a.startTime||(a.startTime=l),a.timestamp=l;const s=l-a.startTime;a.remaining=a.localDuration-s,r?i(f)?a.printVal=a.localStartVal-c(s,0,a.localStartVal-e,a.localDuration):a.printVal=c(s,a.localStartVal,e-a.localStartVal,a.localDuration):i(f)?a.printVal=a.localStartVal-(a.localStartVal-e)*(s/a.localDuration):a.printVal=a.localStartVal+(e-a.localStartVal)*(s/a.localDuration),i(f)?a.printVal=a.printVal<e?e:a.printVal:a.printVal=a.printVal>e?e:a.printVal,a.displayValue=V(a.printVal),s<a.localDuration?a.rAF=requestAnimationFrame(x):b("callback")};return p({pauseResume:T,reset:_,start:g,pause:D}),(l,r)=>(M(),B("span",{class:R(i(S))},O(i(y)),3))}});export{j as _};
