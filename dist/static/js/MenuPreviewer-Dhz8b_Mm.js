/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{d as $,O as N,c as i,o as u,F as w,j as m,l as r,a as _,y as B,m as g,i as h,p as b,v as D,K as P,t as I,A as U}from"./index-FPuwcz_Y.js";import{d as x}from"./vuedraggable.umd-DfBNae3x.js";const L={class:"menu_bottom"},O=["onClick"],S={key:0,class:"submenu"},T={class:"menu_bottom subtitle"},A=["onClick"],F=["onClick"],K=$({__name:"MenuPreviewer",props:{modelValue:{},activeIndex:{},parentIndex:{},accountId:{}},emits:["update:modelValue","menu-clicked","submenu-clicked"],setup(f,{emit:C}){const s=f,d=C,l=N({get:()=>s.modelValue,set:o=>d("update:modelValue",o)}),V=()=>{const o=l.value.length,n={name:"菜单名称",children:[],reply:{type:"text",accountId:s.accountId}};l.value[o]=n,p(n,o-1)},y=(o,n)=>{const t=n.children.length,e={name:"子菜单名称",reply:{type:"text",accountId:s.accountId}};n.children[t]=e,v(n.children[t],o,t)},p=(o,n)=>{d("menu-clicked",o,n)},v=(o,n,t)=>{d("submenu-clicked",o,n,t)},E=({oldIndex:o,newIndex:n})=>{if(s.activeIndex==="__MENU_NOT_SELECTED__")return;const t=new Array(l.value.length).fill(!1);t[s.parentIndex]=!0;const[e]=t.splice(o,1);t.splice(n,0,e);const c=t.indexOf(!0),a=l.value[c];d("menu-clicked",a,c)},M=({newIndex:o})=>{const n=s.parentIndex,t=o,e=l.value[n]?.children;if(e&&e?.length>0){const c=e[t];d("submenu-clicked",c,n,t)}};return(o,n)=>{const t=P;return u(),i(w,null,[m(_(x),{modelValue:_(l),"onUpdate:modelValue":n[0]||(n[0]=e=>B(l)?l.value=e:null),animation:400,"ghost-class":"draggable-ghost","item-key":"id",onEnd:E},{item:g(({element:e,index:c})=>[h("div",L,[h("div",{class:b(["menu_item",{active:s.activeIndex===`${c}`}]),onClick:a=>p(e,c)},[m(t,{color:"black",icon:"ep:fold"}),D(" "+I(e.name),1)],10,O),s.parentIndex===c&&e.children?(u(),i("div",S,[m(_(x),{modelValue:e.children,"onUpdate:modelValue":a=>e.children=a,animation:400,"ghost-class":"draggable-ghost","item-key":"id",onEnd:M},{item:g(({element:a,index:k})=>[h("div",T,[e.children?(u(),i("div",{key:0,class:b(["menu_subItem",{active:s.activeIndex===`${c}-${k}`}]),onClick:j=>v(a,c,k)},I(a.name),11,A)):r("",!0)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),!e.children||e.children.length<5?(u(),i("div",{key:0,class:"menu_bottom menu_addicon",onClick:a=>y(c,e)},[m(t,{class:"plus",icon:"ep:plus"})],8,F)):r("",!0)])):r("",!0)])]),_:1},8,["modelValue"]),_(l).length<3?(u(),i("div",{key:0,class:"menu_bottom menu_addicon",onClick:V},[m(t,{class:"plus",icon:"ep:plus"})])):r("",!0)],64)}}}),q=U(K,[["__scopeId","data-v-a1827b15"]]);export{q as default};
