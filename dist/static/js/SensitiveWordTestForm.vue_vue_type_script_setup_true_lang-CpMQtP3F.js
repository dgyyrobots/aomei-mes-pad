/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{d as R,r as i,f as S,g as n,h as B,k as p,o as f,m as o,w as U,a as l,j as r,c as W,F as $,n as j,v as x,y as q,_ as N,z}from"./index-D3eRVKjp.js";import{a as E,v as M}from"./index-BkuxdNkU.js";const J=R({name:"SystemSensitiveWordTestForm",__name:"SensitiveWordTestForm",setup(A,{expose:b}){const c=z(),s=i(!1),u=i(!1),a=i({text:"",tags:[]}),y=S({text:[{required:!0,message:"测试文本不能为空",trigger:"blur"}],tags:[{required:!0,message:"标签不能为空",trigger:"blur"}]}),m=i(),_=i([]);b({open:async()=>{s.value=!0,w(),_.value=await E()}});const V=async()=>{if(!(!m||!await m.value.validate())){u.value=!0;try{const e=a.value,d=await M(e);if(d.length===0){c.success("不包含敏感词！");return}c.warning(`包含敏感词：${d.join(", ")}`),s.value=!1}finally{u.value=!1}}},w=()=>{a.value={text:"",tags:[]},m.value?.resetFields()};return(k,e)=>{const d=n("el-input"),v=n("el-form-item"),F=n("el-option"),C=n("el-select"),T=n("el-form"),g=n("el-button"),D=N,L=B("loading");return f(),p(D,{modelValue:l(s),"onUpdate:modelValue":e[3]||(e[3]=t=>q(s)?s.value=t:null),title:"检测敏感词"},{footer:o(()=>[r(g,{disabled:l(u),type:"primary",onClick:V},{default:o(()=>e[4]||(e[4]=[x("检 测")])),_:1},8,["disabled"]),r(g,{onClick:e[2]||(e[2]=t=>s.value=!1)},{default:o(()=>e[5]||(e[5]=[x("取 消")])),_:1})]),default:o(()=>[U((f(),p(T,{ref_key:"formRef",ref:m,"label-width":"80px",model:l(a),rules:l(y)},{default:o(()=>[r(v,{label:"文本",prop:"text"},{default:o(()=>[r(d,{modelValue:l(a).text,"onUpdate:modelValue":e[0]||(e[0]=t=>l(a).text=t),placeholder:"请输入测试文本",type:"textarea"},null,8,["modelValue"])]),_:1}),r(v,{label:"标签",prop:"tags"},{default:o(()=>[r(C,{modelValue:l(a).tags,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).tags=t),"allow-create":"",filterable:"",multiple:"",placeholder:"请选择标签",style:{width:"380px"}},{default:o(()=>[(f(!0),W($,null,j(l(_),t=>(f(),p(F,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[L,l(u)]])]),_:1},8,["modelValue"])}}});export{J as _};
