/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{d as q,r as u,f as L,g as m,h as R,k as _,o as f,m as s,w as A,a as l,j as o,c as I,F as M,n as O,v as y,y as $,_ as j,N as z,z as Y}from"./index-lcC3l4R2.js";import{a as G,c as H,u as J}from"./index-dnbb54u8.js";import{C as w}from"./constants-BPQb3nxh.js";import{c as K,D as Q}from"./dict-B7jb0IEc.js";const ae=q({name:"SystemPostForm",__name:"PostForm",emits:["success"],setup(W,{expose:C,emit:x}){const{t:v}=z(),g=Y(),r=u(!1),V=u(""),n=u(!1),b=u(""),t=u({id:void 0,name:"",code:"",sort:0,status:w.ENABLE,remark:""}),D=L({name:[{required:!0,message:"岗位标题不能为空",trigger:"blur"}],code:[{required:!0,message:"岗位编码不能为空",trigger:"change"}],status:[{required:!0,message:"岗位状态不能为空",trigger:"change"}],remark:[{required:!1,message:"岗位内容不能为空",trigger:"blur"}]}),i=u();C({open:async(p,e)=>{if(r.value=!0,V.value=v(`action.${p}`),b.value=p,T(),e){n.value=!0;try{t.value=await G(e)}finally{n.value=!1}}}});const E=x,F=async()=>{if(!(!i||!await i.value.validate())){n.value=!0;try{const e=t.value;b.value==="create"?(await H(e),g.success(v("common.createSuccess"))):(await J(e),g.success(v("common.updateSuccess"))),r.value=!1,E("success")}finally{n.value=!1}}},T=()=>{t.value={id:void 0,name:"",code:"",sort:void 0,status:w.ENABLE,remark:""},i.value?.resetFields()};return(p,e)=>{const c=m("el-input"),d=m("el-form-item"),U=m("el-option"),N=m("el-select"),P=m("el-form"),k=m("el-button"),S=j,B=R("loading");return f(),_(S,{modelValue:l(r),"onUpdate:modelValue":e[6]||(e[6]=a=>$(r)?r.value=a:null),title:l(V),width:"800"},{footer:s(()=>[o(k,{disabled:l(n),type:"primary",onClick:F},{default:s(()=>e[7]||(e[7]=[y("确 定")])),_:1},8,["disabled"]),o(k,{onClick:e[5]||(e[5]=a=>r.value=!1)},{default:s(()=>e[8]||(e[8]=[y("取 消")])),_:1})]),default:s(()=>[A((f(),_(P,{ref_key:"formRef",ref:i,"label-width":"80px",model:l(t),rules:l(D)},{default:s(()=>[o(d,{label:"岗位标题",prop:"name"},{default:s(()=>[o(c,{modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=a=>l(t).name=a),placeholder:"请输入岗位标题"},null,8,["modelValue"])]),_:1}),o(d,{label:"岗位编码",prop:"code"},{default:s(()=>[o(c,{modelValue:l(t).code,"onUpdate:modelValue":e[1]||(e[1]=a=>l(t).code=a),placeholder:"请输入岗位编码"},null,8,["modelValue"])]),_:1}),o(d,{label:"岗位顺序",prop:"sort"},{default:s(()=>[o(c,{modelValue:l(t).sort,"onUpdate:modelValue":e[2]||(e[2]=a=>l(t).sort=a),placeholder:"请输入岗位顺序"},null,8,["modelValue"])]),_:1}),o(d,{label:"状态",prop:"status"},{default:s(()=>[o(N,{modelValue:l(t).status,"onUpdate:modelValue":e[3]||(e[3]=a=>l(t).status=a),clearable:"",placeholder:"请选择状态"},{default:s(()=>[(f(!0),I(M,null,O(l(K)(l(Q).COMMON_STATUS),a=>(f(),_(U,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"备注",prop:"remark"},{default:s(()=>[o(c,{modelValue:l(t).remark,"onUpdate:modelValue":e[4]||(e[4]=a=>l(t).remark=a),placeholder:"请输备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[B,l(n)]])]),_:1},8,["modelValue","title"])}}});export{ae as _};
