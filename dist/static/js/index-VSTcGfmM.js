/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{_ as E}from"./DictTag.vue_vue_type_script_lang-BKaaD_BY.js";import{_ as Q}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CdI9J0YF.js";import{d as j,r as _,f as z,b as J,g as r,h as L,c as M,o as s,j as e,m as n,a as o,J as W,F as U,n as Y,k as c,w as f,v as p,K as G,L as H,z as X,N as Z}from"./index-BdC40rFX.js";import{_ as ee}from"./LevelForm.vue_vue_type_script_setup_true_lang-N5BNpa-5.js";import{b as le,d as te}from"./index-DMwYHYak.js";import{c as ne,D as $}from"./dict-D4wjFrBa.js";import"./color-B5phLuB-.js";import"./UploadImg-DaT9X0X7.js";import"./index-BSG-APLS.js";import"./constants-BPQb3nxh.js";const fe=j({name:"MemberLevel",__name:"index",setup(oe){const k=X(),{t:D}=Z(),w=_(!0),x=_([]),i=z({name:null,status:null}),C=_(),u=async()=>{w.value=!0;try{x.value=await le(i)}finally{w.value=!1}},b=()=>{u()},S=()=>{C.value.resetFields(),b()},h=_(),T=(d,l)=>{h.value.open(d,l)},N=async d=>{try{await k.delConfirm(),await te(d),k.success(D("common.delSuccess")),await u()}catch(l){console.log(l)}};return J(()=>{u()}),(d,l)=>{const O=r("el-input"),v=r("el-form-item"),P=r("el-option"),I=r("el-select"),g=G,m=r("el-button"),R=r("el-form"),V=Q,a=r("el-table-column"),F=r("el-image"),q=E,B=r("el-table"),y=L("hasPermi"),K=L("loading");return s(),M(U,null,[e(V,null,{default:n(()=>[e(R,{ref_key:"queryFormRef",ref:C,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(i)},{default:n(()=>[e(v,{label:"等级名称",prop:"name"},{default:n(()=>[e(O,{modelValue:o(i).name,"onUpdate:modelValue":l[0]||(l[0]=t=>o(i).name=t),class:"!w-240px",clearable:"",placeholder:"请输入等级名称",onKeyup:W(b,["enter"])},null,8,["modelValue"])]),_:1}),e(v,{label:"状态",prop:"status"},{default:n(()=>[e(I,{modelValue:o(i).status,"onUpdate:modelValue":l[1]||(l[1]=t=>o(i).status=t),class:"!w-240px",clearable:"",placeholder:"请选择状态"},{default:n(()=>[(s(!0),M(U,null,Y(o(ne)(o($).COMMON_STATUS),t=>(s(),c(P,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:n(()=>[e(m,{onClick:b},{default:n(()=>[e(g,{class:"mr-5px",icon:"ep:search"}),l[3]||(l[3]=p(" 搜索 "))]),_:1}),e(m,{onClick:S},{default:n(()=>[e(g,{class:"mr-5px",icon:"ep:refresh"}),l[4]||(l[4]=p(" 重置 "))]),_:1}),f((s(),c(m,{type:"primary",onClick:l[2]||(l[2]=t=>T("create"))},{default:n(()=>[e(g,{class:"mr-5px",icon:"ep:plus"}),l[5]||(l[5]=p(" 新增 "))]),_:1})),[[y,["member:level:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(V,null,{default:n(()=>[f((s(),c(B,{data:o(x),"show-overflow-tooltip":!0,stripe:!0},{default:n(()=>[e(a,{align:"center",label:"编号","min-width":"60",prop:"id"}),e(a,{align:"center",label:"等级图标","min-width":"80",prop:"icon"},{default:n(t=>[e(F,{class:"h-30px w-30px","preview-src-list":[t.row.icon],src:t.row.icon},null,8,["preview-src-list","src"])]),_:1}),e(a,{align:"center",label:"等级背景图","min-width":"100",prop:"backgroundUrl"},{default:n(t=>[e(F,{class:"h-30px w-30px","preview-src-list":[t.row.backgroundUrl],src:t.row.backgroundUrl},null,8,["preview-src-list","src"])]),_:1}),e(a,{align:"center",label:"等级名称","min-width":"100",prop:"name"}),e(a,{align:"center",label:"等级","min-width":"60",prop:"level"}),e(a,{align:"center",label:"升级经验","min-width":"80",prop:"experience"}),e(a,{align:"center",label:"享受折扣(%)","min-width":"110",prop:"discountPercent"}),e(a,{align:"center",label:"状态","min-width":"70",prop:"status"},{default:n(t=>[e(q,{type:o($).COMMON_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),e(a,{align:"center",formatter:o(H),label:"创建时间","min-width":"170",prop:"createTime"},null,8,["formatter"]),e(a,{align:"center",fixed:"right",label:"操作","min-width":"110px"},{default:n(t=>[f((s(),c(m,{link:"",type:"primary",onClick:A=>T("update",t.row.id)},{default:n(()=>l[6]||(l[6]=[p("编辑")])),_:2},1032,["onClick"])),[[y,["member:level:update"]]]),f((s(),c(m,{link:"",type:"danger",onClick:A=>N(t.row.id)},{default:n(()=>l[7]||(l[7]=[p("删除")])),_:2},1032,["onClick"])),[[y,["member:level:delete"]]])]),_:1})]),_:1},8,["data"])),[[K,o(w)]])]),_:1}),e(ee,{ref_key:"formRef",ref:h,onSuccess:u},null,512)],64)}}});export{fe as default};
