/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{d as G,r as m,f as X,b as Z,g as i,h,c as x,o as p,j as e,m as o,a,J as L,F as V,n as F,k as u,w as y,v as c,K as ee,t as te,L as le,M as ae,z as oe,N as ne}from"./index-D3eRVKjp.js";import{_ as re}from"./DictTag.vue_vue_type_script_lang-h3s-iN69.js";import{_ as ie}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dg75KKir.js";import{_ as se}from"./ArticleForm.vue_vue_type_script_setup_true_lang-D8BVb9Ak.js";import{i as pe}from"./spu-CL8bP2N_.js";import{a as me,d as ue}from"./index-DAw0f9T5.js";import{g as ce}from"./index-B9ci9Wlh.js";import{c as de}from"./index-Dl7TZtCB.js";import{c as _e,D as A}from"./dict-CqgorI4d.js";import"./color-B5phLuB-.js";import"./style.css_vue_type_style_index_0_src_true_lang-Ca11KYlC.js";import"./locale-CJXOnmDn.js";import"./UploadImg-RBMQ5RP3.js";import"./SkuList.vue_vue_type_script_setup_true_lang-D7xFNNba.js";import"./UploadImgs.vue_vue_type_script_setup_true_lang-3CaH0fDt.js";import"./UploadFile.vue_vue_type_script_setup_true_lang-c2y8G0Oq.js";import"./SpuSelect.vue_vue_type_script_setup_true_lang-BdpM48pc.js";import"./tree-vSlcEeQq.js";import"./index-E49OBwDm.js";import"./category-RLeiMjVu.js";const Fe=G({name:"PromotionArticle",__name:"index",setup(fe){const S=oe(),{t:O}=ne(),v=m(!0),I=m(0),T=m([]),n=X({pageNo:1,pageSize:10,categoryId:void 0,title:null,status:void 0,spuId:void 0,createTime:[]}),D=m(),Y=s=>{de({urlList:[s]})},d=async()=>{v.value=!0;try{const s=await me(n);T.value=s.list,I.value=s.total}finally{v.value=!1}},g=()=>{n.pageNo=1,d()},z=()=>{D.value.resetFields(),g()},U=m(),M=(s,l)=>{U.value.open(s,l)},K=async s=>{try{await S.delConfirm(),await ue(s),S.success(O("common.delSuccess")),await d()}catch(l){console.log(l)}},b=m([]),R=m([]);return Z(async()=>{await d(),b.value=await ce(),R.value=await pe()}),(s,l)=>{const N=i("el-option"),P=i("el-select"),_=i("el-form-item"),q=i("el-input"),B=i("el-date-picker"),k=ee,f=i("el-button"),E=i("el-form"),$=ie,H=i("el-image"),r=i("el-table-column"),Q=re,j=i("el-table"),J=ae,C=h("hasPermi"),W=h("loading");return p(),x(V,null,[e($,null,{default:o(()=>[e(E,{ref_key:"queryFormRef",ref:D,class:"-mb-15px",inline:!0,"label-width":"80px",model:a(n)},{default:o(()=>[e(_,{label:"文章分类",prop:"categoryId"},{default:o(()=>[e(P,{modelValue:a(n).categoryId,"onUpdate:modelValue":l[0]||(l[0]=t=>a(n).categoryId=t),class:"!w-240px",placeholder:"全部",onKeyup:L(g,["enter"])},{default:o(()=>[(p(!0),x(V,null,F(a(b),t=>(p(),u(N,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"文章标题",prop:"title"},{default:o(()=>[e(q,{modelValue:a(n).title,"onUpdate:modelValue":l[1]||(l[1]=t=>a(n).title=t),class:"!w-240px",clearable:"",placeholder:"请输入文章标题",onKeyup:L(g,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"状态",prop:"status"},{default:o(()=>[e(P,{modelValue:a(n).status,"onUpdate:modelValue":l[2]||(l[2]=t=>a(n).status=t),class:"!w-240px",clearable:"",placeholder:"请选择状态"},{default:o(()=>[(p(!0),x(V,null,F(a(_e)(a(A).COMMON_STATUS),t=>(p(),u(N,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"创建时间",prop:"createTime"},{default:o(()=>[e(B,{modelValue:a(n).createTime,"onUpdate:modelValue":l[3]||(l[3]=t=>a(n).createTime=t),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(_,null,{default:o(()=>[e(f,{onClick:g},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:search"}),l[7]||(l[7]=c(" 搜索 "))]),_:1}),e(f,{onClick:z},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:refresh"}),l[8]||(l[8]=c(" 重置 "))]),_:1}),y((p(),u(f,{plain:"",type:"primary",onClick:l[4]||(l[4]=t=>M("create"))},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:plus"}),l[9]||(l[9]=c(" 新增 "))]),_:1})),[[C,["promotion:article:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e($,null,{default:o(()=>[y((p(),u(j,{data:a(T),"show-overflow-tooltip":!0,stripe:!0},{default:o(()=>[e(r,{align:"center",label:"封面","min-width":"80",prop:"picUrl"},{default:o(({row:t})=>[e(H,{class:"h-30px w-30px",src:t.picUrl,onClick:w=>Y(t.picUrl)},null,8,["src","onClick"])]),_:1}),e(r,{align:"center",label:"标题","min-width":"180",prop:"title"}),e(r,{align:"center",label:"分类","min-width":"180",prop:"categoryId"},{default:o(t=>[c(te(a(b).find(w=>w.id===t.row.categoryId)?.name),1)]),_:1}),e(r,{align:"center",label:"浏览量","min-width":"180",prop:"browseCount"}),e(r,{align:"center",label:"作者","min-width":"180",prop:"author"}),e(r,{align:"center",label:"文章简介","min-width":"250",prop:"introduction"}),e(r,{align:"center",label:"排序","min-width":"60",prop:"sort"}),e(r,{align:"center",label:"状态","min-width":"60",prop:"status"},{default:o(t=>[e(Q,{type:a(A).COMMON_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",formatter:a(le),label:"发布时间",prop:"createTime",width:"180px"},null,8,["formatter"]),e(r,{align:"center",fixed:"right",label:"操作",width:"120"},{default:o(t=>[y((p(),u(f,{link:"",type:"primary",onClick:w=>M("update",t.row.id)},{default:o(()=>l[10]||(l[10]=[c(" 编辑 ")])),_:2},1032,["onClick"])),[[C,["promotion:article:update"]]]),y((p(),u(f,{link:"",type:"danger",onClick:w=>K(t.row.id)},{default:o(()=>l[11]||(l[11]=[c("删除")])),_:2},1032,["onClick"])),[[C,["promotion:article:delete"]]])]),_:1})]),_:1},8,["data"])),[[W,a(v)]]),e(J,{limit:a(n).pageSize,"onUpdate:limit":l[5]||(l[5]=t=>a(n).pageSize=t),page:a(n).pageNo,"onUpdate:page":l[6]||(l[6]=t=>a(n).pageNo=t),total:a(I),onPagination:d},null,8,["limit","page","total"])]),_:1}),e(se,{ref_key:"formRef",ref:U,onSuccess:d},null,512)],64)}}});export{Fe as default};
