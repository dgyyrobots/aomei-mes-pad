/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as q,r as g,f as L,g as m,h as N,c as U,o as c,j as t,m as l,a as n,w as p,k as d,v as y,K as V,L as j,M as A,F as E,z as K,N as W}from"./index-5TqN_QR1.js";import{_ as G}from"./ContentWrap.vue_vue_type_script_setup_true_lang-fpmIiri3.js";import{_ as H}from"./index-NckgD2u7.js";import{_ as J}from"./TagForm.vue_vue_type_script_setup_true_lang-iNGs6hEO.js";import{a as O,d as Q,s as X}from"./index-kxbl4wJx.js";import{_ as Y}from"./main.vue_vue_type_script_setup_true_lang-CuyoiRGE.js";import"./index-0CdTQ9QV.js";const ce=q({name:"MpTag",__name:"index",setup(Z){const u=K(),{t:P}=W(),b=g(!0),v=g(0),w=g([]),a=L({pageNo:1,pageSize:10,accountId:-1}),k=g(null),S=o=>{a.accountId=o,a.pageNo=1,i()},i=async()=>{try{b.value=!0;const o=await O(a);w.value=o.list,v.value=o.total}finally{b.value=!1}},C=(o,e)=>{k.value?.open(o,a.accountId,e)},T=async o=>{try{await u.delConfirm(),await Q(o),u.success(P("common.delSuccess")),await i()}catch(e){console.log(e)}},F=async()=>{try{await u.confirm("是否确认同步标签？"),await X(a.accountId),u.success("同步标签成功"),await i()}catch(o){console.log(o)}};return(o,e)=>{const z=H,x=m("el-form-item"),I=V,_=m("el-button"),B=m("el-form"),$=G,r=m("el-table-column"),D=m("el-table"),M=A,f=N("hasPermi"),R=N("loading");return c(),U(E,null,[t(z,{title:"公众号标签",url:"https://doc.iocoder.cn/mp/tag/"}),t($,null,{default:l(()=>[t(B,{ref:"queryFormRef",class:"-mb-15px",inline:!0,"label-width":"68px",model:n(a)},{default:l(()=>[t(x,{label:"公众号",prop:"accountId"},{default:l(()=>[t(n(Y),{onChange:S})]),_:1}),t(x,null,{default:l(()=>[p((c(),d(_,{disabled:n(a).accountId===0,plain:"",type:"primary",onClick:e[0]||(e[0]=s=>C("create"))},{default:l(()=>[t(I,{class:"mr-5px",icon:"ep:plus"}),e[3]||(e[3]=y(" 新增 "))]),_:1},8,["disabled"])),[[f,["mp:tag:create"]]]),p((c(),d(_,{disabled:n(a).accountId===0,plain:"",type:"success",onClick:F},{default:l(()=>[t(I,{class:"mr-5px",icon:"ep:refresh"}),e[4]||(e[4]=y(" 同步 "))]),_:1},8,["disabled"])),[[f,["mp:tag:sync"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t($,null,{default:l(()=>[p((c(),d(D,{data:n(w)},{default:l(()=>[t(r,{align:"center",label:"编号",prop:"id"}),t(r,{align:"center",label:"标签名称",prop:"name"}),t(r,{align:"center",label:"粉丝数",prop:"count"}),t(r,{align:"center",formatter:n(j),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),t(r,{align:"center",label:"操作"},{default:l(s=>[p((c(),d(_,{link:"",type:"primary",onClick:h=>C("update",s.row.id)},{default:l(()=>e[5]||(e[5]=[y("修改")])),_:2},1032,["onClick"])),[[f,["mp:tag:update"]]]),p((c(),d(_,{link:"",type:"danger",onClick:h=>T(s.row.id)},{default:l(()=>e[6]||(e[6]=[y("删除")])),_:2},1032,["onClick"])),[[f,["mp:tag:delete"]]])]),_:1})]),_:1},8,["data"])),[[R,n(b)]]),t(M,{limit:n(a).pageSize,"onUpdate:limit":e[1]||(e[1]=s=>n(a).pageSize=s),page:n(a).pageNo,"onUpdate:page":e[2]||(e[2]=s=>n(a).pageNo=s),total:n(v),onPagination:i},null,8,["limit","page","total"])]),_:1}),t(J,{ref_key:"formRef",ref:k,onSuccess:i},null,512)],64)}}});export{ce as default};
