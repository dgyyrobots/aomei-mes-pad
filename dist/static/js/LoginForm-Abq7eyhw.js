/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as ae,r as u,u as le,aw as ie,W as se,O as re,a as n,f as de,Y as R,b as pe,g as p,w as ce,Z as me,o as v,k as M,m as t,j as e,l as ue,N as ge,J as fe,v as c,t as b,i as T,c as _e,F as we,n as ye,ak as xe,al as he,am as ve,an as be,ao as Fe,ap as ke,K as Le,aq as U,ar as B,z as Ve,bx as Ne,bU as Ce,A as Se}from"./index-C8VsLzxx.js";import{v as Ie}from"./Verify-BkRiCkC9.js";import{_ as Ee}from"./XButton-kLKq9DCx.js";import{u as $e,L as y,_ as Re,a as Me}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-onFvwvAa.js";import{u as F}from"./useIcon-BZqItYbU.js";import{r as k}from"./formRules-BJqKeLXr.js";const Te={class:"w-[100%] flex justify-between"},Ue={class:"w-[100%] flex justify-between"},Be=ae({name:"LoginForm",__name:"LoginForm",setup(Pe){const{t:d}=ge(),L=Ve(),P=F({icon:"ep:house"}),j=F({icon:"ep:avatar"}),z=F({icon:"ep:lock"}),V=u(),{validForm:A}=Me(V),{setLoginState:x,getLoginState:O}=$e(),{currentRoute:D,push:q}=le(),K=ie(),G=se(),m=u(""),_=u(!1),N=u(),Q=u("blockPuzzle"),H=re(()=>n(O)===y.LOGIN),J={tenantName:[k],username:[k],password:[k]},a=de({isShowPassword:!1,captchaEnable:"false",tenantEnable:"true",loginForm:{tenantName:"",username:"",password:"",captchaVerification:"",rememberMe:!1}}),W=[{icon:"ant-design:wechat-filled",type:30},{icon:"ant-design:dingtalk-circle-filled",type:20},{icon:"ant-design:github-filled",type:0},{icon:"ant-design:alipay-circle-filled",type:0}],C=async()=>{a.captchaEnable==="false"?await E({}):N.value.show()},S=async()=>{if(a.tenantEnable==="true"){const l=await U(a.loginForm.tenantName);B(l)}},X=()=>{const l=xe();l&&(a.loginForm={...a.loginForm,username:l.username?l.username:a.loginForm.username,password:l.password?l.password:a.loginForm.password,rememberMe:!!l.rememberMe,tenantName:l.tenantName?l.tenantName:a.loginForm.tenantName})},I=u(),E=async l=>{_.value=!0;try{if(await S(),!await A())return;a.loginForm.captchaVerification=l.captchaVerification;const r=await he(a.loginForm);if(!r)return;I.value=ve.service({lock:!0,text:"正在加载系统中...",background:"rgba(0, 0, 0, 0.7)"}),a.loginForm.rememberMe?be(a.loginForm):Fe(),ke(r),m.value||(m.value="/"),m.value.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):q({path:m.value||K.addRouters[0].path})}finally{_.value=!1,I.value.close()}},Y=async l=>{if(l===0)L.error("此方式未配置");else{_.value=!0,a.tenantEnable==="true"&&(await S(),Ne()||await L.prompt("请输入租户名称",d("common.reminder")).then(async({value:i})=>{const g=await U(i);B(g)}));const o=`${location.origin}/social-login?${encodeURIComponent(`type=${l}&redirect=${m.value||"/"}`)}`,r=await Ce(l,encodeURIComponent(o));window.location.href=r}};return R(()=>D.value,l=>{m.value=l?.query?.redirect},{immediate:!0}),R(()=>G.getTitle,l=>{l&&(a.loginForm.tenantName=l)},{immediate:!0}),pe(()=>{X()}),(l,o)=>{const r=p("el-form-item"),i=p("el-col"),g=p("el-input"),Z=p("el-checkbox"),f=p("el-link"),h=p("el-row"),w=Ee,ee=Ie,$=p("el-divider"),te=Le,ne=p("el-form");return ce((v(),M(ne,{ref_key:"formLogin",ref:V,class:"login-form","label-position":"top","label-width":"120px",model:n(a).loginForm,rules:J,size:"large"},{default:t(()=>[e(h,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:t(()=>[e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(r,null,{default:t(()=>[e(Re,{style:{width:"100%"}})]),_:1})]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[n(a).tenantEnable==="true"?(v(),M(r,{key:0,prop:"tenantName"},{default:t(()=>[e(g,{modelValue:n(a).loginForm.tenantName,"onUpdate:modelValue":o[0]||(o[0]=s=>n(a).loginForm.tenantName=s),link:"",placeholder:n(d)("login.tenantNamePlaceholder"),"prefix-icon":n(P),type:"primary"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})):ue("",!0)]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(r,{prop:"username"},{default:t(()=>[e(g,{modelValue:n(a).loginForm.username,"onUpdate:modelValue":o[1]||(o[1]=s=>n(a).loginForm.username=s),placeholder:n(d)("login.usernamePlaceholder"),"prefix-icon":n(j)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(r,{prop:"password"},{default:t(()=>[e(g,{modelValue:n(a).loginForm.password,"onUpdate:modelValue":o[2]||(o[2]=s=>n(a).loginForm.password=s),placeholder:n(d)("login.passwordPlaceholder"),"prefix-icon":n(z),"show-password":"",type:"password",onKeyup:o[3]||(o[3]=fe(s=>C(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:t(()=>[e(r,null,{default:t(()=>[e(h,{justify:"space-between",style:{width:"100%"}},{default:t(()=>[e(i,{span:6},{default:t(()=>[e(Z,{modelValue:n(a).loginForm.rememberMe,"onUpdate:modelValue":o[4]||(o[4]=s=>n(a).loginForm.rememberMe=s)},{default:t(()=>[c(b(n(d)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),e(i,{offset:6,span:12},{default:t(()=>[e(f,{style:{float:"right"},type:"primary"},{default:t(()=>[c(b(n(d)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(r,null,{default:t(()=>[e(w,{class:"w-[100%]",loading:n(_),title:n(d)("login.login"),type:"primary",onClick:o[5]||(o[5]=s=>C())},null,8,["loading","title"])]),_:1})]),_:1}),e(ee,{ref_key:"verify",ref:N,"captcha-type":n(Q),"img-size":{width:"400px",height:"200px"},mode:"pop",onSuccess:E},null,8,["captcha-type"]),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(r,null,{default:t(()=>[e(h,{gutter:5,justify:"space-between",style:{width:"100%"}},{default:t(()=>[e(i,{span:8},{default:t(()=>[e(w,{class:"w-[100%]",title:n(d)("login.btnMobile"),onClick:o[6]||(o[6]=s=>n(x)(n(y).MOBILE))},null,8,["title"])]),_:1}),e(i,{span:8},{default:t(()=>[e(w,{class:"w-[100%]",title:n(d)("login.btnQRCode"),onClick:o[7]||(o[7]=s=>n(x)(n(y).QR_CODE))},null,8,["title"])]),_:1}),e(i,{span:8},{default:t(()=>[e(w,{class:"w-[100%]",title:n(d)("login.btnRegister"),onClick:o[8]||(o[8]=s=>n(x)(n(y).REGISTER))},null,8,["title"])]),_:1})]),_:1})]),_:1})]),_:1}),e($,{"content-position":"center"},{default:t(()=>[c(b(n(d)("login.otherLogin")),1)]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(r,null,{default:t(()=>[T("div",Te,[(v(),_e(we,null,ye(W,(s,oe)=>e(te,{key:oe,class:"anticon cursor-pointer",color:"#999",icon:s.icon,size:30,onClick:je=>Y(s.type)},null,8,["icon","onClick"])),64))])]),_:1})]),_:1}),e($,{"content-position":"center"},{default:t(()=>o[9]||(o[9]=[c("萌新必读")])),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(r,null,{default:t(()=>[T("div",Ue,[e(f,{href:"https://doc.iocoder.cn/",target:"_blank"},{default:t(()=>o[10]||(o[10]=[c("📚开发指南")])),_:1}),e(f,{href:"https://doc.iocoder.cn/video/",target:"_blank"},{default:t(()=>o[11]||(o[11]=[c("🔥视频教程")])),_:1}),e(f,{href:"https://www.iocoder.cn/Interview/good-collection/",target:"_blank"},{default:t(()=>o[12]||(o[12]=[c("⚡面试手册")])),_:1}),e(f,{href:"http://static.yudao.iocoder.cn/mp/Aix9975.jpeg",target:"_blank"},{default:t(()=>o[13]||(o[13]=[c("🤝外包咨询")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[me,n(H)]])}}}),Ge=Se(Be,[["__scopeId","data-v-162d4d96"]]);export{Ge as default};
