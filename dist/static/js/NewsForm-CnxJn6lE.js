/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{by as R,bz as K,z as O,d as W,bv as q,O as z,r as G,g,k as w,o as m,m as r,j as e,i as p,c as y,F as H,n as J,l as _,p as I,a as t,t as S,K as Q,y as X,A as Y}from"./index-BdmDrM2Y.js";import Z from"./CoverSelect-B3Riz39e.js";import{_ as x}from"./style.css_vue_type_style_index_0_src_true_lang-CMBP_pq0.js";const A=O(),ee=(k,V)=>({MENU_CONF:{uploadImage:{server:k,maxFileSize:5*1024*1024,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{accountId:V,type:"image"},metaWithUrl:!0,headers:{Accept:"*",Authorization:`Bearer ${K()}`,"tenant-id":R()},withCredentials:!0,timeout:5*1e3,fieldName:"file",onBeforeUpload(a){return console.log(a),a},onProgress(a){console.log("progress",a)},onSuccess(a,u){console.log("onSuccess",a,u)},onFailed(a,u){A.alertError(u.message),console.log("onFailed",a,u)},onError(a,u,N){A.alertError(u.message),console.error("onError",a,u,N)},customInsert(a,u){u(a.data.url,"image",a.data.url)}}}}),E=()=>({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),te={class:"select-item"},oe=["onClick"],le={class:"news-content"},se=["src"],ne={class:"news-content-title"},ae={key:0,class:"child"},re=["onClick"],ce={class:"news-content-item"},ie={class:"news-content-item-title"},ue={class:"news-content-item-img"},me=["src"],de={class:"child"},pe={key:0},_e=W({name:"NewsForm",__name:"NewsForm",props:{isCreating:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(k,{emit:V}){const a=O(),u=k,N=q("accountId"),B=ee("undefined/admin-api/mp/material/upload-permanent",N),$=V,s=z({get(){return u.modelValue===null?[E()]:u.modelValue},set(o){$("update:modelValue",o)}}),d=G(0),i=z(()=>s.value[d.value]),U=o=>{const l=s.value[o];s.value[o]=s.value[o+1],s.value[o+1]=l,d.value=o+1},L=o=>{const l=s.value[o];s.value[o]=s.value[o-1],s.value[o-1]=l,d.value=o-1},b=async o=>{try{await a.confirm("确定删除该图文吗?"),s.value.splice(o,1),d.value===o&&(d.value=0)}catch(l){console.log(l)}},j=()=>{s.value.push(E()),d.value=s.value.length-1};return(o,l)=>{const f=Q,v=g("el-button"),C=g("el-row"),P=g("el-aside"),h=g("el-input"),F=g("el-col"),D=g("el-main"),M=g("el-container");return m(),w(M,null,{default:r(()=>[e(P,{width:"40%"},{default:r(()=>[p("div",te,[(m(!0),y(H,null,J(t(s),(n,c)=>(m(),y("div",{key:c},[c===0?(m(),y("div",{key:0,class:I(["news-main father",{activeAddNews:t(d)===c}]),onClick:T=>d.value=c},[p("div",le,[p("img",{class:"material-img",src:n.thumbUrl},null,8,se),p("div",ne,S(n.title),1)]),t(s).length>1?(m(),y("div",ae,[e(v,{circle:"",size:"small",type:"info",onClick:()=>U(c)},{default:r(()=>[e(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"]),o.isCreating?(m(),w(v,{key:0,circle:"",size:"small",type:"danger",onClick:()=>b(c)},{default:r(()=>[e(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):_("",!0)])):_("",!0)],10,oe)):_("",!0),c>0?(m(),y("div",{key:1,class:I(["news-main-item father",{activeAddNews:t(d)===c}]),onClick:T=>d.value=c},[p("div",ce,[p("div",ie,S(n.title),1),p("div",ue,[p("img",{class:"material-img",src:n.thumbUrl,width:"100%"},null,8,me)])]),p("div",de,[t(s).length>c+1?(m(),w(v,{key:0,circle:"",size:"small",type:"info",onClick:()=>U(c)},{default:r(()=>[e(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"])):_("",!0),c>0?(m(),w(v,{key:1,circle:"",size:"small",type:"info",onClick:()=>L(c)},{default:r(()=>[e(f,{icon:"ep:arrow-up-bold"})]),_:2},1032,["onClick"])):_("",!0),o.isCreating?(m(),w(v,{key:2,circle:"",size:"small",type:"danger",onClick:()=>b(c)},{default:r(()=>[e(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):_("",!0)])],10,re)):_("",!0)]))),128)),e(C,{class:"ope-row",justify:"center"},{default:r(()=>[t(s).length<8&&o.isCreating?(m(),w(v,{key:0,circle:"",type:"primary",onClick:j},{default:r(()=>[e(f,{icon:"ep:plus"})]),_:1})):_("",!0)]),_:1})])]),_:1}),e(D,null,{default:r(()=>[t(s).length>0?(m(),y("div",pe,[e(C,{gutter:20},{default:r(()=>[e(h,{modelValue:t(i).title,"onUpdate:modelValue":l[0]||(l[0]=n=>t(i).title=n),placeholder:"请输入标题（必填）"},null,8,["modelValue"]),e(h,{modelValue:t(i).author,"onUpdate:modelValue":l[1]||(l[1]=n=>t(i).author=n),placeholder:"请输入作者",style:{"margin-top":"5px"}},null,8,["modelValue"]),e(h,{modelValue:t(i).contentSourceUrl,"onUpdate:modelValue":l[2]||(l[2]=n=>t(i).contentSourceUrl=n),placeholder:"请输入原文地址",style:{"margin-top":"5px"}},null,8,["modelValue"])]),_:1}),e(C,{gutter:20},{default:r(()=>[e(F,{span:12},{default:r(()=>[e(Z,{modelValue:t(i),"onUpdate:modelValue":l[3]||(l[3]=n=>X(i)?i.value=n:null),"is-first":t(d)===0},null,8,["modelValue","is-first"])]),_:1}),e(F,{span:12},{default:r(()=>[l[6]||(l[6]=p("p",null,"摘要:",-1)),e(h,{modelValue:t(i).digest,"onUpdate:modelValue":l[4]||(l[4]=n=>t(i).digest=n),class:"digest",maxlength:"120",placeholder:"请输入摘要",rows:8,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,null,{default:r(()=>[e(t(x),{modelValue:t(i).content,"onUpdate:modelValue":l[5]||(l[5]=n=>t(i).content=n),"editor-config":t(B)},null,8,["modelValue","editor-config"])]),_:1})])):_("",!0)]),_:1})]),_:1})}}}),ge=Y(_e,[["__scopeId","data-v-0ba8a2f7"]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));export{ge as N,Ce as a,E as c};
