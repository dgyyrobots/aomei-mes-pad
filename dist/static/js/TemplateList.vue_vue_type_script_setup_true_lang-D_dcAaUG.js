/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{d as te,r as i,f as oe,b as $,g as p,h as I,c as U,o as u,F as M,j as l,_ as ae,a as o,y as Y,m as a,J as V,n as ne,w as x,v as c,K as ie,k as g,aS as se,L as re,M as de,z as pe,N as me}from"./index-D3eRVKjp.js";import{_ as ue}from"./DictTag.vue_vue_type_script_lang-h3s-iN69.js";import{_ as ce}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dg75KKir.js";import{a as fe,D as K}from"./dict-CqgorI4d.js";import{g as _e,d as ve}from"./index-CFnrUYqN.js";import{_ as ge}from"./qmsIndexForm.vue_vue_type_script_setup_true_lang-Dy2y8pJy.js";const qe=te({name:"QmsIndex",__name:"TemplateList",emits:["onSelected"],setup(xe,{expose:R,emit:z}){const{t:q}=me(),y=pe(),b=i(!0),N=i([]),S=i(0),n=oe({pageNo:1,pageSize:10,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,createTime:[]}),D=i();i(!1);const f=async()=>{b.value=!0;try{const r=await _e(n);N.value=r.list,S.value=r.total}finally{b.value=!1}},v=()=>{n.pageNo=1,f()},L=()=>{D.value.resetFields(),v()},F=i(),E=(r,e)=>{F.value.open(r,e)},B=async r=>{try{await y.delConfirm(),await ve(r),y.success(q("common.delSuccess")),await f()}catch{}};$(()=>{f()});let s=i(!1);R({open,showFlag:()=>{s.value=!0}}),i({id:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0}),i();const w=i([]),Q=r=>{w.value=r},H=z,X=()=>{if(w.value.length==0){y.warning(q("请至少选择一条数据!"));return}H("onSelected",w.value),s.value=!1};$(async()=>{f()});const j=i("模板");return(r,e)=>{const T=p("el-input"),_=p("el-form-item"),J=p("el-option"),O=p("el-select"),W=p("el-date-picker"),C=ie,m=p("el-button"),A=p("el-form"),P=ce,d=p("el-table-column"),G=ue,Z=de,h=ae,k=I("hasPermi"),ee=I("loading");return u(),U(M,null,[l(h,{title:o(j),modelValue:o(s),"onUpdate:modelValue":e[9]||(e[9]=t=>Y(s)?s.value=t:s=t),width:"80%"},{footer:a(()=>[l(m,{onClick:X,type:"primary"},{default:a(()=>e[15]||(e[15]=[c("确 定")])),_:1}),l(m,{onClick:e[8]||(e[8]=t=>Y(s)?s.value=!1:s=!1)},{default:a(()=>e[16]||(e[16]=[c("取 消")])),_:1})]),default:a(()=>[l(P,null,{default:a(()=>[l(A,{class:"-mb-15px",model:o(n),ref_key:"queryFormRef",ref:D,inline:!0,"label-width":"100px"},{default:a(()=>[l(_,{label:"检测项编码",prop:"indexCode"},{default:a(()=>[l(T,{modelValue:o(n).indexCode,"onUpdate:modelValue":e[0]||(e[0]=t=>o(n).indexCode=t),placeholder:"请输入检测项编码",clearable:"",onKeyup:V(v,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(_,{label:"检测项名称",prop:"indexName"},{default:a(()=>[l(T,{modelValue:o(n).indexName,"onUpdate:modelValue":e[1]||(e[1]=t=>o(n).indexName=t),placeholder:"请输入检测项名称",clearable:"",onKeyup:V(v,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(_,{label:"检测项类型",prop:"indexType"},{default:a(()=>[l(O,{modelValue:o(n).indexType,"onUpdate:modelValue":e[2]||(e[2]=t=>o(n).indexType=t),placeholder:"请选择检测项类型",clearable:"",class:"!w-240px"},{default:a(()=>[(u(!0),U(M,null,ne(o(fe)(o(K).MES_INDEX_TYPE),t=>(u(),g(J,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"检测工具",prop:"qcTool"},{default:a(()=>[l(T,{modelValue:o(n).qcTool,"onUpdate:modelValue":e[3]||(e[3]=t=>o(n).qcTool=t),placeholder:"请输入检测工具",clearable:"",onKeyup:V(v,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(_,{label:"创建时间",prop:"createTime"},{default:a(()=>[l(W,{modelValue:o(n).createTime,"onUpdate:modelValue":e[4]||(e[4]=t=>o(n).createTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),l(_,null,{default:a(()=>[l(m,{onClick:v},{default:a(()=>[l(C,{icon:"ep:search",class:"mr-5px"}),e[10]||(e[10]=c(" 搜索 "))]),_:1}),l(m,{onClick:L},{default:a(()=>[l(C,{icon:"ep:refresh",class:"mr-5px"}),e[11]||(e[11]=c(" 重置 "))]),_:1}),x((u(),g(m,{type:"primary",plain:"",onClick:e[5]||(e[5]=t=>E("create"))},{default:a(()=>[l(C,{icon:"ep:plus",class:"mr-5px"}),e[12]||(e[12]=c(" 新增 "))]),_:1})),[[k,["qmcbasic:qms-index:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(P,null,{default:a(()=>[x((u(),g(o(se),{data:o(N),stripe:!0,"show-overflow-tooltip":!0,onSelectionChange:Q},{default:a(()=>[l(d,{type:"selection",width:"55"}),l(d,{label:"检测项编码",align:"center",prop:"indexCode"}),l(d,{label:"检测项名称",align:"center",prop:"indexName"}),l(d,{label:"检测项类型",align:"center",prop:"indexType"},{default:a(t=>[l(G,{type:o(K).MES_INDEX_TYPE,value:t.row.indexType},null,8,["type","value"])]),_:1}),l(d,{label:"检测工具",align:"center",prop:"qcTool"}),l(d,{label:"备注",align:"center",prop:"remark"}),l(d,{label:"创建时间",align:"center",prop:"createTime",formatter:o(re),width:"180px"},null,8,["formatter"]),l(d,{label:"操作",align:"center"},{default:a(t=>[x((u(),g(m,{type:"primary",onClick:le=>E("update",t.row.id)},{default:a(()=>e[13]||(e[13]=[c(" 编辑 ")])),_:2},1032,["onClick"])),[[k,["qmcbasic:qms-index:update"]]]),x((u(),g(m,{link:"",type:"danger",onClick:le=>B(t.row.id)},{default:a(()=>e[14]||(e[14]=[c(" 删除 ")])),_:2},1032,["onClick"])),[[k,["qmcbasic:qms-index:delete"]]])]),_:1})]),_:1},8,["data"])),[[ee,o(b)]]),l(Z,{total:o(S),page:o(n).pageNo,"onUpdate:page":e[6]||(e[6]=t=>o(n).pageNo=t),limit:o(n).pageSize,"onUpdate:limit":e[7]||(e[7]=t=>o(n).pageSize=t),onPagination:f},null,8,["total","page","limit"])]),_:1})]),_:1},8,["title","modelValue"]),l(ge,{ref_key:"formRef",ref:F,onSuccess:f},null,512)],64)}}});export{qe as _};
