/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as ne,r as i,f as re,u as me,b as pe,g as p,h as T,c as Y,o as s,j as e,m as o,a as l,J as L,w as D,v as d,K as se,k as f,i as B,F as z,n as de,t as ie,L as H,l as v,d7 as y,M as ue,z as fe}from"./index-5TqN_QR1.js";import{_ as ce}from"./DictTag.vue_vue_type_script_lang-cZQMmgs8.js";import{_ as _e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-fpmIiri3.js";import{c as ge}from"./index-CIxyHk8Q.js";import{D as be}from"./dict-B2yk4gHf.js";import{_ as we}from"./UserForm.vue_vue_type_script_setup_true_lang-D1WHqJ18.js";import{_ as ve}from"./MemberTagSelect.vue_vue_type_script_setup_true_lang-BXPwxQ7B.js";import{_ as ye}from"./MemberLevelSelect.vue_vue_type_script_setup_true_lang-CqNFLWOx.js";import{_ as ke}from"./MemberGroupSelect.vue_vue_type_script_setup_true_lang-CMXuAJPs.js";import{_ as xe}from"./UserLevelUpdateForm.vue_vue_type_script_setup_true_lang-BR8ilfxe.js";import{_ as Ve}from"./UserPointUpdateForm.vue_vue_type_script_setup_true_lang-CLqDUjhf.js";import{_ as De}from"./CouponSendForm.vue_vue_type_script_setup_true_lang-HTAmZM5N.js";import"./color-B5phLuB-.js";import"./UploadImg-CoDfHv7D.js";import"./index-DKaFcMYS.js";import"./index-D2TUv3j9.js";import"./tree-vSlcEeQq.js";import"./TagForm.vue_vue_type_script_setup_true_lang-CbAS4fFB.js";import"./index-DOik5GHK.js";import"./index-DqW5PY29.js";import"./coupon-C15wLrGJ.js";import"./couponTemplate-Nw8OGMWO.js";import"./constants-BPQb3nxh.js";import"./formatter-B68pAfB5.js";const Ue=["src"],Ce={class:"flex items-center justify-center"},Xe=ne({name:"MemberUser",__name:"index",setup(he){const K=fe(),k=i(!0),U=i(0),C=i([]),n=re({pageNo:1,pageSize:10,nickname:null,mobile:null,loginDate:[],createTime:[],tagIds:[],levelId:null,groupId:null}),h=i(),I=i(),F=i(),x=i([]),c=async()=>{k.value=!0;try{const m=await ge(n);C.value=m.list,U.value=m.total}finally{k.value=!1}},g=()=>{n.pageNo=1,c()},q=()=>{h.value.resetFields(),g()},{push:j}=me(),E=m=>{j({name:"MemberUserDetail",params:{id:m}})},N=i(),O=(m,t)=>{N.value.open(m,t)},Q=m=>{x.value=m.map(t=>t.id)},P=i(),W=()=>{if(x.value.length===0){K.warning("请选择要发送优惠券的用户");return}P.value.open(x.value)},A=(m,t)=>{switch(m){case"handleUpdate":O("update",t.id);break;case"handleUpdateLevel":I.value.open(t.id);break;case"handleUpdatePoint":F.value.open(t.id);break}};return pe(()=>{c()}),(m,t)=>{const S=p("el-input"),u=p("el-form-item"),$=p("el-date-picker"),V=se,_=p("el-button"),J=p("el-form"),M=_e,r=p("el-table-column"),G=p("el-tag"),X=ce,b=p("el-dropdown-item"),Z=p("el-dropdown-menu"),ee=p("el-dropdown"),te=p("el-table"),le=ue,R=T("hasPermi"),oe=T("loading");return s(),Y(z,null,[e(M,null,{default:o(()=>[e(J,{ref_key:"queryFormRef",ref:h,class:"-mb-15px",inline:!0,"label-width":"68px",model:l(n)},{default:o(()=>[e(u,{label:"用户昵称",prop:"nickname"},{default:o(()=>[e(S,{modelValue:l(n).nickname,"onUpdate:modelValue":t[0]||(t[0]=a=>l(n).nickname=a),class:"!w-240px",clearable:"",placeholder:"请输入用户昵称",onKeyup:L(g,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"手机号",prop:"mobile"},{default:o(()=>[e(S,{modelValue:l(n).mobile,"onUpdate:modelValue":t[1]||(t[1]=a=>l(n).mobile=a),class:"!w-240px",clearable:"",placeholder:"请输入手机号",onKeyup:L(g,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"注册时间",prop:"createTime"},{default:o(()=>[e($,{modelValue:l(n).createTime,"onUpdate:modelValue":t[2]||(t[2]=a=>l(n).createTime=a),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(u,{label:"登录时间",prop:"loginDate"},{default:o(()=>[e($,{modelValue:l(n).loginDate,"onUpdate:modelValue":t[3]||(t[3]=a=>l(n).loginDate=a),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(u,{label:"用户标签",prop:"tagIds"},{default:o(()=>[e(ve,{modelValue:l(n).tagIds,"onUpdate:modelValue":t[4]||(t[4]=a=>l(n).tagIds=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"用户等级",prop:"levelId"},{default:o(()=>[e(ye,{modelValue:l(n).levelId,"onUpdate:modelValue":t[5]||(t[5]=a=>l(n).levelId=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"用户分组",prop:"groupId"},{default:o(()=>[e(ke,{modelValue:l(n).groupId,"onUpdate:modelValue":t[6]||(t[6]=a=>l(n).groupId=a)},null,8,["modelValue"])]),_:1}),e(u,null,{default:o(()=>[e(_,{onClick:g},{default:o(()=>[e(V,{class:"mr-5px",icon:"ep:search"}),t[9]||(t[9]=d(" 搜索 "))]),_:1}),e(_,{onClick:q},{default:o(()=>[e(V,{class:"mr-5px",icon:"ep:refresh"}),t[10]||(t[10]=d(" 重置 "))]),_:1}),D((s(),f(_,{onClick:W},{default:o(()=>t[11]||(t[11]=[d("发送优惠券")])),_:1})),[[R,["promotion:coupon:send"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(M,null,{default:o(()=>[D((s(),f(te,{data:l(C),"show-overflow-tooltip":!0,stripe:!0,onSelectionChange:Q},{default:o(()=>[e(r,{type:"selection",width:"55"}),e(r,{align:"center",label:"用户编号",prop:"id",width:"120px"}),e(r,{align:"center",label:"头像",prop:"avatar",width:"80px"},{default:o(a=>[B("img",{src:a.row.avatar,style:{width:"40px"}},null,8,Ue)]),_:1}),e(r,{align:"center",label:"手机号",prop:"mobile",width:"120px"}),e(r,{align:"center",label:"昵称",prop:"nickname",width:"80px"}),e(r,{align:"center",label:"等级",prop:"levelName",width:"100px"}),e(r,{align:"center",label:"分组",prop:"groupName",width:"100px"}),e(r,{align:"center",label:"用户标签",prop:"tagNames","show-overflow-tooltip":!1},{default:o(a=>[(s(!0),Y(z,null,de(a.row.tagNames,(w,ae)=>(s(),f(G,{key:ae,class:"mr-5px"},{default:o(()=>[d(ie(w),1)]),_:2},1024))),128))]),_:1}),e(r,{align:"center",label:"积分",prop:"point",width:"100px"}),e(r,{align:"center",label:"状态",prop:"status",width:"100px"},{default:o(a=>[e(X,{type:l(be).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",formatter:l(H),label:"登录时间",prop:"loginDate",width:"180px"},null,8,["formatter"]),e(r,{align:"center",formatter:l(H),label:"注册时间",prop:"createTime",width:"180px"},null,8,["formatter"]),e(r,{align:"center",fixed:"right",label:"操作","show-overflow-tooltip":!1,width:"100px"},{default:o(a=>[B("div",Ce,[e(_,{link:"",type:"primary",onClick:w=>E(a.row.id)},{default:o(()=>t[12]||(t[12]=[d("详情")])),_:2},1032,["onClick"]),D((s(),f(ee,{onCommand:w=>A(w,a.row)},{dropdown:o(()=>[e(Z,null,{default:o(()=>[l(y)(["member:user:update"])?(s(),f(b,{key:0,command:"handleUpdate"},{default:o(()=>t[14]||(t[14]=[d("编辑")])),_:1})):v("",!0),l(y)(["member:user:update-level"])?(s(),f(b,{key:1,command:"handleUpdateLevel"},{default:o(()=>t[15]||(t[15]=[d("修改等级")])),_:1})):v("",!0),l(y)(["member:user:update-point"])?(s(),f(b,{key:2,command:"handleUpdatePoint"},{default:o(()=>t[16]||(t[16]=[d("修改积分")])),_:1})):v("",!0),l(y)(["member:user:update-balance"])?(s(),f(b,{key:3,command:"handleUpdateBlance"},{default:o(()=>t[17]||(t[17]=[d(" 修改余额(WIP) ")])),_:1})):v("",!0)]),_:1})]),default:o(()=>[e(_,{link:"",type:"primary"},{default:o(()=>[e(V,{icon:"ep:d-arrow-right"}),t[13]||(t[13]=d(" 更多 "))]),_:1})]),_:2},1032,["onCommand"])),[[R,["member:user:update","member:user:update-level","member:user:update-point","member:user:update-balance"]]])])]),_:1})]),_:1},8,["data"])),[[oe,l(k)]]),e(le,{limit:l(n).pageSize,"onUpdate:limit":t[7]||(t[7]=a=>l(n).pageSize=a),page:l(n).pageNo,"onUpdate:page":t[8]||(t[8]=a=>l(n).pageNo=a),total:l(U),onPagination:c},null,8,["limit","page","total"])]),_:1}),e(we,{ref_key:"formRef",ref:N,onSuccess:c},null,512),e(xe,{ref_key:"updateLevelFormRef",ref:I,onSuccess:c},null,512),e(Ve,{ref_key:"updatePointFormRef",ref:F,onSuccess:c},null,512),e(l(De),{ref_key:"couponSendFormRef",ref:P},null,512)],64)}}});export{Xe as default};
