/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{v as Y}from"./Verify-DQbOFGKe.js";import{_ as ee}from"./XButton-BayVP5lM.js";import{d as te,H as ae,W as oe,r as g,u as ne,aw as se,O as le,a as e,f as ie,b as re,g as m,c as pe,o as C,i as l,p as I,as as ce,t as u,at as P,j as t,m as n,N as de,au as me,w as ue,k as ge,l as fe,J as xe,v as E,Z as _e,av as he,ak as we,ax as ye,ap as j,ay as ve,al as be,am as ke,an as Fe,ao as Ve,aq as Le,ar as Ne,A as Se}from"./index-D3eRVKjp.js";import{_ as M}from"./logo-DQEDlIK-.js";import{_ as Te,T as Ce,a as Ie}from"./login-box-bg-CFH9eF4U.js";import{u as y}from"./useIcon-DHObHGE9.js";import{u as Pe,L as Ee,_ as je,a as Me}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-CbdWh4hv.js";import{r as v}from"./formRules-Dx7KOm_Z.js";import"./locale-CJXOnmDn.js";const Re={class:"relative mx-auto h-full flex"},Ue={class:"relative flex items-center text-white"},qe={class:"text-20px font-bold"},Be={class:"h-[calc(100%-60px)] flex items-center justify-center"},ze={key:"2",class:"text-3xl text-white"},$e={key:"3",class:"mt-5 text-14px text-white font-normal"},De={class:"relative flex-1 p-30px dark:bg-[var(--login-bg-color)] lt-sm:p-10px"},Ae={class:"flex items-center justify-between text-white at-2xl:justify-end at-xl:justify-end"},He={class:"flex items-center at-2xl:hidden at-xl:hidden"},Oe={class:"text-20px font-bold"},Ge={class:"flex items-center justify-end space-x-10px"},Ke={class:"m-auto h-full w-[100%] flex items-center at-2xl:max-w-500px at-lg:max-w-500px at-md:max-w-500px at-xl:max-w-500px"},Je=te({name:"SocialLogin",__name:"SocialLogin",setup(We){const{t:c}=de(),f=ae(),b=oe(),{getPrefixCls:R}=ce(),k=R("login"),U=y({icon:"ep:house"}),q=y({icon:"ep:avatar"}),B=y({icon:"ep:lock"}),F=g(),{validForm:z}=Me(F),{getLoginState:$}=Pe(),{push:D}=ne(),A=se(),h=g(!1),V=g(),H=g("blockPuzzle"),O=le(()=>e($)===Ee.LOGIN),G={tenantName:[v],username:[v],password:[v]},a=ie({isShowPassword:!1,captchaEnable:"false",tenantEnable:"true",loginForm:{tenantName:"芋道源码",username:"admin",password:"admin123",captchaVerification:"",rememberMe:!1}}),L=async()=>{a.captchaEnable==="false"?await S({}):V.value.show()},K=async()=>{if(a.tenantEnable==="true"){const s=await Le(a.loginForm.tenantName);Ne(s)}},J=()=>{const s=we();s&&(a.loginForm={...a.loginForm,username:s.username?s.username:a.loginForm.username,password:s.password?s.password:a.loginForm.password,rememberMe:!!s.rememberMe,tenantName:s.tenantName?s.tenantName:a.loginForm.tenantName})},N=g();function x(s){return new URL(decodeURIComponent(location.href)).searchParams.get(s)??""}const W=async()=>{try{const s=x("type"),o=x("redirect"),i=f?.query?.code,r=f?.query?.state,d=await ye(s,i,r);j(d),ve.push({path:o||"/"})}catch(s){console.log(s)}},S=async s=>{h.value=!0;try{if(await K(),!await z())return;let i=x("redirect");const r=x("type"),d=f?.query?.code,w=f?.query?.state,_=await be({username:a.loginForm.username,password:a.loginForm.password,captchaVerification:s.captchaVerification,socialCode:d,socialState:w,socialType:r});if(!_)return;N.value=ke.service({lock:!0,text:"正在加载系统中...",background:"rgba(0, 0, 0, 0.7)"}),a.loginForm.rememberMe?Fe(a.loginForm):Ve(),j(_),i||(i="/"),i.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):D({path:i||A.addRouters[0].path})}finally{h.value=!1,N.value.close()}};return re(()=>{J(),W()}),(s,o)=>{const i=m("el-form-item"),r=m("el-col"),d=m("el-input"),w=m("el-checkbox"),_=m("el-link"),T=m("el-row"),X=ee,Z=Y,Q=m("el-form");return C(),pe("div",{class:I(["relative h-[100%] lt-xl:bg-[var(--login-bg-color)] lt-md:px-10px lt-sm:px-10px lt-xl:px-10px",e(k)])},[l("div",Re,[l("div",{class:I(`${e(k)}__left flex-1 bg-gray-500 bg-opacity-20 relative p-30px lt-xl:hidden`)},[l("div",Ue,[o[6]||(o[6]=l("img",{alt:"",class:"mr-10px h-48px w-48px",src:M},null,-1)),l("span",qe,u(e(P)(e(b).getTitle)),1)]),l("div",Be,[t(me,{appear:"","enter-active-class":"animate__animated animate__bounceInLeft",tag:"div"},{default:n(()=>[o[7]||(o[7]=l("img",{key:"1",alt:"",class:"w-350px",src:Te},null,-1)),l("div",ze,u(e(c)("login.welcome")),1),l("div",$e,u(e(c)("login.message")),1)]),_:1})])],2),l("div",De,[l("div",Ae,[l("div",He,[o[8]||(o[8]=l("img",{alt:"",class:"mr-10px h-48px w-48px",src:M},null,-1)),l("span",Oe,u(e(P)(e(b).getTitle)),1)]),l("div",Ge,[t(e(Ce)),t(e(Ie),{class:"dark:text-white lt-xl:text-white"})])]),t(he,{appear:"","enter-active-class":"animate__animated animate__bounceInRight"},{default:n(()=>[l("div",Ke,[ue(t(Q,{ref_key:"formLogin",ref:F,class:"login-form","label-position":"top","label-width":"120px",model:e(a).loginForm,rules:G,size:"large"},{default:n(()=>[t(T,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:n(()=>[t(r,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:n(()=>[t(i,null,{default:n(()=>[t(je,{style:{width:"100%"}})]),_:1})]),_:1}),t(r,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:n(()=>[e(a).tenantEnable==="true"?(C(),ge(i,{key:0,prop:"tenantName"},{default:n(()=>[t(d,{modelValue:e(a).loginForm.tenantName,"onUpdate:modelValue":o[0]||(o[0]=p=>e(a).loginForm.tenantName=p),link:"",placeholder:e(c)("login.tenantNamePlaceholder"),"prefix-icon":e(U),type:"primary"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})):fe("",!0)]),_:1}),t(r,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:n(()=>[t(i,{prop:"username"},{default:n(()=>[t(d,{modelValue:e(a).loginForm.username,"onUpdate:modelValue":o[1]||(o[1]=p=>e(a).loginForm.username=p),placeholder:e(c)("login.usernamePlaceholder"),"prefix-icon":e(q)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),t(r,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:n(()=>[t(i,{prop:"password"},{default:n(()=>[t(d,{modelValue:e(a).loginForm.password,"onUpdate:modelValue":o[2]||(o[2]=p=>e(a).loginForm.password=p),placeholder:e(c)("login.passwordPlaceholder"),"prefix-icon":e(B),"show-password":"",type:"password",onKeyup:o[3]||(o[3]=xe(p=>L(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),t(r,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:n(()=>[t(i,null,{default:n(()=>[t(T,{justify:"space-between",style:{width:"100%"}},{default:n(()=>[t(r,{span:6},{default:n(()=>[t(w,{modelValue:e(a).loginForm.rememberMe,"onUpdate:modelValue":o[4]||(o[4]=p=>e(a).loginForm.rememberMe=p)},{default:n(()=>[E(u(e(c)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),t(r,{offset:6,span:12},{default:n(()=>[t(_,{style:{float:"right"},type:"primary"},{default:n(()=>[E(u(e(c)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(r,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:n(()=>[t(i,null,{default:n(()=>[t(X,{class:"w-[100%]",loading:e(h),title:e(c)("login.login"),type:"primary",onClick:o[5]||(o[5]=p=>L())},null,8,["loading","title"])]),_:1})]),_:1}),t(Z,{ref_key:"verify",ref:V,"captcha-type":e(H),"img-size":{width:"400px",height:"200px"},mode:"pop",onSuccess:S},null,8,["captcha-type"])]),_:1})]),_:1},8,["model"]),[[_e,e(O)]])])]),_:1})])])],2)}}}),st=Se(Je,[["__scopeId","data-v-d2410e27"]]);export{st as default};
