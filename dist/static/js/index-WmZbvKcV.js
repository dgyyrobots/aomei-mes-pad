/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as X,r as d,b as Z,g as r,h as S,c as D,o as _,j as e,m as a,i as n,K as ee,a as l,dj as te,F as P,n as ae,k,v as g,w as V,t as L,L as T,M as le}from"./index-BdC40rFX.js";import{_ as oe}from"./DictTag.vue_vue_type_script_lang-BKaaD_BY.js";import{_ as ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CdI9J0YF.js";import{_ as se}from"./CountTo.vue_vue_type_script_setup_true_lang-BmtxYNpf.js";import{_ as re,g as ie,a as ce}from"./CombinationRecordListDialog.vue_vue_type_script_setup_true_lang-BEvTujwq.js";import{c as de}from"./index-BSG-APLS.js";import{c as me,D as M}from"./dict-D4wjFrBa.js";import"./color-B5phLuB-.js";const pe={class:"flex items-center"},ue={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(24 144 255)","background-color":"rgb(24 144 255 / 10%)"}},_e={class:"ml-[20px]"},fe={class:"flex items-center"},ge={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(162 119 255)","background-color":"rgb(162 119 255 / 10%)"}},ve={class:"ml-[20px]"},xe={class:"flex items-center"},be={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(162 119 255)","background-color":"rgb(162 119 255 / 10%)"}},ye={class:"ml-[20px]"},he={class:"align-middle"},De=X({name:"PromotionCombinationRecord",__name:"index",setup(we){const i=d({status:void 0,createTime:void 0,pageSize:10,pageNo:1}),R=d(),I=d(),v=d(!0),N=d(0),x=d([]),b=async()=>{v.value=!0;try{const c=await ie(i.value);x.value=c.list,N.value=c.total}finally{v.value=!1}},f=d({successCount:0,userCount:0,virtualGroupCount:0}),U=async()=>{f.value=await ce()},$=c=>{I.value?.open(c.headId)},O=()=>{i.value.pageNo=1,b()},z=()=>{R.value.resetFields(),O()},B=c=>{de({urlList:[c]})};return Z(async()=>{await U(),await b()}),(c,o)=>{const m=ee,y=se,p=ne,h=r("el-col"),F=r("el-row"),j=r("el-date-picker"),w=r("el-form-item"),Y=r("el-option"),q=r("el-select"),C=r("el-button"),A=r("el-form"),s=r("el-table-column"),E=r("el-avatar"),G=r("el-image"),H=oe,Q=r("el-table"),K=le,W=S("hasPermi"),J=S("loading");return _(),D(P,null,[e(F,{gutter:12},{default:a(()=>[e(h,{span:6},{default:a(()=>[e(p,{class:"h-[110px] pb-0!"},{default:a(()=>[n("div",pe,[n("div",ue,[e(m,{icon:"fa:user-times",size:23})]),n("div",_e,[o[4]||(o[4]=n("div",{class:"mb-8px text-14px text-gray-400"},"参与人数(个)",-1)),e(y,{class:"text-20px",duration:2600,"end-val":l(f).userCount,"start-val":0},null,8,["end-val"])])])]),_:1})]),_:1}),e(h,{span:6},{default:a(()=>[e(p,{class:"h-[110px]"},{default:a(()=>[n("div",fe,[n("div",ge,[e(m,{icon:"fa:user-plus",size:23})]),n("div",ve,[o[5]||(o[5]=n("div",{class:"mb-8px text-14px text-gray-400"},"成团数量(个)",-1)),e(y,{class:"text-20px",duration:2600,"end-val":l(f).successCount,"start-val":0},null,8,["end-val"])])])]),_:1})]),_:1}),e(h,{span:6},{default:a(()=>[e(p,{class:"h-[110px]"},{default:a(()=>[n("div",xe,[n("div",be,[e(m,{icon:"fa:user-plus",size:23})]),n("div",ye,[o[6]||(o[6]=n("div",{class:"mb-8px text-14px text-gray-400"},"虚拟成团(个)",-1)),e(y,{class:"text-20px",duration:2600,"end-val":l(f).virtualGroupCount,"start-val":0},null,8,["end-val"])])])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(A,{ref_key:"queryFormRef",ref:R,class:"-mb-15px",inline:!0,"label-width":"68px",model:l(i)},{default:a(()=>[e(w,{label:"创建时间",prop:"createTime"},{default:a(()=>[e(j,{modelValue:l(i).createTime,"onUpdate:modelValue":o[0]||(o[0]=t=>l(i).createTime=t),class:"!w-240px","end-placeholder":"结束日期",shortcuts:l(te),"start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","shortcuts"])]),_:1}),e(w,{label:"拼团状态",prop:"status"},{default:a(()=>[e(q,{modelValue:l(i).status,"onUpdate:modelValue":o[1]||(o[1]=t=>l(i).status=t),class:"!w-240px",clearable:"",placeholder:"全部"},{default:a(()=>[(_(!0),D(P,null,ae(l(me)(l(M).PROMOTION_COMBINATION_RECORD_STATUS),(t,u)=>(_(),k(Y,{key:u,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:a(()=>[e(C,{onClick:O},{default:a(()=>[e(m,{class:"mr-5px",icon:"ep:search"}),o[7]||(o[7]=g(" 搜索 "))]),_:1}),e(C,{onClick:z},{default:a(()=>[e(m,{class:"mr-5px",icon:"ep:refresh"}),o[8]||(o[8]=g(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(p,null,{default:a(()=>[V((_(),k(Q,{data:l(x)},{default:a(()=>[e(s,{align:"center",label:"编号","min-width":"50",prop:"id"}),e(s,{align:"center",label:"头像","min-width":"80",prop:"avatar"},{default:a(t=>[e(E,{src:t.row.avatar},null,8,["src"])]),_:1}),e(s,{align:"center",label:"昵称","min-width":"100",prop:"nickname"}),e(s,{align:"center",label:"开团团长","min-width":"100",prop:"headId"},{default:a(({row:t})=>[g(L(t.headId?l(x).find(u=>u.id===t.headId)?.nickname:t.nickname),1)]),_:1}),e(s,{align:"center",formatter:l(T),label:"开团时间",prop:"startTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",label:"拼团商品","min-width":"300",prop:"type","show-overflow-tooltip":""},{defaul:a(({row:t})=>[e(G,{class:"mr-5px h-30px w-30px align-middle",src:t.picUrl,onClick:u=>B(t.picUrl)},null,8,["src","onClick"]),n("span",he,L(t.spuName),1)]),_:1}),e(s,{align:"center",label:"几人团","min-width":"100",prop:"userSize"}),e(s,{align:"center",label:"参与人数","min-width":"100",prop:"userCount"}),e(s,{align:"center",formatter:l(T),label:"参团时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",formatter:l(T),label:"结束时间",prop:"endTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",label:"拼团状态","min-width":"150",prop:"status"},{default:a(t=>[e(H,{type:l(M).PROMOTION_COMBINATION_RECORD_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),e(s,{align:"center",fixed:"right",label:"操作"},{default:a(t=>[V((_(),k(C,{link:"",type:"primary",onClick:u=>$(t.row)},{default:a(()=>o[9]||(o[9]=[g(" 查看拼团 ")])),_:2},1032,["onClick"])),[[W,["promotion:combination-record:query"]]])]),_:1})]),_:1},8,["data"])),[[J,l(v)]]),e(K,{limit:l(i).pageSize,"onUpdate:limit":o[2]||(o[2]=t=>l(i).pageSize=t),page:l(i).pageNo,"onUpdate:page":o[3]||(o[3]=t=>l(i).pageNo=t),total:l(N),onPagination:b},null,8,["limit","page","total"])]),_:1}),e(re,{ref_key:"combinationRecordListRef",ref:I},null,512)],64)}}});export{De as default};
