/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as W,r as f,f as G,b as H,g as s,h as T,c as U,o as p,j as e,m as l,a,J as X,F as P,n as Z,k as d,w as _,v as m,K as ee,t as Y,x as F,L as te,M as oe,z as ae,N as le}from"./index-BdC40rFX.js";import{_ as ne}from"./DictTag.vue_vue_type_script_lang-BKaaD_BY.js";import{_ as ie}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CdI9J0YF.js";import{_ as re,g as se,c as pe}from"./BargainActivityForm.vue_vue_type_script_setup_true_lang-CMmhLiLD.js";import{c as me,D as $}from"./dict-D4wjFrBa.js";import{f as V}from"./formatter-yuatFmuk.js";import"./color-B5phLuB-.js";import"./Form-B_lUyqVK.js";import"./style.css_vue_type_style_index_0_src_true_lang-BD-Jc5v5.js";import"./locale-SYpyG3Sh.js";import"./InputPassword-CI-TQFG7.js";import"./UploadImg-DaT9X0X7.js";import"./index-BSG-APLS.js";import"./UploadImgs-BgpwDFvH.js";import"./UploadImgs.vue_vue_type_script_setup_true_lang-BmqlOvX1.js";import"./UploadFile-CJkJUA02.js";import"./UploadFile.vue_vue_type_script_setup_true_lang-CuPWgWix.js";import"./formRules-opgphle0.js";import"./useCrudSchemas-DS68AF99.js";import"./tree-vSlcEeQq.js";import"./spu-Cd27YdRa.js";import"./index-BP-_ByMC.js";import"./SkuList.vue_vue_type_script_setup_true_lang-Co7H7wx_.js";import"./SpuAndSkuList.vue_vue_type_script_setup_true_lang-AgLoi315.js";import"./SpuSelect.vue_vue_type_script_setup_true_lang-D9nb0a4N.js";import"./category-c5DlsBPI.js";const Oe=W({name:"PromotionBargainActivity",__name:"index",setup(ue){const g=ae(),{t:B}=le(),b=f(!0),C=f(0),x=f([]),i=G({pageNo:1,pageSize:10,name:null,status:null}),h=f(),u=async()=>{b.value=!0;try{const r=await se(i);x.value=r.list,C.value=r.total}finally{b.value=!1}},y=()=>{i.pageNo=1,u()},A=()=>{h.value.resetFields(),y()},D=f(),M=(r,t)=>{D.value.open(r,t)},O=async r=>{try{await g.confirm("确认关闭该砍价活动吗？"),await(void 0)(r),g.success("关闭成功"),await u()}catch(t){console.log(t)}},z=async r=>{try{await g.delConfirm(),await pe(r),g.success(B("common.delSuccess")),await u()}catch(t){console.log(t)}};return H(async()=>{await u()}),(r,t)=>{const I=s("el-input"),v=s("el-form-item"),R=s("el-option"),q=s("el-select"),k=ee,c=s("el-button"),K=s("el-form"),S=ie,n=s("el-table-column"),L=s("el-image"),E=ne,Q=s("el-table"),j=oe,w=T("hasPermi"),J=T("loading");return p(),U(P,null,[e(S,null,{default:l(()=>[e(K,{ref_key:"queryFormRef",ref:h,class:"-mb-15px",inline:!0,"label-width":"68px",model:a(i)},{default:l(()=>[e(v,{label:"活动名称",prop:"name"},{default:l(()=>[e(I,{modelValue:a(i).name,"onUpdate:modelValue":t[0]||(t[0]=o=>a(i).name=o),class:"!w-240px",clearable:"",placeholder:"请输入活动名称",onKeyup:X(y,["enter"])},null,8,["modelValue"])]),_:1}),e(v,{label:"活动状态",prop:"status"},{default:l(()=>[e(q,{modelValue:a(i).status,"onUpdate:modelValue":t[1]||(t[1]=o=>a(i).status=o),class:"!w-240px",clearable:"",placeholder:"请选择活动状态"},{default:l(()=>[(p(!0),U(P,null,Z(a(me)(a($).COMMON_STATUS),o=>(p(),d(R,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:l(()=>[e(c,{onClick:y},{default:l(()=>[e(k,{class:"mr-5px",icon:"ep:search"}),t[5]||(t[5]=m(" 搜索 "))]),_:1}),e(c,{onClick:A},{default:l(()=>[e(k,{class:"mr-5px",icon:"ep:refresh"}),t[6]||(t[6]=m(" 重置 "))]),_:1}),_((p(),d(c,{plain:"",type:"primary",onClick:t[2]||(t[2]=o=>M("create"))},{default:l(()=>[e(k,{class:"mr-5px",icon:"ep:plus"}),t[7]||(t[7]=m(" 新增 "))]),_:1})),[[w,["promotion:bargain-activity:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(S,null,{default:l(()=>[_((p(),d(Q,{data:a(x),"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[e(n,{label:"活动编号","min-width":"80",prop:"id"}),e(n,{label:"活动名称","min-width":"140",prop:"name"}),e(n,{label:"活动时间","min-width":"210"},{default:l(o=>[m(Y(a(F)(o.row.startTime,"YYYY-MM-DD"))+" ~ "+Y(a(F)(o.row.endTime,"YYYY-MM-DD")),1)]),_:1}),e(n,{label:"商品图片","min-width":"80",prop:"spuName"},{default:l(o=>[e(L,{class:"h-40px w-40px","preview-src-list":[o.row.picUrl],"preview-teleported":"",src:o.row.picUrl},null,8,["preview-src-list","src"])]),_:1}),e(n,{label:"商品标题","min-width":"300",prop:"spuName"}),e(n,{formatter:a(V),label:"起始价格","min-width":"100",prop:"bargainFirstPrice"},null,8,["formatter"]),e(n,{formatter:a(V),label:"砍价底价","min-width":"100",prop:"bargainMinPrice"},null,8,["formatter"]),e(n,{label:"总砍价人数","min-width":"100",prop:"recordUserCount"}),e(n,{label:"成功砍价人数","min-width":"110",prop:"recordSuccessUserCount"}),e(n,{label:"助力人数","min-width":"100",prop:"helpUserCount"}),e(n,{align:"center",label:"活动状态","min-width":"100",prop:"status"},{default:l(o=>[e(E,{type:a($).COMMON_STATUS,value:o.row.status},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"库存","min-width":"80",prop:"stock"}),e(n,{align:"center",label:"总库存","min-width":"80",prop:"totalStock"}),e(n,{align:"center",formatter:a(te),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),e(n,{align:"center",fixed:"right",label:"操作",width:"150px"},{default:l(o=>[_((p(),d(c,{link:"",type:"primary",onClick:N=>M("update",o.row.id)},{default:l(()=>t[8]||(t[8]=[m(" 编辑 ")])),_:2},1032,["onClick"])),[[w,["promotion:bargain-activity:update"]]]),o.row.status===0?_((p(),d(c,{key:0,link:"",type:"danger",onClick:N=>O(o.row.id)},{default:l(()=>t[9]||(t[9]=[m(" 关闭 ")])),_:2},1032,["onClick"])),[[w,["promotion:bargain-activity:close"]]]):_((p(),d(c,{key:1,link:"",type:"danger",onClick:N=>z(o.row.id)},{default:l(()=>t[10]||(t[10]=[m(" 删除 ")])),_:2},1032,["onClick"])),[[w,["promotion:bargain-activity:delete"]]])]),_:1})]),_:1},8,["data"])),[[J,a(b)]]),e(j,{limit:a(i).pageSize,"onUpdate:limit":t[3]||(t[3]=o=>a(i).pageSize=o),page:a(i).pageNo,"onUpdate:page":t[4]||(t[4]=o=>a(i).pageNo=o),total:a(C),onPagination:u},null,8,["limit","page","total"])]),_:1}),e(re,{ref_key:"formRef",ref:D,onSuccess:u},null,512)],64)}}});export{Oe as default};
