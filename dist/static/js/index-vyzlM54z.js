/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{d as Y,u as j,r as p,f as J,Y as W,b as G,g as s,h as R,c as H,o as u,j as t,m as o,a,J as X,w as f,v as c,K as Z,k as _,L as h,M as ee,y as te,_ as oe,F as ae,z as ne,N as le}from"./index-FPuwcz_Y.js";import{_ as re}from"./DictTag.vue_vue_type_script_lang-o_bnFpkw.js";import{_ as se}from"./ContentWrap.vue_vue_type_script_setup_true_lang-32ziCa0j.js";import{a as ie,d as me,g as pe}from"./index-8reGMtkN.js";import{D as ue}from"./dict-C9lD-gwA.js";import{b as ce}from"./formCreate-CdOY-8fL.js";import"./color-B5phLuB-.js";const we=Y({name:"BpmForm",__name:"index",setup(de){const C=ne(),{t:S}=le(),{currentRoute:T,push:q}=j(),b=p(!0),F=p(0),x=p([]),r=J({pageNo:1,pageSize:10,name:null}),V=p(),d=async()=>{b.value=!0;try{const l=await ie(r);x.value=l.list,F.value=l.total}finally{b.value=!1}},v=()=>{r.pageNo=1,d()},B=()=>{V.value.resetFields(),v()},D=l=>{const e={name:"BpmFormEditor"};typeof l=="number"&&(e.query={id:l}),q(e)},M=async l=>{try{await C.delConfirm(),await me(l),C.success(S("common.delSuccess")),await d()}catch(e){console.log(e)}},g=p(!1),k=p({rule:[],option:{}}),U=async l=>{const e=await pe(l);ce(k,e.conf,e.fields),g.value=!0};return W(()=>T.value,()=>{d()},{immediate:!0}),G(()=>{d()}),(l,e)=>{const z=s("el-input"),N=s("el-form-item"),w=Z,i=s("el-button"),E=s("el-form"),$=se,m=s("el-table-column"),I=re,K=s("el-table"),A=ee,L=s("form-create"),O=oe,y=R("hasPermi"),Q=R("loading");return u(),H(ae,null,[t($,null,{default:o(()=>[t(E,{ref_key:"queryFormRef",ref:V,class:"-mb-15px",inline:!0,"label-width":"68px",model:a(r)},{default:o(()=>[t(N,{label:"表单名",prop:"name"},{default:o(()=>[t(z,{modelValue:a(r).name,"onUpdate:modelValue":e[0]||(e[0]=n=>a(r).name=n),class:"!w-240px",clearable:"",placeholder:"请输入表单名",onKeyup:X(v,["enter"])},null,8,["modelValue"])]),_:1}),t(N,null,{default:o(()=>[t(i,{onClick:v},{default:o(()=>[t(w,{class:"mr-5px",icon:"ep:search"}),e[4]||(e[4]=c(" 搜索 "))]),_:1}),t(i,{onClick:B},{default:o(()=>[t(w,{class:"mr-5px",icon:"ep:refresh"}),e[5]||(e[5]=c(" 重置 "))]),_:1}),f((u(),_(i,{plain:"",type:"primary",onClick:D},{default:o(()=>[t(w,{class:"mr-5px",icon:"ep:plus"}),e[6]||(e[6]=c(" 新增 "))]),_:1})),[[y,["bpm:form:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t($,null,{default:o(()=>[f((u(),_(K,{data:a(x)},{default:o(()=>[t(m,{align:"center",label:"编号",prop:"id"}),t(m,{align:"center",label:"表单名",prop:"name"}),t(m,{align:"center",label:"状态",prop:"status"},{default:o(n=>[t(I,{type:a(ue).COMMON_STATUS,value:n.row.status},null,8,["type","value"])]),_:1}),t(m,{align:"center",label:"备注",prop:"remark"}),t(m,{align:"center",formatter:a(h),label:"创建时间",prop:"createTime"},null,8,["formatter"]),t(m,{align:"center",label:"操作"},{default:o(n=>[f((u(),_(i,{link:"",type:"primary",onClick:P=>D(n.row.id)},{default:o(()=>e[7]||(e[7]=[c("编辑")])),_:2},1032,["onClick"])),[[y,["bpm:form:update"]]]),f((u(),_(i,{link:"",onClick:P=>U(n.row.id)},{default:o(()=>e[8]||(e[8]=[c("详情")])),_:2},1032,["onClick"])),[[y,["bpm:form:query"]]]),f((u(),_(i,{link:"",type:"danger",onClick:P=>M(n.row.id)},{default:o(()=>e[9]||(e[9]=[c("删除")])),_:2},1032,["onClick"])),[[y,["bpm:form:delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,a(b)]]),t(A,{limit:a(r).pageSize,"onUpdate:limit":e[1]||(e[1]=n=>a(r).pageSize=n),page:a(r).pageNo,"onUpdate:page":e[2]||(e[2]=n=>a(r).pageNo=n),total:a(F),onPagination:d},null,8,["limit","page","total"])]),_:1}),t(O,{modelValue:a(g),"onUpdate:modelValue":e[3]||(e[3]=n=>te(g)?g.value=n:null),title:"表单详情",width:"800"},{default:o(()=>[t(L,{option:a(k).option,rule:a(k).rule},null,8,["option","rule"])]),_:1},8,["modelValue"])],64)}}});export{we as default};
