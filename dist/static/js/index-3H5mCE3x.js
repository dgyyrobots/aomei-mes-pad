/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{d as O,r as u,f as W,b as A,g as r,h as P,c as S,o as i,j as l,m as o,a as t,J as C,F as $,n as G,k as c,w as g,v as f,K as Z,L as h,M as ee,z as le,N as ae}from"./index-BdmDrM2Y.js";import{_ as te}from"./DictTag.vue_vue_type_script_lang-bjcRCBWf.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CIA3YA7G.js";import{a as ne,D as F}from"./dict-Cm-9nniQ.js";import{d as se}from"./download-U6qaYcnP.js";import{g as re,d as ie,e as de}from"./index-B6COaMJq.js";import{_ as pe}from"./qmsIndexForm.vue_vue_type_script_setup_true_lang-xIuXU3px.js";import"./color-B5phLuB-.js";const ve=O({name:"QmsIndex",__name:"index",setup(me){const v=le(),{t:M}=ae(),w=u(!0),q=u([]),V=u(0),n=W({pageNo:1,pageSize:10,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,createTime:[]}),N=u(),T=u(!1),_=async()=>{w.value=!0;try{const s=await re(n);q.value=s.list,V.value=s.total}finally{w.value=!1}},x=()=>{n.pageNo=1,_()},U=()=>{N.value.resetFields(),x()},D=u(),E=(s,e)=>{D.value.open(s,e)},Y=async s=>{try{await v.delConfirm(),await ie(s),v.success(M("common.delSuccess")),await _()}catch{}},K=async()=>{try{await v.exportConfirm(),T.value=!0;const s=await de(n);se.excel(s,"检测项.xls")}catch{}finally{T.value=!1}};return A(()=>{_()}),(s,e)=>{const k=r("el-input"),p=r("el-form-item"),z=r("el-option"),L=r("el-select"),R=r("el-date-picker"),y=Z,m=r("el-button"),B=r("el-form"),I=oe,d=r("el-table-column"),Q=te,H=r("el-table"),X=ee,b=P("hasPermi"),j=P("loading");return i(),S($,null,[l(I,null,{default:o(()=>[l(B,{class:"-mb-15px",model:t(n),ref_key:"queryFormRef",ref:N,inline:!0,"label-width":"100px"},{default:o(()=>[l(p,{label:"检测项编码",prop:"indexCode"},{default:o(()=>[l(k,{modelValue:t(n).indexCode,"onUpdate:modelValue":e[0]||(e[0]=a=>t(n).indexCode=a),placeholder:"请输入检测项编码",clearable:"",onKeyup:C(x,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(p,{label:"检测项名称",prop:"indexName"},{default:o(()=>[l(k,{modelValue:t(n).indexName,"onUpdate:modelValue":e[1]||(e[1]=a=>t(n).indexName=a),placeholder:"请输入检测项名称",clearable:"",onKeyup:C(x,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(p,{label:"检测项类型",prop:"indexType"},{default:o(()=>[l(L,{modelValue:t(n).indexType,"onUpdate:modelValue":e[2]||(e[2]=a=>t(n).indexType=a),placeholder:"请选择检测项类型",clearable:"",class:"!w-240px"},{default:o(()=>[(i(!0),S($,null,G(t(ne)(t(F).MES_INDEX_TYPE),a=>(i(),c(z,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"检测工具",prop:"qcTool"},{default:o(()=>[l(k,{modelValue:t(n).qcTool,"onUpdate:modelValue":e[3]||(e[3]=a=>t(n).qcTool=a),placeholder:"请输入检测工具",clearable:"",onKeyup:C(x,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(p,{label:"创建时间",prop:"createTime"},{default:o(()=>[l(R,{modelValue:t(n).createTime,"onUpdate:modelValue":e[4]||(e[4]=a=>t(n).createTime=a),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),l(p,null,{default:o(()=>[l(m,{onClick:x},{default:o(()=>[l(y,{icon:"ep:search",class:"mr-5px"}),e[8]||(e[8]=f(" 搜索"))]),_:1}),l(m,{onClick:U},{default:o(()=>[l(y,{icon:"ep:refresh",class:"mr-5px"}),e[9]||(e[9]=f(" 重置"))]),_:1}),g((i(),c(m,{type:"primary",plain:"",onClick:e[5]||(e[5]=a=>E("create"))},{default:o(()=>[l(y,{icon:"ep:plus",class:"mr-5px"}),e[10]||(e[10]=f(" 新增 "))]),_:1})),[[b,["qmcbasic:qms-index:create"]]]),g((i(),c(m,{type:"success",plain:"",onClick:K,loading:t(T)},{default:o(()=>[l(y,{icon:"ep:download",class:"mr-5px"}),e[11]||(e[11]=f(" 导出 "))]),_:1},8,["loading"])),[[b,["qmcbasic:qms-index:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(I,null,{default:o(()=>[g((i(),c(H,{data:t(q),stripe:!0,"show-overflow-tooltip":!0},{default:o(()=>[l(d,{label:"检测项编码",align:"center",prop:"indexCode"}),l(d,{label:"检测项名称",align:"center",prop:"indexName"}),l(d,{label:"检测项类型",align:"center",prop:"indexType"},{default:o(a=>[l(Q,{type:t(F).MES_INDEX_TYPE,value:a.row.indexType},null,8,["type","value"])]),_:1}),l(d,{label:"检测工具",align:"center",prop:"qcTool"}),l(d,{label:"备注",align:"center",prop:"remark"}),l(d,{label:"创建时间",align:"center",prop:"createTime",formatter:t(h),width:"180px"},null,8,["formatter"]),l(d,{label:"操作",align:"center"},{default:o(a=>[g((i(),c(m,{link:"",type:"primary",onClick:J=>E("update",a.row.id)},{default:o(()=>e[12]||(e[12]=[f(" 编辑 ")])),_:2},1032,["onClick"])),[[b,["qmcbasic:qms-index:update"]]]),g((i(),c(m,{link:"",type:"danger",onClick:J=>Y(a.row.id)},{default:o(()=>e[13]||(e[13]=[f(" 删除 ")])),_:2},1032,["onClick"])),[[b,["qmcbasic:qms-index:delete"]]])]),_:1})]),_:1},8,["data"])),[[j,t(w)]]),l(X,{total:t(V),page:t(n).pageNo,"onUpdate:page":e[6]||(e[6]=a=>t(n).pageNo=a),limit:t(n).pageSize,"onUpdate:limit":e[7]||(e[7]=a=>t(n).pageSize=a),onPagination:_},null,8,["total","page","limit"])]),_:1}),l(pe,{ref_key:"formRef",ref:D,onSuccess:_},null,512)],64)}}});export{ve as default};
