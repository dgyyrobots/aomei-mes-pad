/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{d as H,r as i,f as Q,b as j,g as m,h as M,c as J,o as d,j as t,m as a,a as o,J as W,w as f,v as p,K as X,k as _,l as h,L as G,M as O,F as Z,z as ee,N as te,X as ae}from"./index-BW9ifGp0.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-58zNwBTb.js";import{_ as le}from"./index-hVfLpCoZ.js";import{_ as ne,g as re,d as se,e as ie}from"./Demo02CategoryForm.vue_vue_type_script_setup_true_lang-DS-N3Mn_.js";import{d as me}from"./download-U6qaYcnP.js";import{h as pe}from"./tree-vSlcEeQq.js";const xe=H({name:"Demo02Category",__name:"index",setup(de){const x=ee(),{t:P}=te(),w=i(!0),T=i([]),l=Q({name:null,parentId:null,createTime:[]}),V=i(),v=i(!1),c=async()=>{w.value=!0;try{const n=await re(l);T.value=pe(n,"id","parentId")}finally{w.value=!1}},k=()=>{l.pageNo=1,c()},E=()=>{V.value.resetFields(),k()},F=i(),N=(n,e)=>{F.value.open(n,e)},I=async n=>{try{await x.delConfirm(),await se(n),x.success(P("common.delSuccess")),await c()}catch(e){console.log(e)}},L=async()=>{try{await x.exportConfirm(),v.value=!0;const n=await ie(l);me.excel(n,"示例分类.xls")}catch(n){console.log(n)}finally{v.value=!1}},C=i(!0),b=i(!0),R=async()=>{b.value=!1,C.value=!C.value,await ae(),b.value=!0};return j(()=>{c()}),(n,e)=>{const S=le,U=m("el-input"),D=m("el-form-item"),Y=m("el-date-picker"),u=X,s=m("el-button"),q=m("el-form"),$=oe,g=m("el-table-column"),z=m("el-table"),B=O,y=M("hasPermi"),K=M("loading");return d(),J(Z,null,[t(S,{title:"代码生成（树表）",url:"https://doc.iocoder.cn/new-feature/tree/"}),t($,null,{default:a(()=>[t(q,{ref_key:"queryFormRef",ref:V,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(l)},{default:a(()=>[t(D,{label:"名字",prop:"name"},{default:a(()=>[t(U,{modelValue:o(l).name,"onUpdate:modelValue":e[0]||(e[0]=r=>o(l).name=r),class:"!w-240px",clearable:"",placeholder:"请输入名字",onKeyup:W(k,["enter"])},null,8,["modelValue"])]),_:1}),t(D,{label:"创建时间",prop:"createTime"},{default:a(()=>[t(Y,{modelValue:o(l).createTime,"onUpdate:modelValue":e[1]||(e[1]=r=>o(l).createTime=r),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),t(D,null,{default:a(()=>[t(s,{onClick:k},{default:a(()=>[t(u,{class:"mr-5px",icon:"ep:search"}),e[5]||(e[5]=p(" 搜索 "))]),_:1}),t(s,{onClick:E},{default:a(()=>[t(u,{class:"mr-5px",icon:"ep:refresh"}),e[6]||(e[6]=p(" 重置 "))]),_:1}),f((d(),_(s,{plain:"",type:"primary",onClick:e[2]||(e[2]=r=>N("create"))},{default:a(()=>[t(u,{class:"mr-5px",icon:"ep:plus"}),e[7]||(e[7]=p(" 新增 "))]),_:1})),[[y,["infra:demo02-category:create"]]]),f((d(),_(s,{loading:o(v),plain:"",type:"success",onClick:L},{default:a(()=>[t(u,{class:"mr-5px",icon:"ep:download"}),e[8]||(e[8]=p(" 导出 "))]),_:1},8,["loading"])),[[y,["infra:demo02-category:export"]]]),t(s,{plain:"",type:"danger",onClick:R},{default:a(()=>[t(u,{class:"mr-5px",icon:"ep:sort"}),e[9]||(e[9]=p(" 展开/折叠 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t($,null,{default:a(()=>[o(b)?f((d(),_(z,{key:0,data:o(T),"default-expand-all":o(C),"row-key":"id","show-overflow-tooltip":!0,stripe:!0},{default:a(()=>[t(g,{align:"center",label:"编号",prop:"id"}),t(g,{align:"center",label:"名字",prop:"name"}),t(g,{align:"center",formatter:o(G),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),t(g,{align:"center",label:"操作"},{default:a(r=>[f((d(),_(s,{link:"",type:"primary",onClick:A=>N("update",r.row.id)},{default:a(()=>e[10]||(e[10]=[p(" 编辑 ")])),_:2},1032,["onClick"])),[[y,["infra:demo02-category:update"]]]),f((d(),_(s,{link:"",type:"danger",onClick:A=>I(r.row.id)},{default:a(()=>e[11]||(e[11]=[p("删除")])),_:2},1032,["onClick"])),[[y,["infra:demo02-category:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[K,o(w)]]):h("",!0),t(B,{limit:o(l).pageSize,"onUpdate:limit":e[3]||(e[3]=r=>o(l).pageSize=r),page:o(l).pageNo,"onUpdate:page":e[4]||(e[4]=r=>o(l).pageNo=r),total:n.total,onPagination:c},null,8,["limit","page","total"])]),_:1}),t(ne,{ref_key:"formRef",ref:F,onSuccess:c},null,512)],64)}}});export{xe as default};
