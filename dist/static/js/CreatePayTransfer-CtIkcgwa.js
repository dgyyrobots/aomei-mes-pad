/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as B,r as C,f as E,O as I,g as d,k as y,o as v,m as t,j as l,i as r,l as V,v as i,t as c,a,y as F,_ as R,z as Y,A as S}from"./index-C8VsLzxx.js";import{c as U}from"./index-JPsdvuF7.js";import{g as $,D as z}from"./dict-_inVRzR5.js";import{s as M,a as O}from"./wx_app-pH-apRHu.js";const q=["src"],G=["src"],H={style:{"text-align":"right"}},J=B({name:"CreatePayTransfer",__name:"CreatePayTransfer",emits:["success"],setup(K,{expose:N,emit:w}){const P=Y(),_=C(!1),k=w;let m;const e=E({appId:void 0,channelCode:void 0,merchantTransferId:void 0,type:void 0,price:0,subject:void 0,userName:void 0,alipayLogonId:void 0,openid:void 0}),n=C(!1),T=I(()=>$(z.PAY_TRANSFER_TYPE,e.type)),f=I(()=>{let o="alipay_pc";return e.type===2&&(o="wx_app"),o});N({showPayTransfer:async o=>{n.value=!0,m=o,e.merchantTransferId=o.merchantTransferId,e.price=o.price,e.userName=o.userName,e.type=o.type,e.appId=o.appId,e.subject=o.subject,e.alipayLogonId=o.alipayLogonId,e.openid=o.openid},close:async()=>{n.value=!1}});const h=async()=>{_.value=!0;try{m.channelCode=f.value,await U(m),P.success("发起转账成功. 是否转账成功,以转账订单状态为准"),k("success"),n.value=!1}finally{_.value=!1}};return(o,s)=>{const p=d("el-descriptions-item"),D=d("el-descriptions"),b=d("el-card"),g=d("el-radio"),L=d("el-radio-group"),j=d("el-divider"),x=d("el-button"),A=R;return v(),y(A,{modelValue:a(n),"onUpdate:modelValue":s[2]||(s[2]=u=>F(n)?n.value=u:null),title:"发起转账",width:"800px"},{default:t(()=>[l(b,{style:{"margin-top":"10px"}},{default:t(()=>[l(D,{border:"",column:2,title:"转账信息"},{default:t(()=>[l(p,{label:"转账类型"},{default:t(()=>[i(c(T.value),1)]),_:1}),l(p,{label:"转账金额(元)"},{default:t(()=>[i("￥"+c((a(e).price/100).toFixed(2)),1)]),_:1}),l(p,{label:"收款人姓名"},{default:t(()=>[i(c(a(e).userName),1)]),_:1}),a(e).type===1?(v(),y(p,{key:0,label:"支付宝登录账号"},{default:t(()=>[i(c(a(e).alipayLogonId),1)]),_:1})):V("",!0),a(e).type===2?(v(),y(p,{key:1,label:"微信 openid"},{default:t(()=>[i(c(a(e).openid),1)]),_:1})):V("",!0)]),_:1})]),_:1}),l(b,{style:{"margin-top":"20px"}},{header:t(()=>s[3]||(s[3]=[r("div",{class:"card-header"},[r("span",null,"选择转账渠道")],-1)])),default:t(()=>[r("div",null,[l(L,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=u=>f.value=u)},{default:t(()=>[l(g,{disabled:a(e).type===2||a(e).type===3||a(e).type===4,label:"alipay_pc"},{default:t(()=>[r("img",{src:a(M)},null,8,q)]),_:1},8,["disabled"]),l(g,{disabled:a(e).type===1||a(e).type===3||a(e).type===4,label:"wx_app"},{default:t(()=>[r("img",{src:a(O)},null,8,G)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])])]),_:1}),l(j),r("div",H,[l(x,{disabled:a(_),type:"primary",onClick:h},{default:t(()=>s[4]||(s[4]=[i("确 定")])),_:1},8,["disabled"]),l(x,{onClick:s[1]||(s[1]=u=>n.value=!1)},{default:t(()=>s[5]||(s[5]=[i("取 消")])),_:1})])]),_:1},8,["modelValue"])}}}),te=S(J,[["__scopeId","data-v-194e13cb"]]);export{te as default};
