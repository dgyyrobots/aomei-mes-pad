/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{d as $,r as d,f as B,g as m,h as R,k as I,o as S,m as o,w as T,a,j as l,i as _,v as i,K as M,y as j,_ as z,N as L,z as E}from"./index-BW9ifGp0.js";import{g as G,c as H,u as J}from"./index-BL7mIi5o.js";const X=$({name:"MpAccountForm",__name:"AccountForm",emits:["success"],setup(O,{expose:w,emit:x}){const{t:v}=L(),b=E(),u=d(!1),k=d(""),p=d(!1),y=d(""),t=d({id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""}),U=B({name:[{required:!0,message:"名称不能为空",trigger:"blur"}],account:[{required:!0,message:"公众号账号不能为空",trigger:"blur"}],appId:[{required:!0,message:"公众号 appId 不能为空",trigger:"blur"}],appSecret:[{required:!0,message:"公众号密钥不能为空",trigger:"blur"}],token:[{required:!0,message:"公众号 token 不能为空",trigger:"blur"}]}),c=d();w({open:async(f,e)=>{if(u.value=!0,k.value=v(`action.${f}`),y.value=f,K(),e){p.value=!0;try{t.value=await G(e)}finally{p.value=!1}}}});const A=x,D=async()=>{if(!(!c||!await c.value.validate())){p.value=!0;try{const e=t.value;y.value==="create"?(await H(e),b.success(v("common.createSuccess"))):(await J(e),b.success(v("common.updateSuccess"))),u.value=!1,A("success")}finally{p.value=!1}}},K=()=>{t.value={id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""},c.value?.resetFields()};return(f,e)=>{const r=m("el-input"),s=m("el-form-item"),g=M,V=m("el-tooltip"),C=m("el-form"),q=m("el-button"),F=z,N=R("loading");return S(),I(F,{modelValue:a(u),"onUpdate:modelValue":e[8]||(e[8]=n=>j(u)?u.value=n:null),title:a(k)},{footer:o(()=>[l(q,{disabled:a(p),type:"primary",onClick:D},{default:o(()=>e[12]||(e[12]=[i("确 定")])),_:1},8,["disabled"]),l(q,{onClick:e[7]||(e[7]=n=>u.value=!1)},{default:o(()=>e[13]||(e[13]=[i("取 消")])),_:1})]),default:o(()=>[T((S(),I(C,{ref_key:"formRef",ref:c,"label-width":"120px",model:a(t),rules:a(U)},{default:o(()=>[l(s,{label:"名称",prop:"name"},{default:o(()=>[l(r,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=n=>a(t).name=n),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),l(s,{label:"微信号",prop:"account"},{label:o(()=>[_("span",null,[l(V,{content:"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 账号详情] 中能找到「微信号」",placement:"top"},{default:o(()=>[l(g,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[9]||(e[9]=i(" 微信号 "))])]),default:o(()=>[l(r,{modelValue:a(t).account,"onUpdate:modelValue":e[1]||(e[1]=n=>a(t).account=n),placeholder:"请输入微信号"},null,8,["modelValue"])]),_:1}),l(s,{label:"appId",prop:"appId"},{label:o(()=>[_("span",null,[l(V,{content:"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 基本设置] 中能找到「开发者ID(AppID)」",placement:"top"},{default:o(()=>[l(g,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[10]||(e[10]=i(" appId "))])]),default:o(()=>[l(r,{modelValue:a(t).appId,"onUpdate:modelValue":e[2]||(e[2]=n=>a(t).appId=n),placeholder:"请输入公众号 appId"},null,8,["modelValue"])]),_:1}),l(s,{label:"appSecret",prop:"appSecret"},{label:o(()=>[_("span",null,[l(V,{content:"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 基本设置] 中能找到「开发者密码(AppSecret)」",placement:"top"},{default:o(()=>[l(g,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[11]||(e[11]=i(" appSecret "))])]),default:o(()=>[l(r,{modelValue:a(t).appSecret,"onUpdate:modelValue":e[3]||(e[3]=n=>a(t).appSecret=n),placeholder:"请输入公众号 appSecret"},null,8,["modelValue"])]),_:1}),l(s,{label:"token",prop:"token"},{default:o(()=>[l(r,{modelValue:a(t).token,"onUpdate:modelValue":e[4]||(e[4]=n=>a(t).token=n),placeholder:"请输入公众号token"},null,8,["modelValue"])]),_:1}),l(s,{label:"消息加解密密钥",prop:"aesKey"},{default:o(()=>[l(r,{modelValue:a(t).aesKey,"onUpdate:modelValue":e[5]||(e[5]=n=>a(t).aesKey=n),placeholder:"请输入消息加解密密钥"},null,8,["modelValue"])]),_:1}),l(s,{label:"备注",prop:"remark"},{default:o(()=>[l(r,{modelValue:a(t).remark,"onUpdate:modelValue":e[6]||(e[6]=n=>a(t).remark=n),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[N,a(p)]])]),_:1},8,["modelValue","title"])}}});export{X as _};
