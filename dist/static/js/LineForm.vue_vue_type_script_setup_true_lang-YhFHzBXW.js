/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{d as $,r as s,f as B,g as m,h as Y,c as k,o as _,F as T,j as e,_ as z,a as o,y as K,m as a,w as X,k as Q,K as A,n as G,v as U,N as H,z as J}from"./index-lcC3l4R2.js";import{a as W,D as Z}from"./dict-B7jb0IEc.js";import{f as ee,h as le,i as ae}from"./index-Bz2ZsRs0.js";import{_ as oe}from"./IndexSlect.vue_vue_type_script_setup_true_lang-C2SFmLwj.js";const se=$({__name:"LineForm",emits:["success"],setup(te,{expose:w,emit:q}){const{t:V}=H(),g=J(),c=s(!0),p=s(!1),M=s(""),f=s(!1),I=s(""),t=s({id:void 0,iqcId:void 0,indexId:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,checkMethod:void 0,standerVal:void 0,unitOfMeasure:void 0,thresholdMax:void 0,thresholdMin:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0}),C=B({iqcId:[{required:!0,message:"检验单ID不能为空",trigger:"blur"}],indexId:[{required:!0,message:"检测项ID不能为空",trigger:"blur"}]}),x=s();w({open:async(u,l,b)=>{if(p.value=!0,M.value=V("action."+u),I.value=u,O(),t.value.iqcId=b,l){f.value=!0;try{t.value=await ee(l)}finally{f.value=!1}}}});const D=q,N=async()=>{await x.value.validate(),f.value=!0;try{const u=t.value;I.value==="create"?(u.id=void 0,await le(u),g.success(V("common.createSuccess"))):(await ae(u),g.success(V("common.updateSuccess"))),p.value=!1,D("success")}finally{f.value=!1}},O=()=>{t.value={id:void 0,iqcId:void 0,indexId:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,checkMethod:void 0,standerVal:void 0,unitOfMeasure:void 0,thresholdMax:void 0,thresholdMin:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0},x.value?.resetFields()},h=s(),S=()=>{h.value.open(t.value.iqcId)},j=u=>{if(u!=null&&u!=null){console.log(u);for(var l in t.value)u.hasOwnProperty(l)&&t.value.hasOwnProperty(l)&&(t.value[l]=u[l])}};return(u,l)=>{const b=A,y=m("el-button"),i=m("el-input"),n=m("el-form-item"),r=m("el-col"),v=m("el-row"),F=m("el-option"),L=m("el-select"),E=m("el-form"),P=z,R=Y("loading");return _(),k(T,null,[e(P,{title:o(M),modelValue:o(p),"onUpdate:modelValue":l[15]||(l[15]=d=>K(p)?p.value=d:null),width:"80%"},{footer:a(()=>[e(y,{onClick:N,type:"primary",disabled:o(f)},{default:a(()=>l[16]||(l[16]=[U("确 定")])),_:1},8,["disabled"]),e(y,{onClick:l[14]||(l[14]=d=>p.value=!1)},{default:a(()=>l[17]||(l[17]=[U("取 消")])),_:1})]),default:a(()=>[X((_(),Q(E,{ref_key:"formRef",ref:x,model:o(t),rules:o(C),"label-width":"100px"},{default:a(()=>[e(v,{gutter:20},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(n,{label:"检测项ID",prop:"indexId"},{default:a(()=>[e(i,{modelValue:o(t).indexId,"onUpdate:modelValue":l[0]||(l[0]=d=>o(t).indexId=d),placeholder:"请输入检测项ID",disabled:o(c)},{append:a(()=>[e(y,{onClick:S},{default:a(()=>[e(b,{icon:"ep:search",class:"mr-5px"})]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(n,{label:"检测项编码",prop:"indexCode"},{default:a(()=>[e(i,{modelValue:o(t).indexCode,"onUpdate:modelValue":l[1]||(l[1]=d=>o(t).indexCode=d),placeholder:"请输入检测项编码",disabled:o(c)},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(n,{label:"检测项名称",prop:"indexName"},{default:a(()=>[e(i,{modelValue:o(t).indexName,"onUpdate:modelValue":l[2]||(l[2]=d=>o(t).indexName=d),placeholder:"请输入检测项名称",disabled:o(c)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(n,{label:"检测项类型",prop:"indexType",disabled:o(c)},{default:a(()=>[e(L,{modelValue:o(t).indexType,"onUpdate:modelValue":l[3]||(l[3]=d=>o(t).indexType=d),placeholder:"请选择检测项类型"},{default:a(()=>[(_(!0),k(T,null,G(o(W)(o(Z).MES_INDEX_TYPE),d=>(_(),Q(F,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["disabled"])]),_:1})]),_:1}),e(v,{gutter:20},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(n,{label:"检测工具",prop:"qcTool"},{default:a(()=>[e(i,{modelValue:o(t).qcTool,"onUpdate:modelValue":l[4]||(l[4]=d=>o(t).qcTool=d),placeholder:"请输入检测工具"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(n,{label:"检测要求",prop:"checkMethod"},{default:a(()=>[e(i,{modelValue:o(t).checkMethod,"onUpdate:modelValue":l[5]||(l[5]=d=>o(t).checkMethod=d),placeholder:"请输入检测要求"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(n,{label:"标准值",prop:"standerVal"},{default:a(()=>[e(i,{modelValue:o(t).standerVal,"onUpdate:modelValue":l[6]||(l[6]=d=>o(t).standerVal=d),placeholder:"请输入标准值"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(n,{label:"单位",prop:"unitOfMeasure"},{default:a(()=>[e(i,{modelValue:o(t).unitOfMeasure,"onUpdate:modelValue":l[7]||(l[7]=d=>o(t).unitOfMeasure=d),placeholder:"请输入单位"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(n,{label:"误差上限",prop:"thresholdMax"},{default:a(()=>[e(i,{modelValue:o(t).thresholdMax,"onUpdate:modelValue":l[8]||(l[8]=d=>o(t).thresholdMax=d),placeholder:"请输入误差上限"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(n,{label:"误差下限",prop:"thresholdMin"},{default:a(()=>[e(i,{modelValue:o(t).thresholdMin,"onUpdate:modelValue":l[9]||(l[9]=d=>o(t).thresholdMin=d),placeholder:"请输入误差下限"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:a(()=>[e(r,{span:8},{default:a(()=>[e(n,{label:"致命缺陷数量",prop:"crQuantity"},{default:a(()=>[e(i,{modelValue:o(t).crQuantity,"onUpdate:modelValue":l[10]||(l[10]=d=>o(t).crQuantity=d),placeholder:"请输入致命缺陷数量"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(n,{label:"严重缺陷数量",prop:"majQuantity"},{default:a(()=>[e(i,{modelValue:o(t).majQuantity,"onUpdate:modelValue":l[11]||(l[11]=d=>o(t).majQuantity=d),placeholder:"请输入严重缺陷数量"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(n,{label:"轻微缺陷数量",prop:"minQuantity"},{default:a(()=>[e(i,{modelValue:o(t).minQuantity,"onUpdate:modelValue":l[12]||(l[12]=d=>o(t).minQuantity=d),placeholder:"请输入轻微缺陷数量"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,{label:"备注",prop:"remark"},{default:a(()=>[e(i,{modelValue:o(t).remark,"onUpdate:modelValue":l[13]||(l[13]=d=>o(t).remark=d),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[R,o(f)]])]),_:1},8,["title","modelValue"]),e(oe,{ref_key:"index",ref:h,onOnSelected:j},null,512)],64)}}});export{se as _};
