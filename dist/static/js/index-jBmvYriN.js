/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{d as pe,r as p,f as ue,b as me,g as u,h as E,c as ce,o as m,j as e,m as l,a as o,J as D,w as c,v as d,K as fe,k as f,t as ve,L as U,l as N,M as ge,i as K,y as ye,F as _e,z as be,N as Ce}from"./index-BuFigy1A.js";import{_ as ke}from"./DictTag.vue_vue_type_script_lang-DcBSip_F.js";import{_ as qe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dq4j5fFx.js";import{D as we}from"./dict-Ve5yp9Dm.js";import{d as xe}from"./download-U6qaYcnP.js";import{g as Ne,A as Ve,a as Re,s as De}from"./index-uIbQdNXj.js";import{_ as Me}from"./Form.vue_vue_type_script_setup_true_lang-tHx_-YSH.js";import{_ as $e}from"./LineList.vue_vue_type_script_setup_true_lang-5IsJa-PH.js";import Se from"./DetailForm-Do2UNd3c.js";import"./color-B5phLuB-.js";import"./TemplateSelect.vue_vue_type_script_setup_true_lang-WKGGOzXN.js";import"./index-BUjSBrqV.js";import"./TemplateForm.vue_vue_type_script_setup_true_lang-BvqnwJkL.js";import"./TemplateIndexForm.vue_vue_type_script_setup_true_lang-DToNpjwc.js";import"./TemplateList.vue_vue_type_script_setup_true_lang-n3comGFl.js";import"./index-4SaFjs3d.js";import"./qmsIndexForm.vue_vue_type_script_setup_true_lang-DQsnSrd-.js";import"./TemplateProductForm.vue_vue_type_script_setup_true_lang-Qe1nAGB9.js";import"./TemplateIndexList.vue_vue_type_script_setup_true_lang-BrOj89_u.js";import"./TemplateProductList.vue_vue_type_script_setup_true_lang-Cwf1DkLV.js";import"./SupplierSelect.vue_vue_type_script_setup_true_lang-CAt4YyQk.js";import"./LineForm.vue_vue_type_script_setup_true_lang-DMXlYJxP.js";import"./IndexSlect.vue_vue_type_script_setup_true_lang-BoBfcY78.js";const Ue={class:"dialog-footer"},lt=pe({name:"Iqc",__name:"index",setup(Fe){const F=p(),h=i=>{F.value.showFlag(i)},{t:Y}=Ce(),V=be(),x=p(!0),T=p([]),P=p(0),r=ue({pageNo:1,pageSize:10,iqcCode:void 0,iqcName:void 0,itemCode:void 0,itemName:void 0,createTime:[]}),j=p(),g=p(!1),y=async()=>{x.value=!0;try{const i=await Ne(r);T.value=i.list,P.value=i.total}finally{x.value=!1}},b=()=>{r.pageNo=1,y()},A=()=>{j.value.resetFields(),b()},B=p(),I=(i,t)=>{B.value.open(i,t)},L=async i=>{try{await V.delConfirm(),await Ve(i),V.success(Y("common.delSuccess")),await y()}catch{}},O=async()=>{try{await V.exportConfirm(),g.value=!0;const i=await Re(r);xe.excel(i,"来料检验.xls")}catch{}finally{g.value=!1}},M=p({id:void 0,iqcCode:void 0,iqcName:void 0,templateId:void 0,vendorId:void 0,vendorCode:void 0,vendorName:void 0,vendorNick:void 0,vendorBatch:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityMinCheck:void 0,quantityMaxUnqualified:void 0,quantityRecived:void 0,quantityCheck:void 0,quantityUnqualified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,checkResult:void 0,reciveDate:void 0,inspectDate:void 0,inspector:void 0,status:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0}),H=i=>{M.value=i};me(()=>{console.log("onMounted,,,src/views/iqc/iqc/index.vue"),y()});const Q=p(),R=(i,t,k)=>{Q.value.open(i,t,k)},$=i=>i=="0",J=i=>i=="1",W=i=>i=="2",G=async i=>{i.status="1",console.log(i),x.value=!0;try{const t=i;console.log("data",t),await De(t),V.success("提交审核成功")}finally{y(),x.value=!1}},z=p(),C=p(!1),X=i=>{C.value=!0,z.value=i},Z=()=>{G(z.value),C.value=!1};return(i,t)=>{const k=u("el-input"),q=u("el-form-item"),ee=u("el-date-picker"),_=fe,s=u("el-button"),te=u("el-form"),S=qe,n=u("el-table-column"),ae=ke,le=u("el-table"),oe=ge,ne=u("el-tab-pane"),ie=u("el-tabs"),re=u("StateMent"),se=u("el-dialog"),v=E("hasPermi"),de=E("loading");return m(),ce(_e,null,[e(S,null,{default:l(()=>[e(te,{class:"-mb-15px",model:o(r),ref_key:"queryFormRef",ref:j,inline:!0,"label-width":"110px"},{default:l(()=>[e(q,{label:"来料检验单编号",prop:"iqcCode"},{default:l(()=>[e(k,{modelValue:o(r).iqcCode,"onUpdate:modelValue":t[0]||(t[0]=a=>o(r).iqcCode=a),placeholder:"请输入来料检验单编号",clearable:"",onKeyup:D(b,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(q,{label:"来料检验单名称",prop:"iqcName"},{default:l(()=>[e(k,{modelValue:o(r).iqcName,"onUpdate:modelValue":t[1]||(t[1]=a=>o(r).iqcName=a),placeholder:"请输入来料检验单名称",clearable:"",onKeyup:D(b,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(q,{label:"产品物料编码",prop:"itemCode"},{default:l(()=>[e(k,{modelValue:o(r).itemCode,"onUpdate:modelValue":t[2]||(t[2]=a=>o(r).itemCode=a),placeholder:"请输入产品物料编码",clearable:"",onKeyup:D(b,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(q,{label:"产品物料名称",prop:"itemName"},{default:l(()=>[e(k,{modelValue:o(r).itemName,"onUpdate:modelValue":t[3]||(t[3]=a=>o(r).itemName=a),placeholder:"请输入产品物料名称",clearable:"",onKeyup:D(b,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(q,{label:"创建时间",prop:"createTime"},{default:l(()=>[e(ee,{modelValue:o(r).createTime,"onUpdate:modelValue":t[4]||(t[4]=a=>o(r).createTime=a),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(q,null,{default:l(()=>[e(s,{onClick:b},{default:l(()=>[e(_,{icon:"ep:search",class:"mr-5px"}),t[12]||(t[12]=d(" 搜索 "))]),_:1}),e(s,{onClick:A},{default:l(()=>[e(_,{icon:"ep:refresh",class:"mr-5px"}),t[13]||(t[13]=d(" 重置 "))]),_:1}),c((m(),f(s,{type:"primary",plain:"",onClick:t[5]||(t[5]=a=>I("create"))},{default:l(()=>[e(_,{icon:"ep:plus",class:"mr-5px"}),t[14]||(t[14]=d(" 新增 "))]),_:1})),[[v,["qms:iqc:create"]]]),c((m(),f(s,{type:"success",plain:"",onClick:O,loading:o(g)},{default:l(()=>[e(_,{icon:"ep:download",class:"mr-5px"}),t[15]||(t[15]=d(" 导出 "))]),_:1},8,["loading"])),[[v,["qms:iqc:export"]]]),c((m(),f(s,{type:"warning",plain:"",onClick:t[6]||(t[6]=a=>R("detail","zhijian",o(M).id)),loading:o(g)},{default:l(()=>[e(_,{icon:"ep:notification",class:"mr-5px"}),t[16]||(t[16]=d(" 审核 "))]),_:1},8,["loading"])),[[v,["qms:iqc:update"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(S,null,{default:l(()=>[c((m(),f(le,{data:o(T),stripe:!0,"show-overflow-tooltip":!0,"highlight-current-row":"",onCurrentChange:H},{default:l(()=>[e(n,{label:"来料检验单编号",align:"center",prop:"iqcCode",width:"150"},{default:l(a=>[c((m(),f(s,{link:"",type:"primary",onClick:w=>R("detail","chakan",a.row.id)},{default:l(()=>[d(ve(a.row.iqcCode),1)]),_:2},1032,["onClick"])),[[v,["oqc::create"]]])]),_:1}),e(n,{label:"来料检验单名称",align:"center",prop:"iqcName",width:"150"}),e(n,{label:"单据状态",align:"center",prop:"status"},{default:l(a=>[e(ae,{type:o(we).BPM_PROCESS_INSTANCE_RESULT,value:a.row.status},null,8,["type","value"])]),_:1}),e(n,{label:"供应商编码",align:"center",prop:"vendorCode"}),e(n,{label:"供应商名称",align:"center",prop:"vendorName"}),e(n,{label:"供应商批次号",align:"center",prop:"vendorBatch"}),e(n,{label:"产品物料编码",align:"center",prop:"itemCode"}),e(n,{label:"产品物料名称",align:"center",prop:"itemName"}),e(n,{label:"规格型号",align:"center",prop:"specification"}),e(n,{label:"单位",align:"center",prop:"unitOfMeasure"}),e(n,{label:"最低检测数",align:"center",prop:"quantityMinCheck"}),e(n,{label:"最大不合格数",align:"center",prop:"quantityMaxUnqualified"}),e(n,{label:"本次接收数量",align:"center",prop:"quantityRecived"}),e(n,{label:"本次检测数量",align:"center",prop:"quantityCheck"}),e(n,{label:"不合格数",align:"center",prop:"quantityUnqualified"}),e(n,{label:"致命缺陷率",align:"center",prop:"crRate"}),e(n,{label:"严重缺陷率",align:"center",prop:"majRate"}),e(n,{label:"轻微缺陷率",align:"center",prop:"minRate"}),e(n,{label:"致命缺陷数量",align:"center",prop:"crQuantity"}),e(n,{label:"严重缺陷数量",align:"center",prop:"majQuantity"}),e(n,{label:"轻微缺陷数量",align:"center",prop:"minQuantity"}),e(n,{label:"检测结果",align:"center",prop:"checkResult"}),e(n,{label:"来料日期",align:"center",prop:"reciveDate",formatter:o(U),width:"180px"},null,8,["formatter"]),e(n,{label:"检测日期",align:"center",prop:"inspectDate",formatter:o(U),width:"180px"},null,8,["formatter"]),e(n,{label:"检测人员",align:"center",prop:"inspector"}),e(n,{label:"备注",align:"center",prop:"remark"}),e(n,{label:"创建时间",align:"center",prop:"createTime",formatter:o(U),width:"180px"},null,8,["formatter"]),e(n,{label:"操作",align:"center",fixed:"right",width:"250"},{default:l(a=>[$(a.row.status)?c((m(),f(s,{key:0,type:"warning",link:"",onClick:w=>X(a.row),loading:o(g)},{default:l(()=>t[17]||(t[17]=[d(" 提交审核 ")])),_:2},1032,["onClick","loading"])),[[v,["qms:iqc:update"]]]):N("",!0),$(a.row.status)?c((m(),f(s,{key:1,link:"",type:"primary",onClick:w=>I("update",a.row.id)},{default:l(()=>t[18]||(t[18]=[d(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["qms:iqc:update"]]]):N("",!0),$(a.row.status)?c((m(),f(s,{key:2,link:"",type:"danger",onClick:w=>L(a.row.id)},{default:l(()=>t[19]||(t[19]=[d(" 删除 ")])),_:2},1032,["onClick"])),[[v,["qms:iqc:delete"]]]):N("",!0),J(a.row.status)?c((m(),f(s,{key:3,type:"warning",plain:"",onClick:w=>R("detail","zhijian",a.row.id),loading:o(g)},{default:l(()=>[e(_,{icon:"ep:notification",class:"mr-5px"}),t[20]||(t[20]=d(" 审核 "))]),_:2},1032,["onClick","loading"])),[[v,["qms:iqc:update"]]]):N("",!0),W(a.row.status)?c((m(),f(s,{key:4,type:"warning",plain:"",onClick:w=>R("detail","zhijian",a.row.id),loading:o(g)},{default:l(()=>[e(_,{icon:"ep:notification",class:"mr-5px"}),t[21]||(t[21]=d(" 反审核 "))]),_:2},1032,["onClick","loading"])),[[v,["qms:iqc:update"]]]):N("",!0),e(s,{link:"",type:"primary",onClick:w=>h(a.row)},{default:l(()=>t[22]||(t[22]=[d(" 报表 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[de,o(x)]]),e(oe,{total:o(P),page:o(r).pageNo,"onUpdate:page":t[7]||(t[7]=a=>o(r).pageNo=a),limit:o(r).pageSize,"onUpdate:limit":t[8]||(t[8]=a=>o(r).pageSize=a),onPagination:y},null,8,["total","page","limit"])]),_:1}),e(S,null,{default:l(()=>[e(ie,{"model-value":"line"},{default:l(()=>[e(ne,{label:"来料检验单行",name:"line"},{default:l(()=>[e($e,{"iqc-id":o(M).id},null,8,["iqc-id"])]),_:1})]),_:1})]),_:1}),e(Me,{ref_key:"formRef",ref:B,onSuccess:y},null,512),e(Se,{ref_key:"detailFormRef",ref:Q,onSuccess:y},null,512),e(re,{ref_key:"StateMentRef",ref:F,type:"qms_iqc"},null,512),e(se,{modelValue:o(C),"onUpdate:modelValue":t[11]||(t[11]=a=>ye(C)?C.value=a:null),title:"系统提示",width:"30%",center:""},{footer:l(()=>[K("span",Ue,[e(s,{onClick:t[9]||(t[9]=a=>C.value=!1)},{default:l(()=>t[23]||(t[23]=[d("取消")])),_:1}),e(s,{type:"primary",onClick:t[10]||(t[10]=a=>Z())},{default:l(()=>t[24]||(t[24]=[d(" 确认 ")])),_:1})])]),default:l(()=>[t[25]||(t[25]=K("span",null," 确认提交审核？ ",-1))]),_:1},8,["modelValue"])],64)}}});export{lt as default};
