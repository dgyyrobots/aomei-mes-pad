/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{V as j,d as Q,r as d,f as y,b as W,g as c,h as A,k as N,o as I,m as n,j as e,w as E,a as o,v as f,t as G,L as m,M as H,y as J,_ as K,z as O,N as X}from"./index-FPuwcz_Y.js";import{_ as Y}from"./ContentWrap.vue_vue_type_script_setup_true_lang-32ziCa0j.js";import{_ as Z}from"./DictTag.vue_vue_type_script_lang-o_bnFpkw.js";const ee=async v=>await j.get({url:"/mes/pro/task/page",params:v}),ne=Q({name:"Task",__name:"TaskSelect",emits:["onSelected"],setup(v,{expose:T,emit:V}){const q=O(),{t:x}=X(),p=d(!0),_=d([]),b=d(0),u=y({pageNo:1,pageSize:10,taskCode:void 0,taskName:void 0,workorderCode:void 0,workorderName:void 0,workstationCode:void 0,workstationName:void 0,processCode:void 0,processName:void 0,itemCode:void 0,itemName:void 0,specification:void 0,clientCode:void 0,clientName:void 0,clientNick:void 0,status:void 0,createTime:[]}),g=async()=>{p.value=!0;try{const r=await ee(u);_.value=r.list,b.value=r.total}finally{p.value=!1}},S=d({}),h=r=>{S.value=r},i=d(!1),w=d("");T({open:async()=>{i.value=!0,w.value="工单选择",p.value=!0;try{g()}finally{p.value=!1}}});const s=y({loading:!1,showFlag:!1,selectedItemId:void 0,selectedRows:void 0}),R=r=>{r&&(s.selectedRows=r)},$=V,D=async()=>{if(s.selectedItemId==null||s.selectedItemId==0){q.warning(x("请至少选择一条数据!"));return}$("onSelected",s.selectedRows),i.value=!1};return W(()=>{g()}),(r,a)=>{const P=c("el-radio"),t=c("el-table-column"),U=Z,z=c("el-table"),M=H,B=Y,C=c("el-button"),F=K,L=A("loading");return I(),N(F,{title:o(w),modelValue:o(i),"onUpdate:modelValue":a[4]||(a[4]=l=>J(i)?i.value=l:null),width:"80%"},{footer:n(()=>[e(C,{onClick:D,type:"primary"},{default:n(()=>a[6]||(a[6]=[f("确 定")])),_:1}),e(C,{onClick:a[3]||(a[3]=l=>i.value=!1)},{default:n(()=>a[7]||(a[7]=[f("取 消")])),_:1})]),default:n(()=>[e(B,null,{default:n(()=>[E((I(),N(z,{data:o(_),stripe:!0,"show-overflow-tooltip":!0,"highlight-current-row":"",onCurrentChange:h},{default:n(()=>[e(t,{align:"center",label:"检测模板编号"},{default:n(l=>[e(P,{modelValue:o(s).selectedItemId,"onUpdate:modelValue":a[0]||(a[0]=k=>o(s).selectedItemId=k),label:l.row.id,onChange:k=>R(l.row)},{default:n(()=>a[5]||(a[5]=[f(G(""))])),_:2},1032,["modelValue","label","onChange"])]),_:1}),e(t,{label:"任务编号",align:"center",prop:"taskCode"}),e(t,{label:"任务名称",align:"center",prop:"taskName"}),e(t,{label:"生产工单编号",align:"center",prop:"workorderCode"}),e(t,{label:"工单名称",align:"center",prop:"workorderName"}),e(t,{label:"工序名称",align:"center",prop:"processName"}),e(t,{label:"产品物料编码",align:"center",prop:"itemCode"}),e(t,{label:"产品物料名称",align:"center",prop:"itemName"}),e(t,{label:"排产数量",align:"center",prop:"quantity"}),e(t,{label:"已生产数量",align:"center",prop:"quantityProduced"}),e(t,{label:"合格品数量",align:"center",prop:"quantityQuanlify"}),e(t,{label:"不良品数量",align:"center",prop:"quantityUnquanlify"}),e(t,{label:"调整数量",align:"center",prop:"quantityChanged"}),e(t,{label:"客户名称",align:"center",prop:"clientName"}),e(t,{label:"开始生产时间",align:"center",prop:"startTime",formatter:o(m),width:"180px"},null,8,["formatter"]),e(t,{label:"生产时长",align:"center",prop:"duration"}),e(t,{label:"完成生产时间",align:"center",prop:"endTime",formatter:o(m),width:"180px"},null,8,["formatter"]),e(t,{label:"需求日期",align:"center",prop:"requestDate",formatter:o(m),width:"180px"},null,8,["formatter"]),e(t,{label:"生产状态",align:"center",prop:"status"},{default:n(l=>[e(U,{type:"mes_pro_task_status",value:l.row.status},null,8,["value"])]),_:1}),e(t,{label:"创建时间",align:"center",prop:"createTime",formatter:o(m),width:"180px"},null,8,["formatter"])]),_:1},8,["data"])),[[L,o(p)]]),e(M,{total:o(b),page:o(u).pageNo,"onUpdate:page":a[1]||(a[1]=l=>o(u).pageNo=l),limit:o(u).pageSize,"onUpdate:limit":a[2]||(a[2]=l=>o(u).pageSize=l),onPagination:g},null,8,["total","page","limit"])]),_:1})]),_:1},8,["title","modelValue"])}}});export{ne as _};
