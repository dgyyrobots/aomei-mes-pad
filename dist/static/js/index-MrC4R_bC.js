/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{d as Z,H as ee,u as te,e as oe,ad as ae,W as se,s as R,r as d,f as B,Y as re,B as ne,ae as le,b as ie,af as ce,ag as de,g as i,h as C,c as me,o as v,w as p,i as m,$ as V,a as e,j as s,ah as ue,ai as pe,m as n,t as N,aj as l,k as x,v as U,C as fe,ak as _e,al as ge,am as ve,an as we,ao as he,ap as ye,aq as be,ar as ke,as as Ve,A as Ne}from"./index-BdmDrM2Y.js";import{v as xe}from"./Verify-Ez-ZWLi4.js";const Me=""+new URL("../png/left_img_5-B-kDM4oN.png",import.meta.url).href,Te={class:"login-container"},Le={class:"login-right-tools"},Se={class:"login-form"},Re=["src"],Be={class:"title"},Ce=["src","alt"],Ue={class:"title-tips"},qe=Z({name:"Login",__name:"index",setup(De){const w=ee(),q=te(),D=oe(),E=ae(),M=se(),{theme:u}=R(E),{systemLogo:P,title:I}=R(M),h=d(!1),T=d("password"),j=d("blockPuzzle"),f=d(void 0),y=d(null),z=d(null),F=d(null),o=B({tenantName:"",username:"",password:"",captchaVerification:"",rememberMe:!1}),$=B({tenantName:[{required:!0,trigger:"blur",validator:(t,a,r)=>{a===""?r(new Error(l("租户名称不能为空"))):r()}}],username:[{required:!0,trigger:"blur",validator:(t,a,r)=>{a===""?r(new Error(l("用户名不能为空"))):r()}}],password:[{required:!0,trigger:"blur",validator:(t,a,r)=>{_e(a)?r():r(new Error(l("密码不能少于6位")))}}]}),A=()=>{const t=ge();t&&Object.assign(o,{...o,username:t.username?t.username:o.username,password:t.password?t.password:o.password,rememberMe:!!t.rememberMe,tenantName:t.tenantName?t.tenantName:o.tenantName})},O=()=>f.value==="/404"||f.value==="/403"?"/":f.value,H=async()=>{{const t=await ke(o.tenantName);Ve(t)}},W=async()=>{await L().catch(t=>{console.log(t)})},L=async(t={captchaVerification:null})=>{y.value&&y.value.validate(async a=>{let r=null;if(a)try{await H(),h.value=!0,o.captchaVerification=t.captchaVerification;const _=await ve(o);if(!_)return;r=we.service({lock:!0,text:"正在加载系统中...",background:"rgba(0, 0, 0, 0.7)"}),o.rememberMe?he(o):ye(),be(_),await q.push(O())}finally{h.value=!1,r?.close()}})};return re(()=>M.getTitle,t=>{t&&(o.tenantName=t)},{immediate:!0}),ne(()=>{}),le(()=>{f.value=w.query&&w.query.redirect||"/"}),ie(()=>{ce(),w.query.logout==="true"&&D.loginOut(),A()}),de((t,a,r)=>{r()}),(t,a)=>{const r=ue,_=pe,b=i("vab-icon"),k=i("el-input"),g=i("el-form-item"),Y=i("el-checkbox"),S=i("el-col"),G=i("el-row"),J=i("el-button"),K=i("el-form"),Q=C("focus"),X=C("throttle");return v(),me("div",Te,[p(m("div",Le,[p(s(r,null,null,512),[[V,e(u).showColorPicker]]),p(s(_,null,null,512),[[V,e(u).showDark]])],512),[[V,e(u).showLanguage||e(u).showColorPicker||e(u).showDark]]),m("div",Se,[m("img",{alt:"",class:"left-img",src:e(Me)},null,8,Re),s(K,{ref_key:"formRef",ref:y,"label-position":"left",model:e(o),rules:e($),onSubmit:a[4]||(a[4]=fe(()=>{},["prevent"]))},{default:n(()=>[m("div",Be,[m("img",{src:e(P),alt:e(I)},null,8,Ce)]),m("div",Ue,N(e(l)("生产终端登录")),1),s(g,{prop:"tenantName",class:"!hidden"},{default:n(()=>[s(k,{modelValue:e(o).tenantName,"onUpdate:modelValue":a[0]||(a[0]=c=>e(o).tenantName=c),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("请输入租户名称"),type:"text"},{prefix:n(()=>[s(b,{icon:"home-line"})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(g,{prop:"username"},{default:n(()=>[p((v(),x(k,{modelValue:e(o).username,"onUpdate:modelValue":a[1]||(a[1]=c=>e(o).username=c),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("请输入用户名"),type:"text"},{prefix:n(()=>[s(b,{icon:"user-line"})]),_:1},8,["modelValue","placeholder"])),[[Q]])]),_:1}),s(g,{prop:"password"},{default:n(()=>[(v(),x(k,{key:e(T),ref_key:"passwordRef",ref:z,modelValue:e(o).password,"onUpdate:modelValue":a[2]||(a[2]=c=>e(o).password=c),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("请输入密码"),"show-password":"",type:e(T)},{prefix:n(()=>[s(b,{icon:"lock-line"})]),_:1},8,["modelValue","placeholder","type"]))]),_:1}),s(g,{size:"small"},{default:n(()=>[s(G,{justify:"space-between",style:{width:"100%"}},{default:n(()=>[s(S,{span:6},{default:n(()=>[s(Y,{modelValue:e(o).rememberMe,"onUpdate:modelValue":a[3]||(a[3]=c=>e(o).rememberMe=c)},{default:n(()=>[U(N(e(l)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),s(S,{offset:6,span:12})]),_:1})]),_:1}),p((v(),x(J,{class:"login-btn",loading:e(h),"native-type":"submit",type:"primary"},{default:n(()=>[U(N(e(l)("登录")),1)]),_:1},8,["loading"])),[[X,W]]),s(e(xe),{ref_key:"verify",ref:F,"captcha-type":e(j),"img-size":{width:"400px",height:"200px"},mode:"pop",onSuccess:L},null,8,["captcha-type"])]),_:1},8,["model","rules"])])])}}}),Fe=Ne(qe,[["__scopeId","data-v-0919ae12"]]);export{Fe as default};
