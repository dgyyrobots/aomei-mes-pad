/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{V as m,d as S,r as s,f as h,g as c,h as j,k as V,o as D,m as l,w as z,a,j as u,v as b,y as M,_ as P,N as A,z as E}from"./index-lcC3l4R2.js";import{d as G,h as H}from"./tree-vSlcEeQq.js";const J=async t=>await m.get({url:"/infra/demo02-category/list",params:t}),K=async t=>await m.get({url:`/infra/demo02-category/get?id=${t}`}),O=async t=>await m.post({url:"/infra/demo02-category/create",data:t}),Q=async t=>await m.put({url:"/infra/demo02-category/update",data:t}),Z=async t=>await m.delete({url:`/infra/demo02-category/delete?id=${t}`}),ee=async t=>await m.download({url:"/infra/demo02-category/export-excel",params:t}),te=S({__name:"Demo02CategoryForm",emits:["success"],setup(t,{expose:x,emit:I}){const{t:p}=A(),v=E(),n=s(!1),y=s(""),d=s(!1),_=s(""),o=s({id:void 0,name:void 0,parentId:void 0}),k=h({name:[{required:!0,message:"名字不能为空",trigger:"blur"}],parentId:[{required:!0,message:"父级编号不能为空",trigger:"blur"}]}),f=s(),g=s();x({open:async(r,e)=>{if(n.value=!0,y.value=p(`action.${r}`),_.value=r,F(),e){d.value=!0;try{o.value=await K(e)}finally{d.value=!1}}await R()}});const T=I,$=async()=>{await f.value.validate(),d.value=!0;try{const r=o.value;_.value==="create"?(await O(r),v.success(p("common.createSuccess"))):(await Q(r),v.success(p("common.updateSuccess"))),n.value=!1,T("success")}finally{d.value=!1}},F=()=>{o.value={id:void 0,name:void 0,parentId:void 0},f.value?.resetFields()},R=async()=>{g.value=[];const r=await J(),e={id:0,name:"顶级示例分类",children:[]};e.children=H(r,"id","parentId"),g.value.push(e)};return(r,e)=>{const q=c("el-input"),w=c("el-form-item"),N=c("el-tree-select"),U=c("el-form"),C=c("el-button"),B=P,L=j("loading");return D(),V(B,{modelValue:a(n),"onUpdate:modelValue":e[3]||(e[3]=i=>M(n)?n.value=i:null),title:a(y)},{footer:l(()=>[u(C,{disabled:a(d),type:"primary",onClick:$},{default:l(()=>e[4]||(e[4]=[b("确 定")])),_:1},8,["disabled"]),u(C,{onClick:e[2]||(e[2]=i=>n.value=!1)},{default:l(()=>e[5]||(e[5]=[b("取 消")])),_:1})]),default:l(()=>[z((D(),V(U,{ref_key:"formRef",ref:f,"label-width":"100px",model:a(o),rules:a(k)},{default:l(()=>[u(w,{label:"名字",prop:"name"},{default:l(()=>[u(q,{modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=i=>a(o).name=i),placeholder:"请输入名字"},null,8,["modelValue"])]),_:1}),u(w,{label:"父级编号",prop:"parentId"},{default:l(()=>[u(N,{modelValue:a(o).parentId,"onUpdate:modelValue":e[1]||(e[1]=i=>a(o).parentId=i),"check-strictly":"",data:a(g),"default-expand-all":"",placeholder:"请选择父级编号",props:a(G)},null,8,["modelValue","data","props"])]),_:1})]),_:1},8,["model","rules"])),[[L,a(d)]])]),_:1},8,["modelValue","title"])}}});export{te as _,Z as d,ee as e,J as g};
