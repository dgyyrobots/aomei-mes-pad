/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{d as Z,r as c,f as h,b as ee,g as p,h as L,c as C,o as r,j as e,m as t,a as o,J as M,F as T,n as Y,k as i,w as b,v as _,K as le,L as ae,M as te,z as oe,N as ne}from"./index-DMg0mq0e.js";import{_ as pe}from"./DictTag.vue_vue_type_script_lang-sQcOd7JH.js";import{_ as re}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DPMk4m5L.js";import{a as B,D as N}from"./dict-BEquckDR.js";import{d as se}from"./download-U6qaYcnP.js";import{g as me,d as ie,f as ue}from"./index-BwM3jv5x.js";import{_ as de}from"./TemplateForm.vue_vue_type_script_setup_true_lang-TV_ztAMM.js";import{_ as ce}from"./TemplateIndexList.vue_vue_type_script_setup_true_lang-BNfy2I6a.js";import{_ as _e}from"./TemplateProductList.vue_vue_type_script_setup_true_lang-Cfqeuqc8.js";import"./color-B5phLuB-.js";import"./TemplateIndexForm.vue_vue_type_script_setup_true_lang-DVUl1oU1.js";import"./TemplateList.vue_vue_type_script_setup_true_lang-BAtoX8ZW.js";import"./index-8Pm3AqmW.js";import"./qmsIndexForm.vue_vue_type_script_setup_true_lang-C7yGUynw.js";import"./TemplateProductForm.vue_vue_type_script_setup_true_lang-D68MYrkF.js";const Ie=Z({name:"Template",__name:"index",setup(fe){const w=oe(),{t:O}=ne(),x=c(!0),V=c([]),F=c(0),n=h({pageNo:1,pageSize:10,templateCode:void 0,templateName:void 0,qcTypes:void 0,enableFlag:void 0,createTime:[]}),q=c(),k=c(!1),f=async()=>{x.value=!0;try{const s=await me(n);V.value=s.list,F.value=s.total}finally{x.value=!1}},g=()=>{n.pageNo=1,f()},z=()=>{q.value.resetFields(),g()},D=c(),$=(s,a)=>{D.value.open(s,a)},A=async s=>{try{await w.delConfirm(),await ie(s),w.success(O("common.delSuccess")),await f()}catch{}},K=async()=>{try{await w.exportConfirm(),k.value=!0;const s=await ue(n);se.excel(s,"检测模板.xls")}catch{}finally{k.value=!1}};return ee(()=>{f()}),(s,a)=>{const I=p("el-input"),u=p("el-form-item"),P=p("el-option"),S=p("el-select"),Q=p("el-date-picker"),y=le,d=p("el-button"),G=p("el-form"),R=re,E=p("el-tab-pane"),H=p("el-tabs"),m=p("el-table-column"),U=pe,j=p("el-table"),J=te,v=L("hasPermi"),W=L("loading");return r(),C(T,null,[e(R,null,{default:t(()=>[e(G,{class:"-mb-15px",model:o(n),ref_key:"queryFormRef",ref:q,inline:!0,"label-width":"110px"},{default:t(()=>[e(u,{label:"检测模板编号",prop:"templateCode"},{default:t(()=>[e(I,{modelValue:o(n).templateCode,"onUpdate:modelValue":a[0]||(a[0]=l=>o(n).templateCode=l),placeholder:"请输入检测模板编号",clearable:"",onKeyup:M(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(u,{label:"检测模板名称",prop:"templateName"},{default:t(()=>[e(I,{modelValue:o(n).templateName,"onUpdate:modelValue":a[1]||(a[1]=l=>o(n).templateName=l),placeholder:"请输入检测模板名称",clearable:"",onKeyup:M(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(u,{label:"检测种类",prop:"qcTypes"},{default:t(()=>[e(S,{modelValue:o(n).qcTypes,"onUpdate:modelValue":a[2]||(a[2]=l=>o(n).qcTypes=l),placeholder:"请选择检测种类",clearable:"",class:"!w-240px"},{default:t(()=>[(r(!0),C(T,null,Y(o(B)("mes_qc_type"),l=>(r(),i(P,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"是否启用",prop:"enableFlag"},{default:t(()=>[e(S,{modelValue:o(n).enableFlag,"onUpdate:modelValue":a[3]||(a[3]=l=>o(n).enableFlag=l),placeholder:"请选择是否启用",clearable:"",class:"!w-240px"},{default:t(()=>[(r(!0),C(T,null,Y(o(B)(o(N).INFRA_BOOLEAN_STRING),l=>(r(),i(P,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"创建时间",prop:"createTime"},{default:t(()=>[e(Q,{modelValue:o(n).createTime,"onUpdate:modelValue":a[4]||(a[4]=l=>o(n).createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(u,null,{default:t(()=>[e(d,{onClick:g},{default:t(()=>[e(y,{icon:"ep:search",class:"mr-5px"}),a[8]||(a[8]=_(" 搜索 "))]),_:1}),e(d,{onClick:z},{default:t(()=>[e(y,{icon:"ep:refresh",class:"mr-5px"}),a[9]||(a[9]=_(" 重置 "))]),_:1}),b((r(),i(d,{type:"primary",plain:"",onClick:a[5]||(a[5]=l=>$("create"))},{default:t(()=>[e(y,{icon:"ep:plus",class:"mr-5px"}),a[10]||(a[10]=_(" 新增 "))]),_:1})),[[v,["qmcbasic:template:create"]]]),b((r(),i(d,{type:"success",plain:"",onClick:K,loading:o(k)},{default:t(()=>[e(y,{icon:"ep:download",class:"mr-5px"}),a[11]||(a[11]=_(" 导出 "))]),_:1},8,["loading"])),[[v,["qmcbasic:template:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(R,null,{default:t(()=>[b((r(),i(j,{data:o(V),stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[e(m,{type:"expand"},{default:t(l=>[e(H,{"model-value":"templateIndex"},{default:t(()=>[e(E,{label:"检测模板项",name:"templateIndex"},{default:t(()=>[e(ce,{"template-id":l.row.id},null,8,["template-id"])]),_:2},1024),e(E,{label:"检测模板产品",name:"templateProduct"},{default:t(()=>[e(_e,{"template-id":l.row.id},null,8,["template-id"])]),_:2},1024)]),_:2},1024)]),_:1}),e(m,{label:"检测模板编号",align:"center",prop:"templateCode"}),e(m,{label:"检测模板名称",align:"center",prop:"templateName"}),e(m,{label:"检测种类",align:"center",prop:"qcTypes"},{default:t(l=>[e(U,{type:o(N).MES_QC_TYPE,value:l.row.qcTypes},null,8,["type","value"])]),_:1}),e(m,{label:"是否启用",align:"center",prop:"enableFlag"},{default:t(l=>[e(U,{type:o(N).INFRA_BOOLEAN_STRING,value:l.row.enableFlag},null,8,["type","value"])]),_:1}),e(m,{label:"备注",align:"center",prop:"remark"}),e(m,{label:"创建时间",align:"center",prop:"createTime",formatter:o(ae),width:"180px"},null,8,["formatter"]),e(m,{label:"操作",align:"center"},{default:t(l=>[b((r(),i(d,{link:"",type:"primary",onClick:X=>$("update",l.row.id)},{default:t(()=>a[12]||(a[12]=[_(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["qmcbasic:template:update"]]]),b((r(),i(d,{link:"",type:"danger",onClick:X=>A(l.row.id)},{default:t(()=>a[13]||(a[13]=[_(" 删除 ")])),_:2},1032,["onClick"])),[[v,["qmcbasic:template:delete"]]])]),_:1})]),_:1},8,["data"])),[[W,o(x)]]),e(J,{total:o(F),page:o(n).pageNo,"onUpdate:page":a[6]||(a[6]=l=>o(n).pageNo=l),limit:o(n).pageSize,"onUpdate:limit":a[7]||(a[7]=l=>o(n).pageSize=l),onPagination:f},null,8,["total","page","limit"])]),_:1}),e(de,{ref_key:"formRef",ref:D,onSuccess:f},null,512)],64)}}});export{Ie as default};
