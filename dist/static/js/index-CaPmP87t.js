/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as E,r as f,f as J,u as W,b as A,g as i,h as U,c as T,o as s,j as t,m as l,a as o,J as G,w as _,v as u,K as O,k as d,F as I,n as X,L as Z,M as h,z as ee,N as te}from"./index-BdC40rFX.js";import{_ as ae}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CdI9J0YF.js";import{_ as le}from"./DiyPageForm.vue_vue_type_script_setup_true_lang-D--0e4MK.js";import{d as oe,e as ne}from"./page-USU-d83o.js";import"./UploadImgs-BgpwDFvH.js";import"./UploadImgs.vue_vue_type_script_setup_true_lang-BmqlOvX1.js";const ce=E({name:"DiyPage",__name:"index",setup(re){const x=ee(),{t:M}=te(),w=f(!0),C=f(0),D=f([]),n=J({pageNo:1,pageSize:10,name:null,createTime:[]}),P=f(),c=async()=>{w.value=!0;try{const r=await oe(n);D.value=r.list,C.value=r.total}finally{w.value=!1}},v=()=>{n.pageNo=1,c()},R=()=>{P.value.resetFields(),v()},V=f(),$=(r,e)=>{V.value.open(r,e)},S=async r=>{try{await x.delConfirm(),await ne(r),x.success(M("common.delSuccess")),await c()}catch(e){console.log(e)}},{push:z}=W(),Y=r=>{z({name:"DiyPageDecorate",params:{id:r}})};return A(()=>{c()}),(r,e)=>{const q=i("el-input"),k=i("el-form-item"),B=i("el-date-picker"),b=O,p=i("el-button"),K=i("el-form"),F=ae,m=i("el-table-column"),L=i("el-image"),H=i("el-table"),Q=h,g=U("hasPermi"),j=U("loading");return s(),T(I,null,[t(F,null,{default:l(()=>[t(K,{ref_key:"queryFormRef",ref:P,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(n)},{default:l(()=>[t(k,{label:"页面名称",prop:"name"},{default:l(()=>[t(q,{modelValue:o(n).name,"onUpdate:modelValue":e[0]||(e[0]=a=>o(n).name=a),class:"!w-240px",clearable:"",placeholder:"请输入页面名称",onKeyup:G(v,["enter"])},null,8,["modelValue"])]),_:1}),t(k,{label:"创建时间",prop:"createTime"},{default:l(()=>[t(B,{modelValue:o(n).createTime,"onUpdate:modelValue":e[1]||(e[1]=a=>o(n).createTime=a),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),t(k,null,{default:l(()=>[t(p,{onClick:v},{default:l(()=>[t(b,{class:"mr-5px",icon:"ep:search"}),e[5]||(e[5]=u(" 搜索 "))]),_:1}),t(p,{onClick:R},{default:l(()=>[t(b,{class:"mr-5px",icon:"ep:refresh"}),e[6]||(e[6]=u(" 重置 "))]),_:1}),_((s(),d(p,{plain:"",type:"primary",onClick:e[2]||(e[2]=a=>$("create"))},{default:l(()=>[t(b,{class:"mr-5px",icon:"ep:plus"}),e[7]||(e[7]=u(" 新增 "))]),_:1})),[[g,["promotion:diy-page:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(F,null,{default:l(()=>[_((s(),d(H,{data:o(D),"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[t(m,{align:"center",label:"编号",prop:"id"}),t(m,{align:"center",label:"预览图",prop:"previewImageUrls"},{default:l(a=>[(s(!0),T(I,null,X(a.row.previewImageUrls,(y,N)=>(s(),d(L,{key:N,class:"h-40px max-w-40px","initial-index":N,"preview-src-list":a.row.previewImageUrls,"preview-teleported":"",src:y},null,8,["initial-index","preview-src-list","src"]))),128))]),_:1}),t(m,{align:"center",label:"页面名称",prop:"name"}),t(m,{align:"center",label:"备注",prop:"remark"}),t(m,{align:"center",formatter:o(Z),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),t(m,{align:"center",label:"操作"},{default:l(a=>[_((s(),d(p,{link:"",type:"primary",onClick:y=>Y(a.row.id)},{default:l(()=>e[8]||(e[8]=[u("装修")])),_:2},1032,["onClick"])),[[g,["promotion:diy-page:update"]]]),_((s(),d(p,{link:"",type:"primary",onClick:y=>$("update",a.row.id)},{default:l(()=>e[9]||(e[9]=[u(" 编辑 ")])),_:2},1032,["onClick"])),[[g,["promotion:diy-page:update"]]]),_((s(),d(p,{link:"",type:"danger",onClick:y=>S(a.row.id)},{default:l(()=>e[10]||(e[10]=[u("删除")])),_:2},1032,["onClick"])),[[g,["promotion:diy-page:delete"]]])]),_:1})]),_:1},8,["data"])),[[j,o(w)]]),t(Q,{limit:o(n).pageSize,"onUpdate:limit":e[3]||(e[3]=a=>o(n).pageSize=a),page:o(n).pageNo,"onUpdate:page":e[4]||(e[4]=a=>o(n).pageNo=a),total:o(C),onPagination:c},null,8,["limit","page","total"])]),_:1}),t(le,{ref_key:"formRef",ref:V,onSuccess:c},null,512)],64)}}});export{ce as default};
