/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as $,bz as j,O as z,r as y,f as E,g as c,c as V,o as r,k as L,a as s,i as g,j as e,t as N,m as a,K as R,v as k,y as W,z as O,A as P}from"./index-5TqN_QR1.js";import{W as H}from"./main-pGDeaqBi.js";import K from"./main-DKwuz0RU.js";import{u as q,U as F}from"./useUpload-Ddt1STrl.js";import"./main-BNvOlHte.js";import"./main.vue_vue_type_script_setup_true_lang-B-Np959Q.js";import"./index-2Iu8TY9q.js";import"./index-DDc9nqNA.js";const G={key:0,class:"select-item2"},J={class:"item-name"},Q=$({__name:"TabVoice",props:{modelValue:{}},emits:["update:modelValue"],setup(b,{emit:w}){const x=O(),I="undefined/admin-api/mp/material/upload-temporary",U={Authorization:`Bearer ${j()}`},B=b,D=w,o=z({get:()=>B.modelValue,set:t=>D("update:modelValue",t)}),n=y(!1),p=y([]),i=E({accountId:o.value.accountId,type:"voice",title:"",introduction:""}),A=t=>q(F.Voice,10)(t),C=t=>{if(t.code!==0)return x.error(`上传出错：${t.msg}`),!1;p.value=[],i.title="",i.introduction="",m(t.data)},M=()=>{o.value.mediaId=null,o.value.url=null,o.value.name=null},m=t=>{n.value=!1,o.value.mediaId=t.mediaId,o.value.url=t.url,o.value.name=t.name};return(t,l)=>{const u=c("el-row"),f=R,d=c("el-button"),S=c("el-dialog"),_=c("el-col"),T=c("el-upload");return r(),V("div",null,[s(o).url?(r(),V("div",G,[g("p",J,N(s(o).name),1),e(u,{class:"ope-row",justify:"center"},{default:a(()=>[e(s(K),{url:s(o).url},null,8,["url"])]),_:1}),e(u,{class:"ope-row",justify:"center"},{default:a(()=>[e(d,{circle:"",type:"danger",onClick:M},{default:a(()=>[e(f,{icon:"ep:delete"})]),_:1})]),_:1})])):(r(),L(u,{key:1,style:{"text-align":"center"}},{default:a(()=>[e(_,{class:"col-select",span:12},{default:a(()=>[e(d,{type:"success",onClick:l[0]||(l[0]=v=>n.value=!0)},{default:a(()=>[l[2]||(l[2]=k(" 素材库选择 ")),e(f,{icon:"ep:circle-check"})]),_:1}),e(S,{modelValue:s(n),"onUpdate:modelValue":l[1]||(l[1]=v=>W(n)?n.value=v:null),"append-to-body":"","destroy-on-close":"",title:"选择语音",width:"90%"},{default:a(()=>[e(s(H),{"account-id":s(o).accountId,type:"voice",onSelectMaterial:m},null,8,["account-id"])]),_:1},8,["modelValue"])]),_:1}),e(_,{class:"col-add",span:12},{default:a(()=>[e(T,{action:I,"before-upload":A,data:s(i),"file-list":s(p),headers:U,limit:1,multiple:"","on-success":C},{tip:a(()=>l[4]||(l[4]=[g("div",{class:"el-upload__tip"},"格式支持 mp3/wma/wav/amr，文件大小不超过 2M，播放长度不超过 60s",-1)])),default:a(()=>[e(d,{type:"primary"},{default:a(()=>l[3]||(l[3]=[k("点击上传")])),_:1})]),_:1},8,["data","file-list"])]),_:1})]),_:1}))])}}}),le=P(Q,[["__scopeId","data-v-95281b31"]]);export{le as default};
