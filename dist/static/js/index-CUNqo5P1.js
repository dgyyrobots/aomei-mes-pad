/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{d as q,u as M,r as m,f as Y,b as $,g as s,h as z,c as K,o as u,j as e,m as a,a as n,J as R,v as p,K as H,w as L,k as b,L as Q,l as T,M as j,F as A}from"./index-BW9ifGp0.js";import{_ as E}from"./ContentWrap.vue_vue_type_script_setup_true_lang-58zNwBTb.js";import{i as J}from"./index-HL-oqe-f.js";const h=q({name:"BpmDoneTask",__name:"index",setup(W){const{push:V}=M(),c=m(!0),y=m(0),k=m([]),o=Y({pageNo:1,pageSize:10,name:"",createTime:[]}),w=m(),d=async()=>{c.value=!0;try{const i=await J(o);k.value=i.list,y.value=i.total}finally{c.value=!1}},_=()=>{o.pageNo=1,d()},D=()=>{w.value.resetFields(),_()},N=i=>{V({name:"BpmProcessInstanceDetail",query:{id:i.processInstance.id}})};return $(()=>{d()}),(i,t)=>{const F=s("el-input"),f=s("el-form-item"),S=s("el-date-picker"),v=H,g=s("el-button"),B=s("el-form"),x=E,r=s("el-table-column"),C=s("el-tag"),I=s("el-table"),P=j,U=z("loading");return u(),K(A,null,[e(x,null,{default:a(()=>[e(B,{ref_key:"queryFormRef",ref:w,class:"-mb-15px",inline:!0,"label-width":"68px",model:n(o)},{default:a(()=>[e(f,{label:"任务名称",prop:"name"},{default:a(()=>[e(F,{modelValue:n(o).name,"onUpdate:modelValue":t[0]||(t[0]=l=>n(o).name=l),class:"!w-240px",clearable:"",placeholder:"请输入任务名称",onKeyup:R(_,["enter"])},null,8,["modelValue"])]),_:1}),e(f,{label:"创建时间",prop:"createTime"},{default:a(()=>[e(S,{modelValue:n(o).createTime,"onUpdate:modelValue":t[1]||(t[1]=l=>n(o).createTime=l),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(f,null,{default:a(()=>[e(g,{onClick:_},{default:a(()=>[e(v,{class:"mr-5px",icon:"ep:search"}),t[4]||(t[4]=p(" 搜索 "))]),_:1}),e(g,{onClick:D},{default:a(()=>[e(v,{class:"mr-5px",icon:"ep:refresh"}),t[5]||(t[5]=p(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(x,null,{default:a(()=>[L((u(),b(I,{data:n(k)},{default:a(()=>[e(r,{align:"center",label:"任务编号",prop:"id",width:"300px"}),e(r,{align:"center",label:"任务名称",prop:"name"}),e(r,{align:"center",label:"所属流程",prop:"processInstance.name"}),e(r,{align:"center",label:"流程发起人",prop:"processInstance.startUserNickname"}),e(r,{align:"center",formatter:n(Q),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(r,{label:"任务状态",prop:"suspensionState"},{default:a(l=>[l.row.suspensionState===1?(u(),b(C,{key:0,type:"success"},{default:a(()=>t[6]||(t[6]=[p("激活")])),_:1})):T("",!0),l.row.suspensionState===2?(u(),b(C,{key:1,type:"warning"},{default:a(()=>t[7]||(t[7]=[p("挂起")])),_:1})):T("",!0)]),_:1}),e(r,{align:"center",label:"操作"},{default:a(l=>[e(g,{link:"",type:"primary",onClick:G=>N(l.row)},{default:a(()=>t[8]||(t[8]=[p("审批进度")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[U,n(c)]]),e(P,{limit:n(o).pageSize,"onUpdate:limit":t[2]||(t[2]=l=>n(o).pageSize=l),page:n(o).pageNo,"onUpdate:page":t[3]||(t[3]=l=>n(o).pageNo=l),total:n(y),onPagination:d},null,8,["limit","page","total"])]),_:1})],64)}}});export{h as default};
