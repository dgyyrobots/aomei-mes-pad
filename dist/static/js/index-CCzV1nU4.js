/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as j,r as u,f as J,b as G,g as i,h as U,c as Y,o as p,j as e,m as a,a as o,J as E,F as O,n as W,k as d,w as y,v as c,K as X,L as Z,M as ee,z as te}from"./index-5TqN_QR1.js";import{_ as le}from"./DictTag.vue_vue_type_script_lang-cZQMmgs8.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-fpmIiri3.js";import{_ as ae}from"./index-NckgD2u7.js";import{_ as ne}from"./NotifyTemplateForm.vue_vue_type_script_setup_true_lang-BxUCtqVR.js";import{_ as re}from"./NotifyTemplateSendForm.vue_vue_type_script_setup_true_lang-Ck63-pzi.js";import{a as se,d as ie}from"./index-Bb_t8Ax2.js";import{c as pe,D as k}from"./dict-B2yk4gHf.js";import"./color-B5phLuB-.js";import"./constants-BPQb3nxh.js";import"./index-B18Ct9LM.js";const Te=j({name:"NotifySmsTemplate",__name:"index",setup(me){const T=te(),w=u(!1),C=u(0),x=u([]),n=J({pageNo:1,pageSize:10,name:void 0,status:void 0,code:void 0,createTime:[]}),V=u(),f=async()=>{w.value=!0;try{const r=await se(n);x.value=r.list,C.value=r.total}finally{w.value=!1}},g=()=>{n.pageNo=1,f()},R=()=>{V.value.resetFields(),g()},N=u(),S=(r,t)=>{N.value.open(r,t)},z=async r=>{try{await T.delConfirm(),await ie(r),T.success("删除成功"),await f()}catch(t){console.log(t)}},F=u(),K=r=>{F.value.open(r.id)};return G(()=>{f()}),(r,t)=>{const L=ae,M=i("el-input"),_=i("el-form-item"),h=i("el-option"),q=i("el-select"),A=i("el-date-picker"),b=X,m=i("el-button"),B=i("el-form"),D=oe,s=i("el-table-column"),$=le,I=i("el-table"),H=ee,v=U("hasPermi"),Q=U("loading");return p(),Y(O,null,[e(L,{title:"站内信配置",url:"https://doc.iocoder.cn/notify/"}),e(D,null,{default:a(()=>[e(B,{ref_key:"queryFormRef",ref:V,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(n)},{default:a(()=>[e(_,{label:"模板名称",prop:"name"},{default:a(()=>[e(M,{modelValue:o(n).name,"onUpdate:modelValue":t[0]||(t[0]=l=>o(n).name=l),class:"!w-240px",clearable:"",placeholder:"请输入模板名称",onKeyup:E(g,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"模板编号",prop:"code"},{default:a(()=>[e(M,{modelValue:o(n).code,"onUpdate:modelValue":t[1]||(t[1]=l=>o(n).code=l),class:"!w-240px",clearable:"",placeholder:"请输入模版编码",onKeyup:E(g,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"状态",prop:"status"},{default:a(()=>[e(q,{modelValue:o(n).status,"onUpdate:modelValue":t[2]||(t[2]=l=>o(n).status=l),class:"!w-240px",clearable:"",placeholder:"请选择开启状态"},{default:a(()=>[(p(!0),Y(O,null,W(o(pe)(o(k).COMMON_STATUS),l=>(p(),d(h,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"创建时间",prop:"createTime"},{default:a(()=>[e(A,{modelValue:o(n).createTime,"onUpdate:modelValue":t[3]||(t[3]=l=>o(n).createTime=l),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(_,null,{default:a(()=>[e(m,{onClick:g},{default:a(()=>[e(b,{class:"mr-5px",icon:"ep:search"}),t[7]||(t[7]=c(" 搜索 "))]),_:1}),e(m,{onClick:R},{default:a(()=>[e(b,{class:"mr-5px",icon:"ep:refresh"}),t[8]||(t[8]=c(" 重置 "))]),_:1}),y((p(),d(m,{plain:"",type:"primary",onClick:t[4]||(t[4]=l=>S("create"))},{default:a(()=>[e(b,{class:"mr-5px",icon:"ep:plus"}),t[9]||(t[9]=c(" 新增 "))]),_:1})),[[v,["system:notify-template:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(D,null,{default:a(()=>[y((p(),d(I,{data:o(x)},{default:a(()=>[e(s,{align:"center",label:"模板编码",prop:"code","show-overflow-tooltip":!0,width:"120"}),e(s,{align:"center",label:"模板名称",prop:"name","show-overflow-tooltip":!0,width:"120"}),e(s,{align:"center",label:"类型",prop:"type"},{default:a(l=>[e($,{type:o(k).SYSTEM_NOTIFY_TEMPLATE_TYPE,value:l.row.type},null,8,["type","value"])]),_:1}),e(s,{align:"center",label:"发送人名称",prop:"nickname"}),e(s,{align:"center",label:"模板内容",prop:"content","show-overflow-tooltip":!0,width:"200"}),e(s,{align:"center",label:"开启状态",prop:"status",width:"80"},{default:a(l=>[e($,{type:o(k).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(s,{align:"center",label:"备注",prop:"remark"}),e(s,{align:"center",formatter:o(Z),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",fixed:"right",label:"操作",width:"210"},{default:a(l=>[y((p(),d(m,{link:"",type:"primary",onClick:P=>S("update",l.row.id)},{default:a(()=>t[10]||(t[10]=[c(" 修改 ")])),_:2},1032,["onClick"])),[[v,["system:notify-template:update"]]]),y((p(),d(m,{link:"",type:"primary",onClick:P=>K(l.row)},{default:a(()=>t[11]||(t[11]=[c(" 测试 ")])),_:2},1032,["onClick"])),[[v,["system:notify-template:send-notify"]]]),y((p(),d(m,{link:"",type:"danger",onClick:P=>z(l.row.id)},{default:a(()=>t[12]||(t[12]=[c("删除")])),_:2},1032,["onClick"])),[[v,["system:notify-template:delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,o(w)]]),e(H,{limit:o(n).pageSize,"onUpdate:limit":t[5]||(t[5]=l=>o(n).pageSize=l),page:o(n).pageNo,"onUpdate:page":t[6]||(t[6]=l=>o(n).pageNo=l),total:o(C),onPagination:f},null,8,["limit","page","total"])]),_:1}),e(ne,{ref_key:"formRef",ref:N,onSuccess:f},null,512),e(re,{ref_key:"sendFormRef",ref:F},null,512)],64)}}});export{Te as default};
