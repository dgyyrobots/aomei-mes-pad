/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{V as c,d as Y,r as i,f as j,g as m,h as z,k as _,o as d,m as s,w as G,a as l,j as r,c as T,F as w,n as x,v as I,y as H,_ as J,N as K,z as Q}from"./index-BdmDrM2Y.js";import{_ as W}from"./style.css_vue_type_style_index_0_src_true_lang-CMBP_pq0.js";import{C as S}from"./constants-BPQb3nxh.js";import{c as D,D as F}from"./dict-Cm-9nniQ.js";const se=o=>c.get({url:"/system/notice/page",params:o}),X=o=>c.get({url:`/system/notice/get?id=${o}`}),Z=o=>c.post({url:"/system/notice/create",data:o}),h=o=>c.put({url:"/system/notice/update",data:o}),re=o=>c.delete({url:`/system/notice/delete?id=${o}`}),ne=o=>c.post({url:`/system/notice/push?id=${o}`}),ue=Y({name:"SystemNoticeForm",__name:"NoticeForm",emits:["success"],setup(o,{expose:U,emit:$}){const{t:g}=K(),y=Q(),n=i(!1),b=i(""),u=i(!1),V=i(""),a=i({id:void 0,title:"",type:void 0,content:"",status:S.ENABLE,remark:""}),q=j({title:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],type:[{required:!0,message:"公告类型不能为空",trigger:"change"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}],content:[{required:!0,message:"公告内容不能为空",trigger:"blur"}]}),f=i();U({open:async(v,e)=>{if(n.value=!0,b.value=g(`action.${v}`),V.value=v,M(),e){u.value=!0;try{a.value=await X(e)}finally{u.value=!1}}}});const B=$,L=async()=>{if(!(!f||!await f.value.validate())){u.value=!0;try{const e=a.value;V.value==="create"?(await Z(e),y.success(g("common.createSuccess"))):(await h(e),y.success(g("common.updateSuccess"))),n.value=!1,B("success")}finally{u.value=!1}}},M=()=>{a.value={id:void 0,title:"",type:void 0,content:"",status:S.ENABLE,remark:""},f.value?.resetFields()};return(v,e)=>{const N=m("el-input"),p=m("el-form-item"),O=W,k=m("el-option"),C=m("el-select"),R=m("el-form"),E=m("el-button"),A=J,P=z("loading");return d(),_(A,{modelValue:l(n),"onUpdate:modelValue":e[6]||(e[6]=t=>H(n)?n.value=t:null),title:l(b),width:"800"},{footer:s(()=>[r(E,{disabled:l(u),type:"primary",onClick:L},{default:s(()=>e[7]||(e[7]=[I("确 定")])),_:1},8,["disabled"]),r(E,{onClick:e[5]||(e[5]=t=>n.value=!1)},{default:s(()=>e[8]||(e[8]=[I("取 消")])),_:1})]),default:s(()=>[G((d(),_(R,{ref_key:"formRef",ref:f,"label-width":"80px",model:l(a),rules:l(q)},{default:s(()=>[r(p,{label:"公告标题",prop:"title"},{default:s(()=>[r(N,{modelValue:l(a).title,"onUpdate:modelValue":e[0]||(e[0]=t=>l(a).title=t),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1}),r(p,{label:"公告内容",prop:"content"},{default:s(()=>[r(O,{modelValue:l(a).content,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).content=t),height:"150px"},null,8,["modelValue"])]),_:1}),r(p,{label:"公告类型",prop:"type"},{default:s(()=>[r(C,{modelValue:l(a).type,"onUpdate:modelValue":e[2]||(e[2]=t=>l(a).type=t),clearable:"",placeholder:"请选择公告类型"},{default:s(()=>[(d(!0),T(w,null,x(l(D)(l(F).SYSTEM_NOTICE_TYPE),t=>(d(),_(k,{key:parseInt(t.value),label:t.label,value:parseInt(t.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(p,{label:"状态",prop:"status"},{default:s(()=>[r(C,{modelValue:l(a).status,"onUpdate:modelValue":e[3]||(e[3]=t=>l(a).status=t),clearable:"",placeholder:"请选择状态"},{default:s(()=>[(d(!0),T(w,null,x(l(D)(l(F).COMMON_STATUS),t=>(d(),_(k,{key:parseInt(t.value),label:t.label,value:parseInt(t.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(p,{label:"备注",prop:"remark"},{default:s(()=>[r(N,{modelValue:l(a).remark,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).remark=t),placeholder:"请输备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[P,l(u)]])]),_:1},8,["modelValue","title"])}}});export{ue as _,re as d,se as g,ne as p};
