/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{d as T,r as f,f as L,Y as A,g as c,h as k,c as E,o as h,F as K,w as y,j as e,a as i,k as q,m as a,v as b,K as Y,aP as z}from"./index-BuFigy1A.js";import{b as G}from"./index-BUjSBrqV.js";const Q=T({__name:"TemplateProductForm",props:{templateId:{}},setup(x,{expose:C}){const _=x,v=f(!1),s=f([]),m=L({templateId:[{required:!0,message:"检测模板ID不能为空",trigger:"change"}],itemId:[{required:!0,message:"产品物料ID不能为空",trigger:"change"}]}),U=f();A(()=>_.templateId,async d=>{if(s.value=[],!!d)try{v.value=!0,s.value=await G(d)}finally{v.value=!1}},{immediate:!0});const R=()=>{const d={id:void 0,templateId:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityCheck:void 0,quantityUnqualified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0};d.templateId=_.templateId,s.value.push(d)},g=d=>{s.value.splice(d,1)},$=()=>U.value.validate(),w=()=>s.value,I=f(),N=()=>{I.value.showFlag()},D=d=>{if(d!=null&&d!=null){console.log(d);const n={id:void 0,templateId:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityCheck:void 0,quantityUnqualified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0};n.itemId=d.id,n.itemCode=d.itemCode,n.itemName=d.itemName,n.specification=d.specification,n.unitOfMeasure=d.unitOfMeasure,n.templateId=_.templateId,s.value.push(n)}};return C({validate:$,getData:w}),(d,n)=>{const O=Y,V=c("el-button"),r=c("el-form-item"),u=c("el-table-column"),p=c("el-input"),j=c("el-table"),M=c("el-form"),P=c("el-row"),S=z,B=k("hasPermi"),F=k("loading");return h(),E(K,null,[y((h(),q(M,{ref_key:"formRef",ref:U,model:i(s),rules:i(m),"label-width":"0px","inline-message":!0},{default:a(()=>[e(r,null,{default:a(()=>[y((h(),q(V,{type:"primary",plain:"",onClick:N},{default:a(()=>[e(O,{icon:"ep:plus",class:"mr-5px"}),n[0]||(n[0]=b(" 新增 "))]),_:1})),[[B,["qmcbasic:template:create"]]])]),_:1}),e(j,{data:i(s),class:"-mt-10px"},{default:a(()=>[e(u,{label:"序号",type:"index",width:"100"}),e(u,{label:"产品物料ID","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.itemId`,rules:i(m).itemId,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.itemId,"onUpdate:modelValue":o=>l.itemId=o,placeholder:"请输入产品物料ID"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"产品物料编码","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.itemCode`,rules:i(m).itemCode,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.itemCode,"onUpdate:modelValue":o=>l.itemCode=o,placeholder:"请输入产品物料编码"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"产品物料名称","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.itemName`,rules:i(m).itemName,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.itemName,"onUpdate:modelValue":o=>l.itemName=o,placeholder:"请输入产品物料名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"规格型号","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.specification`,rules:i(m).specification,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.specification,"onUpdate:modelValue":o=>l.specification=o,placeholder:"请输入规格型号"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"单位","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.unitOfMeasure`,rules:i(m).unitOfMeasure,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.unitOfMeasure,"onUpdate:modelValue":o=>l.unitOfMeasure=o,placeholder:"请输入单位"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"最低检测数","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.quantityCheck`,rules:i(m).quantityCheck,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.quantityCheck,"onUpdate:modelValue":o=>l.quantityCheck=o,placeholder:"请输入最低检测数"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"最大不合格数","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.quantityUnqualified`,rules:i(m).quantityUnqualified,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.quantityUnqualified,"onUpdate:modelValue":o=>l.quantityUnqualified=o,placeholder:"请输入最大不合格数"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"最大致命缺陷率","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.crRate`,rules:i(m).crRate,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.crRate,"onUpdate:modelValue":o=>l.crRate=o,placeholder:"请输入最大致命缺陷率"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"最大严重缺陷率","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.majRate`,rules:i(m).majRate,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.majRate,"onUpdate:modelValue":o=>l.majRate=o,placeholder:"请输入最大严重缺陷率"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"最大轻微缺陷率","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.minRate`,rules:i(m).minRate,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.minRate,"onUpdate:modelValue":o=>l.minRate=o,placeholder:"请输入最大轻微缺陷率"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{label:"备注","min-width":"150"},{default:a(({row:l,$index:t})=>[e(r,{prop:`${t}.remark`,rules:i(m).remark,class:"mb-0px!"},{default:a(()=>[e(p,{modelValue:l.remark,"onUpdate:modelValue":o=>l.remark=o,placeholder:"请输入备注"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(u,{align:"center",fixed:"right",label:"操作",width:"60"},{default:a(({$index:l})=>[e(V,{onClick:t=>g(l),link:""},{default:a(()=>n[1]||(n[1]=[b("—")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model","rules"])),[[F,i(v)]]),e(P,{justify:"center",class:"mt-3"},{default:a(()=>[e(V,{onClick:R,round:""},{default:a(()=>n[2]||(n[2]=[b("+ 添加检测模板产品")])),_:1})]),_:1}),e(S,{ref_key:"Select",ref:I,onOnSelected:D},null,512)],64)}}});export{Q as _};
