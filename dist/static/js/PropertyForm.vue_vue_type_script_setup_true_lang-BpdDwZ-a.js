/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{d as U,r as n,f as $,g as d,h as B,k as V,o as b,m as o,w as S,a,j as u,v as k,y as j,_ as q,N as z,z as I}from"./index-DMg0mq0e.js";import{h as L,a as M,i as A}from"./property-DUZ3FBvF.js";const K=U({name:"ProductPropertyForm",__name:"PropertyForm",emits:["success"],setup(E,{expose:w,emit:x}){const{t:c}=z(),f=I(),l=n(!1),p=n(""),s=n(!1),v=n(""),t=n({id:void 0,name:""}),P=$({name:[{required:!0,message:"名称不能为空",trigger:"blur"}]}),m=n();w({open:async(i,e)=>{if(l.value=!0,p.value=c(`action.${i}`),v.value=i,D(),e){s.value=!0;try{t.value=await L(e)}finally{s.value=!1}}}});const C=x,F=async()=>{if(!(!m||!await m.value.validate())){s.value=!0;try{const e=t.value;v.value==="create"?(await M(e),f.success(c("common.createSuccess"))):(await A(e),f.success(c("common.updateSuccess"))),l.value=!1,C("success")}finally{s.value=!1}}},D=()=>{t.value={id:void 0,name:""},m.value?.resetFields()};return(i,e)=>{const _=d("el-input"),y=d("el-form-item"),R=d("el-form"),g=d("el-button"),N=q,T=B("loading");return b(),V(N,{modelValue:a(l),"onUpdate:modelValue":e[3]||(e[3]=r=>j(l)?l.value=r:null),title:a(p)},{footer:o(()=>[u(g,{disabled:a(s),type:"primary",onClick:F},{default:o(()=>e[4]||(e[4]=[k("确 定")])),_:1},8,["disabled"]),u(g,{onClick:e[2]||(e[2]=r=>l.value=!1)},{default:o(()=>e[5]||(e[5]=[k("取 消")])),_:1})]),default:o(()=>[S((b(),V(R,{ref_key:"formRef",ref:m,"label-width":"80px",model:a(t),rules:a(P)},{default:o(()=>[u(y,{label:"名称",prop:"name"},{default:o(()=>[u(_,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=r=>a(t).name=r),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),u(y,{label:"备注",prop:"remark"},{default:o(()=>[u(_,{modelValue:a(t).remark,"onUpdate:modelValue":e[1]||(e[1]=r=>a(t).remark=r),placeholder:"请输入内容",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[T,a(s)]])]),_:1},8,["modelValue","title"])}}});export{K as _};
