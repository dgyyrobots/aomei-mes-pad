/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{_ as B}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dq4j5fFx.js";import{_ as E}from"./BasicInfoForm.vue_vue_type_script_setup_true_lang-CWElFb-A.js";import{_ as M}from"./ColumInfoForm.vue_vue_type_script_setup_true_lang-BPwi9b76.js";import{_ as S}from"./GenerateInfoForm.vue_vue_type_script_setup_true_lang-DFETkN6Q.js";import{g as h,u as j}from"./index-CqRZDAzy.js";import{d as q,u as z,H as F,ac as H,r as s,b as L,g as r,h as U,w as W,a as e,o as A,k as G,m as t,j as o,y as J,v as p,z as K,N as O}from"./index-BuFigy1A.js";import"./formRules-BWyxeNi3.js";import"./dict.type-XyRYKZ0G.js";import"./index-c4SMIoTm.js";import"./dict-Ve5yp9Dm.js";import"./tree-vSlcEeQq.js";const re=q({name:"InfraCodegenEditTable",__name:"EditTable",setup(P){const{t:b}=O(),g=K(),{push:v,currentRoute:y}=z(),{query:I}=F(),{delView:R}=H(),m=s(!1),c=s("colum"),f=s(),w=s(),i=s(),a=s({table:{},columns:[]}),C=async()=>{const l=I.id;if(l){m.value=!0;try{a.value=await h(l)}finally{m.value=!1}}},k=async()=>{if(e(a)){await e(f)?.validate(),await e(i)?.validate();try{await j(a.value),g.success(b("common.updateSuccess")),_()}catch(l){console.log(l)}}},_=()=>{R(e(y)),v("/infra/codegen")};return L(()=>{C()}),(l,n)=>{const u=r("el-tab-pane"),V=r("el-tabs"),d=r("el-button"),T=r("el-form-item"),x=r("el-form"),D=B,N=U("loading");return W((A(),G(D,null,{default:t(()=>[o(V,{modelValue:e(c),"onUpdate:modelValue":n[0]||(n[0]=$=>J(c)?c.value=$:null)},{default:t(()=>[o(u,{label:"基本信息",name:"basicInfo"},{default:t(()=>[o(e(E),{ref_key:"basicInfoRef",ref:f,table:e(a).table},null,8,["table"])]),_:1}),o(u,{label:"字段信息",name:"colum"},{default:t(()=>[o(e(M),{ref_key:"columInfoRef",ref:w,columns:e(a).columns},null,8,["columns"])]),_:1}),o(u,{label:"生成信息",name:"generateInfo"},{default:t(()=>[o(e(S),{ref_key:"generateInfoRef",ref:i,columns:e(a).columns,table:e(a).table},null,8,["columns","table"])]),_:1})]),_:1},8,["modelValue"]),o(x,null,{default:t(()=>[o(T,{style:{float:"right"}},{default:t(()=>[o(d,{loading:e(m),type:"primary",onClick:k},{default:t(()=>n[1]||(n[1]=[p("保存")])),_:1},8,["loading"]),o(d,{onClick:_},{default:t(()=>n[2]||(n[2]=[p("返回")])),_:1})]),_:1})]),_:1})]),_:1})),[[N,e(m)]])}}});export{re as default};
