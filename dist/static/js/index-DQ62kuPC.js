/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{_ as L}from"./Echart.vue_vue_type_script_setup_true_lang-D4tCEwIk.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-DyT9Y0LD.js";import{d as E,r as m,f as I,b as j,g as p,h as N,c as V,o as P,j as t,m as o,a as e,d9 as s,c5 as n,i as M,w as z,k as G,v as K,K as X,dk as Y,x as Z,c4 as q,z as F,A as H}from"./index-D3eRVKjp.js";import{_ as v}from"./TradeStatisticValue.vue_vue_type_script_setup_true_lang-lboZ9mYF.js";import{c as J,d as Q,e as U,f as W}from"./trade-DVAoIfyr.js";import{C as ee}from"./CardTitle-CNKVz2A-.js";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang-B58MNfHD.js";import{d as te}from"./download-U6qaYcnP.js";import"./install-DNIeUnSy.js";import"./CountTo.vue_vue_type_script_setup_true_lang-BVRxzhrc.js";const ae={class:"flex flex-col"},re={class:"flex flex-row items-center justify-between"},oe=E({name:"TradeStatistics",__name:"index",setup(le){const g=F(),_=m(!0),y=m(!1),l=m(),a=m(),d=m(),f=I({dataset:{dimensions:["date","turnoverPrice","orderPayPrice","rechargePrice","expensePrice"],source:[]},grid:{left:20,right:20,bottom:20,top:80,containLabel:!0},legend:{top:50},series:[{name:"营业额",type:"line",smooth:!0},{name:"商品支付金额",type:"line",smooth:!0},{name:"充值金额",type:"line",smooth:!0},{name:"支出金额",type:"line",smooth:!0}],toolbox:{feature:{dataZoom:{yAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"交易状况"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},xAxis:{type:"category",boundaryGap:!1,axisTick:{show:!1}},yAxis:{axisTick:{show:!1}}}),h=async()=>{_.value=!0;const c=d.value.times;Y(c[0],c[1])&&(c[0]=Z(q(c[0]).subtract(1,"d"))),await Promise.all([w(),S()]),_.value=!1},b=async()=>{l.value=await J()},w=async()=>{const c=d.value.times;a.value=await Q({times:c})},S=async()=>{const c=d.value.times,i=await U({times:c});for(const r of i)r.turnoverPrice=n(r.turnoverPrice),r.orderPayPrice=n(r.orderPayPrice),r.rechargePrice=n(r.rechargePrice),r.expensePrice=n(r.expensePrice);f.dataset&&f.dataset.source&&(f.dataset.source=i)},k=async()=>{try{await g.exportConfirm(),y.value=!0;const c=d.value.times,i=await W({times:c});te.excel(i,"交易状况.xls")}catch(c){console.log(c)}finally{y.value=!1}};return j(async()=>{await b()}),(c,i)=>{const r=p("el-col"),x=p("el-row"),T=X,C=p("el-button"),D=B,R=L,$=p("el-skeleton"),O=p("el-card"),A=N("hasPermi");return P(),V("div",ae,[t(x,{class:"summary",gutter:16},{default:o(()=>[t(r,{sm:6,xs:12},{default:o(()=>[t(v,{percent:e(s)(e(l)?.value?.yesterdayOrderCount,e(l)?.reference?.yesterdayOrderCount),title:"昨日订单数量",tooltip:"昨日订单数量",value:e(l)?.value?.yesterdayOrderCount||0},null,8,["percent","value"])]),_:1}),t(r,{sm:6,xs:12},{default:o(()=>[t(v,{percent:e(s)(e(l)?.value?.monthOrderCount,e(l)?.reference?.monthOrderCount),title:"本月订单数量",tooltip:"本月订单数量",value:e(l)?.value?.monthOrderCount||0},null,8,["percent","value"])]),_:1}),t(r,{sm:6,xs:12},{default:o(()=>[t(v,{decimals:2,percent:e(s)(e(l)?.value?.yesterdayPayPrice,e(l)?.reference?.yesterdayPayPrice),prefix:"￥",title:"昨日支付金额",tooltip:"昨日支付金额",value:e(n)(e(l)?.value?.yesterdayPayPrice||0)},null,8,["percent","value"])]),_:1}),t(r,{sm:6,xs:12},{default:o(()=>[t(v,{":decimals":2,percent:e(s)(e(l)?.value?.monthPayPrice,e(l)?.reference?.monthPayPrice),prefix:"￥",title:"本月支付金额",tooltip:"本月支付金额",value:e(n)(e(l)?.value?.monthPayPrice||0)},null,8,["percent","value"])]),_:1})]),_:1}),t(O,{shadow:"never"},{header:o(()=>[M("div",re,[t(e(ee),{title:"交易状况"}),t(D,{ref_key:"shortcutDateRangePicker",ref:d,onChange:h},{default:o(()=>[z((P(),G(C,{class:"ml-4",loading:e(y),onClick:k},{default:o(()=>[t(T,{class:"mr-1",icon:"ep:download"}),i[0]||(i[0]=K(" 导出 "))]),_:1},8,["loading"])),[[A,["statistics:trade:export"]]])]),_:1},512)])]),default:o(()=>[t(x,{gutter:16},{default:o(()=>[t(r,{md:6,sm:12,xs:24},{default:o(()=>[t(u,{decimals:2,icon:"fa-solid:yen-sign","icon-bg-color":"text-blue-500","icon-color":"bg-blue-100",percent:e(s)(e(a)?.value?.turnoverPrice,e(a)?.reference?.turnoverPrice),prefix:"￥",title:"营业额",tooltip:"商品支付金额、充值金额",value:e(n)(e(a)?.value?.turnoverPrice||0)},null,8,["percent","value"])]),_:1}),t(r,{md:6,sm:12,xs:24},{default:o(()=>[t(u,{decimals:2,icon:"fa-solid:shopping-cart","icon-bg-color":"text-purple-500","icon-color":"bg-purple-100",percent:e(s)(e(a)?.value?.orderPayPrice,e(a)?.reference?.orderPayPrice),prefix:"￥",title:"商品支付金额",tooltip:"用户购买商品的实际支付金额，包括微信支付、余额支付、支付宝支付、线下支付金额（拼团商品在成团之后计入，线下支付订单在后台确认支付后计入）",value:e(n)(e(a)?.value?.orderPayPrice||0)},null,8,["percent","value"])]),_:1}),t(r,{md:6,sm:12,xs:24},{default:o(()=>[t(u,{decimals:2,icon:"fa-solid:money-check-alt","icon-bg-color":"text-yellow-500","icon-color":"bg-yellow-100",percent:e(s)(e(a)?.value?.rechargePrice,e(a)?.reference?.rechargePrice),prefix:"￥",title:"充值金额",tooltip:"用户成功充值的金额",value:e(n)(e(a)?.value?.rechargePrice||0)},null,8,["percent","value"])]),_:1}),t(r,{md:6,sm:12,xs:24},{default:o(()=>[t(u,{decimals:2,icon:"ep:warning-filled","icon-bg-color":"text-green-500","icon-color":"bg-green-100",percent:e(s)(e(a)?.value?.expensePrice,e(a)?.reference?.expensePrice),prefix:"￥",title:"支出金额",tooltip:"余额支付金额、支付佣金金额、商品退款金额",value:e(n)(e(a)?.value?.expensePrice||0)},null,8,["percent","value"])]),_:1}),t(r,{md:6,sm:12,xs:24},{default:o(()=>[t(u,{decimals:2,icon:"fa-solid:wallet","icon-bg-color":"text-cyan-500","icon-color":"bg-cyan-100",percent:e(s)(e(a)?.value?.walletPayPrice,e(a)?.reference?.walletPayPrice),prefix:"￥",title:"余额支付金额",tooltip:"用户下单时使用余额实际支付的金额",value:e(n)(e(a)?.value?.walletPayPrice||0)},null,8,["percent","value"])]),_:1}),t(r,{md:6,sm:12,xs:24},{default:o(()=>[t(u,{decimals:2,icon:"fa-solid:award","icon-bg-color":"text-yellow-500","icon-color":"bg-yellow-100",percent:e(s)(e(a)?.value?.brokerageSettlementPrice,e(a)?.reference?.brokerageSettlementPrice),prefix:"￥",title:"支付佣金金额",tooltip:"后台给推广员支付的推广佣金，以实际支付为准",value:e(n)(e(a)?.value?.brokerageSettlementPrice||0)},null,8,["percent","value"])]),_:1}),t(r,{md:6,sm:12,xs:24},{default:o(()=>[t(u,{decimals:2,icon:"fa-solid:times-circle","icon-bg-color":"text-blue-500","icon-color":"bg-blue-100",percent:e(s)(e(a)?.value?.afterSaleRefundPrice,e(a)?.reference?.afterSaleRefundPrice),prefix:"￥",title:"商品退款金额",tooltip:"用户成功退款的商品金额",value:e(n)(e(a)?.value?.afterSaleRefundPrice||0)},null,8,["percent","value"])]),_:1})]),_:1}),t($,{animated:"",loading:e(_)},{default:o(()=>[t(R,{height:500,options:e(f)},null,8,["options"])]),_:1},8,["loading"])]),_:1})])}}}),_e=H(oe,[["__scopeId","data-v-9352b1ad"]]);export{_e as default};
