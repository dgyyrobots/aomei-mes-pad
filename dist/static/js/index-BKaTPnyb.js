/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-11 15:04:23 
 */
import{d as j,r as m,f as J,b as W,g as s,h as F,c as b,o as r,j as t,m as n,a as l,J as X,F as x,n as P,k as d,w as y,v as _,K as Z,t as h,L as ee,M as te,z as ae,N as le}from"./index-lcC3l4R2.js";import{_ as ne}from"./DictTag.vue_vue_type_script_lang-G_4C17ZW.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C6z1f3RI.js";import{_ as se}from"./UserGroupForm.vue_vue_type_script_setup_true_lang-CYubfRzz.js";import{b as re,d as ie}from"./index-MRnS6Log.js";import{g as pe}from"./index-DNzgPDZI.js";import{c as me,D as L}from"./dict-B7jb0IEc.js";import"./color-B5phLuB-.js";import"./constants-BPQb3nxh.js";const we=j({name:"BpmUserGroup",__name:"index",setup(ue){const T=ae(),{t:O}=le(),v=m(!0),U=m(0),D=m([]),o=J({pageNo:1,pageSize:10,name:null,status:null,createTime:[]}),S=m(),V=m([]),u=async()=>{v.value=!0;try{const i=await re(o);D.value=i.list,U.value=i.total}finally{v.value=!1}},k=()=>{o.pageNo=1,u()},Y=()=>{S.value.resetFields(),k()},M=m(),N=(i,e)=>{M.value.open(i,e)},z=async i=>{try{await T.delConfirm(),await ie(i),T.success(O("common.delSuccess")),await u()}catch(e){console.log(e)}};return W(async()=>{await u(),V.value=await pe()}),(i,e)=>{const B=s("el-input"),f=s("el-form-item"),I=s("el-option"),R=s("el-select"),q=s("el-date-picker"),w=Z,c=s("el-button"),G=s("el-form"),$=oe,p=s("el-table-column"),K=ne,A=s("el-table"),E=te,C=F("hasPermi"),H=F("loading");return r(),b(x,null,[t($,null,{default:n(()=>[t(G,{ref_key:"queryFormRef",ref:S,class:"-mb-15px",inline:!0,"label-width":"68px",model:l(o)},{default:n(()=>[t(f,{label:"组名",prop:"name"},{default:n(()=>[t(B,{modelValue:l(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).name=a),class:"!w-240px",clearable:"",placeholder:"请输入组名",onKeyup:X(k,["enter"])},null,8,["modelValue"])]),_:1}),t(f,{label:"状态",prop:"status"},{default:n(()=>[t(R,{modelValue:l(o).status,"onUpdate:modelValue":e[1]||(e[1]=a=>l(o).status=a),class:"!w-240px",clearable:"",placeholder:"请选择状态"},{default:n(()=>[(r(!0),b(x,null,P(l(me)(l(L).COMMON_STATUS),a=>(r(),d(I,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"创建时间",prop:"createTime"},{default:n(()=>[t(q,{modelValue:l(o).createTime,"onUpdate:modelValue":e[2]||(e[2]=a=>l(o).createTime=a),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),t(f,null,{default:n(()=>[t(c,{onClick:k},{default:n(()=>[t(w,{class:"mr-5px",icon:"ep:search"}),e[6]||(e[6]=_(" 搜索 "))]),_:1}),t(c,{onClick:Y},{default:n(()=>[t(w,{class:"mr-5px",icon:"ep:refresh"}),e[7]||(e[7]=_(" 重置 "))]),_:1}),y((r(),d(c,{plain:"",type:"primary",onClick:e[3]||(e[3]=a=>N("create"))},{default:n(()=>[t(w,{class:"mr-5px",icon:"ep:plus"}),e[8]||(e[8]=_(" 新增 "))]),_:1})),[[C,["bpm:user-group:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t($,null,{default:n(()=>[y((r(),d(A,{data:l(D)},{default:n(()=>[t(p,{align:"center",label:"编号",prop:"id"}),t(p,{align:"center",label:"组名",prop:"name"}),t(p,{align:"center",label:"描述",prop:"description"}),t(p,{align:"center",label:"成员"},{default:n(a=>[(r(!0),b(x,null,P(a.row.memberUserIds,g=>(r(),b("span",{key:g,class:"pr-5px"},h(l(V).find(Q=>Q.id===g)?.nickname),1))),128))]),_:1}),t(p,{align:"center",label:"状态",prop:"status"},{default:n(a=>[t(K,{type:l(L).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),t(p,{align:"center",formatter:l(ee),label:"创建时间",prop:"createTime"},null,8,["formatter"]),t(p,{align:"center",label:"操作"},{default:n(a=>[y((r(),d(c,{link:"",type:"primary",onClick:g=>N("update",a.row.id)},{default:n(()=>e[9]||(e[9]=[_("编辑")])),_:2},1032,["onClick"])),[[C,["bpm:user-group:update"]]]),y((r(),d(c,{link:"",type:"danger",onClick:g=>z(a.row.id)},{default:n(()=>e[10]||(e[10]=[_("删除")])),_:2},1032,["onClick"])),[[C,["bpm:user-group:delete"]]])]),_:1})]),_:1},8,["data"])),[[H,l(v)]]),t(E,{limit:l(o).pageSize,"onUpdate:limit":e[4]||(e[4]=a=>l(o).pageSize=a),page:l(o).pageNo,"onUpdate:page":e[5]||(e[5]=a=>l(o).pageNo=a),total:l(U),onPagination:u},null,8,["limit","page","total"])]),_:1}),t(se,{ref_key:"formRef",ref:M,onSuccess:u},null,512)],64)}}});export{we as default};
