/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{_ as X}from"./DictTag.vue_vue_type_script_lang-lHf-rDoT.js";import{_ as Y}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DmvxiVVs.js";import{d as h,r,f as G,b as H,g as n,h as M,c as U,o as i,j as e,m as l,a as o,F as L,n as J,k as c,w as v,v as p,K as W,l as Z,t as ee,L as te,X as le,z as ae,N as oe}from"./index-C8VsLzxx.js";import{_ as ne}from"./DeptForm.vue_vue_type_script_setup_true_lang-CJA4dJSJ.js";import{b as se,d as re}from"./index-CyExe2pa.js";import{g as ie}from"./index-Dn2rRtuI.js";import{c as pe,D as O}from"./dict-_inVRzR5.js";import{h as me}from"./tree-vSlcEeQq.js";import"./color-B5phLuB-.js";import"./constants-BPQb3nxh.js";const xe=h({name:"SystemDept",__name:"index",setup(ue){const C=ae(),{t:P}=oe(),y=r(!0),T=r(),s=G({pageNo:1,pageSize:100,name:void 0,status:void 0}),D=r(),g=r(!0),b=r(!0),S=r([]),_=async()=>{y.value=!0;try{const m=await se(s);T.value=me(m)}finally{y.value=!1}},A=()=>{b.value=!1,g.value=!g.value,le(()=>{b.value=!0})},V=()=>{_()},E=()=>{s.pageNo=1,D.value.resetFields(),V()},N=r(),F=(m,t)=>{N.value.open(m,t)},I=async m=>{try{await C.delConfirm(),await re(m),C.success(P("common.delSuccess")),await _()}catch(t){console.log(t)}};return H(async()=>{await _(),S.value=await ie()}),(m,t)=>{const R=n("el-input"),k=n("el-form-item"),q=n("el-option"),B=n("el-select"),f=W,u=n("el-button"),z=n("el-form"),$=Y,d=n("el-table-column"),Q=X,j=n("el-table"),w=M("hasPermi"),K=M("loading");return i(),U(L,null,[e($,null,{default:l(()=>[e(z,{ref_key:"queryFormRef",ref:D,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(s)},{default:l(()=>[e(k,{label:"部门名称",prop:"title"},{default:l(()=>[e(R,{modelValue:o(s).name,"onUpdate:modelValue":t[0]||(t[0]=a=>o(s).name=a),class:"!w-240px",clearable:"",placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1}),e(k,{label:"部门状态",prop:"status"},{default:l(()=>[e(B,{modelValue:o(s).status,"onUpdate:modelValue":t[1]||(t[1]=a=>o(s).status=a),class:"!w-240px",clearable:"",placeholder:"请选择部门状态"},{default:l(()=>[(i(!0),U(L,null,J(o(pe)(o(O).COMMON_STATUS),a=>(i(),c(q,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(k,null,{default:l(()=>[e(u,{onClick:V},{default:l(()=>[e(f,{class:"mr-5px",icon:"ep:search"}),t[3]||(t[3]=p(" 搜索 "))]),_:1}),e(u,{onClick:E},{default:l(()=>[e(f,{class:"mr-5px",icon:"ep:refresh"}),t[4]||(t[4]=p(" 重置 "))]),_:1}),v((i(),c(u,{plain:"",type:"primary",onClick:t[2]||(t[2]=a=>F("create"))},{default:l(()=>[e(f,{class:"mr-5px",icon:"ep:plus"}),t[5]||(t[5]=p(" 新增 "))]),_:1})),[[w,["system:dept:create"]]]),e(u,{plain:"",type:"danger",onClick:A},{default:l(()=>[e(f,{class:"mr-5px",icon:"ep:sort"}),t[6]||(t[6]=p(" 展开/折叠 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e($,null,{default:l(()=>[o(b)?v((i(),c(j,{key:0,data:o(T),"default-expand-all":o(g),"row-key":"id"},{default:l(()=>[e(d,{label:"部门名称",prop:"name"}),e(d,{label:"负责人",prop:"leader"},{default:l(a=>[p(ee(o(S).find(x=>x.id===a.row.leaderUserId)?.nickname),1)]),_:1}),e(d,{label:"排序",prop:"sort"}),e(d,{label:"状态",prop:"status"},{default:l(a=>[e(Q,{type:o(O).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(d,{align:"center",formatter:o(te),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(d,{align:"center",label:"操作"},{default:l(a=>[v((i(),c(u,{link:"",type:"primary",onClick:x=>F("update",a.row.id)},{default:l(()=>t[7]||(t[7]=[p("修改")])),_:2},1032,["onClick"])),[[w,["system:dept:update"]]]),v((i(),c(u,{link:"",type:"danger",onClick:x=>I(a.row.id)},{default:l(()=>t[8]||(t[8]=[p("删除")])),_:2},1032,["onClick"])),[[w,["system:dept:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[K,o(y)]]):Z("",!0)]),_:1}),e(ne,{ref_key:"formRef",ref:N,onSuccess:_},null,512)],64)}}});export{xe as default};
