/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{_ as B}from"./DictTag.vue_vue_type_script_lang-DcBSip_F.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dq4j5fFx.js";import{d as L,r as u,f as E,b as O,g as s,h as $,c as V,o as i,j as e,m as o,a as n,J as Q,w as _,v as c,K as j,k as f,l as z,L as A,F as J,z as W,N as Y}from"./index-BuFigy1A.js";import{_ as G}from"./CategoryForm.vue_vue_type_script_setup_true_lang-DjilqZY7.js";import{g as H,d as X}from"./category-DBVuNfJR.js";import{D as Z}from"./dict-Ve5yp9Dm.js";import{h as ee}from"./tree-vSlcEeQq.js";import"./color-B5phLuB-.js";import"./UploadImg-BnOMiRz9.js";import"./index-p6ysJ0Rq.js";import"./constants-BPQb3nxh.js";const te=["src"],_e=L({name:"ProductCategory",__name:"index",setup(oe){const b=W(),{t:D}=Y(),y=u(!0),C=u([]),p=E({name:void 0}),k=u(),d=async()=>{y.value=!0;try{const l=await H(p);C.value=ee(l,"id","parentId")}finally{y.value=!1}},g=()=>{d()},N=()=>{k.value.resetFields(),g()},x=u(),h=(l,t)=>{x.value.open(l,t)},P=async l=>{try{await b.delConfirm(),await X(l),b.success(D("common.delSuccess")),await d()}catch(t){console.log(t)}};return O(()=>{d()}),(l,t)=>{const U=s("el-input"),F=s("el-form-item"),w=j,m=s("el-button"),I=s("el-form"),T=K,r=s("el-table-column"),M=B,R=s("el-table"),v=$("hasPermi"),S=$("loading");return i(),V(J,null,[e(T,null,{default:o(()=>[e(I,{ref_key:"queryFormRef",ref:k,class:"-mb-15px",inline:!0,"label-width":"68px",model:n(p)},{default:o(()=>[e(F,{label:"分类名称",prop:"name"},{default:o(()=>[e(U,{modelValue:n(p).name,"onUpdate:modelValue":t[0]||(t[0]=a=>n(p).name=a),class:"!w-240px",clearable:"",placeholder:"请输入分类名称",onKeyup:Q(g,["enter"])},null,8,["modelValue"])]),_:1}),e(F,null,{default:o(()=>[e(m,{onClick:g},{default:o(()=>[e(w,{class:"mr-5px",icon:"ep:search"}),t[2]||(t[2]=c(" 搜索 "))]),_:1}),e(m,{onClick:N},{default:o(()=>[e(w,{class:"mr-5px",icon:"ep:refresh"}),t[3]||(t[3]=c(" 重置 "))]),_:1}),_((i(),f(m,{plain:"",type:"primary",onClick:t[1]||(t[1]=a=>h("create"))},{default:o(()=>[e(w,{class:"mr-5px",icon:"ep:plus"}),t[4]||(t[4]=c(" 新增 "))]),_:1})),[[v,["product:category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(T,null,{default:o(()=>[_((i(),f(R,{data:n(C),"default-expand-all":"","row-key":"id"},{default:o(()=>[e(r,{label:"名称","min-width":"240",prop:"name",sortable:""}),e(r,{align:"center",label:"分类图标","min-width":"80",prop:"picUrl"},{default:o(a=>[a.row.picUrl?(i(),V("img",{key:0,alt:"移动端分类图",class:"h-36px",src:a.row.picUrl},null,8,te)):z("",!0)]),_:1}),e(r,{align:"center",label:"排序","min-width":"150",prop:"sort"}),e(r,{align:"center",label:"状态","min-width":"150",prop:"status"},{default:o(a=>[e(M,{type:n(Z).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",formatter:n(A),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(r,{align:"center",label:"操作"},{default:o(a=>[_((i(),f(m,{link:"",type:"primary",onClick:q=>h("update",a.row.id)},{default:o(()=>t[5]||(t[5]=[c("编辑")])),_:2},1032,["onClick"])),[[v,["product:category:update"]]]),_((i(),f(m,{link:"",type:"danger",onClick:q=>P(a.row.id)},{default:o(()=>t[6]||(t[6]=[c("删除")])),_:2},1032,["onClick"])),[[v,["product:category:delete"]]])]),_:1})]),_:1},8,["data"])),[[S,n(y)]])]),_:1}),e(G,{ref_key:"formRef",ref:x,onSuccess:d},null,512)],64)}}});export{_e as default};
