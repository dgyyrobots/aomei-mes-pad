/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as Q,r as i,f as U,b as V,g as d,h as $,c as j,o as p,j as t,m as a,a as n,w as f,v as m,K,k as _,L as W,M as A,F as G,z as H,N as J}from"./index-C8VsLzxx.js";import{_ as O}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DmvxiVVs.js";import{_ as X}from"./BusinessStatusTypeForm.vue_vue_type_script_setup_true_lang-DL8Ces27.js";import{d as Y,e as Z,f as h}from"./index-Obwtj6W2.js";import{d as ee}from"./download-U6qaYcnP.js";import"./tree-vSlcEeQq.js";import"./index-CyExe2pa.js";const pe=Q({name:"BusinessStatusType",__name:"index",setup(te){const v=H(),{t:P}=J(),x=i(!0),w=i([]),k=i(0),s=U({pageNo:1,pageSize:10}),C=i(),b=i(!1),c=async()=>{x.value=!0;try{const o=await Y(s);w.value=o.list,k.value=o.total}finally{x.value=!1}},S=()=>{s.pageNo=1,c()},T=()=>{C.value.resetFields(),S()},N=i(),B=(o,e)=>{N.value.open(o,e)},z=async o=>{try{await v.delConfirm(),await Z(o),v.success(P("common.delSuccess")),await c()}catch(e){console.log(e)}},R=async()=>{try{await v.exportConfirm(),b.value=!0;const o=await h(s);ee.excel(o,"商机状态类型.xls")}catch(o){console.log(o)}finally{b.value=!1}};return V(()=>{c()}),(o,e)=>{const g=K,r=d("el-button"),q=d("el-form-item"),D=d("el-form"),F=O,u=d("el-table-column"),L=d("el-table"),M=A,y=$("hasPermi"),E=$("loading");return p(),j(G,null,[t(F,null,{default:a(()=>[t(D,{ref_key:"queryFormRef",ref:C,class:"-mb-15px",inline:!0,"label-width":"68px",model:n(s)},{default:a(()=>[t(q,null,{default:a(()=>[t(r,{onClick:S},{default:a(()=>[t(g,{class:"mr-5px",icon:"ep:search"}),e[3]||(e[3]=m(" 搜索 "))]),_:1}),t(r,{onClick:T},{default:a(()=>[t(g,{class:"mr-5px",icon:"ep:refresh"}),e[4]||(e[4]=m(" 重置 "))]),_:1}),f((p(),_(r,{plain:"",type:"primary",onClick:e[0]||(e[0]=l=>B("create"))},{default:a(()=>[t(g,{class:"mr-5px",icon:"ep:plus"}),e[5]||(e[5]=m(" 新增 "))]),_:1})),[[y,["crm:business-status-type:create"]]]),f((p(),_(r,{loading:n(b),plain:"",type:"success",onClick:R},{default:a(()=>[t(g,{class:"mr-5px",icon:"ep:download"}),e[6]||(e[6]=m(" 导出 "))]),_:1},8,["loading"])),[[y,["crm:business-status-type:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(F,null,{default:a(()=>[f((p(),_(L,{data:n(w),"show-overflow-tooltip":!0,stripe:!0},{default:a(()=>[t(u,{align:"center",label:"状态类型名",prop:"name"}),t(u,{align:"center",label:"使用的部门",prop:"deptNames"}),t(u,{align:"center",label:"创建人",prop:"creator"}),t(u,{align:"center",formatter:n(W),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),t(u,{align:"center",label:"操作"},{default:a(l=>[f((p(),_(r,{link:"",type:"primary",onClick:I=>B("update",l.row.id)},{default:a(()=>e[7]||(e[7]=[m(" 编辑 ")])),_:2},1032,["onClick"])),[[y,["crm:business-status-type:update"]]]),f((p(),_(r,{link:"",type:"danger",onClick:I=>z(l.row.id)},{default:a(()=>e[8]||(e[8]=[m(" 删除 ")])),_:2},1032,["onClick"])),[[y,["crm:business-status-type:delete"]]])]),_:1})]),_:1},8,["data"])),[[E,n(x)]]),t(M,{limit:n(s).pageSize,"onUpdate:limit":e[1]||(e[1]=l=>n(s).pageSize=l),page:n(s).pageNo,"onUpdate:page":e[2]||(e[2]=l=>n(s).pageNo=l),total:n(k),onPagination:c},null,8,["limit","page","total"])]),_:1}),t(X,{ref_key:"formRef",ref:N,onSuccess:c},null,512)],64)}}});export{pe as default};
