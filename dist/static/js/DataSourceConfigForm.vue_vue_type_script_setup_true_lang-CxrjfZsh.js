/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as N,r as n,f as T,g as p,h as $,k as b,o as w,m as t,w as B,a,j as s,v as y,y as I,_ as j,N as z,z as L}from"./index-5TqN_QR1.js";import{a as M,c as A,u as E}from"./index-Dek3VDJ_.js";const O=N({name:"InfraDataSourceConfigForm",__name:"DataSourceConfigForm",emits:["success"],setup(G,{expose:C,emit:D}){const{t:c}=z(),v=L(),r=n(!1),g=n(""),u=n(!1),_=n(""),l=n({id:void 0,name:"",url:"",username:"",password:""}),S=T({name:[{required:!0,message:"数据源名称不能为空",trigger:"blur"}],url:[{required:!0,message:"数据源连接不能为空",trigger:"blur"}],username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}),m=n();C({open:async(i,e)=>{if(r.value=!0,g.value=c(`action.${i}`),_.value=i,F(),e){u.value=!0;try{l.value=await M(e)}finally{u.value=!1}}}});const k=D,x=async()=>{if(!(!m||!await m.value.validate())){u.value=!0;try{const e=l.value;_.value==="create"?(await A(e),v.success(c("common.createSuccess"))):(await E(e),v.success(c("common.updateSuccess"))),r.value=!1,k("success")}finally{u.value=!1}}},F=()=>{l.value={id:void 0,name:"",url:"",username:"",password:""},m.value?.resetFields()};return(i,e)=>{const d=p("el-input"),f=p("el-form-item"),U=p("el-form"),V=p("el-button"),q=j,R=$("loading");return w(),b(q,{modelValue:a(r),"onUpdate:modelValue":e[5]||(e[5]=o=>I(r)?r.value=o:null),title:a(g)},{footer:t(()=>[s(V,{disabled:a(u),type:"primary",onClick:x},{default:t(()=>e[6]||(e[6]=[y("确 定")])),_:1},8,["disabled"]),s(V,{onClick:e[4]||(e[4]=o=>r.value=!1)},{default:t(()=>e[7]||(e[7]=[y("取 消")])),_:1})]),default:t(()=>[B((w(),b(U,{ref_key:"formRef",ref:m,"label-width":"100px",model:a(l),rules:a(S)},{default:t(()=>[s(f,{label:"数据源名称",prop:"name"},{default:t(()=>[s(d,{modelValue:a(l).name,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).name=o),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),s(f,{label:"数据源连接",prop:"url"},{default:t(()=>[s(d,{modelValue:a(l).url,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).url=o),placeholder:"请输入数据源连接"},null,8,["modelValue"])]),_:1}),s(f,{label:"用户名",prop:"username"},{default:t(()=>[s(d,{modelValue:a(l).username,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).username=o),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),s(f,{label:"密码",prop:"password"},{default:t(()=>[s(d,{modelValue:a(l).password,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).password=o),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[R,a(u)]])]),_:1},8,["modelValue","title"])}}});export{O as _};
