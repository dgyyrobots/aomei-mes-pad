/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{d as L,r as n,g as r,h as R,k as p,o as m,_ as T,a as t,y as N,m as a,w as $,j as d,c as j,n as q,F as E,v as g}from"./index-BdmDrM2Y.js";import{d as S}from"./index-DS7aqjKl.js";import{g as z}from"./index-BXAiRI9b.js";const M=L({name:"BpmTaskDelegateForm",__name:"TaskDelegateForm",emits:["success"],setup(A,{expose:b,emit:k}){const s=n(!1),i=n(!1),o=n({id:"",delegateUserId:void 0}),V=n({delegateUserId:[{required:!0,message:"接收人不能为空",trigger:"change"}]}),u=n(),c=n([]);b({open:async f=>{s.value=!0,w(),o.value.id=f,c.value=await z()}});const y=k,U=async()=>{if(!(!u||!await u.value.validate())){i.value=!0;try{await S(o.value),s.value=!1,y("success")}finally{i.value=!1}}},w=()=>{o.value={id:"",delegateUserId:void 0},u.value?.resetFields()};return(f,e)=>{const F=r("el-option"),x=r("el-select"),_=r("el-form-item"),D=r("el-input"),I=r("el-form"),v=r("el-button"),C=T,B=R("loading");return m(),p(C,{modelValue:t(s),"onUpdate:modelValue":e[3]||(e[3]=l=>N(s)?s.value=l:null),title:"委派任务",width:"500"},{footer:a(()=>[d(v,{disabled:t(i),type:"primary",onClick:U},{default:a(()=>e[4]||(e[4]=[g("确 定")])),_:1},8,["disabled"]),d(v,{onClick:e[2]||(e[2]=l=>s.value=!1)},{default:a(()=>e[5]||(e[5]=[g("取 消")])),_:1})]),default:a(()=>[$((m(),p(I,{ref_key:"formRef",ref:u,"label-width":"110px",model:t(o),rules:t(V)},{default:a(()=>[d(_,{label:"接收人",prop:"delegateUserId"},{default:a(()=>[d(x,{modelValue:t(o).delegateUserId,"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).delegateUserId=l),clearable:"",style:{width:"100%"}},{default:a(()=>[(m(!0),j(E,null,q(t(c),l=>(m(),p(F,{key:l.id,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(_,{label:"委派理由",prop:"reason"},{default:a(()=>[d(D,{modelValue:t(o).reason,"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).reason=l),clearable:"",placeholder:"请输入委派理由"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[B,t(i)]])]),_:1},8,["modelValue"])}}});export{M as _};
