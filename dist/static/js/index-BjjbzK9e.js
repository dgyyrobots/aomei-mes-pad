/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{d as Y,r as u,f as G,b as H,g as i,h as F,c as M,o as p,j as t,m as a,a as o,J as U,F as D,n as W,k as c,w as _,v as d,K as X,L as Z,M as h,z as ee,N as te}from"./index-FPuwcz_Y.js";import{_ as le}from"./DictTag.vue_vue_type_script_lang-o_bnFpkw.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-32ziCa0j.js";import{_ as ae}from"./PostForm.vue_vue_type_script_setup_true_lang-DgiaK0Z-.js";import{b as ne,d as se,e as re}from"./index-9_vnPjMr.js";import{c as ie,D as O}from"./dict-C9lD-gwA.js";import{d as pe}from"./download-U6qaYcnP.js";import"./color-B5phLuB-.js";import"./constants-BPQb3nxh.js";const ke=Y({name:"SystemPost",__name:"index",setup(me){const k=ee(),{t:z}=te(),w=u(!0),C=u(0),V=u([]),n=G({pageNo:1,pageSize:10,code:"",name:"",status:void 0}),P=u(),x=u(!1),f=async()=>{w.value=!0;try{const s=await ne(n);V.value=s.list,C.value=s.total}finally{w.value=!1}},g=()=>{n.pageNo=1,f()},K=()=>{P.value.resetFields(),g()},S=u(),N=(s,e)=>{S.value.open(s,e)},L=async s=>{try{await k.delConfirm(),await se(s),k.success(z("common.delSuccess")),await f()}catch(e){console.log(e)}},R=async()=>{try{await k.exportConfirm(),x.value=!0;const s=await re(n);pe.excel(s,"岗位列表.xls")}catch(s){console.log(s)}finally{x.value=!1}};return H(()=>{f()}),(s,e)=>{const T=i("el-input"),y=i("el-form-item"),q=i("el-option"),B=i("el-select"),b=X,m=i("el-button"),E=i("el-form"),$=oe,r=i("el-table-column"),I=le,A=i("el-table"),Q=h,v=F("hasPermi"),j=F("loading");return p(),M(D,null,[t($,null,{default:a(()=>[t(E,{ref_key:"queryFormRef",ref:P,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(n)},{default:a(()=>[t(y,{label:"岗位名称",prop:"name"},{default:a(()=>[t(T,{modelValue:o(n).name,"onUpdate:modelValue":e[0]||(e[0]=l=>o(n).name=l),clearable:"",placeholder:"请输入岗位名称",onKeyup:U(g,["enter"])},null,8,["modelValue"])]),_:1}),t(y,{label:"岗位编码",prop:"code"},{default:a(()=>[t(T,{modelValue:o(n).code,"onUpdate:modelValue":e[1]||(e[1]=l=>o(n).code=l),clearable:"",placeholder:"请输入岗位编码",onKeyup:U(g,["enter"])},null,8,["modelValue"])]),_:1}),t(y,{label:"状态",prop:"status"},{default:a(()=>[t(B,{modelValue:o(n).status,"onUpdate:modelValue":e[2]||(e[2]=l=>o(n).status=l),clearable:"",placeholder:"请选择状态"},{default:a(()=>[(p(!0),M(D,null,W(o(ie)(o(O).COMMON_STATUS),l=>(p(),c(q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:a(()=>[t(m,{onClick:g},{default:a(()=>[t(b,{class:"mr-5px",icon:"ep:search"}),e[6]||(e[6]=d(" 搜索 "))]),_:1}),t(m,{onClick:K},{default:a(()=>[t(b,{class:"mr-5px",icon:"ep:refresh"}),e[7]||(e[7]=d(" 重置 "))]),_:1}),_((p(),c(m,{plain:"",type:"primary",onClick:e[3]||(e[3]=l=>N("create"))},{default:a(()=>[t(b,{class:"mr-5px",icon:"ep:plus"}),e[8]||(e[8]=d(" 新增 "))]),_:1})),[[v,["system:notice:create"]]]),_((p(),c(m,{loading:o(x),plain:"",type:"success",onClick:R},{default:a(()=>[t(b,{class:"mr-5px",icon:"ep:download"}),e[9]||(e[9]=d(" 导出 "))]),_:1},8,["loading"])),[[v,["infra:config:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t($,null,{default:a(()=>[_((p(),c(A,{data:o(V)},{default:a(()=>[t(r,{align:"center",label:"岗位编号",prop:"id"}),t(r,{align:"center",label:"岗位名称",prop:"name"}),t(r,{align:"center",label:"岗位编码",prop:"code"}),t(r,{align:"center",label:"岗位顺序",prop:"sort"}),t(r,{align:"center",label:"岗位备注",prop:"remark"}),t(r,{align:"center",label:"状态",prop:"status"},{default:a(l=>[t(I,{type:o(O).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),t(r,{align:"center",formatter:o(Z),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),t(r,{align:"center",label:"操作"},{default:a(l=>[_((p(),c(m,{link:"",type:"primary",onClick:J=>N("update",l.row.id)},{default:a(()=>e[10]||(e[10]=[d("编辑")])),_:2},1032,["onClick"])),[[v,["system:post:update"]]]),_((p(),c(m,{link:"",type:"danger",onClick:J=>L(l.row.id)},{default:a(()=>e[11]||(e[11]=[d("删除")])),_:2},1032,["onClick"])),[[v,["system:post:delete"]]])]),_:1})]),_:1},8,["data"])),[[j,o(w)]]),t(Q,{limit:o(n).pageSize,"onUpdate:limit":e[4]||(e[4]=l=>o(n).pageSize=l),page:o(n).pageNo,"onUpdate:page":e[5]||(e[5]=l=>o(n).pageNo=l),total:o(C),onPagination:f},null,8,["limit","page","total"])]),_:1}),t(ae,{ref_key:"formRef",ref:S,onSuccess:f},null,512)],64)}}});export{ke as default};
