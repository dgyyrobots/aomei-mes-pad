/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{V as f,d as G,r as i,f as H,g as u,h as J,k as g,o as d,m as n,w as K,a as t,j as o,l as C,c as N,F as U,n as q,v as V,t as Q,y as W,_ as X,N as Z,z as h}from"./index-D3S9e4gi.js";import{g as ee}from"./index-DT14ot3-.js";import{C as I}from"./constants-BPQb3nxh.js";import{c as te,D as ae}from"./dict-D5UmY5m8.js";const me=r=>f.get({url:"/system/tenant/page",params:r}),le=r=>f.get({url:`/system/tenant/get?id=${r}`}),oe=r=>f.post({url:"/system/tenant/create",data:r}),ne=r=>f.put({url:"/system/tenant/update",data:r}),pe=r=>f.delete({url:`/system/tenant/delete?id=${r}`}),ce=r=>f.download({url:"/system/tenant/export-excel",params:r}),ge=G({name:"SystemTenantForm",__name:"TenantForm",emits:["success"],setup(r,{expose:D,emit:M}){const{t:_}=Z(),w=h(),m=i(!1),y=i(""),p=i(!1),T=i(""),l=i({id:void 0,name:void 0,packageId:void 0,contactName:void 0,contactMobile:void 0,accountCount:void 0,expireTime:void 0,website:void 0,status:I.ENABLE,username:void 0,password:void 0}),E=H({name:[{required:!0,message:"租户名不能为空",trigger:"blur"}],packageId:[{required:!0,message:"租户套餐不能为空",trigger:"blur"}],contactName:[{required:!0,message:"联系人不能为空",trigger:"blur"}],status:[{required:!0,message:"租户状态不能为空",trigger:"blur"}],accountCount:[{required:!0,message:"账号额度不能为空",trigger:"blur"}],expireTime:[{required:!0,message:"过期时间不能为空",trigger:"blur"}],website:[{required:!0,message:"绑定域名不能为空",trigger:"blur"}],username:[{required:!0,message:"用户名称不能为空",trigger:"blur"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"}]}),v=i(),k=i([]);D({open:async(b,e)=>{if(m.value=!0,y.value=_(`action.${b}`),T.value=b,L(),e){p.value=!0;try{l.value=await le(e)}finally{p.value=!1}}k.value=await ee()}});const F=M,S=async()=>{if(!(!v||!await v.value.validate())){p.value=!0;try{const e=l.value;T.value==="create"?(await oe(e),w.success(_("common.createSuccess"))):(await ne(e),w.success(_("common.updateSuccess"))),m.value=!1,F("success")}finally{p.value=!1}}},L=()=>{l.value={id:void 0,name:void 0,packageId:void 0,contactName:void 0,contactMobile:void 0,accountCount:void 0,expireTime:void 0,website:void 0,status:I.ENABLE,username:void 0,password:void 0},v.value?.resetFields()};return(b,e)=>{const c=u("el-input"),s=u("el-form-item"),B=u("el-option"),$=u("el-select"),R=u("el-input-number"),A=u("el-date-picker"),O=u("el-radio"),P=u("el-radio-group"),j=u("el-form"),x=u("el-button"),z=X,Y=J("loading");return d(),g(z,{modelValue:t(m),"onUpdate:modelValue":e[11]||(e[11]=a=>W(m)?m.value=a:null),title:t(y),width:"50%"},{footer:n(()=>[o(x,{disabled:t(p),type:"primary",onClick:S},{default:n(()=>e[12]||(e[12]=[V("确 定")])),_:1},8,["disabled"]),o(x,{onClick:e[10]||(e[10]=a=>m.value=!1)},{default:n(()=>e[13]||(e[13]=[V("取 消")])),_:1})]),default:n(()=>[K((d(),g(j,{ref_key:"formRef",ref:v,"label-width":"80px",model:t(l),rules:t(E)},{default:n(()=>[o(s,{label:"租户名",prop:"name"},{default:n(()=>[o(c,{modelValue:t(l).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(l).name=a),placeholder:"请输入租户名"},null,8,["modelValue"])]),_:1}),o(s,{label:"租户套餐",prop:"packageId"},{default:n(()=>[o($,{modelValue:t(l).packageId,"onUpdate:modelValue":e[1]||(e[1]=a=>t(l).packageId=a),clearable:"",placeholder:"请选择租户套餐"},{default:n(()=>[(d(!0),N(U,null,q(t(k),a=>(d(),g(B,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"联系人",prop:"contactName"},{default:n(()=>[o(c,{modelValue:t(l).contactName,"onUpdate:modelValue":e[2]||(e[2]=a=>t(l).contactName=a),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1}),o(s,{label:"联系手机",prop:"contactMobile"},{default:n(()=>[o(c,{modelValue:t(l).contactMobile,"onUpdate:modelValue":e[3]||(e[3]=a=>t(l).contactMobile=a),placeholder:"请输入联系手机"},null,8,["modelValue"])]),_:1}),t(l).id===void 0?(d(),g(s,{key:0,label:"用户名称",prop:"username"},{default:n(()=>[o(c,{modelValue:t(l).username,"onUpdate:modelValue":e[4]||(e[4]=a=>t(l).username=a),placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1})):C("",!0),t(l).id===void 0?(d(),g(s,{key:1,label:"用户密码",prop:"password"},{default:n(()=>[o(c,{modelValue:t(l).password,"onUpdate:modelValue":e[5]||(e[5]=a=>t(l).password=a),placeholder:"请输入用户密码","show-password":"",type:"password"},null,8,["modelValue"])]),_:1})):C("",!0),o(s,{label:"账号额度",prop:"accountCount"},{default:n(()=>[o(R,{modelValue:t(l).accountCount,"onUpdate:modelValue":e[6]||(e[6]=a=>t(l).accountCount=a),"controls-position":"right",min:0,placeholder:"请输入账号额度"},null,8,["modelValue"])]),_:1}),o(s,{label:"过期时间",prop:"expireTime"},{default:n(()=>[o(A,{modelValue:t(l).expireTime,"onUpdate:modelValue":e[7]||(e[7]=a=>t(l).expireTime=a),clearable:"",placeholder:"请选择过期时间",type:"date","value-format":"x"},null,8,["modelValue"])]),_:1}),o(s,{label:"绑定域名",prop:"website"},{default:n(()=>[o(c,{modelValue:t(l).website,"onUpdate:modelValue":e[8]||(e[8]=a=>t(l).website=a),placeholder:"请输入绑定域名"},null,8,["modelValue"])]),_:1}),o(s,{label:"租户状态",prop:"status"},{default:n(()=>[o(P,{modelValue:t(l).status,"onUpdate:modelValue":e[9]||(e[9]=a=>t(l).status=a)},{default:n(()=>[(d(!0),N(U,null,q(t(te)(t(ae).COMMON_STATUS),a=>(d(),g(O,{key:a.value,label:a.value},{default:n(()=>[V(Q(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[Y,t(p)]])]),_:1},8,["modelValue","title"])}}});export{ge as _,pe as d,ce as e,me as g};
