/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{d as U,u as E,r as p,f as M,b as Y,g as i,h as q,c as z,o as C,j as e,m as n,a,J as K,v as u,K as L,w as A,k as H,L as Q,M as h,F as j}from"./index-D3eRVKjp.js";import{_ as J}from"./DictTag.vue_vue_type_script_lang-h3s-iN69.js";import{_ as O}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dg75KKir.js";import{D as W}from"./dict-CqgorI4d.js";import{h as G}from"./index-CEe92pXW.js";import{_ as X}from"./TaskDetail.vue_vue_type_script_setup_true_lang-C1163QGF.js";import"./color-B5phLuB-.js";const se=U({name:"BpmTodoTask",__name:"index",setup(Z){const{push:T}=E(),d=p(!0),g=p(0),b=p([]),o=M({pageNo:1,pageSize:10,name:"",createTime:[]}),y=p(),m=async()=>{d.value=!0;try{const s=await G(o);b.value=s.list,g.value=s.total}finally{d.value=!1}},_=()=>{o.pageNo=1,m()},x=()=>{y.value.resetFields(),_()},k=p(),D=s=>{k.value.open(s)},N=s=>{T({name:"BpmProcessInstanceDetail",query:{id:s.processInstance.id}})};return Y(()=>{m()}),(s,t)=>{const P=i("el-input"),f=i("el-form-item"),S=i("el-date-picker"),v=L,c=i("el-button"),V=i("el-form"),w=O,r=i("el-table-column"),I=J,R=i("el-table"),$=h,B=q("loading");return C(),z(j,null,[e(w,null,{default:n(()=>[e(V,{ref_key:"queryFormRef",ref:y,class:"-mb-15px",inline:!0,"label-width":"68px",model:a(o)},{default:n(()=>[e(f,{label:"任务名称",prop:"name"},{default:n(()=>[e(P,{modelValue:a(o).name,"onUpdate:modelValue":t[0]||(t[0]=l=>a(o).name=l),class:"!w-240px",clearable:"",placeholder:"请输入任务名称",onKeyup:K(_,["enter"])},null,8,["modelValue"])]),_:1}),e(f,{label:"创建时间",prop:"createTime"},{default:n(()=>[e(S,{modelValue:a(o).createTime,"onUpdate:modelValue":t[1]||(t[1]=l=>a(o).createTime=l),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(f,null,{default:n(()=>[e(c,{onClick:_},{default:n(()=>[e(v,{class:"mr-5px",icon:"ep:search"}),t[4]||(t[4]=u(" 搜索 "))]),_:1}),e(c,{onClick:x},{default:n(()=>[e(v,{class:"mr-5px",icon:"ep:refresh"}),t[5]||(t[5]=u(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(w,null,{default:n(()=>[A((C(),H(R,{data:a(b)},{default:n(()=>[e(r,{align:"center",label:"任务编号",prop:"id",width:"300px"}),e(r,{align:"center",label:"任务名称",prop:"name"}),e(r,{align:"center",label:"所属流程",prop:"processInstance.name"}),e(r,{align:"center",label:"流程发起人",prop:"processInstance.startUserNickname"}),e(r,{align:"center",label:"状态",prop:"result"},{default:n(l=>[e(I,{type:a(W).BPM_PROCESS_INSTANCE_RESULT,value:l.row.result},null,8,["type","value"])]),_:1}),e(r,{align:"center",label:"原因",prop:"reason"}),e(r,{align:"center",formatter:a(Q),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(r,{align:"center",label:"操作"},{default:n(l=>[e(c,{link:"",type:"primary",onClick:F=>D(l.row)},{default:n(()=>t[6]||(t[6]=[u("详情")])),_:2},1032,["onClick"]),e(c,{link:"",type:"primary",onClick:F=>N(l.row)},{default:n(()=>t[7]||(t[7]=[u("流程")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,a(d)]]),e($,{limit:a(o).pageSize,"onUpdate:limit":t[2]||(t[2]=l=>a(o).pageSize=l),page:a(o).pageNo,"onUpdate:page":t[3]||(t[3]=l=>a(o).pageNo=l),total:a(g),onPagination:m},null,8,["limit","page","total"])]),_:1}),e(X,{ref_key:"detailRef",ref:k,onSuccess:m},null,512)],64)}}});export{se as default};
