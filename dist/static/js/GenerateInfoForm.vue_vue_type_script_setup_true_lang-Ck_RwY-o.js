/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{d as $,r as w,f as K,Y as W,b as z,a as t,g as m,k as b,o as u,m as e,j as l,l as U,c as v,n as I,F as T,i as r,v as s,K as H}from"./index-D3eRVKjp.js";import{a as Q}from"./index-iSQu3qbj.js";import{g as X}from"./index-BBS3q2cU.js";import{c as E,D as c}from"./dict-CqgorI4d.js";import{h as Z}from"./tree-vSlcEeQq.js";import{r as f}from"./formRules-Dx7KOm_Z.js";const ae=$({name:"InfraCodegenGenerateInfoForm",__name:"GenerateInfoForm",props:{table:{type:Object,default:()=>null},columns:{type:Array,default:()=>null}},setup(F,{expose:S}){const k=F,q=w(),a=w({templateType:null,frontType:null,scene:null,moduleName:"",businessName:"",className:"",classComment:"",parentMenuId:null,genPath:"",genType:"",masterTableId:void 0,subJoinColumnId:void 0,subJoinMany:void 0,treeParentColumnId:void 0,treeNameColumnId:void 0}),x=K({templateType:[f],frontType:[f],scene:[f],moduleName:[f],businessName:[f],businessPackage:[f],className:[f],classComment:[f],masterTableId:[f],subJoinColumnId:[f],subJoinMany:[f],treeParentColumnId:[f],treeNameColumnId:[f]}),M=w([]),J=w([]),O={label:"name"};return W(()=>k.table,async y=>{y&&(a.value=y,y.dataSourceConfigId>=0&&(M.value=await Q(a.value.dataSourceConfigId)))},{deep:!0,immediate:!0}),z(async()=>{try{const y=await X();J.value=Z(y)}catch(y){console.log(y)}}),S({validate:async()=>t(q)?.validate()}),(y,n)=>{const V=m("el-option"),C=m("el-select"),p=m("el-form-item"),d=m("el-col"),i=H,_=m("el-tooltip"),R=m("el-tree-select"),g=m("el-input"),A=m("el-button"),G=m("el-dropdown-item"),B=m("el-dropdown-menu"),L=m("el-dropdown"),P=m("el-row"),D=m("el-radio"),Y=m("el-radio-group"),j=m("el-form");return u(),b(j,{ref_key:"formRef",ref:q,"label-width":"150px",model:t(a),rules:t(x)},{default:e(()=>[l(P,null,{default:e(()=>[l(d,{span:12},{default:e(()=>[l(p,{label:"生成模板",prop:"templateType"},{default:e(()=>[l(C,{modelValue:t(a).templateType,"onUpdate:modelValue":n[0]||(n[0]=o=>t(a).templateType=o)},{default:e(()=>[(u(!0),v(T,null,I(t(E)(t(c).INFRA_CODEGEN_TEMPLATE_TYPE),o=>(u(),b(V,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{label:"前端类型",prop:"frontType"},{default:e(()=>[l(C,{modelValue:t(a).frontType,"onUpdate:modelValue":n[1]||(n[1]=o=>t(a).frontType=o)},{default:e(()=>[(u(!0),v(T,null,I(t(E)(t(c).INFRA_CODEGEN_FRONT_TYPE),o=>(u(),b(V,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{label:"生成场景",prop:"scene"},{default:e(()=>[l(C,{modelValue:t(a).scene,"onUpdate:modelValue":n[2]||(n[2]=o=>t(a).scene=o)},{default:e(()=>[(u(!0),v(T,null,I(t(E)(t(c).INFRA_CODEGEN_SCENE),o=>(u(),b(V,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,null,{label:e(()=>[r("span",null,[n[15]||(n[15]=s(" 上级菜单 ")),l(_,{content:"分配到指定菜单下，例如 系统管理",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(R,{modelValue:t(a).parentMenuId,"onUpdate:modelValue":n[3]||(n[3]=o=>t(a).parentMenuId=o),"check-strictly":"",data:t(J),"node-key":"id",placeholder:"请选择系统菜单",props:O},null,8,["modelValue","data"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"moduleName"},{label:e(()=>[r("span",null,[n[16]||(n[16]=s(" 模块名 ")),l(_,{content:"模块名，即一级目录，例如 system、infra、tool 等等",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(g,{modelValue:t(a).moduleName,"onUpdate:modelValue":n[4]||(n[4]=o=>t(a).moduleName=o)},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"businessName"},{label:e(()=>[r("span",null,[n[17]||(n[17]=s(" 业务名 ")),l(_,{content:"业务名，即二级目录，例如 user、permission、dict 等等",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(g,{modelValue:t(a).businessName,"onUpdate:modelValue":n[5]||(n[5]=o=>t(a).businessName=o)},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"className"},{label:e(()=>[r("span",null,[n[18]||(n[18]=s(" 类名称 ")),l(_,{content:"类名称（首字母大写），例如SysUser、SysMenu、SysDictData 等等",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(g,{modelValue:t(a).className,"onUpdate:modelValue":n[6]||(n[6]=o=>t(a).className=o)},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"classComment"},{label:e(()=>[r("span",null,[n[19]||(n[19]=s(" 类描述 ")),l(_,{content:"用作类描述，例如 用户",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(g,{modelValue:t(a).classComment,"onUpdate:modelValue":n[7]||(n[7]=o=>t(a).classComment=o)},null,8,["modelValue"])]),_:1})]),_:1}),t(a).genType==="1"?(u(),b(d,{key:0,span:24},{default:e(()=>[l(p,{prop:"genPath"},{label:e(()=>[r("span",null,[n[20]||(n[20]=s(" 自定义路径 ")),l(_,{content:"填写磁盘绝对路径，若不填写，则生成到当前Web项目下",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(g,{modelValue:t(a).genPath,"onUpdate:modelValue":n[9]||(n[9]=o=>t(a).genPath=o)},{append:e(()=>[l(L,null,{dropdown:e(()=>[l(B,null,{default:e(()=>[l(G,{onClick:n[8]||(n[8]=o=>t(a).genPath="/")},{default:e(()=>n[22]||(n[22]=[s("恢复默认的生成基础路径")])),_:1})]),_:1})]),default:e(()=>[l(A,{type:"primary"},{default:e(()=>n[21]||(n[21]=[s(" 最近路径快速选择 "),r("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):U("",!0)]),_:1}),t(a).templateType==2?(u(),b(P,{key:0},{default:e(()=>[l(d,{span:24},{default:e(()=>n[23]||(n[23]=[r("h4",{class:"form-header"},"树表信息",-1)])),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"treeParentColumnId"},{label:e(()=>[r("span",null,[n[24]||(n[24]=s(" 父编号字段 ")),l(_,{content:"树显示的父编码字段名， 如：parent_Id",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(C,{modelValue:t(a).treeParentColumnId,"onUpdate:modelValue":n[10]||(n[10]=o=>t(a).treeParentColumnId=o),placeholder:"请选择"},{default:e(()=>[(u(!0),v(T,null,I(k.columns,(o,N)=>(u(),b(V,{key:N,label:o.columnName+"："+o.columnComment,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"treeNameColumnId"},{label:e(()=>[r("span",null,[n[25]||(n[25]=s(" 树名称字段 ")),l(_,{content:"树节点的显示名称字段名， 如：dept_name",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(C,{modelValue:t(a).treeNameColumnId,"onUpdate:modelValue":n[11]||(n[11]=o=>t(a).treeNameColumnId=o),placeholder:"请选择"},{default:e(()=>[(u(!0),v(T,null,I(k.columns,(o,N)=>(u(),b(V,{key:N,label:o.columnName+"："+o.columnComment,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})):U("",!0),t(a).templateType==15?(u(),b(P,{key:1},{default:e(()=>[l(d,{span:24},{default:e(()=>n[26]||(n[26]=[r("h4",{class:"form-header"},"主表信息",-1)])),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"masterTableId"},{label:e(()=>[r("span",null,[n[27]||(n[27]=s(" 关联的主表 ")),l(_,{content:"关联主表（父表）的表名， 如：system_user",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(C,{modelValue:t(a).masterTableId,"onUpdate:modelValue":n[12]||(n[12]=o=>t(a).masterTableId=o),placeholder:"请选择"},{default:e(()=>[(u(!0),v(T,null,I(t(M),(o,N)=>(u(),b(V,{key:N,label:o.tableName+"："+o.tableComment,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"subJoinColumnId"},{label:e(()=>[r("span",null,[n[28]||(n[28]=s(" 子表关联的字段 ")),l(_,{content:"子表关联的字段， 如：user_id",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(C,{modelValue:t(a).subJoinColumnId,"onUpdate:modelValue":n[13]||(n[13]=o=>t(a).subJoinColumnId=o),placeholder:"请选择"},{default:e(()=>[(u(!0),v(T,null,I(k.columns,(o,N)=>(u(),b(V,{key:N,label:o.columnName+"："+o.columnComment,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(p,{prop:"subJoinMany"},{label:e(()=>[r("span",null,[n[29]||(n[29]=s(" 关联关系 ")),l(_,{content:"主表与子表的关联关系",placement:"top"},{default:e(()=>[l(i,{icon:"ep:question-filled"})]),_:1})])]),default:e(()=>[l(Y,{modelValue:t(a).subJoinMany,"onUpdate:modelValue":n[14]||(n[14]=o=>t(a).subJoinMany=o),placeholder:"请选择"},{default:e(()=>[l(D,{label:!0},{default:e(()=>n[30]||(n[30]=[s("一对多")])),_:1}),l(D,{label:!1},{default:e(()=>n[31]||(n[31]=[s("一对一")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})):U("",!0)]),_:1},8,["model","rules"])}}});export{ae as _};
