/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{_ as k}from"./Echart.vue_vue_type_script_setup_true_lang-BJDeuy8Q.js";import{d as O,r as x,f as P,x as l,b as D,g as f,k as v,o as h,m,j as y,a as u,i as C,y as V,c as A,F as M,n as B,v as R,t as $,c5 as s,c6 as c}from"./index-BdC40rFX.js";import{a as j}from"./trade-slh0xfp0.js";import{C as L}from"./CardTitle-DEJ7SaJP.js";const N={class:"flex flex-row items-center justify-between"},E={class:"flex flex-row items-center gap-2"},X=O({name:"TradeTrendCard",__name:"TradeTrendCard",setup(F){const o=x(1),_=x(!0),g=new Map().set(1,{name:"30天",series:[{name:"订单金额",type:"bar",smooth:!0,data:[]},{name:"订单数量",type:"line",smooth:!0,data:[]}]}).set(7,{name:"周",series:[{name:"上周金额",type:"bar",smooth:!0,data:[]},{name:"本周金额",type:"bar",smooth:!0,data:[]},{name:"上周数量",type:"line",smooth:!0,data:[]},{name:"本周数量",type:"line",smooth:!0,data:[]}]}).set(30,{name:"月",series:[{name:"上月金额",type:"bar",smooth:!0,data:[]},{name:"本月金额",type:"bar",smooth:!0,data:[]},{name:"上月数量",type:"line",smooth:!0,data:[]},{name:"本月数量",type:"line",smooth:!0,data:[]}]}).set(365,{name:"年",series:[{name:"去年金额",type:"bar",smooth:!0,data:[]},{name:"今年金额",type:"bar",smooth:!0,data:[]},{name:"去年数量",type:"line",smooth:!0,data:[]},{name:"今年数量",type:"line",smooth:!0,data:[]}]}),n=P({grid:{left:20,right:20,bottom:20,top:80,containLabel:!0},legend:{top:50,data:[]},series:[],toolbox:{feature:{dataZoom:{yAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"订单量趋势"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},xAxis:{type:"category",inverse:!0,boundaryGap:!1,axisTick:{show:!1},data:[],axisLabel:{formatter:e=>{let a;switch(o.value){case 1:return l(e,"MM-DD");case 7:return a=l(e,"ddd"),a=="0"?"周日":`周${a}`;case 30:return l(e,"D");case 365:return`${l(e,"M")}月`;default:return e}}}},yAxis:{axisTick:{show:!1}}}),b=async()=>{let e,a;switch(o.value){case 7:e=s().startOf("week"),a=s().endOf("week");break;case 30:e=s().startOf("month"),a=s().endOf("month");break;case 365:e=s().startOf("year"),a=s().endOf("year");break;case 1:default:e=s().subtract(30,"day").startOf("d"),a=s().endOf("d");break}await w(e,a)},w=async(e,a)=>{_.value=!0;const p=await j(o.value,e,a),d=[],t=[...g.get(o.value).series];for(const r of p)d.push(r.value.date),t.length===2?(t[0].data.push(c(r?.value?.orderPayPrice||0)),t[1].data.push(c(r?.value?.orderPayCount||0))):(t[0].data.push(c(r?.reference?.orderPayPrice||0)),t[1].data.push(c(r?.value?.orderPayPrice||0)),t[2].data.push(r?.reference?.orderPayCount||0),t[3].data.push(r?.value?.orderPayCount||0));n.xAxis.data=d,n.series=t,n.legend.data=t.map(r=>r.name),_.value=!1};return D(()=>{b()}),(e,a)=>{const p=f("el-radio-button"),d=f("el-radio-group"),t=k,r=f("el-card");return h(),v(r,{shadow:"never"},{header:m(()=>[C("div",N,[y(u(L),{title:"交易量趋势"}),C("div",E,[y(d,{modelValue:u(o),"onUpdate:modelValue":a[0]||(a[0]=i=>V(o)?o.value=i:null),onChange:b},{default:m(()=>[(h(!0),A(M,null,B(u(g).entries(),([i,T])=>(h(),v(p,{key:i,label:i},{default:m(()=>[R($(T.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])])]),default:m(()=>[y(t,{height:300,options:u(n)},null,8,["options"])]),_:1})}}});export{X as _};
