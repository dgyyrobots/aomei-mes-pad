/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:21:26 
 */
import{d as O,r as i,f as q,g as r,h as $,k as _,o as d,m as s,w as Y,a,j as o,c as k,F as C,n as U,v,t as j,y as z,_ as H,N as G,z as J}from"./index-5TqN_QR1.js";import{g as Q,c as W,u as X}from"./index-CYDhTmeD.js";import{C as D}from"./constants-BPQb3nxh.js";import{a as Z,D as E,c as h}from"./dict-B2yk4gHf.js";const re=O({name:"SystemSmsChannelForm",__name:"SmsChannelForm",emits:["success"],setup(ee,{expose:A,emit:w}){const{t:g}=G(),b=J(),n=i(!1),V=i(""),m=i(!1),S=i(""),t=i({id:void 0,signature:"",code:"",status:D.ENABLE,remark:"",apiKey:"",apiSecret:"",callbackUrl:""}),I=q({signature:[{required:!0,message:"短信签名不能为空",trigger:"blur"}],code:[{required:!0,message:"渠道编码不能为空",trigger:"blur"}],status:[{required:!0,message:"启用状态不能为空",trigger:"blur"}],apiKey:[{required:!0,message:"短信 API 的账号不能为空",trigger:"blur"}]}),c=i();A({open:async(f,e)=>{if(n.value=!0,V.value=g(`action.${f}`),S.value=f,F(),e){m.value=!0;try{t.value=await Q(e),console.log(t)}finally{m.value=!1}}}});const N=w,T=async()=>{if(!(!c||!await c.value.validate())){m.value=!0;try{const e=t.value;S.value==="create"?(await W(e),b.success(g("common.createSuccess"))):(await X(e),b.success(g("common.updateSuccess"))),n.value=!1,N("success")}finally{m.value=!1}}},F=()=>{t.value={id:void 0,signature:"",code:"",status:D.ENABLE,remark:"",apiKey:"",apiSecret:"",callbackUrl:""},c.value?.resetFields()};return(f,e)=>{const p=r("el-input"),u=r("el-form-item"),L=r("el-option"),x=r("el-select"),K=r("el-radio"),P=r("el-radio-group"),R=r("el-form"),y=r("el-button"),B=H,M=$("loading");return d(),_(B,{modelValue:a(n),"onUpdate:modelValue":e[8]||(e[8]=l=>z(n)?n.value=l:null),title:a(V)},{footer:s(()=>[o(y,{disabled:a(m),type:"primary",onClick:T},{default:s(()=>e[9]||(e[9]=[v("确 定")])),_:1},8,["disabled"]),o(y,{onClick:e[7]||(e[7]=l=>n.value=!1)},{default:s(()=>e[10]||(e[10]=[v("取 消")])),_:1})]),default:s(()=>[Y((d(),_(R,{ref_key:"formRef",ref:c,"label-width":"130px",model:a(t),rules:a(I)},{default:s(()=>[o(u,{label:"短信签名",prop:"signature"},{default:s(()=>[o(p,{modelValue:a(t).signature,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).signature=l),placeholder:"请输入短信签名"},null,8,["modelValue"])]),_:1}),o(u,{label:"渠道编码",prop:"code"},{default:s(()=>[o(x,{modelValue:a(t).code,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).code=l),clearable:"",placeholder:"请选择渠道编码"},{default:s(()=>[(d(!0),k(C,null,U(a(Z)(a(E).SYSTEM_SMS_CHANNEL_CODE),l=>(d(),_(L,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"启用状态"},{default:s(()=>[o(P,{modelValue:a(t).status,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).status=l)},{default:s(()=>[(d(!0),k(C,null,U(a(h)(a(E).COMMON_STATUS),l=>(d(),_(K,{key:l.value,label:l.value},{default:s(()=>[v(j(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"备注",prop:"remark"},{default:s(()=>[o(p,{modelValue:a(t).remark,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).remark=l),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),o(u,{label:"短信 API 的账号",prop:"apiKey"},{default:s(()=>[o(p,{modelValue:a(t).apiKey,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).apiKey=l),placeholder:"请输入短信 API 的账号"},null,8,["modelValue"])]),_:1}),o(u,{label:"短信 API 的密钥",prop:"apiSecret"},{default:s(()=>[o(p,{modelValue:a(t).apiSecret,"onUpdate:modelValue":e[5]||(e[5]=l=>a(t).apiSecret=l),placeholder:"请输入短信 API 的密钥"},null,8,["modelValue"])]),_:1}),o(u,{label:"短信发送回调 URL",prop:"callbackUrl"},{default:s(()=>[o(p,{modelValue:a(t).callbackUrl,"onUpdate:modelValue":e[6]||(e[6]=l=>a(t).callbackUrl=l),placeholder:"请输入短信发送回调 URL"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[M,a(m)]])]),_:1},8,["modelValue","title"])}}});export{re as _};
