/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{_ as N}from"./ContentWrap.vue_vue_type_script_setup_true_lang-58zNwBTb.js";import{d as T,r as d,f as M,b as Q,g as n,h as V,c as S,o as c,j as t,m as o,a as l,J as j,w as p,v as m,K as z,k as f,L as E,F as J,z as U,N as W}from"./index-BW9ifGp0.js";import{_ as A}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-Df7c27ua.js";import{g as G,d as H}from"./index-DthlJIAh.js";import{h as O}from"./tree-vSlcEeQq.js";const ae=T({name:"CrmProductCategory",__name:"index",setup(X){const C=U(),{t:R}=W(),_=d(!0),b=d([]),i=M({name:null}),w=d(),u=async()=>{_.value=!0;try{const a=await G(i);b.value=O(a,"id","parentId")}finally{_.value=!1}},y=()=>{u()},h=()=>{w.value.resetFields(),y()},x=d(),F=(a,e)=>{x.value.open(a,e)},q=async a=>{try{await C.delConfirm(),await H(a),C.success(R("common.delSuccess")),await u()}catch(e){console.log(e)}};return Q(()=>{u()}),(a,e)=>{const B=n("el-input"),P=n("el-form-item"),g=z,r=n("el-button"),D=n("el-form"),$=N,k=n("el-table-column"),I=n("el-table"),v=V("hasPermi"),K=V("loading");return c(),S(J,null,[t($,null,{default:o(()=>[t(D,{ref_key:"queryFormRef",ref:w,class:"-mb-15px",inline:!0,"label-width":"68px",model:l(i)},{default:o(()=>[t(P,{label:"名称",prop:"name"},{default:o(()=>[t(B,{modelValue:l(i).name,"onUpdate:modelValue":e[0]||(e[0]=s=>l(i).name=s),class:"!w-240px",clearable:"",placeholder:"请输入名称",onKeyup:j(y,["enter"])},null,8,["modelValue"])]),_:1}),t(P,null,{default:o(()=>[t(r,{onClick:y},{default:o(()=>[t(g,{class:"mr-5px",icon:"ep:search"}),e[2]||(e[2]=m(" 搜索 "))]),_:1}),t(r,{onClick:h},{default:o(()=>[t(g,{class:"mr-5px",icon:"ep:refresh"}),e[3]||(e[3]=m(" 重置 "))]),_:1}),p((c(),f(r,{plain:"",type:"primary",onClick:e[1]||(e[1]=s=>F("create"))},{default:o(()=>[t(g,{class:"mr-5px",icon:"ep:plus"}),e[4]||(e[4]=m(" 新增 "))]),_:1})),[[v,["crm:product-category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t($,null,{default:o(()=>[p((c(),f(I,{data:l(b),"default-expand-all":"","row-key":"id"},{default:o(()=>[t(k,{align:"center",label:"名称",prop:"name"}),t(k,{align:"center",formatter:l(E),label:"创建时间",prop:"createTime",width:"180px"},null,8,["formatter"]),t(k,{align:"center",label:"操作"},{default:o(s=>[p((c(),f(r,{link:"",type:"primary",onClick:L=>F("update",s.row.id)},{default:o(()=>e[5]||(e[5]=[m(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["crm:product-category:update"]]]),p((c(),f(r,{link:"",type:"danger",onClick:L=>q(s.row.id)},{default:o(()=>e[6]||(e[6]=[m("删除")])),_:2},1032,["onClick"])),[[v,["crm:product-category:delete"]]])]),_:1})]),_:1},8,["data"])),[[K,l(_)]])]),_:1}),t(A,{ref_key:"formRef",ref:x,onSuccess:u},null,512)],64)}}});export{ae as default};
