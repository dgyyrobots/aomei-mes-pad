/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{_ as E}from"./ComponentContainerProperty-ubP-j_gT.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-BYuwSQY-.js";import{_ as j}from"./UploadImg-4wNAuvFS.js";import{d as D,az as M,dB as K,r as C,Y as T,c as _,o as m,i as A,F as w,n as B,q as I,p as L,j as r,K as O,a as i,l as F,v as R,t as Y,A as G,g as U,k as J,m as v}from"./index-FPuwcz_Y.js";import{u as Q}from"./index-DRYgfchL.js";import"./index-C-SJSUs5.js";import"./color-B5phLuB-.js";import"./index-DEp92naw.js";import"./vuedraggable.umd-DfBNae3x.js";const W=(t,u)=>t.left<u.left+u.width&&t.left+t.width>u.left&&t.top<u.top+u.height&&t.height+t.top>u.top,X=(t,u)=>u.x>=t.left&&u.x<t.right&&u.y>=t.top&&u.y<t.bottom,N=(t,u)=>{const[d,c]=[t.x,u.x].sort(),[o,p]=[t.y,u.y].sort(),b=c+1,g=p+1,n=g-o,x=b-d;return{left:d,right:b,top:o,bottom:g,height:n,width:x}},Z={class:"relative"},ee={class:"cube-table"},te=["onClick","onMouseenter"],oe=["onClick"],le=["onClick"],ne=D({name:"MagicCubeEditor",__name:"index",props:{modelValue:K().isRequired,rows:M.number.def(4),cols:M.number.def(4),cubeSize:M.number.def(75)},emits:["update:modelValue","hotAreaSelected"],setup(t,{emit:u}){const d=t,c=C([]);T(()=>[d.rows,d.cols],()=>{if(c.value=[],!(!d.rows||!d.cols))for(let s=0;s<d.rows;s++){c.value[s]=[];for(let e=0;e<d.cols;e++)c.value[s].push({x:e,y:s,active:!1})}},{immediate:!0});const o=C([]);T(()=>d.modelValue,()=>o.value=d.modelValue||[],{immediate:!0});const p=C(),b=()=>!!p.value,g=(s,e)=>{const l=c.value[s][e];if(!b()){p.value=l,p.value.active=!0;return}o.value.push(N(p.value,l)),h();const a=o.value.length-1;$(o.value[a],a),S()},n=(s,e)=>{if(!b())return;const l=N(p.value,c.value[s][e]);for(const a of o.value)if(W(a,l)){h();return}z((a,f,y)=>{y.active=X(l,y)})},x=s=>{o.value.splice(s,1),h(),S()},k=u,S=()=>k("update:modelValue",o),V=C(-1),$=(s,e)=>{V.value=e,k("hotAreaSelected",s,e)};function h(){z((s,e,l)=>{l.active&&(l.active=!1)}),p.value=void 0}const z=s=>{for(let e=0;e<c.value.length;e++)for(let l=0;l<c.value[e].length;l++)s(e,l,c.value[e][l])};return(s,e)=>{const l=O;return m(),_("div",Z,[A("table",ee,[A("tbody",null,[(m(!0),_(w,null,B(i(c),(a,f)=>(m(),_("tr",{key:f},[(m(!0),_(w,null,B(a,(y,H)=>(m(),_("td",{key:H,class:L(["cube",{active:y.active}]),style:I({width:`${t.cubeSize}px`,height:`${t.cubeSize}px`}),onClick:q=>g(f,H),onMouseenter:q=>n(f,H)},[r(l,{icon:"ep-plus"})],46,te))),128))]))),128))]),(m(!0),_(w,null,B(i(o),(a,f)=>(m(),_("div",{key:f,class:"hot-area",style:I({top:`${t.cubeSize*a.top}px`,left:`${t.cubeSize*a.left}px`,height:`${t.cubeSize*a.height}px`,width:`${t.cubeSize*a.width}px`}),onClick:y=>$(a,f),onMouseover:h},[i(V)===f?(m(),_("div",{key:0,class:"btn-delete",onClick:y=>x(f)},[r(l,{icon:"ep:circle-close-filled"})],8,le)):F("",!0),R(" "+Y(`${a.width}×${a.height}`),1)],44,oe))),128))])])}}}),se=G(ne,[["__scopeId","data-v-1741b854"]]),fe=D({name:"MagicCubeProperty",__name:"property",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:u}){const d=t,c=u,{formData:o}=Q(d.modelValue,c),p=C(-1),b=(g,n)=>{p.value=n};return(g,n)=>{const x=U("el-text"),k=se,S=j,V=U("el-form-item"),$=P,h=U("el-slider"),z=U("el-form"),s=E;return m(),J(s,{modelValue:i(o).style,"onUpdate:modelValue":n[4]||(n[4]=e=>i(o).style=e)},{default:v(()=>[r(z,{class:"m-t-8px","label-width":"80px",model:i(o)},{default:v(()=>[r(x,{tag:"p"},{default:v(()=>n[5]||(n[5]=[R("魔方设置")])),_:1}),r(x,{size:"small",type:"info"},{default:v(()=>n[6]||(n[6]=[R("每格尺寸187 * 187")])),_:1}),r(k,{modelValue:i(o).list,"onUpdate:modelValue":n[0]||(n[0]=e=>i(o).list=e),class:"m-y-16px",cols:4,rows:4,onHotAreaSelected:b},null,8,["modelValue"]),(m(!0),_(w,null,B(i(o).list,(e,l)=>(m(),_(w,{key:l},[i(p)===l?(m(),_(w,{key:0},[r(V,{label:"上传图片",prop:`list[${l}].imgUrl`},{default:v(()=>[r(S,{modelValue:e.imgUrl,"onUpdate:modelValue":a=>e.imgUrl=a,height:"80px",width:"80px"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),r(V,{label:"链接",prop:`list[${l}].url`},{default:v(()=>[r($,{modelValue:e.url,"onUpdate:modelValue":a=>e.url=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])],64)):F("",!0)],64))),128)),r(V,{label:"上圆角",prop:"borderRadiusTop"},{default:v(()=>[r(h,{modelValue:i(o).borderRadiusTop,"onUpdate:modelValue":n[1]||(n[1]=e=>i(o).borderRadiusTop=e),"input-size":"small",max:100,min:0,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]),_:1}),r(V,{label:"下圆角",prop:"borderRadiusBottom"},{default:v(()=>[r(h,{modelValue:i(o).borderRadiusBottom,"onUpdate:modelValue":n[2]||(n[2]=e=>i(o).borderRadiusBottom=e),"input-size":"small",max:100,min:0,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]),_:1}),r(V,{label:"间隔",prop:"space"},{default:v(()=>[r(h,{modelValue:i(o).space,"onUpdate:modelValue":n[3]||(n[3]=e=>i(o).space=e),"input-size":"small",max:100,min:0,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{fe as default};
