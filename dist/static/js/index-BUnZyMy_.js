/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-14 11:54:00 
 */
import{d as J,r as u,f as W,b as X,g as i,h as $,c as Y,o as p,j as e,m as a,a as o,J as E,F as S,n as Z,k as c,w as g,v as d,K as h,L as ee,M as le,z as te,N as oe}from"./index-BdmDrM2Y.js";import{_ as ae}from"./DictTag.vue_vue_type_script_lang-bjcRCBWf.js";import{_ as ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CIA3YA7G.js";import{_ as re}from"./index-63l7YclF.js";import{_ as se}from"./ConfigForm.vue_vue_type_script_setup_true_lang-Bmdniqcn.js";import{a as ie,d as pe,e as me}from"./index-B-w9bHm9.js";import{c as ue,D as C}from"./dict-Cm-9nniQ.js";import{d as ce}from"./download-U6qaYcnP.js";import"./color-B5phLuB-.js";const Ce=J({name:"InfraConfig",__name:"index",setup(de){const w=te(),{t:U}=oe(),k=u(!0),N=u(0),V=u([]),n=W({pageNo:1,pageSize:10,name:void 0,key:void 0,type:void 0,createTime:[]}),F=u(),x=u(!1),f=async()=>{k.value=!0;try{const r=await ie(n);V.value=r.list,N.value=r.total}finally{k.value=!1}},y=()=>{n.pageNo=1,f()},L=()=>{F.value.resetFields(),y()},I=u(),T=(r,l)=>{I.value.open(r,l)},M=async r=>{try{await w.delConfirm(),await pe(r),w.success(U("common.delSuccess")),await f()}catch(l){console.log(l)}},O=async()=>{try{await w.exportConfirm(),x.value=!0;const r=await me(n);ce.excel(r,"参数配置.xls")}catch(r){console.log(r)}finally{x.value=!1}};return X(()=>{f()}),(r,l)=>{const z=re,D=i("el-input"),_=i("el-form-item"),A=i("el-option"),B=i("el-select"),K=i("el-date-picker"),v=h,m=i("el-button"),q=i("el-form"),P=ne,s=i("el-table-column"),R=ae,G=i("el-table"),H=le,b=$("hasPermi"),Q=$("loading");return p(),Y(S,null,[e(z,{title:"配置中心",url:"https://doc.iocoder.cn/config-center/"}),e(P,null,{default:a(()=>[e(q,{ref_key:"queryFormRef",ref:F,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(n)},{default:a(()=>[e(_,{label:"参数名称",prop:"name"},{default:a(()=>[e(D,{modelValue:o(n).name,"onUpdate:modelValue":l[0]||(l[0]=t=>o(n).name=t),class:"!w-240px",clearable:"",placeholder:"请输入参数名称",onKeyup:E(y,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"参数键名",prop:"key"},{default:a(()=>[e(D,{modelValue:o(n).key,"onUpdate:modelValue":l[1]||(l[1]=t=>o(n).key=t),class:"!w-240px",clearable:"",placeholder:"请输入参数键名",onKeyup:E(y,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"系统内置",prop:"type"},{default:a(()=>[e(B,{modelValue:o(n).type,"onUpdate:modelValue":l[2]||(l[2]=t=>o(n).type=t),class:"!w-240px",clearable:"",placeholder:"请选择系统内置"},{default:a(()=>[(p(!0),Y(S,null,Z(o(ue)(o(C).INFRA_CONFIG_TYPE),t=>(p(),c(A,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"创建时间",prop:"createTime"},{default:a(()=>[e(K,{modelValue:o(n).createTime,"onUpdate:modelValue":l[3]||(l[3]=t=>o(n).createTime=t),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(_,null,{default:a(()=>[e(m,{onClick:y},{default:a(()=>[e(v,{class:"mr-5px",icon:"ep:search"}),l[7]||(l[7]=d(" 搜索 "))]),_:1}),e(m,{onClick:L},{default:a(()=>[e(v,{class:"mr-5px",icon:"ep:refresh"}),l[8]||(l[8]=d(" 重置 "))]),_:1}),g((p(),c(m,{plain:"",type:"primary",onClick:l[4]||(l[4]=t=>T("create"))},{default:a(()=>[e(v,{class:"mr-5px",icon:"ep:plus"}),l[9]||(l[9]=d(" 新增 "))]),_:1})),[[b,["infra:config:create"]]]),g((p(),c(m,{loading:o(x),plain:"",type:"success",onClick:O},{default:a(()=>[e(v,{class:"mr-5px",icon:"ep:download"}),l[10]||(l[10]=d(" 导出 "))]),_:1},8,["loading"])),[[b,["infra:config:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(P,null,{default:a(()=>[g((p(),c(G,{data:o(V)},{default:a(()=>[e(s,{align:"center",label:"参数主键",prop:"id"}),e(s,{align:"center",label:"参数分类",prop:"category"}),e(s,{align:"center",label:"参数名称",prop:"name","show-overflow-tooltip":!0}),e(s,{align:"center",label:"参数键名",prop:"key","show-overflow-tooltip":!0}),e(s,{align:"center",label:"参数键值",prop:"value"}),e(s,{align:"center",label:"是否可见",prop:"visible"},{default:a(t=>[e(R,{type:o(C).INFRA_BOOLEAN_STRING,value:t.row.visible},null,8,["type","value"])]),_:1}),e(s,{align:"center",label:"系统内置",prop:"type"},{default:a(t=>[e(R,{type:o(C).INFRA_CONFIG_TYPE,value:t.row.type},null,8,["type","value"])]),_:1}),e(s,{align:"center",label:"备注",prop:"remark","show-overflow-tooltip":!0}),e(s,{align:"center",formatter:o(ee),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",label:"操作"},{default:a(t=>[g((p(),c(m,{link:"",type:"primary",onClick:j=>T("update",t.row.id)},{default:a(()=>l[11]||(l[11]=[d("编辑")])),_:2},1032,["onClick"])),[[b,["infra:config:update"]]]),g((p(),c(m,{link:"",type:"danger",onClick:j=>M(t.row.id)},{default:a(()=>l[12]||(l[12]=[d("删除")])),_:2},1032,["onClick"])),[[b,["infra:config:delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,o(k)]]),e(H,{limit:o(n).pageSize,"onUpdate:limit":l[5]||(l[5]=t=>o(n).pageSize=t),page:o(n).pageNo,"onUpdate:page":l[6]||(l[6]=t=>o(n).pageNo=t),total:o(N),onPagination:f},null,8,["limit","page","total"])]),_:1}),e(se,{ref_key:"formRef",ref:I,onSuccess:f},null,512)],64)}}});export{Ce as default};
