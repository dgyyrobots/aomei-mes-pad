/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 14:15:15 
 */
import{a as U}from"./index-H0Ln9n2h.js";import{d as q,r as p,f as F,Y as R,g as n,h as $,c as j,o as h,F as L,w as N,j as e,a as r,k as A,m as t,v as w}from"./index-D3eRVKjp.js";const z=q({__name:"Demo03CourseForm",props:{studentId:{}},setup(x,{expose:V}){const _=x,m=p(!1),o=p([]),i=F({studentId:[{required:!0,message:"学生编号不能为空",trigger:"blur"}],name:[{required:!0,message:"名字不能为空",trigger:"blur"}],score:[{required:!0,message:"分数不能为空",trigger:"blur"}]}),f=p();R(()=>_.studentId,async l=>{if(o.value=[],!!l)try{m.value=!0,o.value=await U(l)}finally{m.value=!1}},{immediate:!0});const k=()=>{const l={id:void 0,studentId:void 0,name:void 0,score:void 0};l.studentId=_.studentId,o.value.push(l)},C=l=>{o.value.splice(l,1)};return V({validate:()=>f.value.validate(),getData:()=>o.value}),(l,s)=>{const d=n("el-table-column"),v=n("el-input"),g=n("el-form-item"),b=n("el-button"),D=n("el-table"),y=n("el-form"),I=n("el-row"),B=$("loading");return h(),j(L,null,[N((h(),A(y,{ref_key:"formRef",ref:f,"inline-message":!0,"label-width":"0px",model:r(o),rules:r(i)},{default:t(()=>[e(D,{class:"-mt-10px",data:r(o)},{default:t(()=>[e(d,{label:"序号",type:"index",width:"100"}),e(d,{label:"名字","min-width":"150"},{default:t(({row:a,$index:u})=>[e(g,{class:"mb-0px!",prop:`${u}.name`,rules:r(i).name},{default:t(()=>[e(v,{modelValue:a.name,"onUpdate:modelValue":c=>a.name=c,placeholder:"请输入名字"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(d,{label:"分数","min-width":"150"},{default:t(({row:a,$index:u})=>[e(g,{class:"mb-0px!",prop:`${u}.score`,rules:r(i).score},{default:t(()=>[e(v,{modelValue:a.score,"onUpdate:modelValue":c=>a.score=c,placeholder:"请输入分数"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(d,{align:"center",fixed:"right",label:"操作",width:"60"},{default:t(({$index:a})=>[e(b,{link:"",onClick:u=>C(a)},{default:t(()=>s[0]||(s[0]=[w("—")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model","rules"])),[[B,r(m)]]),e(I,{class:"mt-3",justify:"center"},{default:t(()=>[e(b,{round:"",onClick:k},{default:t(()=>s[1]||(s[1]=[w("+ 添加学生课程")])),_:1})]),_:1})],64)}}});export{z as _};
