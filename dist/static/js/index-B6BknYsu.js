/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{d as X,H as ee,u as te,ad as oe,W as ae,s as C,r as d,f as P,Y as se,B as ne,ae as re,b as le,af as ie,g as i,h as q,c as ce,o as f,w as m,i as u,Z as x,a as e,j as s,ag as de,ah as me,m as r,t as w,ai as l,k as h,v as N,C as ue,aj as pe,ak as fe,al as _e,am as ge,an as ve,ao as we,ap as he,aq as ye,ar as be,A as ke}from"./index-FPuwcz_Y.js";import{v as Ve}from"./Verify-Br5Ym4nD.js";const xe="/m/pad/static/png/left_img_5-B-kDM4oN.png",Ne={class:"login-container"},Me={class:"login-right-tools"},Te={class:"login-form"},Le=["src"],Be={class:"title"},Re=["src","alt"],Se={class:"title-tips"},Ce=X({name:"Login",__name:"index",setup(Pe){const M=ee(),D=te(),E=oe(),T=ae(),{theme:p}=C(E),{systemLogo:U,title:I}=C(T),y=d(!1),L=d("password"),j=d("blockPuzzle"),_=d(void 0),b=d(null),z=d(null),F=d(null),o=P({tenantName:"",username:"",password:"",captchaVerification:"",rememberMe:!1}),A=P({tenantName:[{required:!0,trigger:"blur",validator:(t,a,n)=>{a===""?n(new Error(l("租户名称不能为空"))):n()}}],username:[{required:!0,trigger:"blur",validator:(t,a,n)=>{a===""?n(new Error(l("用户名不能为空"))):n()}}],password:[{required:!0,trigger:"blur",validator:(t,a,n)=>{pe(a)?n():n(new Error(l("密码不能少于6位")))}}]}),$=()=>{const t=fe();t&&Object.assign(o,{...o,username:t.username?t.username:o.username,password:t.password?t.password:o.password,rememberMe:!!t.rememberMe,tenantName:t.tenantName?t.tenantName:o.tenantName})},H=()=>_.value==="/404"||_.value==="/403"?"/":_.value,O=async()=>{{const t=await ye(o.tenantName);be(t)}},W=async()=>{await B().catch(t=>{console.log(t)})},B=async(t={captchaVerification:null})=>{b.value&&b.value.validate(async a=>{let n=null;if(a)try{await O(),y.value=!0,o.captchaVerification=t.captchaVerification;const g=await _e(o);if(!g)return;n=ge.service({lock:!0,text:"正在加载系统中...",background:"rgba(0, 0, 0, 0.7)"}),o.rememberMe?ve(o):we(),he(g),await D.push(H())}finally{y.value=!1,n?.close()}})};return se(()=>T.getTitle,t=>{t&&(o.tenantName=t)},{immediate:!0}),ne(()=>{}),re(()=>{_.value=M.query&&M.query.redirect||"/"}),le(()=>{$()}),ie((t,a,n)=>{n()}),(t,a)=>{const n=de,g=me,k=i("vab-icon"),V=i("el-input"),v=i("el-form-item"),Y=i("el-checkbox"),R=i("el-col"),Z=i("el-link"),G=i("el-row"),J=i("el-button"),K=i("el-form"),S=q("focus"),Q=q("throttle");return f(),ce("div",Ne,[m(u("div",Me,[m(s(n,null,null,512),[[x,e(p).showColorPicker]]),m(s(g,null,null,512),[[x,e(p).showDark]])],512),[[x,e(p).showLanguage||e(p).showColorPicker||e(p).showDark]]),u("div",Te,[u("img",{alt:"",class:"left-img",src:e(xe)},null,8,Le),s(K,{ref_key:"formRef",ref:b,"label-position":"left",model:e(o),rules:e(A),onSubmit:a[4]||(a[4]=ue(()=>{},["prevent"]))},{default:r(()=>[u("div",Be,[u("img",{src:e(U),alt:e(I)},null,8,Re)]),u("div",Se,w(e(l)("生产终端登录")),1),s(v,{prop:"tenantname",class:"!hidden"},{default:r(()=>[m((f(),h(V,{modelValue:e(o).tenantName,"onUpdate:modelValue":a[0]||(a[0]=c=>e(o).tenantName=c),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("请输入租户名称"),type:"text"},{prefix:r(()=>[s(k,{icon:"home-line"})]),_:1},8,["modelValue","placeholder"])),[[S]])]),_:1}),s(v,{prop:"username"},{default:r(()=>[m((f(),h(V,{modelValue:e(o).username,"onUpdate:modelValue":a[1]||(a[1]=c=>e(o).username=c),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("请输入用户名"),type:"text"},{prefix:r(()=>[s(k,{icon:"user-line"})]),_:1},8,["modelValue","placeholder"])),[[S]])]),_:1}),s(v,{prop:"password"},{default:r(()=>[(f(),h(V,{key:e(L),ref_key:"passwordRef",ref:z,modelValue:e(o).password,"onUpdate:modelValue":a[2]||(a[2]=c=>e(o).password=c),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("请输入密码"),"show-password":"",type:e(L)},{prefix:r(()=>[s(k,{icon:"lock-line"})]),_:1},8,["modelValue","placeholder","type"]))]),_:1}),s(v,{size:"small"},{default:r(()=>[s(G,{justify:"space-between",style:{width:"100%"}},{default:r(()=>[s(R,{span:6},{default:r(()=>[s(Y,{modelValue:e(o).rememberMe,"onUpdate:modelValue":a[3]||(a[3]=c=>e(o).rememberMe=c)},{default:r(()=>[N(w(e(l)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),s(R,{offset:6,span:12},{default:r(()=>[s(Z,{style:{float:"right"},type:"primary"},{default:r(()=>[N(w(e(l)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),m((f(),h(J,{class:"login-btn",loading:e(y),"native-type":"submit",type:"primary"},{default:r(()=>[N(w(e(l)("登录")),1)]),_:1},8,["loading"])),[[Q,W]]),s(e(Ve),{ref_key:"verify",ref:F,"captcha-type":e(j),"img-size":{width:"400px",height:"200px"},mode:"pop",onSuccess:B},null,8,["captcha-type"])]),_:1},8,["model","rules"])])])}}}),je=ke(Ce,[["__scopeId","data-v-157c99e3"]]);export{je as default};
