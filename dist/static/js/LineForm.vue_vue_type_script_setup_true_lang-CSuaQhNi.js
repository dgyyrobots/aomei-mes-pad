/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as B,r as p,f as Y,g as m,h as z,c as T,o as _,F as Q,j as e,_ as K,a,y as X,m as o,w as A,k as U,K as G,n as H,v as M,N as J,z as W}from"./index-BdC40rFX.js";import{a as Z,D as ee}from"./dict-D4wjFrBa.js";import{f as le,h as oe,i as ae}from"./index-Ne1Dl0xD.js";import{_ as te}from"./IndexSlect.vue_vue_type_script_setup_true_lang-im4xo1hu.js";const me=B({__name:"LineForm",emits:["success"],setup(de,{expose:w,emit:q}){const{t:c}=J(),I=W(),V=p(!0),f=p(!1),g=p(""),v=p(!1),h=p(""),t=p({id:void 0,oqcId:void 0,indexId:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,checkMethod:void 0,standerVal:void 0,unitOfMeasure:void 0,thresholdMax:void 0,thresholdMin:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0}),D=Y({oqcId:[{required:!0,message:"检验单ID不能为空",trigger:"blur"}],indexId:[{required:!0,message:"检测项ID不能为空",trigger:"blur"}]}),x=p();w({open:async(n,l,b)=>{if(f.value=!0,g.value=c("action."+n),h.value=n,O(),t.value.oqcId=b,l){v.value=!0;try{t.value=await le(l)}finally{v.value=!1}}}});const C=q,N=async()=>{await x.value.validate(),v.value=!0;try{const n=t.value;h.value==="create"?(n.id=void 0,await oe(n),I.success(c("common.createSuccess"))):(await ae(n),I.success(c("common.updateSuccess"))),f.value=!1,C("success")}finally{v.value=!1}},O=()=>{t.value={id:void 0,oqcId:void 0,indexId:void 0,indexCode:void 0,indexName:void 0,indexType:void 0,qcTool:void 0,checkMethod:void 0,standerVal:void 0,unitOfMeasure:void 0,thresholdMax:void 0,thresholdMin:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0},x.value?.resetFields()},k=p(),S=()=>{k.value.open(t.value.oqcId)},j=n=>{if(n!=null&&n!=null){console.log(n);for(var l in t.value)n.hasOwnProperty(l)&&t.value.hasOwnProperty(l)&&(t.value[l]=n[l])}};return(n,l)=>{const b=G,y=m("el-button"),s=m("el-input"),u=m("el-form-item"),i=m("el-col"),r=m("el-row"),F=m("el-option"),L=m("el-select"),E=m("el-divider"),P=m("el-form"),R=K,$=z("loading");return _(),T(Q,null,[e(R,{title:a(g),modelValue:a(f),"onUpdate:modelValue":l[14]||(l[14]=d=>X(f)?f.value=d:null),width:"90%"},{footer:o(()=>[e(y,{onClick:N,type:"primary",disabled:a(v)},{default:o(()=>l[16]||(l[16]=[M("确 定")])),_:1},8,["disabled"]),e(y,{onClick:l[13]||(l[13]=d=>f.value=!1)},{default:o(()=>l[17]||(l[17]=[M("取 消")])),_:1})]),default:o(()=>[A((_(),U(P,{ref_key:"formRef",ref:x,model:a(t),rules:a(D),"label-width":"100px"},{default:o(()=>[e(r,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(u,{label:"检测项ID",prop:"indexId"},{default:o(()=>[e(s,{modelValue:a(t).indexId,"onUpdate:modelValue":l[0]||(l[0]=d=>a(t).indexId=d),placeholder:"请输入检测项ID",disabled:a(V)},{append:o(()=>[e(y,{onClick:S},{default:o(()=>[e(b,{icon:"ep:search",class:"mr-5px"})]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(u,{label:"检测项名称",prop:"indexName"},{default:o(()=>[e(s,{modelValue:a(t).indexName,"onUpdate:modelValue":l[1]||(l[1]=d=>a(t).indexName=d),placeholder:"请输入检测项名称",disabled:a(V)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(i,{span:12},{default:o(()=>[e(u,{label:"检测项类型",prop:"indexType"},{default:o(()=>[e(L,{modelValue:a(t).indexType,"onUpdate:modelValue":l[2]||(l[2]=d=>a(t).indexType=d),placeholder:"请选择检测项类型",disabled:a(V)},{default:o(()=>[(_(!0),T(Q,null,H(a(Z)(a(ee).MES_INDEX_TYPE),d=>(_(),U(F,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(u,{label:"检测工具",prop:"qcTool"},{default:o(()=>[e(s,{modelValue:a(t).qcTool,"onUpdate:modelValue":l[3]||(l[3]=d=>a(t).qcTool=d),placeholder:"请输入检测工具"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:o(()=>[e(u,{label:"检测要求",prop:"checkMethod"},{default:o(()=>[e(s,{modelValue:a(t).checkMethod,"onUpdate:modelValue":l[4]||(l[4]=d=>a(t).checkMethod=d),placeholder:"请输入检测要求"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(u,{label:"标准值",prop:"standerVal"},{default:o(()=>[e(s,{modelValue:a(t).standerVal,"onUpdate:modelValue":l[5]||(l[5]=d=>a(t).standerVal=d),placeholder:"请输入标准值"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:o(()=>[e(u,{label:"单位",prop:"unitOfMeasure"},{default:o(()=>[e(s,{modelValue:a(t).unitOfMeasure,"onUpdate:modelValue":l[6]||(l[6]=d=>a(t).unitOfMeasure=d),placeholder:"请输入单位"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(u,{label:"误差上限",prop:"thresholdMax"},{default:o(()=>[e(s,{modelValue:a(t).thresholdMax,"onUpdate:modelValue":l[7]||(l[7]=d=>a(t).thresholdMax=d),placeholder:"请输入误差上限"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:o(()=>[e(u,{label:"误差下限",prop:"thresholdMin"},{default:o(()=>[e(s,{modelValue:a(t).thresholdMin,"onUpdate:modelValue":l[8]||(l[8]=d=>a(t).thresholdMin=d),placeholder:"请输入误差下限"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,null,{default:o(()=>l[15]||(l[15]=[M("参数设置")])),_:1}),e(r,null,{default:o(()=>[e(i,{span:16},{default:o(()=>[e(u,{label:"致命缺陷数量",prop:"crQuantity"},{default:o(()=>[e(s,{modelValue:a(t).crQuantity,"onUpdate:modelValue":l[9]||(l[9]=d=>a(t).crQuantity=d),placeholder:"请输入致命缺陷数量"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{span:16},{default:o(()=>[e(u,{label:"严重缺陷数量",prop:"majQuantity"},{default:o(()=>[e(s,{modelValue:a(t).majQuantity,"onUpdate:modelValue":l[10]||(l[10]=d=>a(t).majQuantity=d),placeholder:"请输入严重缺陷数量"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{span:16},{default:o(()=>[e(u,{label:"轻微缺陷数量",prop:"minQuantity"},{default:o(()=>[e(s,{modelValue:a(t).minQuantity,"onUpdate:modelValue":l[11]||(l[11]=d=>a(t).minQuantity=d),placeholder:"请输入轻微缺陷数量"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{span:16},{default:o(()=>[e(u,{label:"备注",prop:"remark"},{default:o(()=>[e(s,{modelValue:a(t).remark,"onUpdate:modelValue":l[12]||(l[12]=d=>a(t).remark=d),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[$,a(v)]])]),_:1},8,["title","modelValue"]),e(te,{ref_key:"index",ref:k,onOnSelected:j},null,512)],64)}}});export{me as _};
