/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{_ as E}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Dq4j5fFx.js";import{d as R,r as m,f as $,O as x,b as O,R as j,Y as q,g as w,h as A,k as p,o as i,m as c,w as F,j as n,a as l,l as _,i as t,c as L,L as M,v as Q,M as X,y as Y,t as u,X as G,A as J}from"./index-BuFigy1A.js";import{l as K}from"./index-CAM3Ef-C.js";const Z=["innerHTML"],ee={key:1},te={class:"sop-detail"},le={class:"detail-item"},oe={class:"detail-item"},se={class:"detail-item"},ae={class:"detail-item"},ie=["innerHTML"],ne={key:0,class:"detail-item"},re={class:"detail-item"},de={class:"detail-item"},pe=R({__name:"MdProductSopList",props:{itemId:{}},setup(C){const T=C,f=m(!1),b=m([]),h=m(0),d=$({pageNo:1,pageSize:10,itemId:void 0}),k=m(window.innerWidth),v=x(()=>k.value<=820),D=x(()=>v.value?"calc(100vh - 280px)":"calc(100vh - 240px)"),g=m(!1),s=m({}),y=()=>{k.value=window.innerWidth};O(()=>{window.addEventListener("resize",y)}),j(()=>{window.removeEventListener("resize",y)});const P=r=>{s.value=r,g.value=!0};q(()=>T.itemId,r=>{r&&(d.itemId=r,G(()=>{S()}))},{immediate:!0});const N=async()=>{f.value=!0;try{const r=await K(d);b.value=r.list,h.value=r.total}finally{f.value=!1}},S=()=>{d.pageNo=1,N()};return(r,e)=>{const a=w("el-table-column"),U=w("el-image"),V=w("el-button"),z=w("el-table"),H=X,I=w("el-dialog"),B=E,W=A("loading");return i(),p(B,null,{default:c(()=>[F((i(),p(z,{data:l(b),stripe:!0,class:"sop-table","max-height":D.value,border:""},{default:c(()=>[n(a,{label:"标题",align:"center",prop:"sopTitle","min-width":"120","show-overflow-tooltip":""}),n(a,{label:"顺序",align:"center",prop:"orderNum",width:"70"}),n(a,{label:"工序编号",align:"center",prop:"processCode","min-width":"100","show-overflow-tooltip":""}),n(a,{label:"工序名称",align:"center",prop:"processName","min-width":"100","show-overflow-tooltip":""}),v.value?_("",!0):(i(),p(a,{key:0,label:"详细描述",align:"center",prop:"sopDescription","min-width":"150"},{default:c(o=>[t("div",{innerHTML:o.row.sopDescription,class:"description-cell"},null,8,Z)]),_:1})),n(a,{label:"图片",align:"center",prop:"sopUrl",width:"100"},{default:c(o=>[o.row.sopUrl?(i(),p(U,{key:0,class:"sop-image",src:o.row.sopUrl,"preview-src-list":[o.row.sopUrl],fit:"cover"},null,8,["src","preview-src-list"])):(i(),L("span",ee,"无图片"))]),_:1}),v.value?_("",!0):(i(),p(a,{key:1,label:"备注",align:"center",prop:"remark","min-width":"120","show-overflow-tooltip":""})),v.value?_("",!0):(i(),p(a,{key:2,label:"创建时间",align:"center",prop:"createTime",formatter:l(M),width:"150"},null,8,["formatter"])),v.value?(i(),p(a,{key:3,label:"操作",align:"center",width:"80"},{default:c(o=>[n(V,{type:"primary",link:"",onClick:ce=>P(o.row)},{default:c(()=>e[3]||(e[3]=[Q(" 详情 ")])),_:2},1032,["onClick"])]),_:1})):_("",!0)]),_:1},8,["data","max-height"])),[[W,l(f)]]),n(H,{total:l(h),page:l(d).pageNo,"onUpdate:page":e[0]||(e[0]=o=>l(d).pageNo=o),limit:l(d).pageSize,"onUpdate:limit":e[1]||(e[1]=o=>l(d).pageSize=o),onPagination:N},null,8,["total","page","limit"]),n(I,{modelValue:l(g),"onUpdate:modelValue":e[2]||(e[2]=o=>Y(g)?g.value=o:null),title:"SOP详情",width:"90%","destroy-on-close":!0,class:"sop-detail-dialog"},{default:c(()=>[t("div",te,[t("div",le,[e[4]||(e[4]=t("span",{class:"label"},"标题：",-1)),t("span",null,u(l(s).sopTitle),1)]),t("div",oe,[e[5]||(e[5]=t("span",{class:"label"},"工序：",-1)),t("span",null,u(l(s).processName)+" ("+u(l(s).processCode)+")",1)]),t("div",se,[e[6]||(e[6]=t("span",{class:"label"},"排序：",-1)),t("span",null,u(l(s).orderNum),1)]),t("div",ae,[e[7]||(e[7]=t("span",{class:"label"},"详细描述：",-1)),t("div",{innerHTML:l(s).sopDescription,class:"description-content"},null,8,ie)]),l(s).sopUrl?(i(),L("div",ne,[e[8]||(e[8]=t("span",{class:"label"},"图片：",-1)),n(U,{src:l(s).sopUrl,"preview-src-list":[l(s).sopUrl],class:"detail-image"},null,8,["src","preview-src-list"])])):_("",!0),t("div",re,[e[9]||(e[9]=t("span",{class:"label"},"备注：",-1)),t("span",null,u(l(s).remark||"无"),1)]),t("div",de,[e[10]||(e[10]=t("span",{class:"label"},"创建时间：",-1)),t("span",null,u(l(M)({row:l(s)})),1)])])]),_:1},8,["modelValue"])]),_:1})}}}),we=J(pe,[["__scopeId","data-v-73c7c5be"]]);export{we as default};
