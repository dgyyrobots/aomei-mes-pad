/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 10:14:51 
 */
import{V,d as B,r as i,f as T,g as c,h as $,c as j,o as N,F as z,j as a,_ as E,a as d,y as A,m as l,w as G,k as H,D as J,v as P,aP as K,N as Q,z as W}from"./index-BuFigy1A.js";const X=async u=>await V.post({url:"/wms/product-produce/product-produce-line/create",data:u}),Y=async u=>await V.put({url:"/wms/product-produce/product-produce-line/update",data:u}),Z=async u=>await V.get({url:"/wms/product-produce/product-produce-line/get?id="+u}),ae=B({__name:"ProductProduceLineForm",emits:["success"],setup(u,{expose:k,emit:S}){const{t:_}=Q(),g=W(),n=i(!1),y=i(""),s=i(!1),C=i(""),e=i({id:void 0,recordId:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityProduce:void 0,batchCode:void 0,warehouseId:void 0,warehouseCode:void 0,warehouseName:void 0,locationId:void 0,locationCode:void 0,locationName:void 0,areaId:void 0,areaCode:void 0,areaName:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0,orderSource:void 0}),h=T({itemId:[{required:!0,message:"产品物料ID不能为空",trigger:"blur"}],quantityProduce:[{required:!0,message:"产出数量不能为空",trigger:"blur"}]}),w=i();k({open:async(o,t,m)=>{if(n.value=!0,y.value=_("action."+o),C.value=o,x(),e.value.recordId=m,t){s.value=!0;try{e.value=await Z(t)}finally{s.value=!1}}}});const q=S,F=async()=>{await w.value.validate(),s.value=!0;try{const o=e.value;C.value==="create"?(await X(o),g.success(_("common.createSuccess"))):(await Y(o),g.success(_("common.updateSuccess"))),n.value=!1,q("success")}finally{s.value=!1}},x=()=>{e.value={id:void 0,recordId:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityProduce:void 0,batchCode:void 0,warehouseId:void 0,warehouseCode:void 0,warehouseName:void 0,locationId:void 0,locationCode:void 0,locationName:void 0,areaId:void 0,areaCode:void 0,areaName:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0,orderSource:void 0},w.value?.resetFields()},I=i(),D=()=>{I.value.showFlag()},U=o=>{o!=null&&o!=null&&(console.log(o.id),e.value.itemId=o.id,e.value.itemCode=o.itemCode,e.value.itemName=o.itemName,e.value.specification=o.specification,e.value.unitOfMeasure=o.unitOfMeasure,e.value.areaCode=o.areaCode,e.value.areaId=o.areaId,e.value.areaName=o.areaName,e.value.locationName=o.locationName,e.value.locationId=o.id,e.value.locationCode=o.locationCode,e.value.warehouseCode=o.warehouseCode,e.value.warehouseId=o.id,e.value.warehouseName=o.warehouseName)};return(o,t)=>{const m=c("el-button"),p=c("el-input"),v=c("el-form-item"),f=c("el-col"),b=c("el-row"),L=c("el-form"),M=E,O=K,R=$("loading");return N(),j(z,null,[a(M,{title:d(y),modelValue:d(n),"onUpdate:modelValue":t[6]||(t[6]=r=>A(n)?n.value=r:null),width:"80%"},{footer:l(()=>[a(m,{onClick:F,type:"primary",disabled:d(s)},{default:l(()=>t[7]||(t[7]=[P("确 定")])),_:1},8,["disabled"]),a(m,{onClick:t[5]||(t[5]=r=>n.value=!1)},{default:l(()=>t[8]||(t[8]=[P("取 消")])),_:1})]),default:l(()=>[G((N(),H(L,{inline:"",ref_key:"formRef",ref:w,model:d(e),rules:d(h),"label-width":"100px"},{default:l(()=>[a(b,null,{default:l(()=>[a(f,{span:12},{default:l(()=>[a(v,{label:"产品物料编码",prop:"itemCode"},{default:l(()=>[a(p,{modelValue:d(e).itemCode,"onUpdate:modelValue":t[0]||(t[0]=r=>d(e).itemCode=r),placeholder:"请输入产品物料编码"},{append:l(()=>[a(m,{onClick:D,icon:d(J),disabled:d(C)=="detail"},null,8,["icon","disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(f,{span:12},{default:l(()=>[a(v,{label:"产出数量",prop:"quantityProduce"},{default:l(()=>[a(p,{modelValue:d(e).quantityProduce,"onUpdate:modelValue":t[1]||(t[1]=r=>d(e).quantityProduce=r),type:"number",placeholder:"请输入产出数量"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(b,null,{default:l(()=>[a(f,{span:12},{default:l(()=>[a(v,{label:"批次号",prop:"batchCode"},{default:l(()=>[a(p,{modelValue:d(e).batchCode,"onUpdate:modelValue":t[2]||(t[2]=r=>d(e).batchCode=r),placeholder:"请输入批次号"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,{span:12},{default:l(()=>[a(v,{label:"来源类型",prop:"orderSource"},{default:l(()=>[a(p,{modelValue:d(e).orderSource,"onUpdate:modelValue":t[3]||(t[3]=r=>d(e).orderSource=r),placeholder:"请输入来源类型"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(b,null,{default:l(()=>[a(f,{span:24},{default:l(()=>[a(v,{label:"备注",prop:"remark"},{default:l(()=>[a(p,{modelValue:d(e).remark,"onUpdate:modelValue":t[4]||(t[4]=r=>d(e).remark=r),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[R,d(s)]])]),_:1},8,["title","modelValue"]),a(O,{ref_key:"Select",ref:I,onOnSelected:U},null,512)],64)}}});export{ae as _};
