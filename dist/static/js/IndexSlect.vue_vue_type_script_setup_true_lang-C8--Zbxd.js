/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{d as q,r as s,f as C,b as F,g as c,h as Y,k as I,o as y,m as i,j as e,w as j,a,v as u,t as O,L as W,M as X,y as A,_ as G,z as H,N as J}from"./index-D3S9e4gi.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DXTslarw.js";import{_ as Q}from"./DictTag.vue_vue_type_script_lang-DqsMypuM.js";import{b as Z}from"./index-Ca1yU0f9.js";import{D as ee}from"./dict-D5UmY5m8.js";import{a as te}from"./index-EkgJYt_G.js";const pe=q({name:"Task",__name:"IndexSlect",emits:["onSelected"],setup(oe,{expose:k,emit:N}){const T=H(),{t:x}=J(),p=s(!0),g=s([]),V=s(0),m=C({pageNo:1,pageSize:10,taskCode:void 0,taskName:void 0,workorderCode:void 0,workorderName:void 0,workstationCode:void 0,workstationName:void 0,processCode:void 0,processName:void 0,itemCode:void 0,itemName:void 0,specification:void 0,clientCode:void 0,clientName:void 0,clientNick:void 0,status:void 0,createTime:[]}),v=s(),f=async()=>{p.value=!0;try{const n=await te(v.value);g.value=n}finally{p.value=!1}},S=s({}),M=n=>{S.value=n},r=s(!1),_=s("");k({open:async n=>{const t=await Z(n);v.value=t.templateId,r.value=!0,_.value="检测项选择",p.value=!0;try{f()}finally{p.value=!1}}});const d=C({loading:!1,showFlag:!1,selectedItemId:void 0,selectedRows:void 0}),D=n=>{n&&(d.selectedRows=n)},R=N,$=async()=>{if(d.selectedItemId==null||d.selectedItemId==0){T.warning(x("请至少选择一条数据!"));return}R("onSelected",d.selectedRows),r.value=!1};return F(()=>{}),(n,t)=>{const h=c("el-radio"),o=c("el-table-column"),P=Q,U=c("el-table"),z=X,E=K,b=c("el-button"),B=G,L=Y("loading");return y(),I(B,{title:a(_),modelValue:a(r),"onUpdate:modelValue":t[4]||(t[4]=l=>A(r)?r.value=l:null),width:"80%"},{footer:i(()=>[e(b,{onClick:$,type:"primary"},{default:i(()=>t[6]||(t[6]=[u("确 定")])),_:1}),e(b,{onClick:t[3]||(t[3]=l=>r.value=!1)},{default:i(()=>t[7]||(t[7]=[u("取 消")])),_:1})]),default:i(()=>[e(E,null,{default:i(()=>[j((y(),I(U,{data:a(g),stripe:!0,"show-overflow-tooltip":!0,onCurrentChange:M},{default:i(()=>[e(o,{align:"center",label:"检测模板编号"},{default:i(l=>[e(h,{modelValue:a(d).selectedItemId,"onUpdate:modelValue":t[0]||(t[0]=w=>a(d).selectedItemId=w),label:l.row.id,onChange:w=>D(l.row)},{default:i(()=>t[5]||(t[5]=[u(O(""))])),_:2},1032,["modelValue","label","onChange"])]),_:1}),e(o,{label:"检测项编码",align:"center",prop:"indexCode"}),e(o,{label:"检测项名称",align:"center",prop:"indexName"}),e(o,{label:"检测项类型",align:"center",prop:"indexType"},{default:i(l=>[e(P,{type:a(ee).MES_INDEX_TYPE,value:l.row.indexType},null,8,["type","value"])]),_:1}),e(o,{label:"检测工具",align:"center",prop:"qcTool"}),e(o,{label:"检测要求",align:"center",prop:"checkMethod"}),e(o,{label:"标准值",align:"center",prop:"standerVal"}),e(o,{label:"单位",align:"center",prop:"unitOfMeasure"}),e(o,{label:"误差上限",align:"center",prop:"thresholdMax"}),e(o,{label:"误差下限",align:"center",prop:"thresholdMin"}),e(o,{label:"说明图",align:"center",prop:"docUrl"}),e(o,{label:"备注",align:"center",prop:"remark"}),e(o,{label:"创建时间",align:"center",prop:"createTime",formatter:a(W),width:"180px"},null,8,["formatter"])]),_:1},8,["data"])),[[L,a(p)]]),e(z,{total:a(V),page:a(m).pageNo,"onUpdate:page":t[1]||(t[1]=l=>a(m).pageNo=l),limit:a(m).pageSize,"onUpdate:limit":t[2]||(t[2]=l=>a(m).pageSize=l),onPagination:f},null,8,["total","page","limit"])]),_:1})]),_:1},8,["title","modelValue"])}}});export{pe as _};
