/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as ee,r as u,f as te,b as ae,g as p,h as K,c as k,o as s,j as e,m as n,a as l,J as S,F as x,n as O,k as m,w as b,v as c,K as le,l as ne,t as Y,L as z,M as oe,z as se,N as re}from"./index-C8VsLzxx.js";import{_ as ie}from"./DictTag.vue_vue_type_script_lang-lHf-rDoT.js";import{_ as pe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DmvxiVVs.js";import{_ as ce}from"./index-DEPOhjYW.js";import{_ as me,g as ue,d as de,e as _e}from"./TenantForm.vue_vue_type_script_setup_true_lang-BlKXyKbI.js";import{g as fe}from"./index-Ci5cVyg6.js";import{c as ge,D as R}from"./dict-_inVRzR5.js";import{d as ye}from"./download-U6qaYcnP.js";import"./color-B5phLuB-.js";import"./constants-BPQb3nxh.js";const De=ee({name:"SystemTenant",__name:"index",setup(be){const C=se(),{t:q}=re(),T=u(!0),D=u(0),U=u([]),o=te({pageNo:1,pageSize:10,name:void 0,contactName:void 0,contactMobile:void 0,status:void 0,createTime:[]}),$=u(),V=u(!1),F=u([]),f=async()=>{T.value=!0;try{const r=await ue(o);U.value=r.list,D.value=r.total}finally{T.value=!1}},g=()=>{o.pageNo=1,f()},B=()=>{$.value.resetFields(),g()},P=u(),I=(r,t)=>{P.value.open(r,t)},E=async r=>{try{await C.delConfirm(),await de(r),C.success(q("common.delSuccess")),await f()}catch(t){console.log(t)}},A=async()=>{try{await C.exportConfirm(),V.value=!0;const r=await _e(o);ye.excel(r,"租户列表.xls")}catch(r){console.log(r)}finally{V.value=!1}};return ae(async()=>{await f(),F.value=await fe()}),(r,t)=>{const H=ce,N=p("el-input"),d=p("el-form-item"),Q=p("el-option"),j=p("el-select"),J=p("el-date-picker"),w=le,_=p("el-button"),G=p("el-form"),L=pe,i=p("el-table-column"),M=p("el-tag"),W=ie,X=p("el-table"),Z=oe,v=K("hasPermi"),h=K("loading");return s(),k(x,null,[e(H,{title:"SaaS 多租户",url:"https://doc.iocoder.cn/saas-tenant/"}),e(L,null,{default:n(()=>[e(G,{ref_key:"queryFormRef",ref:$,class:"-mb-15px",inline:!0,"label-width":"68px",model:l(o)},{default:n(()=>[e(d,{label:"租户名",prop:"name"},{default:n(()=>[e(N,{modelValue:l(o).name,"onUpdate:modelValue":t[0]||(t[0]=a=>l(o).name=a),class:"!w-240px",clearable:"",placeholder:"请输入租户名",onKeyup:S(g,["enter"])},null,8,["modelValue"])]),_:1}),e(d,{label:"联系人",prop:"contactName"},{default:n(()=>[e(N,{modelValue:l(o).contactName,"onUpdate:modelValue":t[1]||(t[1]=a=>l(o).contactName=a),class:"!w-240px",clearable:"",placeholder:"请输入联系人",onKeyup:S(g,["enter"])},null,8,["modelValue"])]),_:1}),e(d,{label:"联系手机",prop:"contactMobile"},{default:n(()=>[e(N,{modelValue:l(o).contactMobile,"onUpdate:modelValue":t[2]||(t[2]=a=>l(o).contactMobile=a),class:"!w-240px",clearable:"",placeholder:"请输入联系手机",onKeyup:S(g,["enter"])},null,8,["modelValue"])]),_:1}),e(d,{label:"租户状态",prop:"status"},{default:n(()=>[e(j,{modelValue:l(o).status,"onUpdate:modelValue":t[3]||(t[3]=a=>l(o).status=a),class:"!w-240px",clearable:"",placeholder:"请选择租户状态"},{default:n(()=>[(s(!0),k(x,null,O(l(ge)(l(R).COMMON_STATUS),a=>(s(),m(Q,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"创建时间",prop:"createTime"},{default:n(()=>[e(J,{modelValue:l(o).createTime,"onUpdate:modelValue":t[4]||(t[4]=a=>l(o).createTime=a),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(d,null,{default:n(()=>[e(_,{onClick:g},{default:n(()=>[e(w,{class:"mr-5px",icon:"ep:search"}),t[8]||(t[8]=c(" 搜索 "))]),_:1}),e(_,{onClick:B},{default:n(()=>[e(w,{class:"mr-5px",icon:"ep:refresh"}),t[9]||(t[9]=c(" 重置 "))]),_:1}),b((s(),m(_,{plain:"",type:"primary",onClick:t[5]||(t[5]=a=>I("create"))},{default:n(()=>[e(w,{class:"mr-5px",icon:"ep:plus"}),t[10]||(t[10]=c(" 新增 "))]),_:1})),[[v,["system:tenant:create"]]]),b((s(),m(_,{loading:l(V),plain:"",type:"success",onClick:A},{default:n(()=>[e(w,{class:"mr-5px",icon:"ep:download"}),t[11]||(t[11]=c(" 导出 "))]),_:1},8,["loading"])),[[v,["system:tenant:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(L,null,{default:n(()=>[b((s(),m(X,{data:l(U)},{default:n(()=>[e(i,{align:"center",label:"租户编号",prop:"id"}),e(i,{align:"center",label:"租户名",prop:"name"}),e(i,{align:"center",label:"租户套餐",prop:"packageId"},{default:n(a=>[a.row.packageId===0?(s(),m(M,{key:0,type:"danger"},{default:n(()=>t[12]||(t[12]=[c("系统租户")])),_:1})):(s(!0),k(x,{key:1},O(l(F),y=>(s(),k(x,null,[y.id===a.row.packageId?(s(),m(M,{key:y.id,type:"success"},{default:n(()=>[c(Y(y.name),1)]),_:2},1024)):ne("",!0)],64))),256))]),_:1}),e(i,{align:"center",label:"联系人",prop:"contactName"}),e(i,{align:"center",label:"联系手机",prop:"contactMobile"}),e(i,{align:"center",label:"账号额度",prop:"accountCount"},{default:n(a=>[e(M,null,{default:n(()=>[c(Y(a.row.accountCount),1)]),_:2},1024)]),_:1}),e(i,{align:"center",formatter:l(z),label:"过期时间",prop:"expireTime",width:"180"},null,8,["formatter"]),e(i,{align:"center",label:"绑定域名",prop:"website",width:"180"}),e(i,{align:"center",label:"租户状态",prop:"status"},{default:n(a=>[e(W,{type:l(R).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(i,{align:"center",formatter:l(z),label:"创建时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(i,{align:"center",fixed:"right",label:"操作","min-width":"110"},{default:n(a=>[b((s(),m(_,{link:"",type:"primary",onClick:y=>I("update",a.row.id)},{default:n(()=>t[13]||(t[13]=[c("编辑")])),_:2},1032,["onClick"])),[[v,["system:tenant:update"]]]),b((s(),m(_,{link:"",type:"danger",onClick:y=>E(a.row.id)},{default:n(()=>t[14]||(t[14]=[c("删除")])),_:2},1032,["onClick"])),[[v,["system:tenant:delete"]]])]),_:1})]),_:1},8,["data"])),[[h,l(T)]]),e(Z,{limit:l(o).pageSize,"onUpdate:limit":t[6]||(t[6]=a=>l(o).pageSize=a),page:l(o).pageNo,"onUpdate:page":t[7]||(t[7]=a=>l(o).pageNo=a),total:l(D),onPagination:f},null,8,["limit","page","total"])]),_:1}),e(me,{ref_key:"formRef",ref:P,onSuccess:f},null,512)],64)}}});export{De as default};
