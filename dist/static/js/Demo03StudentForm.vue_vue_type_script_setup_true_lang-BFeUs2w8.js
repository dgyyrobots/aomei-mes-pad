/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 13:49:10 
 */
import{d as j,r as n,f as z,g as d,h as O,k as g,o as f,m as s,w as P,j as o,a as t,c as X,F as A,n as H,v as y,t as J,y as S,_ as K,N as Q,z as W}from"./index-BW9ifGp0.js";import{_ as Z}from"./style.css_vue_type_style_index_0_src_true_lang-CKaVdbrx.js";import{_ as h}from"./Demo03CourseForm.vue_vue_type_script_setup_true_lang-cCAfhsrF.js";import{_ as ee}from"./Demo03GradeForm.vue_vue_type_script_setup_true_lang-CVsLRB82.js";import{g as te,c as ae,u as oe}from"./index-DxuJxww3.js";import{c as le,D as se}from"./dict-BcQRoIPV.js";const ce=j({__name:"Demo03StudentForm",emits:["success"],setup(re,{expose:w,emit:F}){const{t:c}=Q(),V=W(),u=n(!1),x=n(""),i=n(!1),D=n(""),l=n({id:void 0,name:void 0,sex:void 0,birthday:void 0,description:void 0}),R=z({name:[{required:!0,message:"名字不能为空",trigger:"blur"}],sex:[{required:!0,message:"性别不能为空",trigger:"blur"}],birthday:[{required:!0,message:"出生日期不能为空",trigger:"blur"}],description:[{required:!0,message:"简介不能为空",trigger:"blur"}]}),_=n(),m=n("demo03Course"),v=n(),b=n();w({open:async(r,e)=>{if(u.value=!0,x.value=c(`action.${r}`),D.value=r,E(),e){i.value=!0;try{l.value=await te(e)}finally{i.value=!1}}}});const T=F,U=async()=>{await _.value.validate();try{await v.value.validate()}catch{m.value="demo03Course";return}try{await b.value.validate()}catch{m.value="demo03Grade";return}i.value=!0;try{const r=l.value;r.demo03Courses=v.value.getData(),r.demo03Grade=b.value.getData(),D.value==="create"?(await ae(r),V.success(c("common.createSuccess"))):(await oe(r),V.success(c("common.updateSuccess"))),u.value=!1,T("success")}finally{i.value=!1}},E=()=>{l.value={id:void 0,name:void 0,sex:void 0,birthday:void 0,description:void 0},_.value?.resetFields()};return(r,e)=>{const $=d("el-input"),p=d("el-form-item"),G=d("el-radio"),q=d("el-radio-group"),N=d("el-date-picker"),B=Z,I=d("el-form"),k=d("el-tab-pane"),L=d("el-tabs"),C=d("el-button"),M=K,Y=O("loading");return f(),g(M,{modelValue:t(u),"onUpdate:modelValue":e[6]||(e[6]=a=>S(u)?u.value=a:null),title:t(x)},{footer:s(()=>[o(C,{disabled:t(i),type:"primary",onClick:U},{default:s(()=>e[7]||(e[7]=[y("确 定")])),_:1},8,["disabled"]),o(C,{onClick:e[5]||(e[5]=a=>u.value=!1)},{default:s(()=>e[8]||(e[8]=[y("取 消")])),_:1})]),default:s(()=>[P((f(),g(I,{ref_key:"formRef",ref:_,"label-width":"100px",model:t(l),rules:t(R)},{default:s(()=>[o(p,{label:"名字",prop:"name"},{default:s(()=>[o($,{modelValue:t(l).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(l).name=a),placeholder:"请输入名字"},null,8,["modelValue"])]),_:1}),o(p,{label:"性别",prop:"sex"},{default:s(()=>[o(q,{modelValue:t(l).sex,"onUpdate:modelValue":e[1]||(e[1]=a=>t(l).sex=a)},{default:s(()=>[(f(!0),X(A,null,H(t(le)(t(se).SYSTEM_USER_SEX),a=>(f(),g(G,{key:a.value,label:a.value},{default:s(()=>[y(J(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"出生日期",prop:"birthday"},{default:s(()=>[o(N,{modelValue:t(l).birthday,"onUpdate:modelValue":e[2]||(e[2]=a=>t(l).birthday=a),placeholder:"选择出生日期",type:"date","value-format":"x"},null,8,["modelValue"])]),_:1}),o(p,{label:"简介",prop:"description"},{default:s(()=>[o(B,{modelValue:t(l).description,"onUpdate:modelValue":e[3]||(e[3]=a=>t(l).description=a),height:"150px"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[Y,t(i)]]),o(L,{modelValue:t(m),"onUpdate:modelValue":e[4]||(e[4]=a=>S(m)?m.value=a:null)},{default:s(()=>[o(k,{label:"学生课程",name:"demo03Course"},{default:s(()=>[o(h,{ref_key:"demo03CourseFormRef",ref:v,"student-id":t(l).id},null,8,["student-id"])]),_:1}),o(k,{label:"学生班级",name:"demo03Grade"},{default:s(()=>[o(ee,{ref_key:"demo03GradeFormRef",ref:b,"student-id":t(l).id},null,8,["student-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title"])}}});export{ce as _};
