/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-15 10:10:14 
 */
import{d as E,r as u,f as V,g as r,c as b,o as _,j as o,m as n,a as e,F as k,n as F,k as h,v as I,K as B,w as q,M as z,$ as W}from"./index-BdC40rFX.js";import{_ as A}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CdI9J0YF.js";import{W as H,g as L}from"./main-DVB4CSwX.js";import{M as Q}from"./types-axeMsJ05.js";import{_ as R}from"./main.vue_vue_type_script_setup_true_lang-BGIv95fq.js";import{_ as j}from"./MessageTable.vue_vue_type_script_setup_true_lang-Bb915ZRa.js";import{a as G,D as K}from"./dict-D4wjFrBa.js";import"./TabNews-PoImV9me.js";import"./main-CXq0p58Y.js";import"./main-C5bHu-zA.js";import"./main-BLBDUrM9.js";import"./main.vue_vue_type_script_setup_true_lang-CVKiCGxc.js";import"./index-DlWFSVCk.js";import"./index-BwfJs7Qg.js";import"./main-UQxRdKtI.js";import"./TabText.vue_vue_type_script_setup_true_lang-DP3x2gCX.js";import"./TabImage-D2oj-Tcl.js";import"./useUpload-ClxgNmfW.js";import"./TabVoice-8OrywKCs.js";import"./TabVideo-C2XGbm1C.js";import"./TabMusic.vue_vue_type_script_setup_true_lang-h8LDIVEY.js";import"./MsgList-85XZhnbl.js";import"./Msg.vue_vue_type_script_setup_true_lang-WPF67662.js";import"./main.vue_vue_type_script_setup_true_lang-C39xlMmB.js";import"./main-21cfWjEV.js";import"./MsgEvent.vue_vue_type_script_setup_true_lang-MD9zCVCW.js";import"./index-Bp-zbKEW.js";import"./index-DRRwHKFp.js";const Me=E({name:"MpMessage",__name:"index",setup(O){const d=u(!1),c=u(0),f=u([]),l=V({pageNo:1,pageSize:10,openid:"",accountId:-1,type:Q.Text,createTime:[]}),g=u(null),p=V({show:!1,userId:0}),M=s=>{l.accountId=s,l.pageNo=1,m()},m=()=>{l.pageNo=1,y()},y=async()=>{try{d.value=!0;const s=await L(l);f.value=s.list,c.value=s.total}finally{d.value=!1}},C=async()=>{const s=l.accountId;g.value?.resetFields(),l.accountId=s,m()},T=async s=>{p.userId=s,p.show=!0};return(s,t)=>{const i=r("el-form-item"),S=r("el-option"),N=r("el-select"),P=r("el-input"),$=r("el-date-picker"),v=B,w=r("el-button"),D=r("el-form"),x=A,U=z,Y=r("el-dialog");return _(),b(k,null,[o(x,null,{default:n(()=>[o(D,{ref_key:"queryFormRef",ref:g,class:"-mb-15px",inline:!0,"label-width":"68px",model:e(l)},{default:n(()=>[o(i,{label:"公众号",prop:"accountId"},{default:n(()=>[o(e(R),{onChange:M})]),_:1}),o(i,{label:"消息类型",prop:"type"},{default:n(()=>[o(N,{modelValue:e(l).type,"onUpdate:modelValue":t[0]||(t[0]=a=>e(l).type=a),class:"!w-240px",placeholder:"请选择消息类型"},{default:n(()=>[(_(!0),b(k,null,F(e(G)(e(K).MP_MESSAGE_TYPE),a=>(_(),h(S,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(i,{label:"用户标识",prop:"openid"},{default:n(()=>[o(P,{modelValue:e(l).openid,"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).openid=a),class:"!w-240px",clearable:"",placeholder:"请输入用户标识","v-on":m},null,8,["modelValue"])]),_:1}),o(i,{label:"创建时间",prop:"createTime"},{default:n(()=>[o($,{modelValue:e(l).createTime,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).createTime=a),class:"!w-240px","default-time":["00:00:00","23:59:59"],"end-placeholder":"结束日期","range-separator":"-","start-placeholder":"开始日期",style:{width:"240px"},type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),o(i,null,{default:n(()=>[o(w,{onClick:m},{default:n(()=>[o(v,{class:"mr-5px",icon:"ep:search"}),t[7]||(t[7]=I(" 搜索 "))]),_:1}),o(w,{onClick:C},{default:n(()=>[o(v,{class:"mr-5px",icon:"ep:refresh"}),t[8]||(t[8]=I(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o(x,null,{default:n(()=>[o(j,{list:e(f),loading:e(d),onSend:T},null,8,["list","loading"]),q(o(U,{limit:e(l).pageSize,"onUpdate:limit":t[3]||(t[3]=a=>e(l).pageSize=a),page:e(l).pageNo,"onUpdate:page":t[4]||(t[4]=a=>e(l).pageNo=a),total:e(c),onPagination:y},null,8,["limit","page","total"]),[[W,e(c)>0]])]),_:1}),o(Y,{modelValue:e(p).show,"onUpdate:modelValue":t[5]||(t[5]=a=>e(p).show=a),"destroy-on-close":"",title:"粉丝消息列表",width:"50%",onClick:t[6]||(t[6]=a=>e(p).show=!0)},{default:n(()=>[o(e(H),{"user-id":e(p).userId},null,8,["user-id"])]),_:1},8,["modelValue"])],64)}}});export{Me as default};
