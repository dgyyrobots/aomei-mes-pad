/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-03 13:38:04 
 */
import{d as O,r as c,f as X,b as Z,g as i,h as M,c as N,o as m,j as e,m as a,a as o,w as v,v as _,K as ee,k as f,i as b,l as le,t as y,F as h,n as z,L as te,M as ae,z as oe}from"./index-FPuwcz_Y.js";import{_ as ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-32ziCa0j.js";import{_ as re}from"./CommentForm.vue_vue_type_style_index_0_lang-gR1NgBIw.js";import{_ as ie}from"./ReplyForm.vue_vue_type_script_setup_true_lang-lp4topN7.js";import{a as se,u as pe}from"./comment-BRPVaOyn.js";import"./UploadImgs-CE287nEG.js";import"./UploadImgs.vue_vue_type_script_setup_true_lang-CQlwFWc6.js";import"./UploadImg-4wNAuvFS.js";import"./index-DEp92naw.js";import"./SpuShowcase-BgzgycZv.js";import"./spu-C0bMceak.js";import"./SpuTableSelect.vue_vue_type_script_setup_true_lang-BJ4tBpS3.js";import"./tree-vSlcEeQq.js";import"./category-CxYWED_0.js";import"./SkuTableSelect.vue_vue_type_script_setup_true_lang-Dir95xBQ.js";const me={class:"row flex items-center gap-x-4px"},ue={class:"flex justify-center gap-x-4px"},Se=O({name:"ProductComment",__name:"index",setup(de){const B=oe(),w=c(!0),C=c(0),U=c([]),n=X({pageNo:1,pageSize:10,replyStatus:null,spuName:null,userNickname:null,orderId:null,createTime:[]}),S=c(),u=async()=>{w.value=!0;try{const r=await se(n);r.list.forEach(l=>{l.visible||(l.visible=!1)}),U.value=r.list,C.value=r.total}finally{w.value=!1}},P=()=>{n.pageNo=1,u()},Y=()=>{S.value.resetFields(),P()},F=c(),q=(r,l)=>{F.value.open(r,l)},$=c(),L=r=>{$.value.open(r)},j=async r=>{if(w.value)return;const l=r.visible;try{await B.confirm(l?"是否显示评论？":"是否隐藏评论？"),await pe({id:r.id,visible:l}),await u()}catch{r.visible=!l}};return Z(()=>{u()}),(r,l)=>{const D=i("el-option"),E=i("el-select"),d=i("el-form-item"),k=i("el-input"),H=i("el-date-picker"),x=ee,g=i("el-button"),Q=i("el-form"),R=ne,s=i("el-table-column"),I=i("el-image"),K=i("el-tag"),W=i("el-switch"),A=i("el-table"),G=ae,V=M("hasPermi"),J=M("loading");return m(),N(h,null,[e(R,null,{default:a(()=>[e(Q,{ref_key:"queryFormRef",ref:S,class:"-mb-15px",inline:!0,"label-width":"68px",model:o(n)},{default:a(()=>[e(d,{label:"回复状态",prop:"replyStatus"},{default:a(()=>[e(E,{modelValue:o(n).replyStatus,"onUpdate:modelValue":l[0]||(l[0]=t=>o(n).replyStatus=t)},{default:a(()=>[e(D,{label:"已回复",value:!0}),e(D,{label:"未回复",value:!1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"商品名称",prop:"spuName"},{default:a(()=>[e(k,{modelValue:o(n).spuName,"onUpdate:modelValue":l[1]||(l[1]=t=>o(n).spuName=t),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"用户名称",prop:"userNickname"},{default:a(()=>[e(k,{modelValue:o(n).userNickname,"onUpdate:modelValue":l[2]||(l[2]=t=>o(n).userNickname=t),placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"订单编号",prop:"orderId"},{default:a(()=>[e(k,{modelValue:o(n).orderId,"onUpdate:modelValue":l[3]||(l[3]=t=>o(n).orderId=t),placeholder:"请输入订单编号"},null,8,["modelValue"])]),_:1}),e(d,{label:"评论时间",prop:"createTime"},{default:a(()=>[e(H,{modelValue:o(n).createTime,"onUpdate:modelValue":l[4]||(l[4]=t=>o(n).createTime=t),class:"!w-240px","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],"end-placeholder":"结束日期","start-placeholder":"开始日期",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(d,null,{default:a(()=>[e(g,{onClick:P},{default:a(()=>[e(x,{class:"mr-5px",icon:"ep:search"}),l[8]||(l[8]=_(" 搜索 "))]),_:1}),e(g,{onClick:Y},{default:a(()=>[e(x,{class:"mr-5px",icon:"ep:refresh"}),l[9]||(l[9]=_(" 重置 "))]),_:1}),v((m(),f(g,{plain:"",type:"primary",onClick:l[5]||(l[5]=t=>q("create"))},{default:a(()=>[e(x,{class:"mr-5px",icon:"ep:plus"}),l[10]||(l[10]=_(" 添加虚拟评论 "))]),_:1})),[[V,["product:comment:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(R,null,{default:a(()=>[v((m(),f(A,{data:o(U),"show-overflow-tooltip":!1,stripe:!0},{default:a(()=>[e(s,{align:"center",label:"评论编号","min-width":"80",prop:"id"}),e(s,{align:"center",label:"商品信息","min-width":"400"},{default:a(t=>[b("div",me,[t.row.skuPicUrl?(m(),f(I,{key:0,class:"h-40px w-40px shrink-0","preview-src-list":[t.row.skuPicUrl],"preview-teleported":"",src:t.row.skuPicUrl},null,8,["preview-src-list","src"])):le("",!0),b("div",null,y(t.row.spuName),1),(m(!0),N(h,null,z(t.row.skuProperties,p=>(m(),f(K,{key:p.propertyId,class:"mr-10px"},{default:a(()=>[_(y(p.propertyName)+": "+y(p.valueName),1)]),_:2},1024))),128))])]),_:1}),e(s,{align:"center",label:"用户名称",prop:"userNickname",width:"100"}),e(s,{align:"center",label:"商品评分",prop:"descriptionScores",width:"90"}),e(s,{align:"center",label:"服务评分",prop:"benefitScores",width:"90"}),e(s,{align:"center",label:"评论内容","min-width":"210",prop:"content"},{default:a(t=>[b("p",null,y(t.row.content),1),b("div",ue,[(m(!0),N(h,null,z(t.row.picUrls,(p,T)=>(m(),f(I,{key:T,class:"h-40px w-40px","initial-index":T,"preview-src-list":t.row.picUrls,"preview-teleported":"",src:p},null,8,["initial-index","preview-src-list","src"]))),128))])]),_:1}),e(s,{align:"center",label:"回复内容","min-width":"250",prop:"replyContent","show-overflow-tooltip":""}),e(s,{align:"center",formatter:o(te),label:"评论时间",prop:"createTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",label:"是否展示",width:"80px"},{default:a(t=>[v(e(W,{modelValue:t.row.visible,"onUpdate:modelValue":p=>t.row.visible=p,"active-value":!0,"inactive-value":!1,onChange:p=>j(t.row)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[V,["product:comment:update"]]])]),_:1}),e(s,{align:"center",fixed:"right",label:"操作","min-width":"60px"},{default:a(t=>[v((m(),f(g,{link:"",type:"primary",onClick:p=>L(t.row.id)},{default:a(()=>l[11]||(l[11]=[_("回复")])),_:2},1032,["onClick"])),[[V,["product:comment:update"]]])]),_:1})]),_:1},8,["data"])),[[J,o(w)]]),e(G,{limit:o(n).pageSize,"onUpdate:limit":l[6]||(l[6]=t=>o(n).pageSize=t),page:o(n).pageNo,"onUpdate:page":l[7]||(l[7]=t=>o(n).pageNo=t),total:o(C),onPagination:u},null,8,["limit","page","total"])]),_:1}),e(re,{ref_key:"formRef",ref:F,onSuccess:u},null,512),e(ie,{ref_key:"replyFormRef",ref:$,onSuccess:u},null,512)],64)}}});export{Se as default};
