/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-08 15:23:48 
 */
import{d as L,r,f as A,g as C,c as Y,o as p,F as G,j as l,_ as H,a as e,y as Q,m as t,v as i,t as o,k,l as I,i as V,N as J,z as K}from"./index-C8VsLzxx.js";import{_ as W}from"./DictTag.vue_vue_type_script_lang-lHf-rDoT.js";import{D as X}from"./dict-_inVRzR5.js";import{b as Z,u as R,s as ee}from"./index-DT-VAI8O.js";const te={class:"dialog-footer"},ue=L({__name:"DetailForm",emits:["success"],setup(ae,{expose:M,emit:h}){const{t:z}=J(),_=K(),m=r(),c=r(!1),w=r(""),u=r(!1),U=r(""),a=r({id:void 0,sourceCode:void 0,oqcCode:void 0,oqcName:void 0,templateId:void 0,clientId:void 0,clientCode:void 0,clientName:void 0,batchCode:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityMinCheck:void 0,quantityMaxUnqualified:void 0,quantityOut:void 0,quantityCheck:void 0,quantityUnqualified:void 0,quantityQuanlified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,checkResult:void 0,outDate:void 0,inspectDate:void 0,inspector:void 0,status:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0});A({oqcCode:[{required:!0,message:"出货检验单编号不能为空",trigger:"change"}],templateId:[{required:!0,message:"检验模板ID不能为空",trigger:"change"}],clientId:[{required:!0,message:"客户ID不能为空",trigger:"change"}],clientCode:[{required:!0,message:"客户编码不能为空",trigger:"change"}],clientName:[{required:!0,message:"客户名称不能为空",trigger:"change"}],itemId:[{required:!0,message:"产品物料ID不能为空",trigger:"change"}],quantityOut:[{required:!0,message:"发货数量不能为空",trigger:"change"}],quantityCheck:[{required:!0,message:"本次检测数量不能为空",trigger:"change"}]});const x=r(),b=r(!0),D=r(!0),N=r(!0);M({open:async(d,s,n)=>{if(n){c.value=!0,w.value=z("action."+d),U.value=d,O(),u.value=!0;try{a.value=await Z(n)}finally{u.value=!1}b.value=!1,D.value=!1,N.value=!1,a.value.status=="0"?D.value=!0:a.value.status=="1"?b.value=!0:a.value.status=="2"&&(N.value=!0)}else{_.error("请选择一个出货检验");return}}});const O=()=>{a.value={id:void 0,sourceCode:void 0,oqcCode:void 0,oqcName:void 0,templateId:void 0,clientId:void 0,clientCode:void 0,clientName:void 0,batchCode:void 0,itemId:void 0,itemCode:void 0,itemName:void 0,specification:void 0,unitOfMeasure:void 0,quantityMinCheck:void 0,quantityMaxUnqualified:void 0,quantityOut:void 0,quantityCheck:void 0,quantityUnqualified:void 0,quantityQuanlified:void 0,crRate:void 0,majRate:void 0,minRate:void 0,crQuantity:void 0,majQuantity:void 0,minQuantity:void 0,checkResult:void 0,outDate:void 0,inspectDate:void 0,inspector:void 0,status:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0},x.value?.resetFields()},q=h,j=async()=>{a.value.status="2",u.value=!0;try{const d=a.value;await R(d),_.success(z("common.bringtrialSuccess")),c.value=!1,q("success")}finally{u.value=!1}},B=async()=>{a.value.status="3",u.value=!0;try{const d=a.value;await R(d),_.success("驳回成功"),q("success")}finally{c.value=!1,u.value=!1,v.value=!1}},T=async()=>{a.value.status="0",u.value=!0;try{const d=a.value;await R(d),_.success("反审核成功"),q("success")}finally{c.value=!1,u.value=!1,v.value=!1}},v=r(!1),S=()=>{v.value=!0},E=async()=>{a.value.status="1",u.value=!0;try{const d=a.value;await ee(d),_.success("提交审核成功"),q("success")}finally{c.value=!1,u.value=!1,v.value=!1}};return(d,s)=>{const n=C("el-descriptions-item"),g=C("el-descriptions"),F=W,f=C("el-button"),$=H,P=C("el-dialog");return p(),Y(G,null,[l($,{title:e(w),modelValue:e(c),"onUpdate:modelValue":s[1]||(s[1]=y=>Q(c)?c.value=y:null),width:"80%"},{footer:t(()=>[e(D)?(p(),k(f,{key:0,onClick:S,type:"success",disabled:e(u)},{default:t(()=>s[5]||(s[5]=[i("提交审核")])),_:1},8,["disabled"])):I("",!0),e(N)?(p(),k(f,{key:1,onClick:T,type:"danger",disabled:e(u)},{default:t(()=>s[6]||(s[6]=[i("反审核")])),_:1},8,["disabled"])):I("",!0),e(b)?(p(),k(f,{key:2,onClick:j,type:"success",disabled:e(u)},{default:t(()=>s[7]||(s[7]=[i("审核")])),_:1},8,["disabled"])):I("",!0),e(b)?(p(),k(f,{key:3,onClick:B,type:"danger",disabled:e(u)},{default:t(()=>s[8]||(s[8]=[i("驳回")])),_:1},8,["disabled"])):I("",!0),l(f,{onClick:s[0]||(s[0]=y=>c.value=!1)},{default:t(()=>s[9]||(s[9]=[i("取 消")])),_:1})]),default:t(()=>[l(g,{title:"检验单信息",column:2,size:e(m),border:""},{default:t(()=>[l(n,{label:"出货检验单编号",align:"center"},{default:t(()=>[i(o(e(a).oqcCode),1)]),_:1}),l(n,{label:"出货检验单名称",align:"center"},{default:t(()=>[i(o(e(a).oqcName),1)]),_:1})]),_:1},8,["size"]),l(g,{title:"供应商信息",column:2,size:e(m),border:"",align:"center"},{default:t(()=>[l(n,{label:"供应商编码",align:"center"},{default:t(()=>[i(o(e(a).vendorCode),1)]),_:1}),l(n,{label:"供应商批次号",align:"center"},{default:t(()=>[i(o(e(a).vendorBatch),1)]),_:1}),l(n,{label:"供应商名称",align:"center"},{default:t(()=>[i(o(e(a).vendorName),1)]),_:1}),l(n,{label:"供应商简称",align:"center"},{default:t(()=>[i(o(e(a).vendorNick),1)]),_:1})]),_:1},8,["size"]),l(g,{title:"产品物料信息",column:2,size:e(m),border:"",align:"center"},{default:t(()=>[l(n,{label:"产品物料ID",align:"center"},{default:t(()=>[i(o(e(a).itemId),1)]),_:1}),l(n,{label:"产品物料编码",align:"center"},{default:t(()=>[i(o(e(a).itemCode),1)]),_:1}),l(n,{label:"产品物料名称",align:"center"},{default:t(()=>[i(o(e(a).itemName),1)]),_:1}),l(n,{label:"规格型号",align:"center"},{default:t(()=>[i(o(e(a).specification),1)]),_:1}),l(n,{label:"单位",align:"center"},{default:t(()=>[i(o(e(a).unitOfMeasure),1)]),_:1})]),_:1},8,["size"]),l(g,{title:"检测信息",column:2,size:e(m),border:""},{default:t(()=>[l(n,{label:"检验模板ID",align:"center"},{default:t(()=>[i(o(e(a).templateId),1)]),_:1}),l(n,{label:"发货数量",align:"center"},{default:t(()=>[i(o(e(a).quantityOut),1)]),_:1}),l(n,{label:"最低检测数",align:"center"},{default:t(()=>[i(o(e(a).quantityMinCheck),1)]),_:1}),l(n,{label:"最大不合格数",align:"center"},{default:t(()=>[i(o(e(a).quantityMaxUnqualified),1)]),_:1}),l(n,{label:"不合格数",align:"center"},{default:t(()=>[i(o(e(a).quantityUnqualified),1)]),_:1}),l(n,{label:"合格数量",align:"center"},{default:t(()=>[i(o(e(a).quantityQuanlified),1)]),_:1}),l(n,{label:"本次检测数量",align:"center"},{default:t(()=>[i(o(e(a).quantityCheck),1)]),_:1})]),_:1},8,["size"]),l(g,{title:"",column:2,size:e(m),border:""},{default:t(()=>[l(n,{label:"致命缺陷数量",align:"center"},{default:t(()=>[i(o(e(a).crQuantity),1)]),_:1}),l(n,{label:"致命缺陷率",align:"center"},{default:t(()=>[i(o(e(a).crRate),1)]),_:1}),l(n,{label:"严重缺陷数量",align:"center"},{default:t(()=>[i(o(e(a).majQuantity),1)]),_:1}),l(n,{label:"严重缺陷率",align:"center"},{default:t(()=>[i(o(e(a).majRate),1)]),_:1}),l(n,{label:"轻微缺陷数量",align:"center"},{default:t(()=>[i(o(e(a).minQuantity),1)]),_:1}),l(n,{label:"轻微缺陷率",align:"center"},{default:t(()=>[i(o(e(a).minRate),1)]),_:1})]),_:1},8,["size"]),l(g,{title:"结果",column:2,size:e(m),border:""},{default:t(()=>[l(n,{label:"检测结果",align:"center"},{default:t(()=>[i(o(e(a).checkResult),1)]),_:1}),l(n,{label:"检测人员",align:"center"},{default:t(()=>[i(o(e(a).inspector),1)]),_:1}),l(n,{label:"检测日期",align:"center"},{default:t(()=>[i(o(e(a).inspectDate),1)]),_:1}),l(n,{label:"出货日期",align:"center"},{default:t(()=>[i(o(e(a).outDate),1)]),_:1}),l(n,{label:"备注",align:"center"},{default:t(()=>[i(o(e(a).remark),1)]),_:1}),l(n,{label:"单据状态",align:"center"},{default:t(()=>[l(F,{type:e(X).BPM_PROCESS_INSTANCE_RESULT,value:e(a).status},null,8,["type","value"])]),_:1})]),_:1},8,["size"])]),_:1},8,["title","modelValue"]),l(P,{modelValue:e(v),"onUpdate:modelValue":s[4]||(s[4]=y=>Q(v)?v.value=y:null),title:"系统提示",width:"30%",center:""},{footer:t(()=>[V("span",te,[l(f,{onClick:s[2]||(s[2]=y=>v.value=!1)},{default:t(()=>s[10]||(s[10]=[i("取消")])),_:1}),l(f,{type:"primary",onClick:s[3]||(s[3]=y=>E())},{default:t(()=>s[11]||(s[11]=[i(" 确认 ")])),_:1})])]),default:t(()=>[s[12]||(s[12]=V("span",null," 确认提交审核？ ",-1))]),_:1},8,["modelValue"])],64)}}});export{ue as _};
