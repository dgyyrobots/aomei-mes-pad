/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:05:55 
 */
import{d as z,r as d,f as O,g as u,h as X,k as c,o as m,m as t,w as G,a,j as l,l as S,c as C,F as D,n as L,v as F,y as H,_ as J,N as K,z as Q}from"./index-D3S9e4gi.js";import{g as W}from"./index-CEkM7vEH.js";import{g as Z}from"./index-D9kFkO1d.js";import{b as h,c as ee,u as le}from"./index-Dg5E73Z_.js";import{C as T}from"./constants-BPQb3nxh.js";import{c as ae,D as te}from"./dict-D5UmY5m8.js";import{d as oe,h as se}from"./tree-vSlcEeQq.js";const _e=z({name:"SystemUserForm",__name:"UserForm",emits:["success"],setup(re,{expose:N,emit:B}){const{t:V}=K(),b=Q(),i=d(!1),k=d(""),p=d(!1),w=d(""),s=d({nickname:"",deptId:"",mobile:"",email:"",id:void 0,username:"",password:"",sex:void 0,postIds:[],remark:"",status:T.ENABLE,roleIds:[]}),R=O({username:[{required:!0,message:"用户名称不能为空",trigger:"blur"}],nickname:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],mobile:[{pattern:/^(?:(?:\+|00)86)?1(?:3[\d]|4[5-79]|5[0-35-9]|6[5-7]|7[0-8]|8[\d]|9[189])\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}),v=d(),y=d([]),U=d([]);N({open:async(g,e)=>{if(i.value=!0,k.value=V(`action.${g}`),w.value=g,P(),e){p.value=!0;try{s.value=await h(e)}finally{p.value=!1}}y.value=se(await W()),U.value=await Z()}});const $=B,q=async()=>{if(!(!v||!await v.value.validate())){p.value=!0;try{const e=s.value;w.value==="create"?(await ee(e),b.success(V("common.createSuccess"))):(await le(e),b.success(V("common.updateSuccess"))),i.value=!1,$("success")}finally{p.value=!1}}},P=()=>{s.value={nickname:"",deptId:"",mobile:"",email:"",id:void 0,username:"",password:"",sex:void 0,postIds:[],remark:"",status:T.ENABLE,roleIds:[]},v.value?.resetFields()};return(g,e)=>{const f=u("el-input"),r=u("el-form-item"),n=u("el-col"),A=u("el-tree-select"),_=u("el-row"),I=u("el-option"),x=u("el-select"),M=u("el-form"),E=u("el-button"),Y=J,j=X("loading");return m(),c(Y,{modelValue:a(i),"onUpdate:modelValue":e[10]||(e[10]=o=>H(i)?i.value=o:null),title:a(k)},{footer:t(()=>[l(E,{disabled:a(p),type:"primary",onClick:q},{default:t(()=>e[11]||(e[11]=[F("确 定")])),_:1},8,["disabled"]),l(E,{onClick:e[9]||(e[9]=o=>i.value=!1)},{default:t(()=>e[12]||(e[12]=[F("取 消")])),_:1})]),default:t(()=>[G((m(),c(M,{ref_key:"formRef",ref:v,"label-width":"80px",model:a(s),rules:a(R)},{default:t(()=>[l(_,null,{default:t(()=>[l(n,{span:12},{default:t(()=>[l(r,{label:"用户昵称",prop:"nickname"},{default:t(()=>[l(f,{modelValue:a(s).nickname,"onUpdate:modelValue":e[0]||(e[0]=o=>a(s).nickname=o),placeholder:"请输入用户昵称"},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:t(()=>[l(r,{label:"归属部门",prop:"deptId"},{default:t(()=>[l(A,{modelValue:a(s).deptId,"onUpdate:modelValue":e[1]||(e[1]=o=>a(s).deptId=o),"check-strictly":"",data:a(y),"node-key":"id",placeholder:"请选择归属部门",props:a(oe)},null,8,["modelValue","data","props"])]),_:1})]),_:1})]),_:1}),l(_,null,{default:t(()=>[l(n,{span:12},{default:t(()=>[l(r,{label:"手机号码",prop:"mobile"},{default:t(()=>[l(f,{modelValue:a(s).mobile,"onUpdate:modelValue":e[2]||(e[2]=o=>a(s).mobile=o),maxlength:"11",placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:t(()=>[l(r,{label:"邮箱",prop:"email"},{default:t(()=>[l(f,{modelValue:a(s).email,"onUpdate:modelValue":e[3]||(e[3]=o=>a(s).email=o),maxlength:"50",placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(_,null,{default:t(()=>[l(n,{span:12},{default:t(()=>[a(s).id===void 0?(m(),c(r,{key:0,label:"用户名称",prop:"username"},{default:t(()=>[l(f,{modelValue:a(s).username,"onUpdate:modelValue":e[4]||(e[4]=o=>a(s).username=o),placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1})):S("",!0)]),_:1}),l(n,{span:12},{default:t(()=>[a(s).id===void 0?(m(),c(r,{key:0,label:"用户密码",prop:"password"},{default:t(()=>[l(f,{modelValue:a(s).password,"onUpdate:modelValue":e[5]||(e[5]=o=>a(s).password=o),placeholder:"请输入用户密码","show-password":"",type:"password"},null,8,["modelValue"])]),_:1})):S("",!0)]),_:1})]),_:1}),l(_,null,{default:t(()=>[l(n,{span:12},{default:t(()=>[l(r,{label:"用户性别"},{default:t(()=>[l(x,{modelValue:a(s).sex,"onUpdate:modelValue":e[6]||(e[6]=o=>a(s).sex=o),placeholder:"请选择"},{default:t(()=>[(m(!0),C(D,null,L(a(ae)(a(te).SYSTEM_USER_SEX),o=>(m(),c(I,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:t(()=>[l(r,{label:"岗位"},{default:t(()=>[l(x,{modelValue:a(s).postIds,"onUpdate:modelValue":e[7]||(e[7]=o=>a(s).postIds=o),multiple:"",placeholder:"请选择"},{default:t(()=>[(m(!0),C(D,null,L(a(U),o=>(m(),c(I,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(_,null,{default:t(()=>[l(n,{span:24},{default:t(()=>[l(r,{label:"备注"},{default:t(()=>[l(f,{modelValue:a(s).remark,"onUpdate:modelValue":e[8]||(e[8]=o=>a(s).remark=o),placeholder:"请输入内容",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[j,a(p)]])]),_:1},8,["modelValue","title"])}}});export{_e as _};
