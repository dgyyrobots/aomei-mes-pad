/*!  build: Vue Shop Vite 
     copyright: https://vue-admin-beautiful.com/shop-vite  
     time: 2025-04-10 15:52:22 
 */
import{d as j,r as u,f as z,g as s,h as X,k as _,o as i,m as d,w as G,a as l,j as t,c as w,F as S,n as T,v as V,t as D,y as H,_ as J,N as K,z as Q}from"./index-DMg0mq0e.js";import{_ as W}from"./UploadImg-CavEizuR.js";import{c as C,D as F}from"./dict-BEquckDR.js";import{g as Z,u as h}from"./index-C0YluFWQ.js";import{g as ee}from"./index-RTKDw1jP.js";import{d as le}from"./tree-vSlcEeQq.js";import{_ as ae}from"./MemberTagSelect.vue_vue_type_script_setup_true_lang-CrTrZe8q.js";import{_ as oe}from"./MemberGroupSelect.vue_vue_type_script_setup_true_lang-CPAKaym1.js";const ve=j({__name:"UserForm",emits:["success"],setup(te,{expose:E,emit:R}){const{t:b}=K(),g=Q(),n=u(!1),c=u(""),m=u(!1),k=u(""),o=u({id:void 0,mobile:void 0,password:void 0,status:void 0,nickname:void 0,avatar:void 0,name:void 0,sex:void 0,areaId:void 0,birthday:void 0,mark:void 0,tagIds:[],groupId:void 0}),$=z({mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]}),p=u(),y=u([]);E({open:async(f,e)=>{if(n.value=!0,c.value=b(`action.${f}`),k.value=f,B(),e){m.value=!0;try{o.value=await Z(e)}finally{m.value=!1}}y.value=await ee()}});const M=R,N=async()=>{if(!(!p||!await p.value.validate())){m.value=!0;try{const e=o.value;k.value==="create"?g.success(b("common.createSuccess")):(await h(e),g.success(b("common.updateSuccess"))),n.value=!1,M("success")}finally{m.value=!1}}},B=()=>{o.value={id:void 0,mobile:void 0,password:void 0,status:void 0,nickname:void 0,avatar:void 0,name:void 0,sex:void 0,areaId:void 0,birthday:void 0,mark:void 0,tagIds:[],groupId:void 0},p.value?.resetFields()};return(f,e)=>{const v=s("el-input"),r=s("el-form-item"),I=s("el-radio"),U=s("el-radio-group"),L=W,O=s("el-date-picker"),q=s("el-tree-select"),A=s("el-form"),x=s("el-button"),P=J,Y=X("loading");return i(),_(P,{modelValue:l(n),"onUpdate:modelValue":e[12]||(e[12]=a=>H(n)?n.value=a:null),title:l(c)},{footer:d(()=>[t(x,{disabled:l(m),type:"primary",onClick:N},{default:d(()=>e[13]||(e[13]=[V("确 定")])),_:1},8,["disabled"]),t(x,{onClick:e[11]||(e[11]=a=>n.value=!1)},{default:d(()=>e[14]||(e[14]=[V("取 消")])),_:1})]),default:d(()=>[G((i(),_(A,{ref_key:"formRef",ref:p,"label-width":"100px",model:l(o),rules:l($)},{default:d(()=>[t(r,{label:"手机号",prop:"mobile"},{default:d(()=>[t(v,{modelValue:l(o).mobile,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).mobile=a),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),t(r,{label:"状态",prop:"status"},{default:d(()=>[t(U,{modelValue:l(o).status,"onUpdate:modelValue":e[1]||(e[1]=a=>l(o).status=a)},{default:d(()=>[(i(!0),w(S,null,T(l(C)(l(F).COMMON_STATUS),a=>(i(),_(I,{key:a.value,label:a.value},{default:d(()=>[V(D(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"用户昵称",prop:"nickname"},{default:d(()=>[t(v,{modelValue:l(o).nickname,"onUpdate:modelValue":e[2]||(e[2]=a=>l(o).nickname=a),placeholder:"请输入用户昵称"},null,8,["modelValue"])]),_:1}),t(r,{label:"头像",prop:"avatar"},{default:d(()=>[t(L,{modelValue:l(o).avatar,"onUpdate:modelValue":e[3]||(e[3]=a=>l(o).avatar=a),"is-show-tip":!1,limit:1},null,8,["modelValue"])]),_:1}),t(r,{label:"真实名字",prop:"name"},{default:d(()=>[t(v,{modelValue:l(o).name,"onUpdate:modelValue":e[4]||(e[4]=a=>l(o).name=a),placeholder:"请输入真实名字"},null,8,["modelValue"])]),_:1}),t(r,{label:"用户性别",prop:"sex"},{default:d(()=>[t(U,{modelValue:l(o).sex,"onUpdate:modelValue":e[5]||(e[5]=a=>l(o).sex=a)},{default:d(()=>[(i(!0),w(S,null,T(l(C)(l(F).SYSTEM_USER_SEX),a=>(i(),_(I,{key:a.value,label:a.value},{default:d(()=>[V(D(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"出生日期",prop:"birthday"},{default:d(()=>[t(O,{modelValue:l(o).birthday,"onUpdate:modelValue":e[6]||(e[6]=a=>l(o).birthday=a),placeholder:"选择出生日期",type:"date","value-format":"x"},null,8,["modelValue"])]),_:1}),t(r,{label:"所在地",prop:"areaId"},{default:d(()=>[t(q,{modelValue:l(o).areaId,"onUpdate:modelValue":e[7]||(e[7]=a=>l(o).areaId=a),data:l(y),props:l(le),"render-after-expand":!0},null,8,["modelValue","data","props"])]),_:1}),t(r,{label:"用户标签",prop:"tagIds"},{default:d(()=>[t(ae,{modelValue:l(o).tagIds,"onUpdate:modelValue":e[8]||(e[8]=a=>l(o).tagIds=a),"show-add":""},null,8,["modelValue"])]),_:1}),t(r,{label:"用户分组",prop:"groupId"},{default:d(()=>[t(oe,{modelValue:l(o).groupId,"onUpdate:modelValue":e[9]||(e[9]=a=>l(o).groupId=a)},null,8,["modelValue"])]),_:1}),t(r,{label:"会员备注",prop:"mark"},{default:d(()=>[t(v,{modelValue:l(o).mark,"onUpdate:modelValue":e[10]||(e[10]=a=>l(o).mark=a),placeholder:"请输入会员备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[Y,l(m)]])]),_:1},8,["modelValue","title"])}}});export{ve as _};
